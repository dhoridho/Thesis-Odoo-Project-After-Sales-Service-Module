<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="hr_master_data_employee_inherit" model="ir.ui.view">
        <field name="name">hr.hr.employee.view.form2</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//button[@name='%(hr.plan_wizard_action)d']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='bank_account_id']" position="replace">
                    <field name="bank_account_id" context="{'display_partner':True}"
                           attrs="{'invisible' : [('address_home_id', '=', False)]}"/>
                </xpath>
                <xpath expr="//group[@name='managers']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='job_id']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='department_id']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='company_id']" position="attributes">
                    <attribute name="readonly">1</attribute>
                    <attribute name="force_save">1</attribute>
                </xpath>
                <xpath expr="//field[@name='company_id']" position="after">
                    <field name="branch_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
                </xpath>

                <!-- <xpath expr="//page[@name='hr_settings']" position="attributes">
                    <attribute name="groups">equip3_hr_employee_access_right_setting.group_hr_manager</attribute>
                </xpath> -->

                <xpath expr="//field[@name='resource_calendar_id']" position="replace">
                    <field name="calendar_mismatch" invisible="1"/>
                    <label for="resource_calendar_id"/>
                    <div>
                        <field name="resource_calendar_id" required="1" nolabel="1" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
                        <span attrs="{'invisible': [('calendar_mismatch', '=', False)]}"
                              class="fa fa-exclamation-triangle text-danger o_calendar_warning pl-3">
                        </span>
                        <span class="o_calendar_warning_tooltip text-danger">
                            Calendar Mismatch : The employee's calendar does not match its current contract calendar.
                            This could lead to unexpected behaviors.
                        </span>
                    </div>
                </xpath>
                <xpath expr="//page[last()]" position="after">
                    <page string="Contracts History" name="contracts_history">
                        <group col="4" colspan="4">
                            <separator string="Contracts" colspan="4"/>
                            <field name="contract_line_ids" nolabel="1" force_save="1" create="0" edit="0" delete="0" readonly="1">
                                <tree string="Contracts Line" >
                                    <field name="sequence"/>
                                    <field name="contract_id"/>
                                    <field name="company_id" invisible="1"/>
                                    <field name="currency_id" invisible="1"/>
                                    <field name="job_id"/>
                                    <field name="department_id"/>
                                    <field name="work_location_id"/>
                                    <field name="parent_id"/>
                                    <field name="date_start"/>
                                    <field name="date_end"/>
                                    <field name="wage"/>
                                    <field name="state"/>
                                </tree>
                            </field>
                        </group>
                    </page>
                </xpath>
                <xpath expr="//field[@name='address_home_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </data>
        </field>
    </record>

    <record id="hr_employee_view_form_inherit_org_chart_inherit" model="ir.ui.view">
        <field name="name">hr.employee.view.form.inherit.org_chart.inherit</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr_org_chart.hr_employee_view_form_inherit_org_chart"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@id='o_employee_right']" position="replace">
                  <div id="o_employee_right">
                    <h4 class="o_org_chart_title mb16 mt0">Organization Chart</h4>
                    <field name="child_ids" widget="hr_org_chart"/>
                    <field name="restrict_org_chart_link" readonly="0" style="display: none;"/>
                </div>
            </xpath>
        </field>
    </record>

    <record id="loan_employee_extd_form_inherit" model="ir.ui.view">
        <field name="name">loan.employee.extd.form.inherit</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr_employee_loan.loan_employee_extd_form"/>
        <field name="arch" type="xml">  
            <xpath expr="//field[@name='loan_ids']/tree" position="attributes">
                <attribute name="limit">20</attribute>
            </xpath>
        </field>
    </record>

    <record id="inherit_form_hr_employee_view_form2" model="ir.ui.view">
        <field name="name">inherit.form.hr.employee.view.form2</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='mobile_phone']" position="before">
                <field name="sequence_code" placeholder="Employee ID"
                       attrs="{'readonly': [('emp_seq', '=', True)], 'required': [('emp_seq', '!=', True)]}"/>
                <field name="emp_seq" invisible="1"/>
            </xpath>
            <xpath expr="/form/sheet/notebook/page[@name='hr_settings']/group/group/field[@name='job_id']"
                   position="replace">
                <field name="job_id" invisible="1" required="1" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
            </xpath>
            <xpath expr="//field[@name='mobile_phone']" position="replace">
                <label for="mobile_phone" string="Work Mobile" required="1"/>
                <div class="o_row">
                    <span style="max-width:30% !important; width:30% !important;">
                        <field name="country_mobile_code"
                               context="{'show_code': 1, 'tree_view_ref': 'equip3_hr_masterdata_employee.view_country_custom_tree', 'mobile_phone':mobile_phone}"
                               options="{'always_reload': True, 'no_open': True, 'no_quick_create':True,'no_create_edit':True, 'no_create': True}" required="1"/>
                    </span>
                    <span style="max-width:100% !important; width:67% !important;">
                        <field name="mobile_phone" widget="phone" required="1"/>
                    </span>
                </div>
            </xpath>
            <xpath expr="//field[@name='work_phone']" position="replace">
                <label for="work_phone" string="Work Phone"/>
                <div class="o_row">
                    <span style="max-width:30% !important; width:30% !important;">
                        <field name="country_phone_code"
                               context="{'show_code': 1, 'tree_view_ref': 'equip3_hr_masterdata_employee.view_country_custom_tree', 'work_phone':work_phone}"
                               options="{'always_reload': True, 'no_open': True, 'no_quick_create':True,'no_create_edit':True, 'no_create': True}"/>
                    </span>
                    <span style="max-width:100% !important; width:67% !important;">
                        <field name="work_phone" widget="phone"/>
                    </span>
                </div>
            </xpath>
            <xpath expr="//field[@name='work_email']" position="replace">
                <field name="work_email" widget="email" required="1"/>
            </xpath>
            <xpath expr="//field[@name='department_id']" position="replace">
                <field name="department_id" required="0" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}" />
            </xpath>
            <xpath expr="/form/sheet/notebook/page[@name='personal_information']/group/group[3]" position="replace">
                <group string="Marital Status" invisible="1">
                    <field name="marital"/>
                    <field name="spouse_complete_name"
                           attrs="{'invisible': [('marital', 'not in', ['married', 'cohabitant'])]}"
                           groups="hr.group_hr_user"/>
                    <field name="spouse_birthdate"
                           attrs="{'invisible': [('marital', 'not in', ['married', 'cohabitant'])]}"
                           groups="hr.group_hr_user"/>
                </group>
            </xpath>
            <xpath expr="/form/sheet/notebook/page[@name='personal_information']/group/group[5]" position="replace">
                <group string="Emergency" invisible="1">
                    <field name="emergency_contact"/>
                    <field name="emergency_phone" class="o_force_ltr"/>
                </group>
            </xpath>
            <xpath expr="/form/sheet/notebook/page[@name='personal_information']/group/group[7]" position="replace">
                <group string="Education" invisible="1">
                    <field name="certificate"/>
                    <field name="study_field"/>
                    <field name="study_school"/>
                </group>
            </xpath>
            <xpath expr="//field[@name='work_location']" position="replace">
                <field name="work_location" invisible="1"/>
                <field name="location_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
                <field name="province_wage_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
            </xpath>
            <xpath expr="/form/sheet/notebook/page[@name='public']/div/div/group" position="before">
                <group string="Job">
                    <field name="job_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
                    <label for="years_of_service" string="Years of Service"/>
                    <div>
                        <field name="years_of_service" readonly="1"/>
                        <field name="year" readonly='1'/>
                        <field name="months" readonly="1"/>
                        <field name="month" readonly='1'/>
                        <field name="days" readonly="1"/>
                        <field name="day" readonly='1'/>
                    </div>
                    <field name="classification_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
                    <field name="experience_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
                    <field name="grade_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
                </group>
            </xpath>
            <xpath expr="//field[@name='gender']" position="replace">
                <field name="indentity_address"/>
            </xpath>
            <xpath expr="/form/sheet/notebook/page[@name='personal_information']/group/group[1]" position="replace">
                <group string="Private Contact &amp; Status">
                    <field name="address_home_id"
                            
                           context="{
                                                'show_address': 1,
                                                'default_type': 'private',
                                                'form_view_ref': 'base.res_partner_view_form_private'}"                     
                           options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True,'always_reload':True,'highlight_first_line':True}"
                           invisible="1"/>
                    <field name="private_email" string="Email"/>
                    <field name="phone" class="o_force_ltr" groups="hr.group_hr_user" string="Phone" readonly="True"/>
                    <field name="bank_account_id" context="{'default_partner_id': address_home_id}"/>
                    <label for="km_home_work"/>
                    <div class="o_row" name="div_km_home_work">
                        <field name="km_home_work" groups="hr.group_hr_user"/>
                        <span>Km</span>
                    </div>
                    <field name="religion_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
                    <field name="race_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
                    <field name="gender"/>
                    <field name="marital"/>
                    <field name="spouse_complete_name"
                           attrs="{'invisible': [('marital', 'not in', ['married', 'cohabitant'])]}"
                           groups="hr.group_hr_user"/>
                    <field name="spouse_birthdate"
                           attrs="{'invisible': [('marital', 'not in', ['married', 'cohabitant'])]}"
                           groups="hr.group_hr_user"/>
                </group>
            </xpath>
            <xpath expr="//page[@name='hr_settings']" position="inside">
                <group>
                    <group string="Payroll" name="payroll">
                        <field name="payslip_password" password="True"/>
                        <field name="analytic_group_id" widget="many2many_tags" options="{'no_create': True}"/>
                    </group>
                </group>
            </xpath>
            <xpath expr="//field[@name='private_email']" position="attributes">
                <attribute name="readonly">False</attribute>
            </xpath>
            <xpath expr="//field[@name='phone']" position="attributes">
                <attribute name="readonly">False</attribute>
            </xpath>
            <xpath expr="/form/sheet/notebook/page[@name='personal_information']/group/group[2]" position="replace">
                <group string="Citizenship">
                    <field name="country_id" options='{"no_open": True, "no_create": True}'/>
                    <field name="state_id" domain="[('country_id','=',country_id)]" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"/>
                    <field name="identification_id" groups="hr.group_hr_user" required="1"/>
                    <field name="identity_address" groups="hr.group_hr_user" invisible="1"/>
                    <field name="passport_id" groups="hr.group_hr_user"/>
                    <field name="birthday"/>
                    <field name="place_of_birth"/>
                    <field name="country_of_birth" groups="hr.group_hr_user" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}"/>
                    <label for="birth_years" string="Age"/>
                    <div>
                        <field name="birth_years" readonly="1"/>
                        <field name="birth_year" readonly='1'/>
                        <field name="birth_months" readonly="1"/>
                        <field name="birth_month" readonly='1'/>
                        <field name="birth_days" readonly="1"/>
                        <field name="birth_day" readonly='1'/>
                    </div>
                </group>
            </xpath>
            <xpath expr="/form/sheet/notebook/page[@name='personal_information']/group/group[4]" position="replace">
                <group string="Dependant" invisible="1">
                    <field name="children" invisible="1"/>
                </group>
            </xpath>
            <xpath expr="/form/sheet/notebook/page[@name='personal_information']/group/group[5]" position="after">
                <group string="Medical Information">
                    <field name="blood_type"/>
                    <field name="height"/>
                    <field name="weight"/>
                </group>
            </xpath>
            <xpath expr="//field[@name='address_home_id']" position="replace">
                <field name="address_home_id"
                       context="{
                                'show_address': 1,
                                'default_type': 'private',
                                'form_view_ref': 'base.res_partner_view_form_private'}"
                                options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True,'always_reload':True,'highlight_first_line':True}" invisible="1"/>
                <field name="current_address" invisible="1"/>
            </xpath>
            <xpath expr="//page[@name='personal_information']/group" position="after">
                <group string="Addresses">
                    <field name="address_ids">
                        <tree editable="bottom">
                            <field name="sequence" widget="handle"/>
                            <field name="address_type"/>
                            <field name="street"/>
                            <field name="location"/>
                            <field name="country_id"/>
                            <field name="state_id" domain="[('country_id','=',country_id)]"/>
                            <field name="postal_code" />
                            <field name="tel_number" string="Telephone Number" />
                        </tree>
                    </field>
                </group>
                <group string="Emergency">
                    <field name="emergency_ids">
                        <tree editable="bottom">
                            <field name="name"/>
                            <field name="phone"/>
                            <field name="relation_id"/>
                            <field name="address"/>
                        </tree>
                    </field>
                </group>
                <group string="Bank Account Information" name="bank_account_group">
                    <field name="bank_ids">
                        <tree editable="bottom">
                            <field name="employee_id" readonly="1" force_save="1" invisible="1"/>
                            <field name="is_used"/>
                            <field name="name"/>
                            <field name="bic"/>
                            <field name="bank_unit"/>
                            <field name="acc_number"/>
                            <field name="acc_holder"/>
                        </tree>
                    </field>
                </group>
                <group string="Dependence Details">
                    <field name="fam_ids">
                        <tree editable="bottom">
                            <field name="member_name"/>
                            <field name="relation_id"/>
                            <field name="gender"/>
                            <field name="age"/>
                            <field name="education"/>
                            <field name="occupation"/>
                            <field name="city"/>
                        </tree>
                    </field>
                </group>
                <group string="Education Details">
                    <field name="education_ids">
                        <tree editable="bottom">
                            <field name="certificate"/>
                            <field name="study_field"/>
                            <field name="study_school"/>
                            <field name="city"/>
                            <field name="graduation_year"/>
                            <field name="gpa_score"/>
                        </tree>
                    </field>
                </group>
                <group string="Health Record">
                    <field name="health_ids" context="{'health_ids':health_ids}">
                        <tree editable="bottom">
                            <field name="name" readonly="1" force_save="1"/>
                            <field name="illness_type"/>
                            <field name="medical_checkup"/>
                            <field name="date_from"/>
                            <field name="date_to"/>
                            <field name="notes"/>
                        </tree>
                    </field>
                </group>
            </xpath>
<!--            <xpath expr="//div[@id='o_employee_right']" position="replace">-->
<!--                <div id="o_employee_right">-->
<!--                    <h4 class="o_org_chart_title mb16 mt0">Organization Chart</h4>-->
<!--                    <field name="child_ids" widget="hr_org_chart"/>-->
<!--                    <field name="restrict_org_chart_link" readonly="0" style="display: none;"/>-->
<!--                </div>-->
<!--            </xpath>-->
            <xpath expr="//field[@name='job_id']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//field[@name='location_id']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//field[@name='department_id']" position="attributes">
                    <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//field[@name='job_id']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//field[@name='location_id']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//field[@name='department_id']" position="attributes">
                    <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//page[@name='personal_information']" position="attributes">
                <attribute name="groups">equip3_hr_employee_access_right_setting.group_hr_manager,hr.group_hr_manager</attribute>
            </xpath>
        </field>
    </record>
</odoo>
