<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="pos_promotion_form_inherit" model="ir.ui.view">
        <field name="name">pos.promotion.form.inherit</field>
        <field name="model">pos.promotion</field>
        <field name="inherit_id" ref="equip3_pos_masterdata.pos_promotion_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page string="Set Only Members Apply">
                    <field name="special_customer_ids" 
                        colspan="4" 
                        nolabel="1"
                        context="{ 
                            'ctx_membership': True,
                            'default_is_pos_member': True,
                            'tree_view_ref': 'equip3_pos_membership.equip3_pos_membership_member_tree_view',
                            'form_view_ref': 'equip3_pos_membership.equip3_pos_membership_member_form_view' 
                        }"
                        options="{'no_create': True, 'no_edit': True}"
                    	domain="[('is_pos_member','=',True)]">
                        <tree>
                            <field name="display_name" string="Name"/>
                            <field name="special_name" optional="show"/>
                            <field name="phone"/>
                            <field name="mobile"/>
                            <field name="email"/>
                            <field name="pos_loyalty_type"/>
                        </tree>
                    </field>
                </page>
            </xpath>
            <xpath expr="//field[@name='special_days']" position="before">
                <!-- group_promotion_group_member -->
                <field name="pos_loyalty_category"/>
                <field name="pos_loyalty_category_ids" 
                    widget="many2many_tags"
                    options="{'no_create': True, 'no_edit': True}"
                    attrs="{'required': [('pos_loyalty_category','=', True)], 'invisible': [('pos_loyalty_category', '!=', True)]}"/>
                <separator attrs="{'invisible': [('pos_loyalty_category', '!=', True)]}"/>
            </xpath>
        </field>
    </record>
</odoo>