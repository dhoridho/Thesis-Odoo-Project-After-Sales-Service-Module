<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="teacher_attendance_view_form" model="ir.ui.view">
        <field name="name">teacher.attendance.view.form</field>
        <field name="model">teacher.attendance</field>
        <field name="arch" type="xml">
            <form string="Teacher Attendance">
                <sheet>
                    <group>
                        <group>
                            <field name="school_id" options="{'no_create': True, 'no_open': True}"/>
                            <field name="program_id"/>
                            <field name="intake_id"/>
                            <field name="group_class" domain="[('id', 'in', related_group_class_ids)]"/>
                            <field name="related_group_class_ids" invisible="1"/>
                            <field name="related_subject_ids" invisible="1"/>
                            <field name="related_teacher_ids" invisible="1"/>
                        </group>
                        <group>
                            <field name="year_id"/>
                            <field name="term_id"/>
                            <field name="subject_id" domain="[('id', 'in', related_subject_ids)]"/>
                            <field name="teacher_id" domain="[('id', 'in', related_teacher_ids)]"/>
                            <field name="total_presence"/>
                            <field name="total_hours"/>
                            <field name="branch_id" invisible="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Class Recap">
                            <field name="daily_attendance_ids">
                                <tree delete="false">
                                    <field name="date"/>
                                    <field name="name"/>
                                    <field name="hours"/>
                                    <field name="total_present"/>
                                    <field name="total_absent"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="teacher_attendance_tree" model="ir.ui.view">
        <field name="name">teacher.attendance.tree</field>
        <field name="model">teacher.attendance</field>
        <field name="arch" type="xml">
            <tree string="Teacher Attendance">
                <field name="teacher_id"/>
                <field name="school_id"/>
                <field name="subject_id"/>
                <field name="total_presence"/>
            </tree>
        </field>
    </record>

    <record id="teacher_attendance_search" model="ir.ui.view">
        <field name="name">teacher.attendance.search</field>
        <field name="model">teacher.attendance</field>
        <field name="arch" type="xml">
            <search string="Teacher Attendance">
                <filter name="groupby_teacher" string="Teacher" context="{'group_by': 'teacher_id'}"/>
                <filter name="groupby_year" string="Year" context="{'group_by': 'year_id'}"/>
                <filter name="groupby_term" string="Term" context="{'group_by': 'term_id'}"/>
                <filter name="groupby_subject" string="Subject" context="{'group_by': 'subject_id'}"/>
            </search>
        </field>
    </record>

    <record id="action_teacher_attendance" model="ir.actions.act_window">
        <field name="name">Teacher Attendance</field>
        <field name="res_model">teacher.attendance</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_groupby_teacher': 1, 'search_default_groupby_year': 1, 'search_default_groupby_term':1, 'search_default_groupby_subject': 1}</field>
    </record>

    <menuitem id="menu_teacher_attendance" name="Teacher Attendance" parent="school_attendance.menu_attendance"
              action="action_teacher_attendance" groups="school.group_school_administration,school.group_school_teacher" sequence="55"/>

</odoo>
