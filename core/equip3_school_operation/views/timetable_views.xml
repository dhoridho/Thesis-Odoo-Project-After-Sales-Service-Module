<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_time_table_form_student_inherit" model="ir.ui.view">
        <field name="model">time.table</field>
        <field name="inherit_id" ref="timetable.view_time_table_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet" position="replace">
                <header>
                    <button string="Generate Classes" name="action_generate_classes" type="object" class="oe_highlight"/>
                </header>
                <sheet>
                <div class="oe_button_box" name="button_box">
                    <button name="action_view_classes"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-calendar-check-o"
                            attrs="{'invisible': [('ems_classes_count', '=', 0)]}">
                        <field name="ems_classes_count" string="Classes" widget="statinfo"/>
                    </button>
                </div>
                    <group>
                        <group>
                            <field name="name" readonly="1" force_save="1"/>
                            <field name="school_id" required="1" options="{'no_create': True, 'no_create_edit':True}"/>
                            <field name="program_id" required="1" domain="[('school_id', '=', school_id)]" options="{'no_create': True, 'no_create_edit':True}"/>
                            <field name="standard_id" required="1" string="Intake" domain="[('standard_id', '=', program_id)]" options="{'no_create': True, 'no_create_edit':True}"/>
                            <field name="description" placeholder="Enter Description"/>
                        </group>
                        <group>
                            <field name="year_id" string="Academic Year" required="1" placeholder="Select Academic Year" options="{'no_quick_create': True, 'no_create_edit': True}"/>
                            <field name="term_id" domain="[('year_id', '=', year_id)]" required="1" options="{'no_create': True, 'no_create_edit':True}"/>
                            <field name="timetable_type" string="Timetable Type" required="1"/>
                            <field name="branch_id" string="Branch" invisible="1"/>
                            <field name="group_class" string="Group" required="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="TimeTable">
                            <field name="timetable_line_ids" nolabel="1" colspan="4" force_save="1">
                                <tree string="TimeTable" editable="top" create="0">
                                    <field name="exm_date" string="EXAM DATE" required="1" attrs="{'column_invisible': [('parent.timetable_type', '=', 'regular')]}"/>
                                    <field name="week_day" required="1"/>
                                    <field name="subject_id" readonly="1" force_save="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                    <field name="start_time" widget="float_time"/>
                                    <field name="end_time" widget="float_time"/>
                                    <field name="teacher_id" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" required="1" domain="[('subject_id', '=', subject_id)]"  string="Teacher"/>
                                    <field name="class_room_id" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Student">
                            <field name="student_line_ids" nolabel="1" colspan="4" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}">
                                <tree string="Student" editable="top" create="0" delete="0">
                                    <field name="student_id"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </xpath>
        </field>
    </record>

    <record id="timetable.menu_timetable_1" model="ir.ui.menu">
        <field name="equip_icon_class">o-hm-sidebar-sub-school-reguler-timetable</field>
        <field name="name">Timetable</field>
    </record>


    <!-- hide menu exam timetable -->
    <menuitem id="exam.timetable_exam_regular_menu" 
            name="Exam Timetable" 
            parent="timetable.menu_timetable_1" 
            sequence="62"
            active="0"/>

    <record id="timetable.menu_timetable_regular" model="ir.ui.menu">
        <field name="groups_id" eval="[(3, ref('school.group_school_teacher'))]"/>
        <field name="name">Timetable</field>
        <field name="active">1</field>
        <field name="sequence">1</field>
    </record>

    <record id="timetable.action_timetable_regular" model="ir.actions.act_window">
        <field name="name">Timetable</field>
    </record>

    <!-- hide menu exam timetable -->
    <menuitem id="exam.timetable_exam_regular_menu" 
            name="Exam Timetable" 
            parent="timetable.menu_timetable_1" 
            sequence="62"
            active="0"/>

</odoo>
