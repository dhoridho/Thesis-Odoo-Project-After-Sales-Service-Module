<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- EMS Course Registration -->
        <!-- Form View -->
            <record id="ems_course_registration_form" model="ir.ui.view">
                <field name="name">ems.course.registration.form</field>
                <field name="model">ems.course.registration</field>
                <field name="arch" type="xml">
                    <form string="EMS Course Registration">
                        <header>
                            <button name="ems_course_done" string="Done" type="object" class="oe_highlight" attrs = "{'invisible' : ['|', ('is_approve_button', '=', False), ('state', '!=', 'confirmed')]}"/>
                            <button name="action_apply" string="Apply" type="object" class="oe_highlight" attrs = "{'invisible' : [('state', '!=', 'draft')]}"/>
                            <button name="action_confirm" string="Confirm" type="object" class="oe_highlight" attrs = "{'invisible' : ['|', ('is_approve_button', '=', False), ('state', '!=', 'applied')]}"/>     
                            <button name="action_reject" string="Reject" type="object" class="oe_highlight" attrs = "{'invisible' : ['|', ('is_approve_button', '=', False), ('state', 'not in', ('applied', 'confirmed'))]}"/>
                            <button name="action_set_to_draft" string="Set to Draft" type="object" class="oe_highlight" attrs = "{'invisible' : ['|', ('is_approve_button', '=', False), ('state', '!=', 'rejected')]}"/>
                            <field name="state" widget="statusbar" statusbar_visible="draft,applied,confirmed,done"/>
                        </header>
                        <sheet>
                            <group>
                                <group>
                                    <field name="pid" />
                                    <field name="student_id" />
                                    <field name="school_id" />
                                    <field name="related_program_ids" widget="many2many_tags" invisible="1"/>
                                    <field name="program_id" domain="[('id', 'in', related_program_ids)]"/>
                                </group>
                                <group>
                                    <field name="approved_matrix_id" required="1" domain="[('id', 'in', program_id)]"/>
                                    <field name="is_approve_button" invisible="1"/>
                                    <field name="approval_matrix_line_id" invisible="1"/>
                                </group>
                            </group>
                            <notebook>
                                <page string="Subject Registration Lines">
                                    <field name="line_ids">
                                        <tree editable="bottom" string="Subject Registration Line" >
                                            <field name="course_id" required="1"/>
                                            <field name="course_code" />
                                        </tree>
                                    </field>
                                </page>
                                <page string="Approval Matrix Line" name="approved_matrix_ids" invisible="1">
                                    <field name="approved_matrix_ids" context="{'approved_matrix_ids': approved_matrix_ids}">
                                        <tree editable="bottom">
                                            <field name="state" />
                                            <field name="user_id" widget="many2many_tags"/>
                                            <field name="minimum_approver" />
                                        </tree>
                                      </field>
                                </page>
                            </notebook>
                        </sheet>
                    </form>
                </field>
            </record>
    
        <!-- Tree View -->
            <record id="ems_course_registration_view_tree" model="ir.ui.view">
                <field name="name">ems.course.registration.view.tree</field>
                <field name="model">ems.course.registration</field>
                <field name="arch" type="xml">
                    <tree>
                        <field name="student_id" />
                        <field name="pid" />
                        <field name="school_id" />
                        <field name="program_id" />
                    </tree>
                </field>
            </record>
    
        <!-- Action -->
            <record id="ems_course_registration_action" model="ir.actions.act_window">
                <field name="name">Subject Registration</field>
                <field name="type">ir.actions.act_window</field>
                <field name="res_model">ems.course.registration</field>
                <field name="view_mode">tree,form</field>
            </record>
    
    <!-- EMS Course Registration Lines-->
        <!-- Form View -->
            <record id="ems_course_registration_line_form" model="ir.ui.view">
                <field name="name">ems.course.registration.line.form</field>
                <field name="model">ems.course.registration.line</field>
                <field name="arch" type="xml">
                    <form string="EMS Course Registration">
                        <sheet>
                            <group>
                                <group>
                                    <field name="course_code" />
                                    <field name="course_id" />
                                    <field name="course_registration_id" />
                                </group>
                            </group>
                        </sheet>
                    </form>
                </field>
            </record>
    
        <!-- Tree View -->
            <record id="ems_course_registration_line_view_tree" model="ir.ui.view">
                <field name="name">ems.course.registration.line.view.tree</field>
                <field name="model">ems.course.registration.line</field>
                <field name="arch" type="xml">
                    <tree>
                        <field name="course_code" />
                        <field name="course_id" />
                        <field name="course_registration_id" />
                    </tree>
                </field>
            </record>
    
        <!-- Action -->
            <record id="ems_course_registration_line_action" model="ir.actions.act_window">
                <field name="name">Subject Registration Lines</field>
                <field name="type">ir.actions.act_window</field>
                <field name="res_model">ems.course.registration.line</field>
                <field name="view_mode">tree,form</field>
            </record>
    <!-- Course Approval Matrix -->
        <!-- Form View -->
            <record id="course_approval_matrix_form" model="ir.ui.view">
                <field name="name">course.approval.matrix.form</field>
                <field name="model">course.approval.matrix</field>
                <field name="arch" type="xml">
                    <form string="Course Approval Matrix">
                        <sheet>
                            <group>
                                <group>
                                    <field name="name" />
                                    <field name="school_id" />
                                </group>
                                <group>
                                    <field name="program_id" />
                                    <field name="program_ids" invisible="1" />
                                </group>
                            </group>
                            <notebook>
                                <page name="approval_matrix_line" string="Approval">
                                    <field name="approval_matrix_ids" >
                                        <tree editable="bottom">
                                            <field name="state" />
                                            <field name="user_id" widget="many2many_tags"/>
                                            <field name="minimum_approver" />
                                        </tree>
                                    </field>
                                </page>
                            </notebook>
                        </sheet>
                    </form>
                </field>
            </record>
    
        <!-- Tree View -->
            <record id="course_approval_matrix_view_tree" model="ir.ui.view">
                <field name="name">course.approval.matrix.view.tree</field>
                <field name="model">course.approval.matrix</field>
                <field name="arch" type="xml">
                    <tree>
                        <field name="name" />
                        <field name="school_id" />
                        <field name="program_id" />
                    </tree>
                </field>
            </record>
    
        <!-- Action -->
            <record id="course_approval_matrix_act_window" model="ir.actions.act_window">
                <field name="name">Subject Approval Matrix</field>
                <field name="type">ir.actions.act_window</field>
                <field name="res_model">course.approval.matrix</field>
                <field name="view_mode">tree,form</field>
            </record>

    <!-- Menuitem -->
        <!-- <menuitem id="menu_ems_course_registration"
                name="Subject Registration"
                parent="school.menu_configuration"
                sequence="1"/>

        <menuitem id="menu_ems_course_registration_act"
                name="Subject Registration"
                parent="equip3_school_operation.menu_ems_course_registration"
                action="ems_course_registration_action"
                sequence="1"/>

        <menuitem id="menu_ems_course_registration_line_act"
                name="Subject Registration Lines"
                parent="equip3_school_operation.menu_ems_course_registration"
                action="ems_course_registration_line_action"
                sequence="2"/>

        <menuitem id="menu_course_approval_matrix_act" 
                name="Subject Approval Matrix" 
                parent="equip3_school_operation.menu_approval_matrix_form" action="course_approval_matrix_act_window"
                sequence="2"/> -->
</odoo>
