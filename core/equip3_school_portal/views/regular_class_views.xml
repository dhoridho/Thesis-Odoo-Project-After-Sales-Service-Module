<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="regular_class" name="Regular Classes">
        <t t-call="website.layout">
            <div id="wrap" >
                <div class="oe_structure">
                    <section class="mt-4 mb-4">
                        <div class="container-fluid d-flex">
                            <div class="school_portal_sidebar other_form">
                                <nav id="sidebar">
                                    <ul class="list-unstyled parent_links">
                                        <li class="parent_url">
                                            <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-main-school-admission-register"></span>
                                            <a href="#admission-register" data-toggle="collapse" aria-expanded="true"
                                               equip_icon_class="o-hm-sidebar-sub-school-classes">ADMISSION REGISTER</a>
                                        </li>
                                        <div class="col-20 menu-border">
                                            <div/>
                                        </div>
                                        <ul class="list-unstyled collapse show child_links" id="admission-register">
                                            <li class="child_url">
                                                <a href="/student/admission">Admission Register</a>
                                            </li>
                                        </ul>
                                    </ul>

                                    <ul class="list-unstyled parent_links" t-if="request.env.user.has_group('base.group_user')">
                                        <li class="parent_url">
                                            <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-classes"></span>
                                            <a href="#academic-tracking" data-toggle="collapse" aria-expanded="true">ACADEMIC
                                                TRACKING</a>
                                        </li>
                                        <div class="col-20 menu-border">
                                            <div/>
                                        </div>
                                        <ul class="list-unstyled collapse show child_links" id="academic-tracking">
                                            <li class="child_url">
                                                <a href="/student/profile">Student Profile</a>
                                            </li>
                                        </ul>
                                        <ul class="list-unstyled collapse show child_links" id="academic-tracking">
                                            <li class="child_url">
                                                <a href="/student/academic/tracking">Academic Tracking</a>
                                            </li>
                                        </ul>

                                        <ul class="list-unstyled collapse show child_links" id="academic-tracking">
                                            <li class="child_url">
                                                <a href="/student/transcript">Student Transcript</a>
                                            </li>
                                        </ul>
                                    </ul>

                                    <ul class="list-unstyled parent_links">
                                        <li class="parent_url">
                                            <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-monthly-attendance-sheet"></span>
                                            <a href="#student-invoice" data-toggle="collapse" aria-expanded="true">STUDENT
                                                INVOICE</a>
                                        </li>
                                        <div class="col-20 menu-border">
                                            <div/>
                                        </div>

                                        <ul class="list-unstyled collapse show child_links" id="student-invoice">
                                            <li class="child_url">
                                                <a href="/my/invoices">Student Invoice</a>
                                            </li>
                                        </ul>
                                    </ul>

                                    <ul class="list-unstyled parent_links" t-if="request.env.user.has_group('base.group_user')">
                                        <li class="parent_url">
                                            <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-monthly-attendance-sheet"></span>
                                            <a href="#exam-assignment" data-toggle="collapse" aria-expanded="true">EXAM AND
                                                ASSIGNMENT</a>
                                        </li>
                                        <div class="col-20 menu-border">
                                            <div/>
                                        </div>

                                        <ul class="list-unstyled collapse show child_links" id="exam-assignment">
                                            <li class="child_url">
                                                <a href="/student/assignment">Student Assignment</a>
                                            </li>
                                        </ul>

                                        <ul class="list-unstyled collapse show child_links" id="exam-assignment">
                                            <li class="child_url">
                                                <a href="/student/exam">Student Exam</a>
                                            </li>
                                        </ul>

                                        <ul class="list-unstyled collapse show child_links" id="exam-assignment">
                                            <li class="child_url">
                                                <a href="/student/additional">Additional Exam</a>
                                            </li>
                                        </ul>
                                    </ul>

                                    <ul class="list-unstyled parent_links" t-if="request.env.user.has_group('base.group_user')">
                                        <li class="parent_url">
                                            <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-monthly-attendance-sheet"></span>
                                            <a href="#attendance-classes" data-toggle="collapse" aria-expanded="true">ATTENDANCE
                                                AND CLASSES</a>
                                        </li>
                                        <div class="col-20 menu-border">
                                            <div/>
                                        </div>

                                        <ul class="list-unstyled collapse show child_links" id="attendance-classes">
                                            <li class="child_url">
                                                <a href="/student/attendance">Daily Attendance</a>
                                            </li>
                                        </ul>

                                        <ul class="list-unstyled collapse show child_links" id="attendance-classes">
                                            <li class="child_url">
                                                <a href="/student/leaves">Student Leave Request</a>
                                            </li>
                                        </ul>

                                        <ul class="list-unstyled collapse show child_links" id="attendance-classes">
                                            <li class="child_url">
                                                <a href="/regular/class/calendar">Classes</a>
                                            </li>
                                        </ul>

                                        <!-- <ul class="list-unstyled collapse show child_links" id="attendance-classes">
                                            <li class="child_url">
                                                <a href="/exam/class">Exam Classes</a>
                                            </li>
                                        </ul> -->
                                    </ul>
                                </nav>
                            </div>
                            <div style="width: 100%;" class="ml-3">
                                <nav class="navbar navbar-light navbar-expand-lg border py-0 mb-2 o_portal_navbar  mt-3 rounded">
                                    <ol class="o_portal_submenu breadcrumb mb-0 py-2 flex-grow-1 row"
                                        style="background-color: #FFFFFF">
                                        <li class="ml-1" data-oe-id="2699" data-oe-xpath="/data/xpath/li"
                                            data-oe-model="ir.ui.view" data-oe-field="arch"></li>
                                        <li class="breadcrumb-item active" style="margin-left: -15px;">Classes</li>
                                    </ol>
                                    <div t-if="search_sorting" class="form-inline">
                                        <span class="small mr-1 navbar-text">Sort By:</span>
                                        <div class="btn-group">
                                            <button id="regular_class_searchbar_sortby" data-toggle="dropdown"
                                                    class="btn btn-secondary btn-sm dropdown-toggle">
                                                <t t-esc="search_sorting[sortby].get('label', 'Newest')"/>
                                            </button>
                                            <div class="dropdown-menu" aria-labelledby="regular_class_searchbar_sortby">
                                                <t t-foreach="search_sorting" t-as="option">
                                                    <a t-att-href="request.httprequest.path + '?' + keep_query('*', sortby=option)"
                                                       t-attf-class="dropdown-item#{sortby == option and ' active' or ''}">
                                                        <span t-esc="search_sorting[option].get('label')"/>
                                                    </a>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                    <div t-if="search_filter" class="form-inline ml-lg-2">
                                        <span class="small mr-1 navbar-text">Filter By:</span>
                                        <div class="btn-group">
                                            <button id="regular_class_searchbar_filters" data-toggle="dropdown"
                                                    class="btn btn-secondary btn-sm dropdown-toggle">
                                                <t t-esc="search_filter.get(filterby,search_filter.get('all')).get('label', 'All')"/>
                                            </button>
                                            <div class="dropdown-menu" aria-labelledby="regular_class_searchbar_filters">
                                                <t t-foreach="search_filter" t-as="option">
                                                    <a t-att-href="default_url + '?' + keep_query('*', filterby=option)"
                                                       t-attf-class="dropdown-item#{filterby == option and ' active' or ''}">
                                                        <span t-esc="search_filter[option].get('label')"/>
                                                    </a>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                    <div t-if="search_group" class="form-inline ml-lg-2">
                                        <span class="small mr-1 navbar-text">Group By:</span>
                                        <div class="btn-group">
                                            <button id="regular_class_searchbar_groupby" data-toggle="dropdown"
                                                    class="btn btn-secondary btn-sm dropdown-toggle">
                                                <t t-esc="search_group[groupby].get('label', 'None')"/>
                                            </button>
                                            <div class="dropdown-menu" aria-labelledby="regular_class_searchbar_groupby">
                                                <t t-foreach="search_group" t-as="option">
                                                    <a t-att-href="default_url + '?' + keep_query('*', groupby=option)"
                                                       t-attf-class="dropdown-item#{groupby == option and ' active' or ''}">
                                                        <span t-esc="search_group[option].get('label')"/>
                                                    </a>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                    <form t-if="searchbar_inputs"
                                          class="form-inline o_portal_search_panel ml-lg-4 col-xl-4 col-md-5">
                                        <div class="input-group input-group-sm w-100">
                                            <div class="input-group-prepend">
                                                <button type="button" class="btn btn-secondary dropdown-toggle"
                                                        data-toggle="dropdown"/>
                                                <div class="dropdown-menu" role="menu">
                                                    <t t-foreach='searchbar_inputs' t-as='input'>
                                                        <a t-att-href="'#' + searchbar_inputs[input]['input']"
                                                           t-attf-class="dropdown-item#{search_in == searchbar_inputs[input]['input'] and ' active' or ''}">
                                                            <span t-raw="searchbar_inputs[input]['label']"/>
                                                        </a>
                                                    </t>
                                                </div>
                                            </div>
                                            <input type="text" class="form-control form-control-sm" placeholder="Search"
                                                   t-att-value='search' name="search"/>
                                            <span class="input-group-append">
                                                <button class="btn btn-secondary search-submit" type="button">
                                                    <span class="fa fa-search"/>
                                                </button>
                                            </span>
                                        </div>
                                    </form>
                                    <div class="dropdown">
                                        <button class="btn btn-secondary dropdown-toggle o-hm-icon o-hm-view-tree-view o-hm-f14 o_active_view" type="button" data-toggle="dropdown" aria-expanded="true"><span class="caret"></span></button>
                                        <ul class="dropdown-menu" style="margin: unset;min-width: unset;padding: unset;">
                                            <li class="mt-1"><a class="btn btn-secondary o-hm-icon o-hm-view-calendar-view o-hm-f14" href="/regular/class/calendar" style="width: 50px;"></a></li>
                                        </ul>
                                    </div>
                                </nav>
                                <t t-if="not grouped_tasks">
                                    <div class="table-responsive border rounded border-top-0">
                                        <t t-if="regular_class_ids">
                                            <table class="table table-hover table-striped" style="background-color: #FFFFFF">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Date</th> <!--  -->
                                                        <th scope="col">Name</th> <!--  -->
                                                        <!-- <th scope="col">Program</th> -->
                                                        <th scope="col">Intake</th> <!--  -->
                                                        <th scope="col">Teacher</th> <!--  -->
                                                        <th scope="col">Study Day</th> <!--  -->
                                                        <th scope="col">Classroom</th> <!--  -->
                                                        <!-- <th scope="col">Term</th> -->
                                                        <th scope="col">Subject</th> <!--  -->
                                                        <th scope="col">Start Time</th> <!--  -->
                                                        <th scope="col">End Time</th> <!--  -->
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <t t-foreach="regular_class_ids" t-as="ems_class">
                                                        <tr>
                                                            <td>
                                                                <span t-field="ems_class.class_date"
                                                                      t-options='{"widget": "date"}'/>
                                                                <span t-field="ems_class.class_date_start" hidden="1"/>
                                                                <span t-field="ems_class.class_date_end" hidden="1"/>
                                                            </td>
                                                            <td><span t-field="ems_class.name"/></td>
                                                            <!-- <td class="text-left"><span t-field="ems_class.program_id.name"/></td> -->
                                                            <td><span t-field="ems_class.intake_id.name"/></td>
                                                            <td><span t-field="ems_class.teacher_id.name"/></td>
                                                            <td><span t-field="ems_class.study_day"/></td>
                                                            <td><span t-field="ems_class.classroom_id.name"/></td>
                                                            <!-- <td><span t-field="ems_class.term_id.name"/></td> -->
                                                            <td><span t-field="ems_class.subject_id.name"/></td>
                                                            <td><span
                                                                    t-esc="'{0:02.0f}:{1:02.0f}'.format(*divmod(ems_class.start_time * 60, 60))"></span></td>
                                                            <td><span
                                                                    t-esc="'{0:02.0f}:{1:02.0f}'.format(*divmod(ems_class.end_time * 60, 60))"></span></td>
                                                        </tr>
                                                    </t>
                                                </tbody>
                                            </table>
                                        </t>
                                    </div>
                                </t>
                                <t t-if="grouped_tasks">
                                    <div class="table-responsive border rounded border-top-0">
                                        <t t-if="regular_class_ids">
                                            <t t-foreach="grouped_tasks" t-as="grouped_task">
                                                <table class="table table-hover table-striped"
                                                       style="background-color: #FFFFFF">
                                                    <thead>
                                                        <tr t-attf-class="{{'thead-light' if not groupby == 'none' else ''}}"
                                                            class="active">
                                                            <th t-if="groupby == 'none'">Date</th>
                                                            <th t-if="groupby == 'Intake'">
                                                                <em class="font-weight-normal text-muted">Intake:</em>
                                                                <span t-field="grouped_task[0].intake_id.name"/>
                                                            </th>
                                                            <th t-if="groupby == 'Teacher'">
                                                                <em class="font-weight-normal text-muted">Teacher:</em>
                                                                <span t-field="grouped_task[0].teacher_id.name"/>
                                                            </th>
                                                            <th t-if="groupby == 'Study Day'">
                                                                <em class="font-weight-normal text-muted">Study Day:</em>
                                                                <span t-esc="grouped_task[0].study_day"/>
                                                            </th>
                                                            <th t-if="groupby == 'Subject'">
                                                                <em class="font-weight-normal text-muted">Subject:</em>
                                                                <span t-esc="grouped_task[0].subject_id.name"/>
                                                            </th>
                                                            <th t-if="groupby == 'Classes Type'">
                                                                <em class="font-weight-normal text-muted">Classes Type:</em>
                                                                <span t-esc="'Regular' if grouped_task[0].classes_type == 'regular' else 'Exam'"/>
                                                            </th>
                                                            <th scope="col">Name</th>
                                                            <th scope="col">Intake</th>
                                                            <th scope="col">Teacher</th>
                                                            <th scope="col">Study Day</th>
                                                            <th scope="col">Classroom</th>
                                                            <th scope="col">Subject</th>
                                                            <th scope="col">Start Time</th>
                                                            <th scope="col">End Time</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody style="cursor: pointer;">
                                                        <t t-foreach="grouped_task" t-as="ems_class">
                                                            <tr>
                                                                <td>
                                                                    <span t-field="ems_class.class_date"
                                                                          t-options='{"widget": "date"}'/>
                                                                    <span t-field="ems_class.class_date_start" hidden="1"/>
                                                                    <span t-field="ems_class.class_date_end" hidden="1"/>
                                                                </td>
                                                                <td><span t-field="ems_class.name"/></td>
                                                                <td><span t-field="ems_class.intake_id.name"/></td>
                                                                <td><span t-field="ems_class.teacher_id.name"/></td>
                                                                <td><span t-field="ems_class.study_day"/></td>
                                                                <td><span t-field="ems_class.classroom_id.name"/></td>
                                                                <td><span t-field="ems_class.subject_id.name"/></td>
                                                                <td><span
                                                                        t-esc="'{0:02.0f}:{1:02.0f}'.format(*divmod(ems_class.start_time * 60, 60))"></span></td>
                                                                <td><span
                                                                        t-esc="'{0:02.0f}:{1:02.0f}'.format(*divmod(ems_class.end_time * 60, 60))"></span></td>
                                                            </tr>
                                                        </t>
                                                    </tbody>
                                                </table>
                                            </t>
                                        </t>
                                    </div>
                                </t>
                            </div>
                        </div>
                        <div t-if="pager" class="o_portal_pager text-center"
                             style="margin-top: 1%; margin-left: 18%;margin-bottom:1%;">
                            <t t-call="portal.pager"/>
                        </div>
                    </section>
                </div>
            </div>
        </t>
    </template>

        <template id="regular_class_calendar">
            <t t-call="website.layout">
                <div id="wrap" style="background-color: #fff;">
                    <div class="container-fluid d-flex">
                        <div class="school_portal_sidebar other_form mt-3">
                            <nav id="sidebar">
                                <ul class="list-unstyled parent_links">
                                    <li class="parent_url">
                                        <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-main-school-admission-register"></span>
                                        <a href="#admission-register" data-toggle="collapse" aria-expanded="true" equip_icon_class="o-hm-sidebar-sub-school-classes">ADMISSION REGISTER</a>
                                    </li>
                                    <div class="col-20 menu-border">
                                        <div/>
                                    </div>
                                    <ul class="list-unstyled collapse show child_links" id="admission-register">
                                        <li class="child_url">
                                            <a href="/student/admission">Admission Register</a>
                                        </li>
                                    </ul>
                                </ul>

                                <ul class="list-unstyled parent_links" t-if="request.env.user.has_group('base.group_user')">
                                    <li class="parent_url">
                                        <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-classes"></span>
                                        <a href="#academic-tracking" data-toggle="collapse" aria-expanded="true">ACADEMIC TRACKING</a>
                                    </li>
                                    <div class="col-20 menu-border">
                                        <div/>
                                    </div>
                                    <ul class="list-unstyled collapse show child_links" id="academic-tracking">
                                        <li class="child_url">
                                            <a href="/student/profile">Student Profile</a>
                                        </li>
                                    </ul>
                                    <ul class="list-unstyled collapse show child_links" id="academic-tracking">
                                        <li class="child_url">
                                            <a href="/student/academic/tracking">Academic Tracking</a>
                                        </li>
                                    </ul>
                        
    <!--                                <ul class="list-unstyled collapse show child_links" id="academic-tracking">-->
    <!--                                    <li class="child_url">-->
    <!--                                        <a href="/student/transcript">Student Transcript</a>-->
    <!--                                    </li>-->
    <!--                                </ul>-->
                                </ul>

                                <ul class="list-unstyled parent_links">
                                    <li class="parent_url">
                                        <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-monthly-attendance-sheet"></span>
                                        <a href="#student-invoice" data-toggle="collapse" aria-expanded="true">STUDENT INVOICE</a>
                                    </li>
                                    <div class="col-20 menu-border">
                                        <div/>
                                    </div>
                        
                                    <ul class="list-unstyled collapse show child_links" id="student-invoice">
                                        <li class="child_url">
                                            <a href="/my/invoices">Student Invoice</a>
                                        </li>
                                    </ul>
                                </ul>
                        
                                <ul class="list-unstyled parent_links" t-if="request.env.user.has_group('base.group_user')">
                                    <li class="parent_url">
                                        <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-monthly-attendance-sheet"></span>
                                        <a href="#exam-assignment" data-toggle="collapse" aria-expanded="true">EXAM AND ASSIGNMENT</a>
                                    </li>
                                    <div class="col-20 menu-border">
                                        <div/>
                                    </div>

                                    <ul class="list-unstyled collapse show child_links" id="exam-assignment">
                                        <li class="child_url">
                                            <a href="/student/assignment">Student Assignment</a>
                                        </li>
                                    </ul>

                                    <ul class="list-unstyled collapse show child_links" id="exam-assignment">
                                        <li class="child_url">
                                            <a href="/student/exam">Student Exam</a>
                                        </li>
                                    </ul>

                                    <ul class="list-unstyled collapse show child_links" id="exam-assignment">
                                        <li class="child_url">
                                            <a href="/student/additional">Additional Exam</a>
                                        </li>
                                    </ul>
                                </ul>
                        
                                <ul class="list-unstyled parent_links" t-if="request.env.user.has_group('base.group_user')">
                                    <li class="parent_url">
                                        <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-monthly-attendance-sheet"></span>
                                        <a href="#attendance-classes" data-toggle="collapse" aria-expanded="true" >ATTENDANCE AND CLASSES</a>
                                    </li>
                                    <div class="col-20 menu-border">
                                        <div/>
                                    </div>
                        
                                    <ul class="list-unstyled collapse show child_links" id="attendance-classes">
                                        <li class="child_url"> 
                                            <a href="/student/attendance">Daily Attendance</a>
                                        </li>
                                    </ul>
                        
                                    <ul class="list-unstyled collapse show child_links" id="attendance-classes">
                                        <li class="child_url">
                                            <a href="/student/leaves">Student Leave Request</a>
                                        </li>
                                    </ul>
                        
                                    <ul class="list-unstyled collapse show child_links" id="attendance-classes">
                                        <li class="child_url">
                                            <a href="/regular/class/calendar">Classes</a>
                                        </li>
                                    </ul>
                                </ul>
                            </nav>
                        </div>
                        <div style="width: 100%;" class="ml-3 mb-5">
                            <nav class="navbar navbar-light navbar-expand-lg border py-0 mb-2 o_portal_navbar  mt-3 rounded">
                                <ol class="o_portal_submenu breadcrumb mb-0 py-2 flex-grow-1 row" style="background-color: #FFFFFF">
                                    <li class="ml-1" data-oe-id="2699" data-oe-xpath="/data/xpath/li" data-oe-model="ir.ui.view" data-oe-field="arch"></li>
                                    <li class="breadcrumb-item active" style="margin-left: -15px;">Classes</li>
                                </ol>
                                <div class="dropdown">
                                    <button class="btn btn-secondary dropdown-toggle o-hm-icon o-hm-view-calendar-view o-hm-f14 o_active_view" type="button" data-toggle="dropdown" aria-expanded="true"><span class="caret"></span></button>
                                    <ul class="dropdown-menu" style="margin: unset;min-width: unset;padding: unset;">
                                        <li class="mt-1"><a class="btn btn-secondary o-hm-icon o-hm-view-tree-view o-hm-f14" href="/regular/class" style="width: 50px;"></a></li>
                                    </ul>
                                </div>
                            </nav>
                            <div id="calendar" class="classes_calendar_view"></div>
                            <textarea class="d-none calendar_values"
                                      t-att-value="json.dumps(data)">
                            </textarea>
                        </div>
                    </div>
                </div>
            </t>
        </template>
</odoo>

