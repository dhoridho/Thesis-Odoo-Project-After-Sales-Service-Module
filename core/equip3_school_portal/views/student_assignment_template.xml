<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="student_assignment_portal_form" name="Student Assignment">
        <t t-call="website.layout">
            <div id="wrap">
                <div class="oe_structure">
                    <section id='student_sign_up_form_section'>
                        <div class="container-fluid d-flex">
                            <div class="school_portal_sidebar other_form">
                                <nav id = "sidebar">
                                    <ul class="list-unstyled parent_links">
                                        <li class="parent_url">
                                            <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-main-school-admission-register"></span>
                                            <a href="#admission-register" data-toggle="collapse" aria-expanded="true" equip_icon_class="o-hm-sidebar-sub-school-classes">ADMISSION REGISTER</a>
                                        </li>
                                        <div class="col-20 menu-border">
                                            <div/>
                                        </div>
                                        <ul class="list-unstyled collapse show child_links" id="admission-register">
                                            <li class="child_url">
                                                <a href="/student/admission">Admission Register</a>
                                            </li>
                                        </ul>
                                    </ul>

                                    <ul class="list-unstyled parent_links" t-if="request.env.user.has_group('base.group_user')">
                                        <li class="parent_url">
                                            <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-classes"></span>
                                            <a href="#academic-tracking" data-toggle="collapse" aria-expanded="true">ACADEMIC TRACKING</a>
                                        </li>
                                        <div class="col-20 menu-border">
                                            <div/>
                                        </div>

                                        <ul class="list-unstyled collapse show child_links" id="academic-tracking">
                                            <li class="child_url">
                                                <a href="/student/profile">Student Profile</a>
                                            </li>
                                        </ul>

                                        <ul class="list-unstyled collapse show child_links" id="academic-tracking">
                                            <li class="child_url">
                                                <a href="/student/academic/tracking">Academic Tracking</a>
                                            </li>
                                        </ul>

                                        <ul class="list-unstyled collapse show child_links" id="academic-tracking">
                                            <li class="child_url">
                                                <a href="/student/transcript">Student Transcript</a>
                                            </li>
                                        </ul>
                                    </ul>

                                    <ul class="list-unstyled parent_links">
                                        <li class="parent_url">
                                            <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-monthly-attendance-sheet"></span>
                                            <a href="#student-invoice" data-toggle="collapse" aria-expanded="true">STUDENT INVOICE</a>
                                        </li>
                                        <div class="col-20 menu-border">
                                            <div/>
                                        </div>

                                        <ul class="list-unstyled collapse show child_links" id="student-invoice">
                                            <li class="child_url">
                                                <a href="/my/invoices">Student Invoice</a>
                                            </li>
                                        </ul>
                                    </ul>

                                    <ul class="list-unstyled parent_links" t-if="request.env.user.has_group('base.group_user')">
                                        <li class="parent_url">
                                            <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-monthly-attendance-sheet"></span>
                                            <a href="#exam-assignment" data-toggle="collapse" aria-expanded="true">EXAM AND ASSIGNMENT</a>
                                        </li>
                                        <div class="col-20 menu-border">
                                            <div/>
                                        </div>
                                        <ul class="list-unstyled collapse show child_links" id="exam-assignment">
                                            <li class="child_url">
                                                <a href="/student/assignment">Student Assignment</a>
                                            </li>
                                        </ul>
                                        <ul class="list-unstyled collapse show child_links" id="exam-assignment">
                                            <li class="child_url">
                                                <a href="/student/exam">Student Exam</a>
                                            </li>
                                        </ul>
                                        <ul class="list-unstyled collapse show child_links" id="exam-assignment">
                                            <li class="child_url">
                                                <a href="/student/additional">Additional Exam</a>
                                            </li>
                                        </ul>
                                    </ul>

                                    <ul class="list-unstyled parent_links" t-if="request.env.user.has_group('base.group_user')">
                                        <li class="parent_url">
                                            <span class="o-hm-icon o-hm-menu-icon o-hm-sidebar-sub-school-monthly-attendance-sheet"></span>
                                            <a href="#attendance-classes" data-toggle="collapse" aria-expanded="true">ATTENDANCE AND CLASSES</a>
                                        </li>
                                        <div class="col-20 menu-border">
                                            <div/>
                                        </div>

                                        <ul class="list-unstyled collapse show child_links" id="attendance-classes">
                                            <li class="child_url">
                                                <a href="/student/attendance">Daily Attendance</a>
                                            </li>
                                        </ul>

                                        <ul class="list-unstyled collapse show child_links" id="attendance-classes">
                                            <li class="child_url">
                                                <a href="/student/leaves">Student Leave Request</a>
                                            </li>
                                        </ul>

                                        <ul class="list-unstyled collapse show child_links" id="attendance-classes">
                                            <li class="child_url">
                                                <a href="/regular/class/calendar">Classes</a>
                                            </li>
                                        </ul>

                                        <!-- <ul class="list-unstyled collapse show child_links" id="attendance-classes">
                                            <li class="child_url">
                                                <a href="/exam/class">Exam Classes</a>
                                            </li>
                                        </ul> -->
                                    </ul>
                                </nav>
                            </div>
                        <div style="width: 100%;box-shadow: 0px 0px 7px 4px #dbdbdb;border-radius: 15px !important;" class="ml-4">
                            <div class='heading mt-5' style="margin-right:140px;">
                                <h4>Student Assignment</h4>
                            </div> 
                            <form t-att-action="'/student/assignment/submit/%d' % (assignment_id.id)" method="post" enctype="multipart/form-data" class="checkout_autoformat">
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                <div class="text-center mr-5">
                                    <div class='row' style='padding-top: 24px;'>
                                        <div class='col-5 text-right'>
                                            <div class="form-group">
                                              <label for="student_name"><b>Student</b></label>
                                            </div>
                                        </div>
                                        <div class='col-5 text-left' style="margin-left:140px;">
                                            <div class="form-group">
                                                <span t-esc="assignment_id.student_id.name"/>
                                            </div>
                                        </div>  
                                    </div>
                                    <div class='row' style='padding-top: 24px;'>
                                        <div class='col-5 text-right'>
                                            <div class="form-group">
                                              <label for="subject_name"><b>Subject</b></label>
                                            </div>
                                        </div>
                                        <div class='col-5 text-left' style="margin-left:140px;">
                                            <div class="form-group">
                                                <span t-esc="assignment_id.subject_id.name"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='row' style='padding-top: 24px;'>
                                        <div class='col-5 text-right'>
                                            <div class="form-group">
                                              <label for="teacher_name"><b>Teacher</b></label>
                                            </div>
                                        </div>
                                        <div class='col-5 text-left' style="margin-left:140px;">
                                            <div class="form-group">
                                                <span t-esc="assignment_id.teacher_id.name"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='row' style='padding-top: 24px;'>
                                        <div class='col-5 text-right'>
                                            <div class="form-group">
                                              <label for="submission_type"><b>Assignment Type</b></label>
                                            </div>
                                        </div>
                                        <div class='col-5 text-left' style="margin-left:140px;">
                                            <div class="form-group" >
                                                <span t-esc="submission_type"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='row' style='padding-top: 24px;' t-if="assignment_id.submission_type in ('hardcopy', 'softcopy')">
                                        <div class='col-5 text-right'>
                                            <div class="form-group">
                                              <label for="attached_homework"><b>Attached Homework</b></label>
                                            </div>
                                        </div>
                                        <div class='col-5 text-left' style="margin-left:140px;">
                                            <a t-if="assignment_id.attached_homework_file_name" t-attf-href="/web/content/#{attachment_id.id}?download=true&amp;access_token=#{attachment_id.access_token}" target="_blank">
                                                <div class='oe_attachment_name'><i class="mr-2 fa fa-download" /><t t-esc='assignment_id.attached_homework_file_name' /></div>
                                            </a>
                                        </div>
                                    </div>
                                    <div class='row' style='padding-top: 24px;' t-if="assignment_id.submission_type == 'online'">
                                        <div class='col-5 text-right'>
                                            <div class="form-group">
                                              <label for="survey"><b>Question</b></label>
                                            </div>
                                        </div>
                                        <div class="col-5 text-left" style="margin-left:140px;">
                                            <div class="form-group">
                                                <a class="text-bold"
                                                t-esc="assignment_id.survey_id.display_name"
                                                />
                                            </div>
                                        </div>
                                    </div>
                                    <div class='row' style='padding-top: 24px;' t-if="assignment_id.submission_type in ('hardcopy', 'softcopy')">
                                        <div class='col-5 text-right'>
                                            <div class="form-group">
                                              <label for="submit_assignment"><b>Submit Assignment</b></label>
                                            </div>
                                        </div>
                                        <div class='col-5 text-left' style="margin-left:140px;">
                                            <div class="form-group">
                                              <input type="file" class="form-control" id="submit_assignment" name="submit_assignment" required="1" style="width:50%;" oninvalid="this.setCustomValidity('Please attached a file.')" oninput="this.setCustomValidity('')"/>
                                              <input type="text" name="file" id="file" class="d-none"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class='row' style='margin-top: 22px;margin-right: 24px;'>
                                    <div style="margin: auto;">
                                        <t t-if="assignment_id.submission_type == 'online'">
                                            <a class="btn btn-primary text-white assignment_link" target="_blank"
                                            href="#"
                                            t-att-data-id="assignment_id.id"
                                            t-att-data-href="assignment_id.survey_id.get_start_url()">Start</a>
                                        </t>
                                        <t t-else="">
                                            <a t-attf-href="/student/assignment/" class="btn btn-danger mr-4">Cancel</a>
                                            <button type="submit" id="student_assignment_submit" class='btn btn-primary d-none'>Submit</button>
                                            <button class='btn btn-primary' id='modal_submit_assignment' type='button'>Submit</button>
                                        </t>
                                    </div>
                                </div>
                            </form> 
                            <div class="m-4">
                                <div id="assignment_modal" class="modal fade" tabindex="-1" t-if="submit_assignment is not False">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="mt-2 text-center">
                                                <img src="/equip3_school_portal/static/src/img/pngwing.com.png" class="img-thumbnail" style="border-radius: 63px; height: 97px; width: 100px;"/>
                                            </div>
                                            <div class="modal-body text-center">
                                                <h2><strong>Confirmation Assignment!</strong></h2>
                                                <h3 class="text-secondary"><small>Are you sure to submit this assignment?</small></h3>
                                            </div>
                                            <div class="modal-footer text-center">
                                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                <div class='col-lg-12'>
                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                                    <button type="button" id="std_modal_submit" class="btn btn-primary">Submit</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="m-4">
                                <div id="thanks_modal" class="modal fade" tabindex="-1">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="mt-2 text-center">
                                                <img src="/equip3_school_portal/static/src/img/clipart150472.png" class="img-thumbnail" style="border-radius: 63px; height: 97px; width: 100px;"/>
                                            </div>
                                            <div class="modal-body text-center">
                                                <h2><strong>Thank You</strong></h2>
                                                <h3 class="text-secondary"><small>The assignment was submitted successfully.</small></h3>
                                            </div>
                                            <div class="modal-footer text-center">
                                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                <div class='col-lg-12'>
                                                    <button type="button" id="back_button" class="btn btn-success">Back</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </section>
                </div>
            </div>
        </t>
	</template>

</odoo>
