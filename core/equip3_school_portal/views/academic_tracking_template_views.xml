<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="academic_tracking_list" name="Academic Tracking List">
        <t t-call="website.layout">
            <div id="wrap">
                <div class="oe_structure">
                    <section class="mt-4 mb-4">
                        <div class="container-fluid d-flex">
                            <div class="school_portal_sidebar other_form">
                                <t t-call="equip3_school_portal.sidebar_portal_template"/>
                            </div>
                            <div style="width: 100%;" class="ml-3">
                                <nav class="navbar navbar-light navbar-expand-lg border py-0 mb-2 o_portal_navbar  mt-3 rounded">
                                    <ol class="o_portal_submenu breadcrumb mb-0 py-2 flex-grow-1 row"
                                        style="background-color: #FFFFFF">
                                        <li class="ml-1" data-oe-id="2699" data-oe-xpath="/data/xpath/li"
                                            data-oe-model="ir.ui.view" data-oe-field="arch"></li>
                                        <li class="breadcrumb-item active" style="margin-left: -15px;">Academic
                                            Tracking</li>
                                    </ol>
                                    <div t-if="search_group" class="form-inline ml-lg-2">
                                        <span class="small mr-1 navbar-text">Group By:</span>
                                        <div class="btn-group">
                                            <button id="academic_tracking_searchbar_groupby" data-toggle="dropdown"
                                                    class="btn btn-secondary btn-sm dropdown-toggle">
                                                <t t-esc="search_group[groupby].get('label', 'None')"/>
                                            </button>
                                            <div class="dropdown-menu"
                                                 aria-labelledby="academic_tracking_searchbar_groupby">
                                                <t t-foreach="search_group" t-as="option">
                                                    <a t-att-href="default_url + '?' + keep_query('*', groupby=option)"
                                                       t-attf-class="dropdown-item#{groupby == option and ' active' or ''}">
                                                        <span t-esc="search_group[option].get('label')"/>
                                                    </a>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                    <form t-if="searchbar_inputs"
                                          class="form-inline o_portal_search_panel ml-lg-4 col-xl-4 col-md-5">
                                        <div class="input-group input-group-sm w-100">
                                            <div class="input-group-prepend">
                                                <button type="button" class="btn btn-secondary dropdown-toggle"
                                                        data-toggle="dropdown"/>
                                                <div class="dropdown-menu" role="menu">
                                                    <t t-foreach='searchbar_inputs' t-as='input'>
                                                        <a t-att-href="'#' + searchbar_inputs[input]['input']"
                                                           t-attf-class="dropdown-item#{search_in == searchbar_inputs[input]['input'] and ' active' or ''}">
                                                            <span t-raw="searchbar_inputs[input]['label']"/>
                                                        </a>
                                                    </t>
                                                </div>
                                            </div>
                                            <input type="text" class="form-control form-control-sm" placeholder="Search"
                                                   t-att-value='search' name="search"/>
                                            <span class="input-group-append">
                                                <button class="btn btn-secondary search-submit" type="button">
                                                    <span class="fa fa-search"/>
                                                </button>
                                            </span>
                                        </div>
                                    </form>
                                    <t t-raw="0"/>
                                </nav>
                                <t t-if="not grouped_tasks">
                                    <div class="table-responsive border rounded border-top-0">
                                        <t t-if="academic_tracking_ids">
                                            <table class="table table-hover table-striped"
                                                   style="background-color: #FFFFFF">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Student</th>
                                                        <th scope="col">Program</th>
                                                        <th scope="col">School</th>
                                                    </tr>
                                                </thead>
                                                <tbody style="cursor: pointer;">
                                                    <t t-foreach="academic_tracking_ids" t-as="attendance">
                                                        <tr t-att-data-id="attendance.id" class="academictracking-row">
                                                            <td><span t-field="attendance.student_id.name"/></td>
                                                            <td><span t-field="attendance.program_id.name"/></td>
                                                            <td><span t-field="attendance.school_id.name"/></td>
                                                        </tr>
                                                    </t>
                                                </tbody>
                                            </table>
                                        </t>
                                    </div>
                                </t>

                                <t t-if="grouped_tasks">
                                    <div class="table-responsive border rounded border-top-0">
                                        <t t-if="academic_tracking_ids">
                                            <t t-foreach="grouped_tasks" t-as="grouped_task">
                                                <table class="table table-hover table-striped"
                                                       style="background-color: #FFFFFF">
                                                    <thead>
                                                        <tr t-attf-class="{{'thead-light' if not groupby == 'none' else ''}}"
                                                            class="active">
                                                            <th t-if="groupby == 'none'">Student</th>
                                                            <th t-if="groupby == 'Student'">
                                                                <em class="font-weight-normal text-muted">Student:</em>
                                                                <span t-esc="grouped_task[0].student_id.name"/>
                                                            </th>
                                                            <th t-if="groupby == 'School'">
                                                                <em class="font-weight-normal text-muted">School:</em>
                                                                <span t-field="grouped_task[0].school_id.name"/>
                                                            </th>
                                                            <th t-if="groupby == 'Program'">
                                                                <em class="font-weight-normal text-muted">Program:</em>
                                                                <span t-field="grouped_task[0].program_id.name"/>
                                                            </th>
                                                            <th scope="col">Program</th>
                                                            <th scope="col">School</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody style="cursor: pointer;">
                                                        <t t-foreach="grouped_task" t-as="attendance">
                                                            <tr t-att-data-id="attendance.id"
                                                                class="academictracking-row">
                                                                <td>
                                                                    <t t-esc="attendance.student_id.name"/>
                                                                </td>
                                                                <td><span t-field="attendance.program_id.name"/></td>
                                                                <td><span t-field="attendance.school_id.name"/></td>
                                                            </tr>
                                                        </t>
                                                    </tbody>
                                                </table>
                                            </t>
                                        </t>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </section>
                </div>
                <div t-if="pager" class="o_portal_pager text-center"
                     style="margin-top: 1%; margin-left: 18%;margin-bottom:1%;">
                    <t t-call="portal.pager"/>
                </div>
            </div>
        </t>
    </template>

    <template id="academic_tracking_form" name="Academic Tracking Form">
        <t t-call="website.layout">
            <div class="o_portal container mt-3">
                <div class="row align-items-center bg-white no-gutters border rounded">
                    <div class="col-10">
                        <ol class="o_portal_submenu breadcrumb mb-0 py-2 flex-grow-1 row">
                            <li t-attf-class="breadcrumb-item #{'active ' if not academic_tracking_id else ''}"
                                style="padding-left: 20px;">
                                <a t-if="academic_tracking_id"
                                   t-attf-href="/student/academic/tracking?{{ keep_query() }}">Academic Tracking</a>
                                <t t-else="">Academic Tracking</t>
                            </li>
                            <li t-if="academic_tracking_id and academic_tracking_id.student_id"
                                class="breadcrumb-item active">
                                <t t-esc="academic_tracking_id.student_id.name"/>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            <div id="wrap">
                <div class="oe_structure">
                    <section class="mt-4 mb-4">
                        <div class="container-fluid d-flex">
                            <div class="school_portal_sidebar other_form">
                                <t t-call="equip3_school_portal.sidebar_portal_template"/>
                            </div>
                            <div style="width: 100%;box-shadow: 0px 0px 7px 4px #dbdbdb;border-radius: 15px !important;margin-left:2.5rem;">
                                <h5 class="mt-3" style="margin-left: 2.5rem;"><b>Academic Tracking</b></h5>
                                <div class="row">
                                    <table class="table table-borderless" style="margin-left: 42px;">
                                        <tbody>
                                            <tr>
                                                <th scope="row">Student</th>
                                                <td><span t-field="academic_tracking_id.student_id.name"/></td>
                                                <th scope="row">Total Credit</th>
                                                <td><span t-field="academic_tracking_id.total_credit"/></td>
                                            </tr>
                                            <tr>
                                                <th scope="row">Program</th>
                                                <td><span t-field="academic_tracking_id.program_id.name"/></td>
                                                <th scope="row">Pass Credit</th>
                                                <td><span t-field="academic_tracking_id.pass_credit"/></td>
                                            </tr>
                                            <tr>
                                                <th scope="row">School</th>
                                                <td><span t-field="academic_tracking_id.school_id.name"/></td>
                                                <th scope="row">Pending Credit</th>
                                                <td><span t-field="academic_tracking_id.pending_credit"/></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="m-md-4">
                                    <ul class="nav nav-tabs mb-3" id="ex1" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link" data-toggle="tab" href="#intake">Intake</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link" data-toggle="tab" href="#allsubject">All Subject</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link" data-toggle="tab" href="#currentsubject">Current
                                                Subject</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link" data-toggle="tab" href="#passsubject">Pass Subject</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link" data-toggle="tab" href="#faliedsubject">Failed
                                                Subject</a>
                                        </li>
                                    </ul>
                                    <div class="tab-content" id="ex1-content">
                                        <div id="intake" class="tab-pane fade show active">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Intake</th>
                                                        <th scope="col">Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <t t-foreach="academic_tracking_id.intake_ids" t-as="intake_id">
                                                        <tr>
                                                            <td><span t-esc="intake_id.intake_id.name"/></td>
                                                            <td><span t-esc="intake_id.status"/></td>
                                                        </tr>
                                                    </t>
                                                </tbody>
                                            </table>
                                        </div>

                                        <div id="allsubject" class="tab-pane fade">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Intake</th>
                                                        <th scope="col">Year</th>
                                                        <th scope="col">Subject</th>
                                                        <th scope="col">Academic Year</th>
                                                        <th scope="col">Term</th>
                                                        <th scope="col">Credits</th>
                                                        <th scope="col">Presence Percentage</th>
                                                        <th scope="col">Grade</th>
                                                        <th scope="col">Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <t t-foreach="academic_tracking_id.all_score_subject_ids"
                                                       t-as="all_subject_id">
                                                        <tr>
                                                            <td scope="row"><span
                                                                    t-field="all_subject_id.intake_id.name"/></td>
                                                            <td scope="row"><span t-field="all_subject_id.year"/></td>
                                                            <td scope="row"><span
                                                                    t-field="all_subject_id.subject_id.name"/></td>
                                                            <td scope="row"><span
                                                                    t-field="all_subject_id.year_id.name"/></td>
                                                            <td scope="row"><span
                                                                    t-field="all_subject_id.term_id.name"/></td>
                                                            <td scope="row"><span
                                                                    t-field="all_subject_id.credits"/></td>
                                                            <td scope="row"><span
                                                                    t-field="all_subject_id.presence_persentage"/>%</td>
                                                            <td scope="row"><span t-field="all_subject_id.grade"/></td>
                                                        </tr>
                                                    </t>
                                                </tbody>
                                            </table>
                                        </div>

                                        <div id="currentsubject" class="tab-pane fade">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Year</th>
                                                        <th scope="col">Subject</th>
                                                        <th scope="col">Academic Year</th>
                                                        <th scope="col">Term</th>
                                                        <th scope="col">Credits</th>
                                                        <th scope="col">Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <t t-foreach="academic_tracking_id.current_score_subject_ids"
                                                       t-as="current_subject_id">
                                                        <tr>
                                                            <td scope="row"><span
                                                                    t-field="current_subject_id.year"/></td>
                                                            <td scope="row"><span
                                                                    t-field="current_subject_id.subject_id.name"/></td>
                                                            <td scope="row"><span
                                                                    t-field="current_subject_id.year_id.name"/></td>
                                                            <td scope="row"><span
                                                                    t-field="current_subject_id.term_id.name"/></td>
                                                            <td scope="row"><span
                                                                    t-field="current_subject_id.credits"/></td>
                                                            <td scope="row"><span
                                                                    t-field="current_subject_id.subject_status"/></td>
                                                        </tr>
                                                    </t>
                                                </tbody>
                                            </table>
                                        </div>

                                        <div id="passsubject" class="tab-pane fade">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Year</th>
                                                        <th scope="col">Subject</th>
                                                        <th scope="col">Academic Year</th>
                                                        <th scope="col">Term</th>
                                                        <th scope="col">Credits</th>
                                                        <th scope="col">Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <t t-foreach="academic_tracking_id.pass_score_subject_ids"
                                                       t-as="pass_subject_id">
                                                        <tr>
                                                            <td scope="row"><span t-field="pass_subject_id.year"/></td>
                                                            <td scope="row"><span
                                                                    t-field="pass_subject_id.subject_id.name"/></td>
                                                            <td scope="row"><span
                                                                    t-field="pass_subject_id.year_id.name"/></td>
                                                            <td scope="row"><span
                                                                    t-field="pass_subject_id.term_id.name"/></td>
                                                            <td scope="row"><span
                                                                    t-field="pass_subject_id.credits"/></td>
                                                            <td scope="row"><span
                                                                    t-field="pass_subject_id.subject_status"/></td>
                                                        </tr>
                                                    </t>
                                                </tbody>
                                            </table>
                                        </div>

                                        <div id="faliedsubject" class="tab-pane fade">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Year</th>
                                                        <th scope="col">Subject</th>
                                                        <th scope="col">Academic Year</th>
                                                        <th scope="col">Term</th>
                                                        <th scope="col">Credits</th>
                                                        <th scope="col">Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <t t-foreach="academic_tracking_id.failed_score_subject_ids"
                                                       t-as="failed_subject_id">
                                                        <tr>
                                                            <td scope="row"><span
                                                                    t-field="failed_subject_id.year"/></td>
                                                            <td scope="row"><span
                                                                    t-field="failed_subject_id.subject_id.name"/></td>
                                                            <!--                                                <td scope="row"><span t-field="failed_subject_id.elective_subject_ids.name"/></td>-->
                                                            <td scope="row"><span
                                                                    t-field="failed_subject_id.year_id.name"/></td>
                                                            <td scope="row"><span
                                                                    t-field="failed_subject_id.term_id.name"/></td>
                                                            <td scope="row"><span
                                                                    t-field="failed_subject_id.credits"/></td>
                                                            <td scope="row"><span
                                                                    t-field="failed_subject_id.subject_status"/></td>
                                                        </tr>
                                                    </t>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </t>
    </template>

</odoo>
