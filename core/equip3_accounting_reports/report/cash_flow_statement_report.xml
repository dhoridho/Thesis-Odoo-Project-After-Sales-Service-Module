<odoo>
    <template id="equip3_accounting_reports.cash_flow_statement">
        <t t-call="web.html_container">
            <t t-call="web.internal_layout">
                <div class="page">
                    <h3><span t-esc="Filters.get('company_name')"/></h3>
                    <t t-if="type_report == 'indirect'">
                        <h4>Cash Flow Report (Indirect)</h4>
                    </t>
                    <t t-else="">
                        <h4>Cash Flow Report (Direct)</h4>
                    </t>
                    <div>
                        <strong>Accrual Basis : <t t-esc="Filters['target_move']"/> Entry</strong>
                    </div>

                    <div>
                        <br></br>
                        <table style="width:90%;margin:0px auto;" class="table table-condensed">
                            <thead>
                                <tr style="font-size:15px;  padding: 0rem !important;">
                                    <th>Name</th>
                                    <t t-foreach="list_previews" t-as="previews">
                                        <th class="text-right">
                                            <span t-esc="previews"/>
                                        </th>
                                    </t>
                                </tr>
                            </thead>

                            <tbody style="font-size:14px">
                                <tr class="tbl_report_title">
                                    <th>Cash flow from operating activities</th>
                                    <th></th>
                                </tr>  
                                <t t-if="type_report == 'indirect'">
                                    <t t-foreach="net_income" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span>Net Income</span>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_net_income[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <t t-foreach="cf_operating_addition" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span>Addition</span>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_cf_operating_addition[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <t t-foreach="cf_operating_deduction" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span>Deduction</span>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_cf_operating_deduction[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <t t-foreach="cf_operating_cashin_indirect" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span>Cash In</span>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_cf_operating_cashin_indirect[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <t t-foreach="cf_operating_cashout_indirect" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span>Cash Out</span>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_cf_operating_cashout_indirect[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                </t>
                                <t t-else="">
                                    <t t-foreach="received_customer" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span t-esc="account['month_part']"/>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_received_customer[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <t t-foreach="cash_received" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span t-esc="account['month_part']"/>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_cash_received[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <t t-foreach="payment_supplier" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span t-esc="account['month_part']"/>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_payment_supplier[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <t t-foreach="cash_paid" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span t-esc="account['month_part']"/>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_cash_paid[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                </t>

                                <t t-foreach="sum_cf_statement" t-as="account">
                                    <tr>
                                        <td style="padding-left: 20px;">
                                            <span t-esc="account['month_part']"/>
                                        </td>
                                        <t t-foreach="list_previews" t-as="previews">
                                            <td class="text-right">
                                                <span t-esc="(((list_sum_cf_statement[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                                <tr>
                                    <th>Cash flow from investing and extraordinary activities</th>
                                    <th></th>
                                </tr>  
                                <t t-foreach="cf_investing" t-as="account">
                                    <tr>
                                        <td style="padding-left: 20px;">
                                            <span>Cash In</span>
                                        </td>
                                        <t t-foreach="list_previews" t-as="previews">
                                            <td class="text-right">
                                                <span t-esc="(((list_cf_investing[previews])['report_lines'])[0])['total_debit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                                <t t-foreach="cf_investing" t-as="account">
                                    <tr>
                                        <td style="padding-left: 20px;">
                                            <span>Cash out</span>
                                        </td>
                                        <t t-foreach="list_previews" t-as="previews">
                                            <td class="text-right">
                                                <span t-esc="(((list_cf_investing[previews])['report_lines'])[0])['total_credit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                                <t t-foreach="cf_investing" t-as="account">
                                    <tr>
                                        <td style="padding-left: 20px;">
                                            <span>Total cash flow from investing and extraordinary activities</span>
                                        </td>
                                        <t t-foreach="list_previews" t-as="previews">
                                            <td class="text-right">
                                                <span t-esc="(((list_cf_investing[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                                <tr>
                                    <th>Cash flow from financing activities</th>
                                    <th></th>
                                </tr>  
                                <t t-foreach="cf_finance" t-as="account">
                                    <tr>
                                        <td style="padding-left: 20px;">
                                            <span>Cash In</span>
                                        </td>
                                        <t t-foreach="list_previews" t-as="previews">
                                            <td class="text-right">
                                                <span t-esc="(((list_cf_finance[previews])['report_lines'])[0])['total_debit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                                <t t-foreach="cf_finance" t-as="account">
                                    <tr>
                                        <td style="padding-left: 20px;">
                                            <span>Cash out</span>
                                        </td>
                                        <t t-foreach="list_previews" t-as="previews">
                                            <td class="text-right">
                                                <span t-esc="(((list_cf_finance[previews])['report_lines'])[0])['total_credit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                                <t t-foreach="cf_finance" t-as="account">
                                    <tr>
                                        <td style="padding-left: 20px;">
                                            <span>Total cash flow from financing activities</span>
                                        </td>
                                        <t t-foreach="list_previews" t-as="previews">
                                            <td class="text-right">
                                                <span t-esc="(((list_cf_finance[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>

                                <t t-if="len(cf_unclass) > 0">
                                    <tr>
                                        <th>Cash flow from unclassified activities</th>
                                        <th></th>
                                    </tr>  
                                    <t t-foreach="cf_unclass" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span>Cash In</span>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_cf_unclass[previews])['report_lines'])[0])['total_debit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <t t-foreach="cf_unclass" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span>Cash out</span>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_cf_unclass[previews])['report_lines'])[0])['total_credit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <t t-foreach="cf_unclass" t-as="account">
                                        <tr>
                                            <td style="padding-left: 20px;">
                                                <span>Total cash flow from unclassified activities</span>
                                            </td>
                                            <t t-foreach="list_previews" t-as="previews">
                                                <td class="text-right">
                                                    <span t-esc="(((list_cf_unclass[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                </t>
                                <tr>
                                    <th>Net increase in cash and cash equivalents</th>
                                    <th></th>
                                </tr>  
                                <t t-foreach="sum_all_cf_statement" t-as="account">
                                    <tr>
                                        <td style="padding-left: 20px;">
                                            <span t-esc="account['month_part']"/>
                                        </td>
                                        <t t-foreach="list_previews" t-as="previews">
                                            <td class="text-right">
                                                <span t-esc="(((list_sum_all_cf_statement[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                                <tr>
                                    <th>Cash and cash equivalents</th>
                                    <th></th>
                                </tr>  
                                <t t-foreach="cf_beginning_period" t-as="account">
                                    <tr>
                                        <td style="padding-left: 20px;">
                                            <span t-esc="account['month_part']"/>
                                        </td>
                                        <t t-foreach="list_previews" t-as="previews">
                                            <td class="text-right">
                                                <span t-esc="(((list_cf_beginning_period[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                                <t t-foreach="cf_closing_period" t-as="account">
                                    <tr>
                                        <td style="padding-left: 20px;">
                                            <span t-esc="account['month_part']"/>
                                        </td>
                                        <t t-foreach="list_previews" t-as="previews">
                                            <td class="text-right">
                                                <span t-esc="(((list_cf_closing_period[previews])['report_lines'])[0])['total_balance']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                    <br></br>
                </div>
            </t>
        </t>
    </template>

    <record id="action_print_cash_flow" model="ir.actions.report">
        <field name="name">cash_flow_statement</field>
        <field name="model">account.cash.flow.statement</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">equip3_accounting_reports.cash_flow_statement</field>
        <field name="report_file">equip3_accounting_reports.cash_flow_statement</field>
    </record>
</odoo>