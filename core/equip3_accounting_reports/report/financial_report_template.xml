<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="equip3_accounting_reports.balance_sheet">
        <t t-call="web.html_container">
            <t t-call="web.internal_layout">
                <t t-set="data_report_margin_top" t-value="12"/>
                <t t-set="data_report_header_spacing" t-value="9"/>
                <t t-set="data_report_dpi" t-value="110"/>
                <div class="page">
                    <h3>
                        <span t-esc="Filters.get('company_name')"/>
                    </h3>
                    <h4>
                        <span t-esc="report_name"/>
                    </h4>
                    <br></br>

                    <div>
                        <strong>Accrual Basis : <t t-esc="Filters['target_move']"/> Entry</strong>
                    </div>
                    <table class="table table-sm table-reports">
                        <thead>
                            <t t-if="entities_comparison == 'on'">
                                <tr>
                                    <th colspan="6" class="table_header_row"></th>
                                    <t t-foreach="curr_list" t-as="curr">
                                        <t t-foreach="comp_names" t-as="comp_name">
                                            <th class="table_detail_row" t-att-colspan="tot_column" style="text-align: center;">
                                                <t t-esc="comp_name"/>
                                            </th>
                                        </t>
                                    </t>
                                </tr>
                            </t>
                            <tr>
                                <th colspan="6" class="table_header_row"></th>
                                <t t-foreach="curr_list" t-as="curr">
                                    <t t-foreach="comp_names" t-as="comp_name">
                                        <t t-foreach="years_preview" t-as="preview">
                                            <t t-if="budget == 'on'">
                                                <th class="table_detail_row" colspan="2" style="text-align: center;"><t t-esc="preview"/></th>
                                            </t>
                                            <t t-elif="debit_credit == 'on'">
                                                <th class="table_detail_row" colspan="3" style="text-align: center;"><t t-esc="preview"/></th>
                                            </t>
                                            <t t-else="">
                                                <th class="table_detail_row" style="text-align: right;"><t t-esc="preview"/></th>
                                            </t>
                                        </t>
                                        <t t-if="len(years_preview) == 2">
                                            <th class="table_detail_row" style="text-align:right; min-width:50px !important;">%</th>
                                        </t>
                                    </t>
                                </t>
                            </tr>
                            <t t-if="budget == 'on'">
                                <tr>
                                    <th colspan="6" class="table_header_row"></th>
                                    <t t-foreach="curr_list" t-as="curr">
                                        <t t-foreach="comp_names" t-as="comp_name">
                                            <t t-foreach="years_preview" t-as="preview">
                                                <th class="table_detail_row" style="text-align: right;">Planned Amount</th>
                                                <th class="table_detail_row" style="text-align: right;">Actual Amount</th>
                                            </t>
                                        </t>
                                    </t>
                                </tr>
                            </t>
                            <t t-elif="debit_credit == 'on'">
                                <tr>
                                    <th colspan="6" class="table_header_row"></th>
                                    <t t-foreach="curr_list" t-as="curr">
                                        <t t-foreach="comp_names" t-as="comp_name">
                                            <t t-foreach="years_preview" t-as="preview">
                                                <th class="table_detail_row" style="text-align: right;">Debit</th>
                                                <th class="table_detail_row" style="text-align: right;">Credit</th>
                                                <th class="table_detail_row" style="text-align: right;">Balance</th>
                                            </t>
                                        </t>
                                    </t>
                                </tr>
                            </t>
                        </thead>
                        <tbody>
                            <t t-foreach="bs_lines" t-as="a">
                            <t t-if="'code' in a">
                                <t t-set="style" t-value="'padding: 5px;padding-left: 25px;'"/>
                                <t t-set="fr_head" t-value="'text-align: left !important;'"/>
                                <t t-set="fr_padding" t-value="'padding-top: 5px;padding-right: 50px; vertical-align: bottom;text-align: right !important;'"/>
                                <t t-if="a['level'] == 1">
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 15px; padding-top: 15px;'"/>
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 15px; padding-top: 15px;text-align: left !important;'"/>
                                    <t t-if="'total_value' in a">
                                        <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 15px; vertical-align: top;'"/>
                                        <t t-set="style" t-value="'padding: 5px;padding-left: 15px; vertical-align: top;text-align: left !important;'"/>
                                    </t>
                                </t>
                                <t t-if="a['level'] == 2">
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 25px; padding-top: 25px;'"/>
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 25px; padding-top: 25px;text-align: left !important;'"/>
                                    <t t-if="'total_value' in a">
                                        <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 25px; vertical-align: top;'"/>
                                        <t t-set="style" t-value="'padding: 5px;padding-left: 25px; vertical-align: top;text-align: left !important;'"/>
                                    </t>
                                </t>
                                <t t-if="a['level'] == 3">
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 50px;text-align: left !important;'"/>
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 50px;'"/>
                                </t>
                                <t t-if="a['level'] == 4">
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 65px;text-align: left !important;'"/>
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 65px;'"/>
                                </t>
                                <t t-if="a['level'] == 5">
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 80px;text-align: left !important;'"/>
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 80px;'"/>
                                </t>
                                <t t-if="a['level'] &gt; 5">
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 90px;text-align: left !important;'"/>
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 90px;'"/>
                                </t>
                                <t t-set="common_id" t-value="0"/>
                                <tr class="gl-line">
                                    <td colspan="6" t-att-style="fr_head">
                                        <span>
                                            <t t-esc="a['code']"/>
                                            -
                                            <t t-esc="a['name']"/>
                                        </span>
                                        <div class="" style="display: inline-block;">
                                            <div class="dropdown-menu " role="menu">
                                                <div class="o_foldable_menu o_closed_menu " >
                                                    <div class="form-group ">
                                                        <div class="show-gl" aria-atomic="true" id="" data-target-input="">
                                                            <li role="presentation">
                                                                <a role="menuitem" style="background-color:aqua; font-weight:bold;" t-att-data-account-id="a['id']" class="show-gl" >View General Ledger</a>
                                                            </li>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <t t-foreach="curr_list" t-as="curr">
                                        <t t-foreach="comps_list" t-as="comp_list">
                                            <t t-foreach="(a['rprt_lines'])[curr]" t-as="rprt_lines">
                                                <t t-if="str(comp_list) in rprt_lines">
                                                    <t t-foreach="years_preview" t-as="preview">
                                                        <t t-if="preview in rprt_lines[str(comp_list)]">
                                                            <t t-if="budget == 'on'">
                                                                <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])['planned_amount']" t-att-style="style"/></td>
                                                                <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])['actual_amount']" t-att-style="style"/></td>
                                                            </t>
                                                            <t t-elif="debit_credit == 'on'">
                                                                <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])['debit']" t-att-style="style"/></td>
                                                                <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])['credit']" t-att-style="style"/></td>
                                                                <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])[preview]" t-att-style="style"/></td>
                                                            </t>
                                                            <t t-else="">
                                                                <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])[preview]" t-att-style="style"/></td>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <td t-att-style="fr_padding">
                                                            </td>
                                                        </t>
                                                    </t>
                                                    <t t-if="len(years_preview) == 2">
                                                         <td t-att-style="fr_padding"><t t-esc="rprt_lines['comparison_percentage']" t-att-style="style"/></td>
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </tr>
                            </t>
                            <t t-else="">
                                <t t-set="style" t-value="'padding: 5px;padding-left: 25px;'"/>
                                <t t-set="fr_head" t-value="'text-align: left !important;'"/>
                                <t t-set="fr_padding" t-value="'padding-top: 5px; padding-right: 50px; vertical-align: bottom; text-align: right !important;'"/>
                                <t t-if="a['level'] == 1">
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 15px; padding-top: 15px;'"/>
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 15px; padding-top: 15px;text-align: left !important;'"/>
                                    <t t-if="'total_value' in a">
                                        <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 15px; vertical-align: top;'"/>
                                        <t t-set="style" t-value="'padding: 5px;padding-left: 15px; vertical-align: top;text-align: left !important;'"/>
                                    </t>
                                </t>
                                <t t-if="a['level'] == 2">
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 25px; padding-top: 25px;'"/>
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 25px; padding-top: 25px;text-align: left !important;'"/>
                                    <t t-if="'total_value' in a">
                                        <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 25px; vertical-align: top;'"/>
                                        <t t-set="style" t-value="'padding: 5px;padding-left: 25px; vertical-align: top;text-align: left !important;'"/>
                                    </t>
                                </t>
                                <t t-if="a['level'] == 3">
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 50px;text-align: left !important;'"/>
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 50px;'"/>
                                </t>
                                <t t-if="a['level'] == 4">
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 65px;text-align: left !important;'"/>
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 65px;'"/>
                                </t>
                                <t t-if="a['level'] == 5">
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 80px;text-align: left !important;'"/>
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 80px;'"/>
                                </t>
                                <t t-if="a['level'] &gt; 5">
                                    <t t-set="style" t-value="'padding: 5px;padding-left: 90px;text-align: left !important;'"/>
                                    <t t-set="fr_head" t-value="'text-align: left !important;padding: 5px;padding-left: 90px;'"/>
                                </t>
                                <t t-set="common_id" t-value="0"/>
                                <tr>
                                    <th colspan="6" t-att-style="fr_head">
                                        <t t-esc="a['name']"/>
                                    </th>
                                    <t t-foreach="curr_list" t-as="curr">
                                        <t t-foreach="comps_list" t-as="comp_list">
                                            <t t-if="len((a['rprt_lines'])[curr]) &gt; 0">
                                                <t t-foreach="(a['rprt_lines'])[curr]" t-as="rprt_lines">
                                                    <t t-if="str(comp_list) in rprt_lines">
                                                        <t t-foreach="years_preview" t-as="preview">
                                                            <t t-if="preview in rprt_lines[str(comp_list)]">
                                                                <t t-if="budget == 'on'">
                                                                    <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])['planned_amount']" t-att-style="style"/></td>
                                                                    <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])['actual_amount']" t-att-style="style"/></td>
                                                                </t>
                                                                <t t-elif="debit_credit == 'on'">
                                                                    <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])['debit']" t-att-style="style"/></td>
                                                                    <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])['credit']" t-att-style="style"/></td>
                                                                    <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])[preview]" t-att-style="style"/></td>
                                                                </t>
                                                                <t t-else="">
                                                                    <td t-att-style="fr_padding"><t t-esc="((rprt_lines[str(comp_list)])[preview])[preview]" t-att-style="style"/></td>
                                                                </t>
                                                            </t>
                                                        </t>
                                                        <t t-if="len(years_preview) == 2">
                                                             <td t-att-style="fr_padding"><t t-esc="rprt_lines['comparison_percentage']" t-att-style="style"/></td>
                                                        </t>
                                                    </t>
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-foreach="comp_names" t-as="comp_name">
                                                    <t t-foreach="years_preview" t-as="preview">
                                                        <t t-if="budget == 'on'">
                                                            <td t-att-style="fr_padding"></td>
                                                            <td t-att-style="fr_padding"></td>
                                                        </t>
                                                        <t t-elif="debit_credit == 'on'">
                                                            <td t-att-style="fr_padding"></td>
                                                            <td t-att-style="fr_padding"></td>
                                                            <td t-att-style="fr_padding"></td>
                                                        </t>
                                                        <t t-else="">
                                                            <td t-att-style="fr_padding"></td>
                                                        </t>
                                                    </t>
                                                    <t t-if="len(years_preview) == 2">
                                                         <td t-att-style="fr_padding"></td>
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </tr>
                            </t>
                        </t>
                        </tbody>
                    </table>
                </div>
            </t>
        </t>
    </template>


    <record id="action_print_balance_sheet" model="ir.actions.report">
            <field name="name">Financial Report</field>
            <field name="model">ctm.dynamic.balance.sheet.report</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">equip3_accounting_reports.balance_sheet</field>
            <field name="report_file">equip3_accounting_reports.balance_sheet</field>
    </record>

</odoo>
