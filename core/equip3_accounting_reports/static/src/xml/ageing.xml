<templates>

    <t t-extend="AgeingFilterView">
        <!-- <t t-jquery="div.time_range" t-operation="replace">
            <div class="btn-group o_dropdown o_account_reports_date-filter mr-3">
                <a type="button" class="dropdown-toggle" data-toggle="dropdown">
                    <span class="fa fa-calendar"/>
                    <t>Date: </t>
                    <span class="date_caret"/>
                </a>
                <ul class="dropdown-menu o_filters_menu o_date_filter" role="menu">
                    <t>
                        <li class="filter_date" title="Today" data-value="today"><a class="dropdown-item">Today</a></li>
                        <li class="filter_date" title="End of Last Month" data-value="last_month"><a class="dropdown-item">End of Last Month</a></li>
                        <li class="filter_date" title="End of Last Quarter" data-value="last_quarter"><a class="dropdown-item">End of Last Quarter</a></li>
                        <li class="filter_date" title="End of Last Year" data-value="last_year"><a class="dropdown-item">End of Last Year</a></li>
                    </t>
                    <div class="o_generator_menu"><button type="button" aria-expanded="false" class="o_add_custom_filter dropdown-item">Custom</button></div>
                    <li class="o_account_reports_custom-dates d-none" data-value='custom' style='margin-top: 5px;'>
                        <div class="o_filter_condition dropdown-item-text">
                            <label class="" for="date_from"><b>As On Date :</b></label>
                            <div class="">
                                <div class="" aria-atomic="true" id="">
                                    <input class="dropdown-item" type="date" id="date_from"></input>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="btn-group o_dropdown o_account_reports_currency-filter mr-3">
                <a type="button" class="dropdown-toggle" data-toggle="dropdown">
                    <span class="fa fa-money"></span>
                    <span>Change Currency: </span>
                    <span class="currency_caret"/>
                </a>
                <ul class="dropdown-menu o_filters_menu o_currency_filter" role="menu">
                    <t t-foreach="currencies" t-as="currency_id">
                        <li class="filter_currency" t-att-id="currency_id['id']" t-att-data-value="currency_id['id']" t-att-title="currency_id['name']">
                            <a class="dropdown-item"><t t-esc="currency_id['name']"/></a>
                        </li>
                    </t>
                </ul>
            </div>
        </t> -->
        <t t-jquery="div.sub_container_left" t-operation="replace">
            <div class="sub_container_left"></div>
        </t>

        <t t-jquery="div.sub_container_right" t-operation="replace">
            <div class="sub_container_right" style="width:50%;height:3%;right:0px;top:0px;position: absolute;">
                <div>
                    <button class="btn btn-primary o_filters_toggler" id="o_equip_filter_dropdown" style="position: absolute; right: 30.63%; top: 17.78%; bottom: 79.17%; height: 30px; padding: 0; width: 20%;">
                        <span style="align-items: center; justify-content: center;"><i class="fa fa-search mr-2" style="font-size: 17px !important;"/></span>
                        <span style="font-size: 17px;">&#160;Filter</span>
                    </button>

                    <div class="filter_content" style="position:relative; top:43px; left:2%; width:67%; display:none; text-align:right; background-color: white; filter: drop-shadow(0px 0px 16px rgba(0, 0, 0, 0.161)); padding: 5px;">
                        <!-- <p style="text-align: center; font-weight: bold; font-size: 15px !important; ">Filter Option</p>
                        <hr /> -->
                        <div style="text-align:center;">
                            <button type="button" id="apply_filter" class="btn btn-primary" style="padding: 0; height: 25px; width: 25%;"
                            >
                                Apply
                            </button>
                        </div>
                        <br />

                        <div class="time_range" style="">
                            <div class="btn-group o_account_reports_date-filter" style="width:100%;">
                                <a type="button" class="dropdown-toggle dropdown-item" data-toggle="dropdown" style="width:100%;">
                                    <span class="fa fa-calendar filter-content" style="float: left;"></span>
                                    <span class="filter-content" style="float: left;">&#160;Date: </span>
                                    <span class="date_caret"/>
                                </a>
                                <ul class="dropdown-menu o_filters_menu o_date_filter" role="menu" style="width:100%;">
                                    <t>
                                        <li class="filter_date" title="Today" data-value="today"><a class="dropdown-item">Today</a></li>
                                        <li class="filter_date" title="End of Last Month" data-value="last_month"><a class="dropdown-item">End of Last Month</a></li>
                                        <li class="filter_date" title="End of Last Quarter" data-value="last_quarter"><a class="dropdown-item">End of Last Quarter</a></li>
                                        <li class="filter_date" title="End of Last Year" data-value="last_year"><a class="dropdown-item">End of Last Year</a></li>
                                    </t>
                                    <div class="o_generator_menu"><button type="button" aria-expanded="false" class="o_add_custom_filter dropdown-item">Custom</button></div>
                                    <li class="o_account_reports_custom-dates d-none" data-value='custom' style='margin-top: 5px;'>
                                        <div class="o_filter_condition dropdown-item-text">
                                            <label class="" for="date_from"><b>As On Date :</b></label>
                                            <div class="">
                                                <div class="" aria-atomic="true" id="">
                                                    <input class="dropdown-item" type="date" id="date_from"></input>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="btn-group o_account_reports_currency-filter" style="width:100%;">
                            <a type="button" class="dropdown-toggle dropdown-item" data-toggle="dropdown" style="width:100%;">
                                <span class="fa fa-money filter-content" style="float: left;"></span>
                                <span class="filter-content" style="float: left;">&#160;Currency: </span>
                                <span class="currency_caret"/>
                            </a>
                            <ul class="dropdown-menu o_filters_menu o_currency_filter" role="menu" style="width:100%;">
                                <t t-foreach="currencies" t-as="currency_id">
                                    <li class="filter_currency" t-att-id="currency_id['id']" t-att-data-value="currency_id['id']" t-att-title="currency_id['name']">
                                        <a class="dropdown-item"><t t-esc="currency_id['name']"/></a>
                                    </li>
                                </t>
                            </ul>
                        </div>

                        <div class="acccount_type_filter" style="width:100%;">
                            <a type="button" class="dropdown-toggle dropdown-item" data-toggle="dropdown" style="width:100%;">
                                <span class="fa fa-book filter-content" style="float: left;"></span>
                                <span class="filter-content" style="float: left;">&#160;Account Type: </span>
                                <span id="account_res"></span>
                            </a>
                            <select id="selection" class="dropdown-menu result_selection" name="states[]" style="width:100%;">
                                <div role="separator" class="dropdown-divider"></div>
                                <option value="customer_supplier">Receivable and Payable Accounts</option>
                                <option value="customer">Receivable Accounts</option>
                                <option value="supplier">Payable Accounts</option>
                            </select>
                        </div>

                        <div class="partner_filter" style="width:100%;">
                            <a type="button" class="dropdown-toggle dropdown-item" data-toggle="dropdown" style="width:100%;">
                                <span class="fa fa-users filter-content" style="float: left;"></span>
                                <span class="filter-content" style="float: left;">&#160;Partners: </span>
                                <span id="partner_res"></span>
                            </a>
                            <select class="dropdown-menu partners" name="states[]" multiple="multiple" style="width:100%;">
                                <t t-foreach="filter_data.partners_list" t-as="partner">
                                    <option t-attf-value="{{partner[0]}}">
                                        <t t-esc="partner[1]"/>
                                    </option>
                                </t>
                            </select>
                        </div>

                        <div class="category_filter" style="width:100%;">
                            <a type="button" class="dropdown-toggle dropdown-item" data-toggle="dropdown" style="width:100%;">
                                <span class="fa fa-filter filter-content" style="float: left;"></span>
                                <span class="filter-content" style="float: left;">&#160;Partner tag: </span>
                                <span id="category_res"></span>
                            </a>
                            <select class="dropdown-menu category" name="states[]" multiple="multiple" style="width:100%;">
                                <t t-foreach="filter_data.category_list" t-as="category">
                                    <option t-attf-value="{{category[0]}}">
                                        <t t-esc="category[1]"/>
                                    </option>
                                </t>
                            </select>
                        </div>

                        <div class="search-Target-move" style="width:100%; display: none;">
                            <a type="button" class="dropdown-toggle dropdown-item" data-toggle="dropdown" style="width:100%;">
                                <span class="fa fa-filter filter-content" style="float: left;"></span>
                                <span class="filter-content" style="float: left;">&#160;Target Move: </span>
                                <span id="post_res"></span>
                            </a>
                            <select id="entries" class="dropdown-menu target_move" name="states[]" style="width:100%;">
                                <div role="separator" class="dropdown-divider"></div>
                                <option value="Posted">Posted Entries</option>
                                <option value="All">All Entries</option>
                            </select>
                        </div>

                        <div class="long_aging_filter" style="width:100%;">
                            <a type="button" class="dropdown-toggle dropdown-item" data-toggle="dropdown" style="width:100%;">
                                <span class="fa fa-filter filter-content" style="float: left;"></span>
                                <span class="filter-content" style="float: left;">&#160;Long Aging: </span>
                                <span id="long_aging_res"></span>
                            </a>
                            <div class="dropdown-menu long_aging" style="width:100%;">
                                <span class="">Number of Interval</span>
                                <input type="number" id="long_aging_input" value="30" pattern="[1-9]\d*" min="1" class="o_input"/>
                            </div>
                        </div>

                        <div class="section_filter" style="width:100%;">
                            <a type="button" class="dropdown-toggle dropdown-item" data-toggle="dropdown" style="width:100%;">
                                <span class="fa fa-filter filter-content" style="float: left;"></span>
                                <span class="filter-content" style="float: left;">&#160;Section: </span>
                                <span id="section_res"></span>
                            </a>
                            <div class="dropdown-menu section" style="width:100%;">
                                <span class="">Number of Section</span>
                                <input type="number" id="section_input" value="4" pattern="[1-9]\d*" min="1" class="o_input"/>
                            </div>
                        </div>

                        <div class="branch_filter" style="width:100%;">
                            <a type="button" class="dropdown-toggle dropdown-item" data-toggle="dropdown" style="width:100%;">
                                <span class="fa fa-users filter-content" style="float: left;"></span>
                                <span class="filter-content" style="float: left;">&#160;Branch: </span>
                                <span id="branch_res"></span>
                            </a>
                            <select class="dropdown-menu branchs " name="states[]" multiple="multiple" style="width:100%;">
                                <t t-foreach="filter_data.branch_list" t-as="branch">
                                    <option t-attf-value="{{branch[0]}}">
                                        <t t-esc="branch[1]"/>
                                    </option>
                                </t>
                            </select>
                        </div>

                        <!-- <div style="text-align:center;">
                            <button type="button" id="apply_filter" class="btn btn-primary" style="padding: 0; height: 25px; width: 25%;"
                            >
                                Apply
                            </button>
                        </div> -->
                    </div>
                    <button type="button" class="btn btn-primary" id="pdf"
                            style="position: absolute; right: 15.63%; top: 17.78%; bottom: 79.17%; height: 30px;">
                        PDF
                    </button>
                    <button type="button" class="btn btn-primary" id="xlsx"
                            style="position: absolute; right: 3.42%; top: 17.78%; bottom: 79.17%; height: 30px;">
                        XLSX
                    </button>
                </div>
            </div>

            <br /> <br /> <hr />

            <div class="active-filter" style="margin-left: 2%; display: none;">
                <style>
                    .a-active-filter {
                        border: 1px solid black; 
                        border-radius: 25px; 
                        padding: 0 10px 0 10px; 
                        margin-right:5px;
                        display: none;
                    }
                </style>

                <span class="fa fa-circle" style="color: lightgreen;"></span>
                <span class="">&#160;Active filter</span>
                <br />

                <a class="date-filter a-active-filter">
                    <span class="fa fa-calendar"/>
                    <t>Date: </t>
                    <span class="date_caret"/>
                </a>

                <a class="currency-filter a-active-filter">
                    <span class="fa fa-money"></span>
                    Currency:
                    <span class="currency_caret"></span>
                </a>

                <a class="account-type-filter a-active-filter">
                    <span class="fa fa-book"></span>
                    <span>Account Type: </span>
                    <span id="account_res"></span>
                </a>

                <a class="partners-filter a-active-filter">
                    <span class="fa fa-users"></span>
                    Partners:
                    <span id="partner_res"></span>
                </a>

                <a class="partner-tag-filter a-active-filter">
                    <span class="fa fa-filter"></span>
                    <span>Partner tag: </span>
                    <span id="category_res"></span>
                </a>

                <a class="target-move-filter a-active-filter">
                    <span class="fa fa-filter"></span>
                    <span>Target Move: </span>
                    <span id="post_res"></span>
                </a>

                <a class="long-aging-filter a-active-filter">
                    <span class="fa fa-filter"></span>
                    <span>Long Aging: </span>
                    <span id="long_aging_res"></span>
                </a>

                <a class="section-filter a-active-filter">
                    <span class="fa fa-filter"></span>
                    <span>Section: </span>
                    <span id="section_res"></span>
                </a>

                <a class="branchs-filter a-active-filter">
                    <span class="fa fa-filter"></span>
                    <span>Branchs: </span>
                    <span id="branch_res"></span>
                </a>
            </div>
            <br />
            <div class="clear-filter" style="margin-left: 2%; display: none;">
                <style>
                    .btn-clear-filter {
                        border: 1px solid black !important; 
                        border-radius: 25px !important; 
                        padding: 0 10px 0 10px; 
                        margin-right:5px;
                        color: white !important;
                        background-color: #707070 !important;
                    }
                </style>

                <button class="btn-clear-filter btn-secondary">
                    <t>Clear All Filter</t>
                </button>
            </div>
        </t>
    </t>

    <t t-extend="Ageingtable">
        <t t-jquery="div.table_main_view" t-operation="replace">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">
                    <thead class="tbl_report_title">
                        <tr>
                            <th colspan="6" style="width: 20%;">Partner</th>
                            <th class="mon_fld">Not Due</th>

                            <t t-set="first_period" t-value="0"/>
                            <t t-set="second_period" t-value="period_length"/>

                            <t t-foreach="section_list" t-as="item">
                                <t t-if="item != 0">
                                    <th class="mon_fld" style="width: 11%;">
                                        <t t-if="first_period == 0">
                                            1-<t t-esc="second_period"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="first_period"/>-<t t-esc="second_period"/>
                                        </t>                                        
                                    </th>

                                    <t t-set="first_period" t-value="first_period+period_length"/>
                                    <t t-set="second_period" t-value="second_period+period_length"/>
                                </t>
                                <t t-else="">
                                    <th class="mon_fld" style="width: 11%;">
                                        <t t-esc="first_period"/>+
                                    </th>
                                </t>
                            </t>
                            <th class="mon_fld" style="width: 13%;">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="none_value" t-value="_"/>
                        <t t-foreach="report_lines[0]" t-as="account">


                            <t t-set="common_id" t-value="0"/>

                            <tr style="border: 0.5px solid #deb9b9;" class="gl-line collapsed"
                                data-toggle="collapse"
                                t-att-data-account-id="account['partner_id']"
                                t-attf-data-target=".a{{account['partner_id']}}">
                                <td colspan="6" style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img" aria-label="Unfolded" title="Unfolded"></i>

                                    <span>

                                        <t t-esc="account['name']"/>
                                    </span>
                                    <t t-if="currency[1] == 'before'">
                                        <td style="text-align:right;">
                                            <t t-if="account['direction'] == 0">
                                                <span>-</span>
                                            </t>
                                            <t t-else="">
                                                <t t-esc="currency[0]"/>
                                                <t t-esc="account['direction']"/>
                                            </t>

                                        </td>
                                        <t t-foreach="section_list" t-as="item">
                                            <td style="text-align:right;">
                                                <t t-if="account[item] == 0">
                                                    <span>-</span>
                                                </t>
                                                <t t-else="">
                                                    <t t-esc="currency[0]"/>
                                                    <t t-esc="account[item]"/>
                                                </t>
                                            </td>
                                        </t>
                                        
                                        <td style="text-align:right;">
                                            <t t-if="account['total'] == 0">
                                                <span>-</span>
                                            </t>
                                            <t t-else="">
                                                <t t-esc="currency[0]"/>
                                                <t t-esc="account['total']"/>
                                            </t>
                                        </td>
                                    </t>
                                    <t t-else="">
                                        <td style="text-align:right;">
                                            <t t-if="account['direction'] == 0">
                                                <span>-</span>
                                            </t>
                                            <t t-else="">
                                                <t t-esc="account['direction']"/>
                                                <t t-esc="currency[0]"/>
                                            </t>
                                        </td>
                                        
                                        <t t-foreach="section_list" t-as="item">
                                            <td style="text-align:right;">
                                                <t t-if="account[item] == 0">
                                                    <span>-</span>
                                                </t>
                                                <t t-else="">
                                                    <t t-esc="account[item]"/>
                                                    <t t-esc="currency[0]"/>
                                                </t>
                                            </td>
                                        </t>

                                        <td style="text-align:right;">
                                            <t t-if="account['total'] == 0">
                                                <span>-</span>
                                            </t>
                                            <t t-else="">
                                                <t t-esc="account['total']"/>
                                                <t t-esc="currency[0]"/>
                                            </t>
                                        </td>

                                    </t>
                                </td>
                                <tr t-attf-class="collapse a{{account['partner_id']}}">
                                    <t t-set="tot_column" t-value="section_num + 10" />
                                    <td t-att-colspan="tot_column">
                                        <ul>

                                        </ul>
                                    </td>
                                </tr>
                            </tr>
                        </t>
                        <tr>
                            <th colspan="6">Total</th>
                            <t t-if="currency[1] == 'before'">
                                <th class="mon_fld">
                                    <t t-esc="currency[0]"/>
                                    <t t-esc="report_lines[1][6]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="currency[0]"/>
                                    <t t-esc="report_lines[1][4]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="currency[0]"/>
                                    <t t-esc="report_lines[1][3]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="currency[0]"/>
                                    <t t-esc="report_lines[1][2]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="currency[0]"/>
                                    <t t-esc="report_lines[1][1]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="currency[0]"/>
                                    <t t-esc="report_lines[1][0]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="currency[0]"/>
                                    <t t-esc="report_lines[1][5]"/>
                                </th>
                            </t>
                            <t t-else="">
                                <th class="mon_fld">
                                    <t t-esc="report_lines[1][6]"/>
                                    <t t-esc="currency[0]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="report_lines[1][4]"/>
                                    <t t-esc="currency[0]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="report_lines[1][3]"/>
                                    <t t-esc="currency[0]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="report_lines[1][2]"/>
                                    <t t-esc="currency[0]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="report_lines[1][1]"/>
                                    <t t-esc="currency[0]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="report_lines[1][0]"/>
                                    <t t-esc="currency[0]"/>
                                </th>
                                <th class="mon_fld">
                                    <t t-esc="report_lines[1][5]"/>
                                    <t t-esc="currency[0]"/>
                                </th>
                            </t>
                        </tr>
                    </tbody>
                </table>
            </div>
        </t>
    </t>

    <t t-extend="SubSectional">
        <t t-jquery="div.gl-table-div" t-operation="replace">
            <div class="gl-table-div">
                <table class="table table-sm o_main_table"
                       style="border: 0px solid black;display compact;">
                    <thead>
                        <tr style="">
                            <th style="width: 12%;">Entry Label</th>
                            <th style="width: 5%;">DueDate</th>
                            <!-- <th>JRNL</th> -->
                            <!-- <th>Account</th> -->
                            <th class="mon_fld" style="width: 15%;">Not Due</th>

                            <t t-set="first_period" t-value="0"/>
                            <t t-set="second_period" t-value="period_length"/>

                            <t t-foreach="section_list" t-as="item">
                                <t t-if="item != 0">
                                    <th class="mon_fld" style="width: 11%;">
                                        <t t-if="first_period == 0">
                                            1-<t t-esc="second_period"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="first_period"/>-<t t-esc="second_period"/>
                                        </t>
                                    </th>

                                    <t t-set="first_period" t-value="first_period+period_length"/>
                                    <t t-set="second_period" t-value="second_period+period_length"/>
                                </t>
                                <t t-else="">
                                    <th class="mon_fld" style="width: 11%;"><t t-esc="first_period"/>+</th>
                                </t>
                            </t>
                            <th class="mon_fld" style="width: 12.5%;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="account_data" t-as="account_line">
                            <tr>
                                <td>
                                    <t t-if="account_line.mov_id">
                                        <div class="dropdown dropdown-toggle">
                                            <a data-toggle="dropdown" href="#">
                                                <span class="caret"></span>
                                                <span>
                                                    <t t-esc="account_line.move"/>
                                                </span>
                                            </a>
                                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                                                <li>
                                                    <a class="view-account-move" tabindex="-1" href="#"
                                                       t-att-data-move-id="account_line.mov_id">
                                                        View Source move

                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </t>
                                </td>
                                <td>
                                    <t t-esc="account_line.date"/>
                                </td>
                                <!-- <td>
                                    <t t-esc="account_line.jrnl"/>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="account_line.acc_code"/>
                                        -
                                        <t t-esc="account_line.acc_name"/>
                                    </span>
                                </td> -->
                                <t t-if="account_line.currency== 'before'">
                                    <t t-foreach="section_sub_list" t-as="item">
                                        <td class="mon_fld">
                                            <t t-if="account_line[item]">
                                                <t t-if="account_line.amount== 0">
                                                    <span>-</span>
                                                </t>
                                                <t t-else="">
                                                    <t t-esc="account_line.symbol"/>
                                                    <t t-esc="account_line.amount_format_currency"/>
                                                </t>

                                            </t>
                                            <t t-else="">
                                                <span>-</span>
                                            </t>
                                        </td>
                                    </t>
                                </t>
                                <t t-else="">
                                    <t t-foreach="section_sub_list" t-as="item">
                                        <td class="mon_fld">
                                            <t t-if="account_line[item]">
                                                <t t-if="account_line.amount == 0">
                                                    <span>-</span>
                                                </t>
                                                <t t-else="">
                                                    <t t-esc="account_line.amount_format_currency"/>
                                                    <t t-esc="account_line.symbol"/>
                                                </t>
                                            </t>
                                        </td>
                                    </t>
                                </t>
                                <td class="mon_fld"></td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>
    </t>    
</templates>
