<?xml version='1.0' encoding='utf-8'?>
<odoo>

    <!-- progressive.claim pivot view -->
    <!-- <record id="progressive_claim_view_pivot" model="ir.ui.view">
        <field name="name">progressive.claim.view.pivot</field>
        <field name="model">progressive.claim</field>
        <field name="arch" type="xml">
            <pivot string="Progressive Claim">
                <field name="project_id" type="row" groupby="True"/>
                <field name="name" string="Progressive Claim" type="row" context="{'group_by':'project_id'}"/>
                <field name="claim_ids" type="row" context="{'group_by':'claim_id'}" options="{'widget': 'many2many_tags'}"/>

                <field name="percentage_actual_progress" string="Actual Progress (%)" type="measure" widget="percentage"/>
                <field name="percentage_approved_progress" string="Approved Progress (%)" type="measure" widget="percentage"/>
                <field name="percentage_invoiced_progress" string="Invoiced Progress (%)" type="measure" widget="percentage"/>
                <field name="total_tax_amount" type="measure"/>
                <field name="total_invoice" type="measure"/>
                <field name="total_claim" type="measure"/>
                <field name="remaining_amount" type="measure"/>

                removed from measure options
                <field name="down_payment" string="Down Payment (%)" type="measure" invisible="1"/>
                <field name="retention1" string="Retention 1 (%)" type="measure" invisible="1"/>
                <field name="retention2" string="Retention 2 (%)" type="measure" invisible="1"/>
                <field name="actual_progress" type="measure" invisible="1"/>
                <field name="approved_progress" type="measure" invisible="1"/>
                <field name="invoiced_progress" type="measure" invisible="1"/>
                <field name="progressive_bill" invisible="1"/>

                removed from row '+' options 
                <field name="access_token" type="row" invisible="1"/>
                <field name="company_id" type="row" invisible="1"/>
                <field name="company_currency_id" type="row" invisible="1"/>
                <field name="create_uid" type="row" invisible="1"/>
                <field name="complete_progress" type="row" invisible="1"/>
                <field name="repeat_on_month" type="row" invisible="1"/>
                <field name="repeat_week" type="row" invisible="1"/>
                <field name="repeat_day" type="row" invisible="1"/>
                <field name="repeat_weekday" type="row" invisible="1"/>
                <field name="repeat_time" type="row" invisible="1"/>
                <field name="medium_id" type="row" invisible="1"/>
                <field name="project_director" type="row" invisible="1"/>
                <field name="start_date" type="row" invisible="1"/>
                <field name="end_date" type="row" invisible="1"/>
                <field name="start_month" type="row" invisible="1"/>
                <field name="start_year" type="row" invisible="1"/>
                <field name="rent2_invoice" type="row" invisible="1"/>
                <field name="campaign_id" type="row" invisible="1"/>
                <field name="source_id" type="row" invisible="1"/>
                <field name="payment_term" type="row" invisible="1"/>
                <field name="is_create_automatically" type="row" invisible="1"/>
                <field name="write_uid" type="row" invisible="1"/>
                <field name="write_date" type="row" invisible="1"/>
                <field name="dp_method" type="row" invisible="1"/>
                <field name="partner_invoice_id" type="row" invisible="1"/>
                <field name="start_date_year" type="row" invisible="1"/>
                <field name="end_date_year" type="row" invisible="1"/>
                <field name="message_main_attachment_id" type="row" invisible="1"/>
                <field name="state" type="row" invisible="1"/>
                <field name="is_set_custom_claim" type="row" invisible="1"/>
                <field name="contract_parent" type="row" invisible="1"/>
                <field name="contract_parent_po" type="row" invisible="1"/>
            </pivot>
        </field>
    </record> -->

    <!-- progressive.claim pivot view -->
    <record id="progressive_claim_view_pivot" model="ir.ui.view">
        <field name="name">progressive.claim.view.pivot</field>
        <field name="model">project.claim</field>
        <field name="arch" type="xml">
            <pivot string="Progressive Claim">
                <!-- <field name="project_id" type="row" groupby="True"/> -->
                <!-- <field name="progressive_claim_name" string="Progressive Claim" type="row" context="{'group_by':'project_id'}"/>\ -->
                <!-- <field name="progressive_bill"/> -->
                <field name="department_type" invisible="1"/>
                <field name="progressive_project_id" type="row" groupby="True"/>
                <field name="claim_id" type="row" groupby="True"/>
                <field name="invoice_id"/>
                <field name="claim_name" type="row" context="{'group_by':'claim_id'}"/>

                <field name="progressline" type="measure"/>
                <field name="gross_amount" type="measure"/>
                <field name="dp_deduction" type="measure"/>
                <field name="retention_deduction" type="measure"/>
                <field name="amount_deduction" type="measure"/>
                <field name="amount_untaxed" type="measure"/>
                <field name="tax_amount" type="measure"/>
                <field name="amount_invoice" type="measure" string="Amount"/>
                <field name="amount_claim" type="measure"/>
                <field name="remaining_amount" type="measure"/>

            </pivot>
        </field>
    </record>

    <record id="progressive_claim_customer_report_action" model="ir.actions.act_window">
        <field name="name">Progressive Claim Report</field>
        <field name="res_model">project.claim</field>
        <field name="view_mode">pivot</field>
        <field name="domain">[('progressive_bill', '=', False), ('department_type', '=', 'project')]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No Progressive Claim Report found. Let's create one!
            </p>
        </field>
    </record>
    
    <record id="progressive_claim_subcon_report_action" model="ir.actions.act_window">
        <field name="name">Progressive Claim Report</field>
        <field name="res_model">project.claim</field>
        <field name="view_mode">pivot</field>
        <field name="domain">[('progressive_bill', '=', True), ('department_type', '=', 'project')]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No Progressive Claim Report found. Let's create one!
            </p>
        </field>
    </record>


    <menuitem id="menu_progressive_claim_report" sequence="6"
          name="Progressive Claim" parent="menu_cons_reporting"/>

    <!-- This Menu Item Must have a parent -->
    <menuitem id="progressive_claim_report_menu_customer"
        name="Progressive Claim Customer"
        parent="menu_progressive_claim_report"
        action="progressive_claim_customer_report_action"
        groups="abs_construction_management.group_construction_manager"
        sequence="1"/>

    <!-- This Menu Item Must have a parent -->
    <menuitem id="progressive_claim_report_menu_subcon"
        name="Progressive Claim Subcon"
        parent="menu_progressive_claim_report"
        groups="abs_construction_management.group_construction_manager"
        action="progressive_claim_subcon_report_action"
        sequence="2"/>

    <!-- <record id="progressive_claim_customer_report_action_internal" model="ir.actions.act_window">
        <field name="name">Progressive Claim Report</field>
        <field name="res_model">project.claim</field>
        <field name="view_mode">pivot</field>
        <field name="domain">[('progressive_bill', '=', False), ('department_type', '=', 'department')]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No Progressive Claim Report found. Let's create one!
            </p>
        </field>
    </record> -->
    
    <record id="progressive_claim_subcon_report_action_internal" model="ir.actions.act_window">
        <field name="name">Progressive Claim Report</field>
        <field name="res_model">project.claim</field>
        <field name="view_mode">pivot</field>
        <field name="domain">[('progressive_bill', '=', True), ('department_type', '=', 'department')]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No Progressive Claim Report found. Let's create one!
            </p>
        </field>
    </record>

    <!-- <menuitem id="menu_progressive_claim_report_internal" sequence="6"
          name="Progressive Claim" parent="menu_cons_reporting_internal"/> -->

    <!-- This Menu Item Must have a parent -->
    <!-- <menuitem id="progressive_claim_report_menu_customer_internal"
        name="Progressive Claim Customer"
        parent="menu_progressive_claim_report_internal"
        action="progressive_claim_customer_report_action_internal"
        sequence="1"/> -->

    <!-- This Menu Item Must have a parent -->
    <menuitem id="progressive_claim_report_menu_subcon_internal"
        name="Progressive Claim Subcon"
        parent="menu_cons_reporting_internal"
        groups="abs_construction_management.group_construction_manager"
        action="progressive_claim_subcon_report_action_internal"
        sequence="6"/>

</odoo>
