<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record model="ir.ui.view" id="view_task_form2_inherited_ip">
        <field name="name">project.task.form.inherited</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2" />
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                <button type="object" name="action_task_start"  string="  Start" class="btn-success fa fa-play" attrs="{'invisible': [('status', '!=', 'stop')]}"/>
                <button name="button_finish" type="object" string="  Stop" class="btn-danger fa fa-stop" attrs="{'invisible': [('status', '!=', 'start')]}"/>
            </xpath>
            <xpath expr="//notebook/page[@name='extra_info']" position="after">
                <page string="Time Tracking">
                    <field name="status" class="oe_inline" invisible="1"/>
                    <field name="work_id" mode="tree" readonly="1">
                        <tree editable="bottom">
                            <field name = "user_id" readonly="1"/>
                            <field name = "start_date" readonly="1"/>
                            <field name = "end_date" readonly="1"/>
                            <field name = "description" readonly="1"/>
                            <field name = "duration" readonly="1" widget="timesheet_uom" sum="Total"/>
                        </tree>
                        <form>
                            <sheet>
                                <group>
                                    <group>
                                        <field name="user_id"/>
                                        <field name="start_date"/>
                                        <field name="end_date"/>
                                    </group>
                                    <group>
                                        <field name="description"/>
                                        <field name="duration"/>
                                    </group>
                                </group>
                            </sheet>
                            <footer>
                                <button special="cancel" string="Cancel"/>   
                            </footer>
                         </form>
                    </field>
                </page>
            </xpath>
        </field>
    </record>

    <record id="view_task_kanban_inherited_progress_ip" model="ir.ui.view">
        <field name="name">project.task.timesheet.kanban.inherited.progress.ip</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_kanban"/>
        <field name="arch" type="xml">
            <templates position="before">
                <field name="status"/>
                <field name ="task_color"/>
                <field name ="company_id"/>
            </templates>
            <xpath expr="//t/div" position="attributes">
                <attribute name="t-att-style">record.status.raw_value == 'start' and 'background-color:'+record.task_color.raw_value or None</attribute>
            </xpath>
            <xpath expr="//div[hasclass('oe_kanban_bottom_left')]" position="inside">
                <a class="fa fa-play" role="button" name="action_task_start" string=" " type="object" attrs="{'invisible': [('status', '!=', 'stop')]}"/> 
                <a class="fa fa-stop" role="button" name="button_finish" string=" " type="object" attrs="{'invisible': [('status', '!=', 'start')]}"/>
            </xpath> 
        </field>
    </record>

    <record id="view_task_tree2_inherited_ip" model="ir.ui.view">
        <field name="name">project.task.tree.inherited.ip</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_tree2" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='stage_id']" position="after">
                <field name="status" invisible="1"/>
                <button type="object" name="action_task_start"  string="Start" class="btn btn-sm btn-success" attrs="{'invisible': [('status', '!=', 'stop')]}"/>
                <button name="button_finish" type="object" string="Stop" class="btn btn-sm btn-danger" attrs="{'invisible': [('status', '!=', 'start')]}"/>
            </xpath>
        </field>
    </record>
</odoo>
               