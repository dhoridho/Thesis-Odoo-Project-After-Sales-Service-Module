<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- dump BoM data for existing MO that already confirmed -->
    <function name="_dump_bom_data" model="mrp.production">
        <value model="mrp.production" eval="obj().search([
            ('bom_data', '=', False),
            ('state', 'not in', ('draft', 'approval', 'approved'))
        ]).ids"/>
    </function>

</odoo>