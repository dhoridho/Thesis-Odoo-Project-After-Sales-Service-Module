<?xml version="1.0"?>
<odoo>
    
    <record id="stock_move_global_wizard_form_view" model="ir.ui.view">
        <field name="name">sh.stock.move.global.check.qc.inherit</field>
        <field name="model">sh.stock.move.global.check</field>
        <field name="inherit_id" ref="sh_inventory_mrp_qc.stock_move_global_wizard_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='text_message']/.." position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='product_id']" position ="after">
                <field name="image_128" widget="image" class="oe_avatar" style="margin-right: -250px; margin-top: 0px;" attrs="{'readonly': [('is_result', '=', True)]}"/>
                <group attrs="{'invisible':[('need_grade', '=', False)]}">
                    <group>
                        <div>
                            <h4>
                            <label for="product_grade_id"/>
                            <field name="product_grade_id" domain="product_grade_id_domain"/>
                            </h4>
                        </div>
                    </group>
                </group>
            </xpath>
            <xpath expr="//field[@name='type']" position="after">
                <field name="type_of_qc" invisible="1"/>
                <field name="is_result" invisible="1"/>
                <field name="is_all_pass" invisible="1"/>
                <field name="is_from_recheck_line" invisible="1"/>
                <field name="recheck_max_number" invisible="1"/>
                <field name="need_grade" invisible="1"/>
                <field name="is_quality_point_grade" invisible="1"/>
                <field name="product_grade_id_domain" invisible="1"/>
                <field name="sh_quality_point_id" invisible="1"/>
            </xpath>
            <xpath expr="//div[2]" position="after">
                <label for="quantitative_line_ids" string="Quantitative" style="margin-top: 40px;" attrs="{'invisible':[('type_of_qc', 'not in', ['quantitative','both'])]}"/>
                <field name="quantitative_line_ids" attrs="{'invisible':[('type_of_qc', 'not in', ['quantitative','both'])], 'readonly':[('is_all_pass', '=', True)]}">
                    <tree create="0" editable="bottom"> 
                        <field name="sequence" readonly="1" force_save="1"/>
                        <field name="dimansion_id" readonly="1" force_save="1"/>
                        <field name="norm_qc" readonly="1" force_save="1"/>
                        <field name="tolerance_from_qc" readonly="1" force_save="1"/>
                        <field name="tolerance_to_qc" readonly="1" force_save="1"/>
                        <field name='is_result' invisible="1"/>
                        <field name="actual_value" attrs="{'required': [('is_result', '=', False)], 'readonly': [('is_result', '=', True)]}"/>
                        <field name="text" attrs="{'readonly': [('is_result', '=', True)]}"/>
                        <field name='status' readonly="1" attrs="{'column_invisible': [('parent.is_result', '=', False)]}" decoration-success="status == 'pass'" decoration-danger="status == 'fail'"/>
                    </tree>
                </field>
                <label for="qualitative_line_ids" string="Qualitatitve" attrs="{'invisible':[('type_of_qc', 'not in', ['qualitative','both'])]}"/>
                <field name="qualitative_line_ids" class="qualitative_line_ids" attrs="{'invisible':[('type_of_qc', 'not in', ['qualitative','both'])], 'readonly':[('is_all_pass', '=', True)]}">
                    <tree create="0" editable="bottom"> 
                        <field name="sequence" readonly="1" force_save="1"/>
                        <field name="item_id" readonly="1" force_save="1"/>
                        <field name='is_result' invisible="1"/>
                        <field name="answer" attrs="{'required': [('is_result', '=', False)], 'readonly': [('is_result', '=', True)]}"/>
                        <field name="text" attrs="{'readonly': [('is_result', '=', True)]}"/>
                        <field name='status' readonly="1" attrs="{'column_invisible': [('parent.is_result', '=', False)]}"
                            decoration-success="status == 'pass'" decoration-danger="status == 'fail'"/>
                    </tree>
                </field>
            </xpath>
            <xpath expr="//footer" position="replace">
                <footer attrs="{'invisible':['|', ('type_of_qc', '!=', 'quantitative'), ('is_result', '=', True)]}">
                    <button name="action_confirm_quantitative" type="object" string="Confirm" class="oe_highlight" attrs="{'invisible':[('need_grade', '=', True)]}" />
                    <button string="Close" class="oe_link" special="cancel" />
                </footer>

                <footer attrs="{'invisible':['|', ('type_of_qc', '!=', 'qualitative'), ('is_result', '=', True)]}">
                    <button name="action_confirm_qualitative" type="object" string="Confirm" class="oe_highlight" attrs="{'invisible':[('need_grade', '=', True)]}"/>
                    <button string="Close" class="oe_link" special="cancel" />
                </footer>

                <footer attrs="{'invisible':['|', ('type_of_qc', '!=', 'both'), ('is_result', '=', True)]}">
                    <button name="action_confirm_both" type="object" string="Confirm" class="oe_highlight" />
                    <button string="Close" class="oe_link" special="cancel" />
                </footer>

                <footer>
                    <button name="action_confirm_grade" type="object" attrs="{'invisible':[('need_grade', '=', False)]}" string="Confirm Grade" class="oe_highlight" confirm="Are you sure want to confirm ? you can't change after confirm."/>
                </footer>

                <footer attrs="{'invisible':['|', ('is_result', '=', False), ('is_all_pass', '=', True)]}">
                    <button name="action_recheck_quantitative" type="object" string="Recheck" class="oe_highlight" attrs="{'invisible':[('recheck_max_number', '=', 0)]}"/>
                    <button name="action_scrap_quantitative" type="object" string="Scrap" class="oe_highlight" attrs="{'invisible':[('recheck_max_number', '=', 0)]}" />
                    <button name="action_repair_quantitative" type="object" string="Repair" class="oe_highlight" attrs="{'invisible':[('recheck_max_number', '=', 0)]}" />
                    <button name="action_create_itr" type="object" string="Internal Transfer" class="oe_highlight" attrs="{'invisible':[('recheck_max_number', '=', 0)]}" />
                    <button name="action_force_pass" type="object" string="Force Pass" class="oe_highlight" attrs="{'invisible':[('recheck_max_number', '=', 0)]}"/>
                    <button name="action_next_check" type="object" string="Next" class="oe_highlight" attrs="{'invisible':[('is_from_recheck_line', '=', True)]}" />
                </footer>

                <footer attrs="{'invisible':[('is_all_pass', '=', False)]}">
                    <button name="action_next_check" type="object" string="Next" class="oe_highlight" attrs="{'invisible':[('is_from_recheck_line', '=', True)]}"/>
                    <button string="Close" class="oe_link" special="cancel" />
                </footer>
            </xpath>
        </field>
    </record>
</odoo>