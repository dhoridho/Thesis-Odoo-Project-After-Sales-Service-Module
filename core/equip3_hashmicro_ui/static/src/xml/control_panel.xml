<?xml version="1.0" encoding="utf-8"?>
<templates id="equip3_hashmicro_ui_template" xml:space="preserve">

    <t t-inherit="web.Pager" t-inherit-mode="extension" owl="1">
        <xpath expr="//button[hasclass('o_pager_previous')]" position="replace"/>

        <xpath expr="//span[hasclass('o_pager_counter')]" position="before">
            <span class="btn-group" aria-atomic="true">
                <button type="button"
                    class="fa fa-chevron-left btn btn-secondary o_pager_previous"
                    t-att-disabled="state.disabled || singlePage"
                    t-att-accesskey="props.withAccessKey ? 'p' : false"
                    aria-label="Previous"
                    title="Previous"
                    tabindex="-1"
                    t-on-click="_changeSelection(-1)"
                />
            </span>
        </xpath>

        <xpath expr="//span[hasclass('o_pager_counter')]" position="replace">
            <span class="o_pager_counter" t-on-click.stop="">
                <input type="text"
                    class="o_pager_value o_input"
                    t-att-value="value"
                    t-on-blur="state.editing = false"
                    t-on-change="_onValueChange"
                    t-on-keydown.stop="_onValueKeydown"
                />
                <span> / </span>
                <span class="o_pager_limit" t-esc="props.size"/>
            </span>
        </xpath>
    </t>

	<t t-inherit="web.ViewSwitcherButton" t-inherit-mode="extension" owl="1">
        <xpath expr="//button" position="replace">
            <t t-set="is_included" t-value="['activity', 'calendar', 'graph', 'kanban', 'list', 'pivot'].includes(view.type)"/>

            <t t-set="icon_class" t-value="view.icon"/>
            <t t-if="view.type == 'activity'">
                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-activity o-hm-f14'"/>
            </t>
            <t t-elif="view.type == 'calendar'">
                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-calendar-view o-hm-f14'"/>
            </t>
            <t t-elif="view.type == 'graph'">
                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-chart-view o-hm-f14'"/>
            </t>
            <t t-elif="view.type == 'kanban'">
                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-kanban-view o-hm-f14'"/>
            </t>
            <t t-elif="view.type == 'list'">
                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-tree-view o-hm-f14'"/>
            </t>
            <t t-elif="view.type == 'pivot'">
                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-pivot-view o-hm-f14'"/>
            </t>
            <t t-elif="view.type == 'ks_gantt'">
                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-gantt-chart o-hm-f14'"/>
            </t>

            <button type="button"
                t-att-accesskey="view.accessKey"
                t-attf-class="btn btn-secondary fa fa-lg o_switch_view o_{{ view.type }} {{ icon_class }} dropdown-item"
                t-att-class="{ active: env.view.type === view.type }"
                t-att-aria-label="sprintf(buttonLabel.toString(), view.type)"
                t-att-title="sprintf(buttonLabel.toString(), view.type)"
                data-toggle="tooltip"
                tabindex="-1"
                t-on-click="trigger('switch-view', { view_type: view.type })">
            </button>
        </xpath>
    </t>
    
    <t t-inherit="web.FilterMenu" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('o_dropdown')]" position="attributes">
            <attribute name="class">btn-group o_dropdown dropdown-item o_no_prop</attribute>
        </xpath>
        <xpath expr="//button[hasclass('o_dropdown_toggler_btn')]" position="replace">
            <button type="button"
                class="o_dropdown_toggler_btn btn"
                t-att-aria-expanded="state.open ? 'true' : 'false'"
                tabindex="-1"
                t-on-click="state.open = !state.open"
                t-on-keydown="_onButtonKeydown"
                >

                <i class="fa fa-chevron-left mr-2"/>
                <i class="o-hm-icon o-hm-view-filter mr-2"/>
                <span class="o_dropdown_title" t-esc="title"/>
            </button>
        </xpath>
    </t>

    <t t-inherit="web.GroupByMenu" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('o_dropdown')]" position="attributes">
            <attribute name="class">btn-group o_dropdown dropdown-item o_no_prop</attribute>
        </xpath>
        <xpath expr="//button[hasclass('o_dropdown_toggler_btn')]" position="replace">
            <button type="button"
                class="o_dropdown_toggler_btn btn"
                t-att-aria-expanded="state.open ? 'true' : 'false'"
                tabindex="-1"
                t-on-click="state.open = !state.open"
                t-on-keydown="_onButtonKeydown"
                >

                <i class="fa fa-chevron-left mr-2"/>
                <i class="o-hm-icon o-hm-view-group-by mr-2"/>
                <span class="o_dropdown_title" t-esc="title"/>
            </button>
        </xpath>
    </t>

    <t t-inherit="web.FavoriteMenu" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('o_dropdown')]" position="attributes">
            <attribute name="class">btn-group o_dropdown dropdown-item o_no_prop</attribute>
        </xpath>
        <xpath expr="//button[hasclass('o_dropdown_toggler_btn')]" position="replace">
            <button type="button"
                class="o_dropdown_toggler_btn btn"
                t-att-aria-expanded="state.open ? 'true' : 'false'"
                tabindex="-1"
                t-on-click="state.open = !state.open"
                t-on-keydown="_onButtonKeydown"
                >

                <i class="fa fa-chevron-left mr-2"/>
                <i class="o-hm-icon o-hm-view-favourite-book mr-2"/>
                <span class="o_dropdown_title" t-esc="title"/>
            </button>
        </xpath>
    </t>

    <t t-inherit="oi_web_search.SearchMenu" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('o_dropdown')]" position="attributes">
            <attribute name="class">btn-group o_dropdown dropdown-item o_no_prop</attribute>
        </xpath>
        <xpath expr="//button[hasclass('o_dropdown_toggler_btn')]" position="replace">
            <button type="button"
                class="o_dropdown_toggler_btn btn"
                t-att-aria-expanded="state.open ? 'true' : 'false'"
                tabindex="-1"
                t-on-click="state.open = !state.open"
                t-on-keydown="_onButtonKeydown"
                >

                <i class="fa fa-chevron-left mr-2"/>
                <i class="o-hm-icon o-hm-view-search mr-2"/>
                <span class="o_dropdown_title" t-esc="title"/>
            </button>
        </xpath>
    </t>

    <t t-inherit="mail.MessagingMenu" t-inherit-mode="extension">
        <xpath expr="//i[hasclass('o_MessagingMenu_icon')]" position="replace">
            <i class="o_MessagingMenu_icon o-hm-icon o-hm-view-message" role="img" aria-label="Messages"/>
        </xpath>
    </t>

    <div t-name="equip3_hashmicro_ui.ControlPanel" t-inherit="web.ControlPanel" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('o_cp_top')]" position="before">
            <div class="o_cp_top_top">
                <div class="o_cp_searchview" role="search" t-ref="searchView">
                    <div t-if="props.withSearchBar" class="o_searchview" role="search" aria-autocomplete="list" >
                        <i class="o_searchview_icon fa fa-search"
                            title="Search..."
                            role="img"
                            aria-label="Search..." onclick="
                      
                                $('.o_searchview_input_container').toggleClass('active');
                         "/>
                        <SearchBar t-if="props.withSearchBar" fields="fields"/>
                    </div>
                </div>
                <div class="btn-group o_search_options position-static"
                    role="search"
                    t-ref="searchViewButtons"
                    >
                    <div class="dropdown o_equip_search_filters_dropdown" t-if="props.withSearchBar">
                        <button class="btn btn-secondary dropdown-toggle o_filters_toggler alreadySetOnclick" id="o_equip_filter_dropdown" onclick="
                      
                                $('.o_equip_search_filters_dropdown_menu').toggleClass('show');
                         ">
                            <span style="display: flex; align-items: center; justify-content: center;"><i class="o-hm2-filters mr-2" style="font-size: 20px;"/></span>Filters
                        </button>
                        <div class="dropdown-menu o_equip_search_filters_dropdown_menu" aria-labelledby="o_equip_filter_dropdown">
                            <SearchMenu t-if="props.searchMenuTypes.includes('filter')" 
                                class="o_search_menu" 
                                fields="fields"
                            />
                            <FilterMenu t-if="props.searchMenuTypes.includes('filter')"
                                class="o_filter_menu"
                                fields="fields"
                            />
                            <GroupByMenu t-if="props.searchMenuTypes.includes('groupBy')"
                                class="o_group_by_menu"
                                fields="fields"
                            />
                            <ComparisonMenu t-if="props.searchMenuTypes.includes('comparison') and model.get('filters', f => f.type === 'comparison').length"
                                class="o_comparison_menu"
                            />
                            <FavoriteMenu t-if="props.searchMenuTypes.includes('favorite')"
                                class="o_favorite_menu"
                            />
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('o_cp_top')]" position="replace">
            <div class="o_cp_top">
                <div class="o_cp_top_left">
                    <ol t-if="props.withBreadcrumbs" class="breadcrumb" role="navigation">
                        <li t-foreach="props.breadcrumbs" t-as="bc" t-key="bc.controllerID"
                            class="breadcrumb-item"
                            t-att-class="{ o_back_button: bc_index === props.breadcrumbs.length - 1 }"
                            t-att-accesskey="bc_last and 'b'"
                            t-on-click.prevent="trigger('breadcrumb-clicked', { controllerID: bc.controllerID })"
                            >
                            <a t-if="bc.title" href="#" t-esc="bc.title"/>
                            <em t-else="" class="text-warning">Unnamed</em>
                        </li>
                        <li class="breadcrumb-item active">
                            <t t-if="props.title" t-esc="props.title"/>
                            <em t-else="" class="text-warning">Unnamed</em>
                        </li>
                    </ol>
                </div>
                <div class="o_cp_top_right">
                    <div class="o_cp_buttons" role="toolbar" aria-label="Control panel buttons" t-ref="buttons">
                        <t t-slot="buttons"/>
                    </div>
                </div>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('o_cp_bottom')]" position="replace">
            <div class="o_cp_bottom">
                <div class="o_cp_bottom_left">
                    <div t-if="props.withSearchBar" class="o_search_panel_toggler">
                        <div class="o_search_panel_content">
                            <div class="o_search_panel_icon">
                                <i class="o-hm-icon o-hm-view-search"/>
                            </div>
                            <div class="o_search_panel_label">
                                <span style="">Quick Search</span>
                            </div>
                        </div>
                        <div class="o_search_panel_arrow">
                            <span><i class="fa fa-chevron-right"/></span>
                        </div>
                    </div>
                    <div t-if="props.withSearchBar" class="app-search-panel o_search_panel_hide">
                        <div t-if="props.app_search_range_btn_show" class="app-search-range">
                            <div class="o_separator">
                                <span t-if="props.app_search_range_date_show" class="app-search-range-date-container">
                                    <span  class="app-search-range-date">
                                        <select class="app_select_field_date o_input o_field_widget">
                                            <option t-foreach="props.app_fields_date" t-as="field" t-att-value="field[0]" t-att-type="field[2]">
                                                <t t-esc="field[1]"/>
                                            </option>
                                        </select>
                                    </span>
                                    <span name="app_start_date"></span>
                                    <span name="app_end_date"></span>
                                </span>
                            </div>
                            <div class="o_separator" t-att-style="'margin-top:' + (props.app_search_range_date_show ? '4px;' : '0;')">
                                <span t-if="props.app_search_range_number_show" class="app-search-range-number-container">
                                    <span class="app-search-range-number">
                                        <select class="app_select_field_number o_input o_field_widget">
                                            <option t-foreach="props.app_fields_number" t-as="field" t-key="field.name" t-att-value="field[0]">
                                                <t t-esc="field[1]"/>
                                            </option>
                                        </select>
                                    </span>
                                    <span name="app_start_number">
                                        <input t-on-change="do_keypress" class="app_start_number o_field_number o_input" placeholder="From" title="Press Enter to search"/>
                                    </span>
                                    <span name="app_end_number">
                                        <input t-on-change="do_keypress" class="app_end_number o_field_number o_input" placeholder="To" title="Press Enter to search"/>
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="o_cp_bottom_right">
                    <div class="o_cp_bottom_right_wrapper">
                        <div class="dropdown o_cp_switch_buttons" t-if="env.view and env.view.type != 'form'">
                            <span class="mr-2"></span>
                            <t t-set="icon_class" t-value="env.view.icon"/>
                            <t t-if="env.view.type == 'activity'">
                                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-activity o-hm-f14'"/>
                            </t>
                            <t t-elif="env.view.type == 'calendar'">
                                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-calendar-view o-hm-f14'"/>
                            </t>
                            <t t-elif="env.view.type == 'graph'">
                                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-chart-view o-hm-f14'"/>
                            </t>
                            <t t-elif="env.view.type == 'kanban'">
                                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-kanban-view o-hm-f14'"/>
                            </t>
                            <t t-elif="env.view.type == 'list'">
                                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-tree-view o-hm-f14'"/>
                            </t>
                            <t t-elif="env.view.type == 'pivot'">
                                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-pivot-view o-hm-f14'"/>
                            </t>
                            <t t-elif="env.view.type == 'ks_gantt'">
                                <t t-set="icon_class" t-value="'o-hm-icon o-hm-view-gantt-chart o-hm-f14'"/>
                            </t>
        
                            <button t-attf-class="btn btn-secondary dropdown-toggle {{ icon_class }} o_active_view" data-toggle="dropdown" id="o_cp_switch_buttons_dropdown" t-if="props.views &amp;&amp; props.views.length > 1"/>
                            <div class="dropdown-menu o_cp_switch_buttons_menu" aria-labelledby="o_cp_switch_buttons_dropdown">
                                <t t-foreach="props.views" t-as="view" t-key="view.type">
                                    <t t-call="web.ViewSwitcherButton"/>
                                </t>
                            </div>
                        </div>
                        <div class="o_cp_pager" role="search" t-ref="pager">
                            <Pager t-if="props.pager and props.pager.limit" t-props="props.pager"/>
                        </div>
                    </div>
                </div>
            </div>
            <ActionMenus t-if="props.actionMenus and props.actionMenus.items" t-props="props.actionMenus"/>
        </xpath>
        <xpath expr="//div[hasclass('o_cp_bottom_bottom')]" position="replace"/>
    </div>

    <t t-inherit="web.SearchBar" t-inherit-mode="extension">
        <xpath expr="//div[@t-key='facet_index']" position="replace"/>

        <xpath expr="//div[hasclass('o_searchview_input_container')]" position="inside">
            <t t-set="facets" t-value="model.get('facets')"/>
            <button class="btn o_searchview_toggler" id="fdrop" data-toggle="dropdown" t-if="facets.length">
                <img src="/equip3_hashmicro_ui/static/src/img/filter1.svg" style="height: 13px;"/>
                <span class="o_searchview_toggler_text"><t t-esc="facets.length"/> filters applied</span>
                <img src="/equip3_hashmicro_ui/static/src/img/filter2.svg" style="height: 14px; border-radius: 50%; background-color: #4c4c4c;"/>
            </button>
            <div class="dropdown-menu dropdown-menu-right o_facet_dropdown_menu" aria-labelledby="fdrop">
                <div t-foreach="facets" t-as="facet" t-key="facet_index"
                    tabindex="0"
                    class="o_searchview_facet dropdown-item"
                    role="img"
                    aria-label="search"
                    t-on-keydown="_onFacetKeydown(facet, facet_index)"
                    >
                    <i class="fa fa-sm fa-circle o_facet_color" 
                        role="img"
                        aria-label="Color Indicator"
                        title="Color Indicator"
                    />
                    
                    <span t-if="facet.icon" class="o_searchview_facet_label"><img src="/equip3_hashmicro_ui/static/src/img/filter1.svg" style="height: 15px;"/></span>
                    <span t-else="" class="o_searchview_facet_label" t-esc="facet.title"/>
                    
                    <span class="o_facet_separator">-</span>
                    <div class="o_facet_values">
                        <t t-foreach="facet.values" t-as="facetValue" t-key="facetValue_index">
                            <span t-if="!facetValue_first" class="o_facet_values_sep" t-esc="facet.separator"/>
                            <span class="o_facet_value" t-esc="facetValue"/>
                        </t>
                    </div>
                    <i class="fa fa-sm fa-times-circle o_facet_remove"
                        role="img"
                        aria-label="Remove"
                        title="Remove"
                        t-on-click="_onFacetRemove(facet)"
                    />
                </div>
            </div>
        </xpath>
    </t>

    <t t-name="sh_backmate_theme_adv.icon_button">
        <i t-attf-class="fa fa-#{icon}"
           t-att-title="label"/>
        <t t-if="label=='Create' || label=='Save'">
            <span class="d-sm-inline" t-esc="label"/>
        </t>
        <t t-else="">
            <span class="d-none d-sm-inline" t-esc="label"/>
        </t>
    </t>
    
    
</templates>