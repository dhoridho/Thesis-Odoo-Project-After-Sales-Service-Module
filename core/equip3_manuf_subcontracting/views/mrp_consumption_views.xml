<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_mrp_consumption_form_subcon" model="ir.ui.view">
        <field name="name">view.mrp.consumption.form.subcong</field>
        <field name="model">mrp.consumption</field>
        <field name="inherit_id" ref="equip3_manuf_operations_contd.mrp_consumption_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='miscellaneous']/group/group[2]" position="inside">
                <field name="is_a_subcontracting" string="Subcontracting"/>
            </xpath>
            <xpath expr="//page[@name='byproduct']" position="after">
                <page name="subcontracting" string="Subcontracting" attrs="{'invisible': ['|', ('is_a_subcontracting', '=', False), ('move_subcon_ids', '=', [])]}">
                    <field name="move_subcon_ids">
                        <tree sting="Subcontracting">
                            <field name="product_id"/>
                            <field name="quantity_done" string="Produced"/>
                            <field name="product_uom"/>
                            <field name="lot_ids" widget="many2many_tags" optional="hide"/>
                            <field name="state" widget="badge" decoration-success="state == 'done'" decoration-info="state not in ('done', 'cancel')" optional="show"/>
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>
</odoo>