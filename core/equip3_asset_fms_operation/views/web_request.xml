<odoo>
    <template id="assets_fms_frontend" inherit_id="website.assets_frontend">
        <xpath expr="//script[last()]" position="after">
            <script type="text/javascript" src="/equip3_asset_fms_operation/static/src/js/request.js"/>
        </xpath>
    </template>

    <template id="equip3_asset_fms_operation.assets_information" name="Asset Information" customize_show="True">
        <t t-call="website.layout">
            <div class='container mt-4'>
                <form action="/page/asset_information/" method="post" enctype="multipart/form-data" style="margin-left: 10px !important">
                    <h2 class="text-center" style="margin-left: -20px;">Asset Information</h2>
                    <br/>
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                    <table width="100%" style="margin-left: 0px !important">
                        <tr height="53.96px">
                            <td class="form-group">
                                <div style="flex-flow: unset">
                                    <label class="col-form-label" for="name">Asset :</label>
                                    <span t-esc="equipment_id.name"/>
                                </div>
                            </td>
                            <td class="form-group" rowspan="2" style="text-align:center;">
                                <img t-att-src="'data:image/png;base64,%s' % to_text(equipment_id.equipmt_image1_custom)"
                                     widget="image" style="max-height: 105px;" alt="Asset"/>
                            </td>
                        </tr>
                        <tr height="53.96px">
                            <td class="form-group">
                                <div style="flex-flow: unset">
                                    <label class="col-form-label" for="name">Model :</label>
                                    <t t-esc="equipment_id.model"/>
                                </div>
                            </td>
                        </tr>
<!--                        <div class='col-lg-6'>-->
<!--                            <div class="form-group">-->
<!--                                <label class="col-form-label" for="name">Owner :</label>-->
<!--                                <span t-esc="equipment_id.owner.name" />-->
<!--                            </div>                                    -->
<!--                        </div>-->
                    </table>

<!--                    <div class='row'>-->
<!--                        <div class='col-lg-6'>-->
<!--                            <div class="form-group">-->
<!--                                <label class="col-form-label" for="name">Vendor :</label>-->
<!--                                    <span t-esc="equipment_id.partner_id.name" />-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class='col-lg-6'>-->
<!--                            <div class="form-group">-->
<!--                                <label class="col-form-label" for="name">Scrap Date :</label>-->
<!--                                    <span t-esc="equipment_id.scrap_date" />-->
<!--                            </div>                                    -->
<!--                        </div>-->
<!--                    </div>-->

                    <div class='row'>
                        <div class='col-lg-6'>
                            <div class="form-group">
                                <label class="col-form-label" for="name">Asset Category :</label>
                                    <span t-esc="equipment_id.category_id.name" />
                            </div>
                        </div>
                        <div class='col-lg-6'>
                            <div class="form-group">
                                <label class="col-form-label" for="name">Facilities Area :</label>
                                    <span t-esc="equipment_id.fac_area.name" />
                            </div>
                        </div>
                    </div>

                    <div class='row'>
                        <div class='col-lg-6'>
                            <div class="form-group">
                                <label class="col-form-label" for="name">Assigned To :</label>
                                    <span t-esc="equipment_id.maintenance_teams_id.name" />
                            </div>
                        </div>
                        <div class='col-lg-6'>
                            <div class="form-group">
                                <label class="col-form-label" for="name">Effective Date :</label>
                                    <span t-esc="equipment_id.effective_date" />
                            </div>
                        </div>
                    </div>

<!--                    <div class='row'>-->
<!--                        <div class='col-lg-6'>-->
<!--                            <div class="form-group">-->
<!--                                <label class="col-form-label" for="name">Vendor Reference :</label>-->
<!--                                    <t t-esc="equipment_id.partner_ref" />-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class='col-lg-6'>-->
<!--                            <div class="form-group">-->
<!--                                <label class="col-form-label" for="name">Warranty Expiration Date :</label>-->
<!--                                    <t t-esc="equipment_id.warranty_date" />-->
<!--                            </div>                                    -->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class='row'>-->
<!--                        <div class='col-lg-6'>-->
<!--                            <div class="form-group">-->
<!--                                <label class="col-form-label" for="name">Vendor :</label>-->
<!--                                <span t-esc="equipment_id.partner_id.name"/>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

                    <div class='row'>
                        <div class='col-lg-6'>
                            <div class="form-group">
                                <label class="col-form-label" for="name">Serial Number :</label>
                                    <t t-if="equipment_id.serial_no">[<t t-esc="equipment_id.serial_no" />]</t>
                            </div>
                        </div>
                    </div>

                    <div class='row'>
                        <a t-attf-href="/page/maintenance_request/?asset=#{equipment_id.id}&amp;facility_area=#{equipment_id.fac_area.id}&amp;from_scan=#{True}" id="maintenance_req" class="mb-4 btn btn-success" name="maintenance_req" style="margin-bottom:10px;font-size: 16px;color: white;" 
                        aria-label="Maintenance Request Form">Maintenance Request Form</a>
                    </div>                                                                                                                                                      
                </form>
            </div>
        </t>
    </template>

    <template id="website_maintenance_request.maintenance_request_create_probc" name="Maintenance Support Request Form" customize_show="True">
        <t t-call="website.layout">
            <form action="/website_maintenance_request/maintenance_request_create" method="post" class="form-horizontal mt32" enctype="multipart/form-data">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                <h2 class="text-center">Maintenance Request Form</h2>
                <br/>
                <group>
                    <div class="container mt-2" align="center">
                        <div class="form-group row form-field o_website_form_required_custom">
                            <label class="col-lg-3 col-md-4 col-form-label" for="name">Facilities Area</label>
                            <div class="col-lg-7 col-md-8">
                                <t t-if="from_scan">
                                    <select id="facility_area_ids" name="facility_area" class="form-control" style="pointer-events: none;">
                                        <option value="">Facilities Area </option>
                                        <t t-foreach="facility_area_ids" t-as="o">
                                            <option t-att-value="o.id" t-att-selected="o.id == (facility_area or -1)">
                                                <t t-esc="o.comp_name" />
                                            </option>
                                        </t>
                                    </select>
                                </t>
                                <t t-else="">
                                    <select id="facility_area_ids" name="facility_area" class="form-control">
                                        <option value="">Facilities Area </option>
                                        <t t-foreach="facility_area_ids" t-as="o">
                                            <option t-att-value="o.id" t-att-selected="o.id == (facility_area or -1)">
                                                <t t-esc="o.comp_name" />
                                            </option>
                                        </t>
                                    </select>
                                </t>
                            </div>
                        </div>

                        <div class="form-group row form-field o_website_form_required_custom">
                            <label class="col-lg-3 col-md-4 col-form-label" for="name">Asset</label>
                            <div class="col-lg-7 col-md-8">
                                <select id="equipment_ids" name="equipment_id" class="form-control">
                                    <option value="">Asset...</option>
                                    <t t-foreach="equipment_ids" t-as="e">
                                        <option t-att-value="e.id" t-att-data-fac-area="e.fac_area.id" t-att-selected="e.id == (equipment_id or -1)">
                                            <t t-esc="e.name" />
                                            <t t-if="e.serial_no">[<t t-esc="e.serial_no" />]</t>
                                        </option>
                                    </t>
                                </select>
                            </div>
                        </div>
            
                        <div class="form-group row form-field o_website_form_required_custom">
                            <label class="col-lg-3 col-md-4 col-form-label" for="priority">Priority</label>
                            <div class="col-lg-7 col-md-8">
                                <select class="form-control" name="priority">
                                    <option value="0" selected="selected">Very Low</option>
                                    <option value="1">Low</option>
                                    <option value="2">Normal</option>
                                    <option value="3">High</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group row form-field o_website_form_required_custom">
                            <label class="col-lg-3 col-md-4 col-form-label" for="name">Description</label>
                            <div class="col-lg-7 col-md-8">
                                <textarea class="form-control" cols="60" name="description" required="True" rows="6" placeholder="Describe here..."></textarea>
                            </div>
                        </div>

                        <div class="form-group row form-field o_website_form_required_custom">
                            <label class="col-lg-3 col-md-4 col-form-label" for="Attachments">Attach Files</label>
                            <div class="col-lg-7 col-md-8">
                                <input type="file" class="form-control o_website_form_input" name="attachment" multiple='multiple'/>
                                <label style="color:grey; font-size:12px;float: left;">Multiple files can be attach</label>
                            </div>
                        </div>

                        <div class="form-group row form-field o_website_form_required_custom">
                            <label class="col-lg-3 col-md-4 col-form-label"/>
                            <div class="col-lg-7 col-md-8">
                                <button type="submit" class="btn btn-primary btn-md-8 s_website_form_send">Submit</button>
                                <a class="btn btn-danger" href="/" style="background-color:#612a2f;">Discard</a>
                            </div>
                        </div>

                    </div>
                </group>
            </form>
        </t>
    </template>

    <template id="website_maintenance_request.thanks_maintenance_request_probc" name="Thanks">

        <t t-call="website.layout">
            <div id="wrap">
                <div class="oe_structure" id="oe_structure_website_form_contact_us_thanks_1"/>
                <div class="container mt-4">
                    <div class="row">
                        <div class="col-lg-7 col-xl-6 mr-lg-auto oe_structure">
                            <section class="pt40 s_text_block pb40 o_colored_level o_cc o_cc1" data-snippet="s_text_block" data-name="Text">
                                <div class="container">
                                    <span class="d-block fa fa-4x fa-thumbs-up mx-auto rounded-circle bg-primary"/>
                                    <br/>
                                    <h1 class="text-center">Thank You!</h1>
                                    <div class="pb16 pt16 s_hr" data-snippet="s_hr" data-name="Separator">
                                        <hr class="mx-auto border-top w-50 border-dark text-center"/>
                                    </div>
                                    <h5 class="text-left">
                                    	Dear <t t-esc="user"/>
,
                                    <br/>
                                    <br/>
                                    <span>We have received your maintenance request and our maintenance team will get back to you as soon as possible.</span>
                                    <br></br>
                                    <br></br>
										Regards,
                                    <br></br>
                                    <span>Maintenance Administrator</span>
                                </h5>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </t>
</template>

<record id="website_maintenance_request.maintenance_request_page" model="website.menu">
    <field name="name"></field>
    <field name="parent_id" ref="website.main_menu" />
    <field name="url">/page/maintenance_request</field>
    <field name="sequence" type="int">11</field>
</record>

<record id="website_maintenance_request.maintenance_request_add" model="website.menu">
    <field name="name">Maintenance Request</field>
    <field name="url">/page/maintenance_request</field>
    <field name="parent_id" ref="website_maintenance_request.maintenance_request_page" />
    <field name="sequence" type="int">12</field>
</record>


<record id="website_maintenance_request.email_template_maintenance_create_custom" model="mail.template">
    <field name="body_html"><![CDATA[
<p>Dear ${object.owner_user_id.name},

<p>We have received your maintenance request. And our maintenance team shortly contact with you.

<p>Equipment: <b>${object.equipment_id.name}</b></p>
 <p>Submitted: <b>${object.request_date}</b></p>
           <br/>
           <tr>
        <td align="center" style="min-width: 590px;">
            <table border="0" cellpadding="0" cellspacing="0" width="590" style="min-width: 590px; background-color: white; font-size: 11px; padding: 0px 8px 0px 8px; border-collapse:separate;">
                <tr><td valign="middle" align="left">
                    ${user.company_id.name}
                </td></tr>
                <tr><td valign="middle" align="left" style="opacity: 0.7;">
                    ${user.company_id.phone or ''}
                    % if object.company_id.email
                        | <a href="'mailto:%s' % ${object.company_id.email}" style="text-decoration:none; color: #454748;">${user.company_id.email}</a>
                    % endif
                    % if object.company_id.website
                        | <a href="'%s' % ${object.company_id.website}" style="text-decoration:none; color: #454748;">
                        ${object.company_id.website}
                    </a>
                    % endif
                </td></tr>
            </table>
        </td>
    </tr>
   ]]>
    </field>
</record>

</odoo>