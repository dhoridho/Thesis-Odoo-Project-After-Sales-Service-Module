<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="report_sales_summary">
            <t t-call="web.html_container">
                <t t-call="web.basic_layout">
                    <div class="header" t-att-style="'font-family:'+user_id.company_id.font_id.family+';font-size:'+str(user_id.company_id.font_size)+'px;'">  
                        <table border="0" cellpadding="0" cellspacing="0" style="line-height: 15px;" width="100%">
                            <tr>
                                <td align="left" style="color:#4D4D4F; padding:0px 15px; border-right: 1px solid #D4D1D1; width:40%; vertical-align: middle!important;">
                                    <img style="max-height:40px; display:inline-block; width:100%;" t-att-src="'data:image/png;base64,%s' % to_text(user_id.company_id.logo)"/> 
                                </td>
                                <td style="padding:15px; width:60% vertical-align: middle!important;font_size:12px;"> 
                                    <!--<p t-attf-style="text-transform:capitalize; color: #{theme_color or '#ffffff'}; font-weight:bold;margin:0; margin-bottom:5px;">Address</p>-->
                                    <!--<t t-call="general_template.templates_company_details"/>-->
                                    <div style="color: #51565b;">
                                      <div><strong>Address:</strong></div>
                                      <div t-field="user_id.company_id.partner_id"/>
                                      <t t-if="user_id.company_id.partner_id.street">
                                          <div>
                                              <span t-esc="user_id.company_id.partner_id.street"/>
                                              <br/>
                                          </div>
                                      </t>
                                      <t t-if="user_id.company_id.partner_id.mobile">
                                          <strong>Mobile:</strong>
                                          <span t-field="user_id.company_id.partner_id.mobile"/>
                                          <br/>
                                      </t>
                                      <t t-if="user_id.company_id.partner_id.email">
                                          <strong>Email:</strong>
                                          <span t-field="user_id.company_id.partner_id.email"/> 
                                      </t>
                                    </div>
                                </td>
                            </tr>
                        </table> 
                    </div>

                    <div class="page"> 
                        <div id="ph_report"/>
                        <table width="100%">
                            <tr>
                                <td style="padding-top:1px;border:1px solid black;color:#ffffff; background-color: #333333;" class='text-center'>
                                    <span><h2>Sales Summary Report</h2></span>
                                </td>
                            </tr>
                        </table>
                        <br/>
                        <table width="100%">
                            <tr>
                                <td width="35%"><span>Report Date time</span></td>
                                <td width="15%"><span>:</span></td>
                                <td width="50%"><span><t t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M %p')"/></span></td>
                            </tr>
                            <tr>
                                <td width="35%"><span>Start Date</span></td>
                                <td width="15%"><span>:</span></td>
                                <td width="50%"><span><t t-esc="start_dt"/></span></td>
                            </tr>
                            <tr>
                                <td width="35%"><span>End Date</span></td>
                                <td width="15%"><span>:</span></td>
                                <td width="50%"><span><t t-esc="end_dt"/></span></td>
                            </tr>
                            <tr>
                                <td width="35%"><span>Printed by</span></td>
                                <td width="15%"><span>:</span></td>
                                <td width="50%"><span t-esc="request.env.user.name"/></td>
                            </tr>
                        </table>
                        <br/>
                        <t t-foreach="branch_identifier" t-as="u">
                            <table width="100%">
                                <tr>
                                    <td colspan="2" style="padding-top:1px;border:1px solid black;color:#ffffff; background-color: #333333;" class='text-center'><span><h3>Summary</h3></span></td>
                                </tr>
                                <tr>
                                    <td width="50%"><span>Gross Total</span></td>
                                    <td width="50%">
                                        <t t-if="u['gross_total']">
                                            <span class="pull-right" t-esc="u['gross_total']" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.00</span>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <td width="50%"><span>Sales without Tax</span></td>
                                    <td width="50%">
                                        <t t-if="u['sales_wo_tax']">
                                            <span class="pull-right" t-esc="u['sales_wo_tax']" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.00</span>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <td width="50%"><span>Tax Amount</span></td>
                                    <td width="50%">
                                        <t t-if="u['total_tax']">
                                            <span class="pull-right" t-esc="u['total_tax']" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.00</span>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <td width="50%"><span>Discount</span></td>
                                    <td width="50%">
                                        <t t-if="u['total_discount']">
                                            <span class="pull-right" t-esc="u['total_discount']" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.00</span>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <td width="50%"><span>Grand Total</span></td>
                                    <td width="50%">
                                        <t t-if="u['grand_total']">
                                            <span class="pull-right" t-esc="u['grand_total']" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.00</span>
                                        </t>
                                    </td>
                                </tr>
                            </table>
                            <br/>

                            <t t-foreach="all_data" t-as="l">
                                <t t-if="l == u['name']">
                                    <table width="100%">
                                        <tr>
                                            <td colspan="2" style="padding-top:1px;border:1px solid black;color:#ffffff; background-color: #333333;" class='text-center'><span><h3>Department Sales</h3></span></td>
                                        </tr>
                                        <t t-set="cat_tot" t-value="0.0"/>
                                        <t t-foreach="all_data[l]['categ']" t-as="p">
                                            <tr>
                                                <td width="50%"><span t-esc="p['c_name']"/></td>
                                                <td width="50%"><span t-esc="p['c_total']" class="pull-right" t-options="{'widget': 'float', 'precision': currency_precision}"/></td>
                                            </tr>
                                            <t t-set="cat_tot" t-value="cat_tot + p['c_total']"/>
                                        </t>
                                        <tr>
                                            <td width="50%"><b><span>Total</span></b></td>
                                            <td width="50%"><b><span t-esc="cat_tot" class="pull-right" t-options="{'widget': 'float', 'precision': currency_precision}"/></b></td>
                                        </tr>
                                    </table>
                                    <br/>
                                    <table width="100%" id="payments_table">
                                        <tr>
                                            <td colspan="2" style="padding-top:1px;border:1px solid black;color:#ffffff; background-color: #333333;" class='text-center'><span><h3>Payments</h3></span></td>
                                        </tr>
                                        <t t-set="pay_tot" t-value="0.0"/>
                                        <t t-foreach="all_data[l]['journal']" t-as="j">
                                            <tr>
                                                <td width="50%"><span t-esc="j['name']"/></td>
                                                <td width="50%"><span t-esc="j['total']" class="pull-right" t-options="{'widget': 'float', 'precision': currency_precision}"/></td>
                                            </tr>
                                            <t t-set="pay_tot" t-value="pay_tot + j['total']"/>
                                        </t>
                                        <tr>
                                            <td width="50%"><b><span>Total</span></b></td>
                                            <td width="50%"><b><span t-esc="pay_tot" class="pull-right" t-options="{'widget': 'float', 'precision': currency_precision}"/></b></td>
                                        </tr>
                                    </table>
                                </t>
                                <br/>
                            </t>
                        </t>
                    </div>

                    <div class="footer" t-att-style="'font-family:'+user_id.company_id.font_id.family+';font-size:'+str(user_id.company_id.font_size)+'px;'" t-if="user_id.company_id.report_footer_selection == 'standard'">
                        <div class="text-center" style="border-top: 1px solid black;">
                            <ul class="list-inline mb4">
                                <li t-if="user_id.company_id.phone">Phone: 
                                    <span t-field="user_id.company_id.phone"/></li>
                                <li t-if="user_id.company_id.email">Email: 
                                    <span t-field="user_id.company_id.email"/></li>
                                <li t-if="user_id.company_id.website">Web: 
                                    <span t-field="user_id.company_id.website"/></li>
                                <li t-if="user_id.company_id.vat">
                                    <t t-esc="user_id.company_id.country_id.vat_label or 'TIN'"/>: 
                                    <span t-field="user_id.company_id.vat"/></li>
                            </ul>
                            <div name="financial_infos">
                                <span t-field="user_id.company_id.report_footer"/>
                            </div>
                            <div class="text-muted">Page: 
                                <span class="page"/>
                                / 
                                <span class="topage"/></div>
                        </div>
                    </div>
                </t>
            </t>
        </template>

        <!-- <template id="report_sales_summary">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page">
                        <div class="text-center container" style="border: 1px solid black;">
                            <h2>Sales Summary</h2>
                        </div>
                        <br/>
                        <br/>
                        <br/>
                        <div class="container">
                            <t t-if="only_summary == false">                                
                                <div>
                                    <span>Report Date time :</span> 
                                    <span style="margin-left:25%;">
                                        <t t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M %p')"/>
                                    </span><br/>
                                </div>
                                <div>
                                    <span>Start Date : </span>
                                    <span style="margin-left:36%;"><t t-esc="start_dt"/></span>
                                    <br/>
                                </div>
                                <div>
                                    <span>End Date : </span>
                                    <span style="margin-left:38%;"><t t-esc="end_dt"/></span>
                                </div>
                                <br/>
                                <br/>
                                <t t-foreach="branch_identifier" t-as="u">                                  
                                    <t t-if="u['name']">
                                        <p><strong><span>Branch Name : </span><span t-esc="u['name']"/></strong></p>
                                    </t>
                                    <p>
                                        <span>Sales : </span>
                                        <t t-if="u['total']">
                                            <span class="pull-right" t-esc="u['total']" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.0</span>
                                        </t>
                                    </p>
                                    <p>
                                        <span>Total : </span>
                                        <t t-if="u['total']">
                                            <span class="pull-right" t-esc="u['total']" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.0</span>
                                        </t>
                                    </p>                                    
                                    <p>
                                        <span>Tax : </span>
                                        <t t-if="u['tax']">
                                            <span class="pull-right" t-esc="u['tax']" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.0</span>
                                        </t>
                                    </p>
                                    <p>
                                        <span>Discount : </span>
                                        <t t-if="u['discount']">
                                            <span class="pull-right" t-esc="u['discount']" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.0</span>
                                        </t>
                                    </p>
                                    <p>
                                        <span>Gross Total : </span>
                                        <t t-if="u['total']">
                                            <span class="pull-right" t-esc="u['total']" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.0</span>
                                        </t>
                                    </p>
                                    <t t-foreach="all_data" t-as="l">
                                        <t t-if="l == u['name']">
                                            <h6 class="text-center">Department Sales</h6>
                                            <t t-foreach="all_data[l]['categ']" t-as="p">
                                                <p>
                                                    <span t-esc="p['c_name']"/>
                                                    <span t-esc="p['c_total']" class="pull-right" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                                </p>
                                            </t>
                                            <h6 class="text-center">Payments</h6>
                                            <t t-foreach="all_data[l]['journal']" t-as="j">
                                                <p>
                                                    <span t-esc="j['name']"/>
                                                    <span t-esc="j['total']" class="pull-right" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                                </p>
                                            </t>
                                        </t>
                                    </t>
                                    <hr/>
                                    <br/>
                                    <br/>
                                </t>
                                <p style="page-break-before:always;"/>
                            </t>
                            <br/>
                            <h5 class="text-center">Summary</h5>
                            <p>
                                <span colspan="3">Sales without Tax :</span>
                                <span class="pull-right"><t t-esc="final_total-final_tax" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                            </p>
                            <p>
                                <span colspan="3">Discount :</span>
                                <span class="pull-right"><t t-esc=" final_discount" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                            </p>
                            <p>
                                <span colspan="3">Tax Amount :</span>
                                <span class="pull-right"><t t-esc="final_tax" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                            </p>
                            <p>
                                <span colspan="3">Gross Total:</span>
                                <span class="pull-right"><t t-esc=" final_total" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                            </p>
                    
                            <br/>
                            <h5 class="text-center">Department Sales</h5>
                            <div>
                                <t t-set="cat_tot" t-value="0.0"/>
                                <t t-foreach="categories_data" t-as="line">
                                    <p>
                                        <span colspan="3"><t t-esc="line['name']"/></span>
                                        <span class="pull-right">
                                            <t t-esc="line['total']" t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </span>
                                        <t t-set="cat_tot" t-value="cat_tot + line['total']"/>
                                    </p>
                                </t>
                                <p>
                                    <span colspan="3"/>
                                    <span class="pull-right"><t t-esc="cat_tot" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                                </p>
                            </div>                              
                            <br/>
                            <h5 class="text-center">Payments</h5>
                            <div>
                                <t t-set="tot" t-value="0.0"/>
                                <p t-foreach="payments" t-as="payment">
                                    <span colspan="3"><t t-esc="payment['name']"/></span>
                                    <span class="pull-right"><t t-esc="payment['total']" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                                    <t t-set="tot" t-value="tot + payment['total']"/>
                                </p>
                                <p>
                                    <span colspan="3"/>
                                    <span class="pull-right"><t t-esc="tot" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                                </p>
                            </div>
                        </div> -->
                        
<!--                        <div class="container">
                            <t t-if="only_summary == false">                                
                                <div>
                                    <span >Report Date time :</span> 
                                    <span style="margin-left:25%;">
                                        <t t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M %p')" />
                                    </span><br/>
                                </div>
                                <div>
                                    <span >Start Date : </span>
                                    <span style="margin-left:36%;"><t t-esc="start_dt"/></span>
                                    <br/>
                                </div>
                                <div>
                                    <span >End Date : </span>
                                    <span style="margin-left:38%;"><t t-esc="end_dt"/></span>
                                </div>
                                <br/>
                                <br/>
                                <t t-foreach="branch_identifier" t-as="u">                                  
                                    <t t-if="u['name']">
                                        <p><strong><span>Name : </span><span t-esc="u['name']"/></strong></p>
                                    </t>
                                    <p>
                                        <span>Sales : </span>
                                        <t t-if="u['total']">
                                            <span class="pull-right" t-esc="'%.2f' % u['total']"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.0</span>
                                        </t>
                                    </p>
                                    <p>
                                        <span>Total : </span>
                                        <t t-if="u['total']">
                                            <span class="pull-right" t-esc="'%.2f' % u['total']"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.0</span>
                                        </t>
                                    </p>                                    
                                    <p>
                                        <span>Tax : </span>
                                        <t t-if="u['tax']">
                                            <span class="pull-right" t-esc="'%.2f' % u['tax']"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right" >0.0</span>
                                        </t>
                                    </p>
                                    <p>
                                        <span>Discount : </span>
                                        <t t-if="u['discount']">
                                            <span class="pull-right" t-esc="'%.2f' % u['discount']"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right" >0.0</span>
                                        </t>
                                    </p>
                                    <p>
                                        <span>Gross Total : </span>
                                        <t t-if="u['total']">
                                            <span class="pull-right" t-esc="'%.2f' % u['total']"/>
                                        </t>
                                        <t t-else="">
                                            <span class="pull-right">0.0</span>
                                        </t>
                                    </p>
                                    <t t-foreach="all_data" t-as="l">
                                        <t t-if="l == u['name']">
                                            <h6 class="text-center">Department Sales</h6>
                                            <t t-foreach="all_data[l]['categ']" t-as="p">
                                                <p>
                                                    <span t-esc="p['c_name']"/>
                                                    <span t-esc="p['c_total']" class="pull-right"/>
                                                </p>
                                            </t>
                                            <h6 class="text-center">Payments</h6>
                                            <t t-foreach="all_data[l]['journal']" t-as="j">
                                                <p>
                                                    <span t-esc="j['name']"/>
                                                    <span t-esc="j['total']" class="pull-right"/>
                                                </p>
                                            </t>
                                        </t>
                                    </t>
                                    <hr/>
                                    <br/>
                                    <br/>
                                </t>
                            </t>
                            <br/>
                            <h5 class="text-center">Summary</h5>
                            <p>
                                <span colspan="3" >Sales without Tax :</span>
                                <span class="pull-right"><t t-esc="final_total-final_tax" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                            </p>
                            <p>
                                <span colspan="3" >Discount :</span>
                                <span  class="pull-right"><t t-esc=" final_discount" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                            </p>
                            <p>
                                <span colspan="3" >Tax Amount :</span>
                                <span  class="pull-right"><t t-esc="final_tax" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                            </p>
                            <p>
                                <span colspan="3" >Gross Total:</span>
                                <span  class="pull-right"><t t-esc=" final_total" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                            </p>
                    
                            <br/>
                            <h5 class="text-center">Department Sales</h5>
                            <div>
                                <t t-set="cat_tot" t-value="0.0"/>
                                <t t-foreach='categories_data' t-as='line'>
                                    <p>
                                        <span colspan="3"><t t-esc="line['name']" /></span>
                                        <span  class="pull-right">
                                            <t t-esc="line['total']"  t-options="{'widget': 'float', 'precision': currency_precision}"/>
                                        </span>
                                        <t t-set="cat_tot" t-value="cat_tot + line['total']"/>
                                    </p>
                                </t>
                                <p>
                                    <span colspan="3" ></span>
                                    <span  class="pull-right"><t t-esc="cat_tot" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                                </p>
                            </div>                              
                            <br/>
                            <h5 class="text-center">Payments</h5>
                            <div>
                                <t t-set="tot" t-value="0.0"/>
                                <p t-foreach='payments' t-as='payment'>
                                    <span colspan="3"><t t-esc="payment['name']" /></span>
                                    <span  class="pull-right"><t t-esc="payment['total']" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                                    <t t-set="tot" t-value="tot + payment['total']"/>
                                </p>
                                <p>
                                    <span colspan="3" ></span>
                                    <span  class="pull-right"><t t-esc="tot" t-options="{'widget': 'float', 'precision': currency_precision}"/></span>
                                </p>
                            </div>
                        </div> -->
                        <!-- <hr/>
                    </div>
                </t>
            </t>
        </template> -->
        <record id="pos_paper_format" model="report.paperformat">
            <field name="name">Sales Details</field>
            <field name="default" eval="True" />
            <field name="format">custom</field>
            <field name="page_height">230</field>
            <field name="page_width">100</field>
            <field name="margin_top">25</field>
            <field name="margin_bottom">15</field>
            <field name="margin_left">5</field>
            <field name="margin_right">5</field>
            <field name="header_line" eval="False" />
            <field name="orientation">Portrait</field>
            <field name="header_spacing">17</field>
            <field name="dpi">110</field>
        </record>

        <record id="pos_paper_format_new" model="report.paperformat">
            <field name="name">Sales Details (Z Report) (a)</field>
            <field name="default" eval="True" />
            <field name="format">custom</field>
            <field name="page_height">230</field>
            <field name="page_width">100</field>
            <field name="margin_top">30</field>
            <field name="margin_bottom">15</field>
            <field name="margin_left">5</field>
            <field name="margin_right">5</field>
            <field name="header_line" eval="False" />
            <field name="orientation">Portrait</field>
            <field name="header_spacing">25</field>
            <field name="dpi">110</field>
        </record>

        <record id="pos_paper_format_ss" model="report.paperformat">
            <field name="name">Sale Summary Paperformat</field>
            <field name="default" eval="True" />
            <field name="format">custom</field>
            <field name="page_height">230</field>
            <field name="page_width">100</field>
            <field name="margin_top">30</field>
            <field name="margin_bottom">15</field>
            <field name="margin_left">5</field>
            <field name="margin_right">5</field>
            <field name="header_line" eval="False" />
            <field name="orientation">Portrait</field>
            <field name="header_spacing">25</field>
            <field name="dpi">110</field>
        </record>

    </data>
</odoo>
