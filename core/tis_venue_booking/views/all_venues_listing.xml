<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="all_venues_listing">
        <t t-call="website.layout">
            <div class="oe_structure oe_empty"/>
            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    <figure>
                        <t t-foreach="website.get_inner_banner()"
                           t-as="slider">
                            <t t-if="slider_index == 0">
                                <div class="carousel-item active">
                                    <img class="d-block w-100 banner"
                                         t-attf-style="background-image:url('/website/image/inner.banner/{{slider.id}}/image')"/>
                                    <div class="carousel-caption banner_img">
                                        <h1>
                                            <t t-esc="slider.header"></t>
                                        </h1>
                                        <br/>
                                        <p>
                                            <t t-esc="slider.description"></t>
                                        </p>
                                    </div>
                                </div>
                            </t>
                            <t t-else="">
                                <div class="carousel-item">
                                    <img class="d-block w-100 banner"
                                         t-attf-style="background-image:url('/website/image/inner.banner/{{slider.id}}/image')"/>
                                    <div class="carousel-caption banner_img">
                                        <h1>
                                            <t t-esc="slider.header"></t>
                                        </h1>
                                        <br/>
                                        <p>
                                            <t t-esc="slider.description"></t>
                                        </p>
                                    </div>
                                </div>
                            </t>

                        </t>
                    </figure>
                </div>

                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>

            <section class="forms sticky-top">
                <div class="wrap">
                    <form class="forms_search" action="/venue/filtered" method="post" enctype="multipart/form-data">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <div class="row">
                            <div class="col-md-6 col-sm-12 col-lg-3">
                                <div class="row">
                                    <div class="col-md-2 d-flex mb-2 mt-3">
                                        <img src="/tis_venue_booking/static/src/images/location.png"
                                             class="my-auto"/>
                                    </div>

                                    <div class="col-md-10">
                                        <h5 class="mb-2">Location</h5>
                                        <div class="select-dropdown">
                                            <select name="location" id="selected_location">
                                                <option>-- select an option --</option>
                                                <t t-esc="all_locations"></t>
                                                <t t-foreach="all_locations" t-as="l">
                                                    <option t-att-value="l.id">
                                                        <t t-esc="l.name"/>
                                                    </option>
                                                </t>
                                            </select>
                                            <script>
                                                var token = $('input[name="csrf_token"]').attr('value');
                                            </script>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-sm-12 col-lg-3">
                                <div class="row">
                                    <div class="col-md-2 d-flex mb-2 mt-3">
                                        <img src="/tis_venue_booking/static/src/images/calendar.png"
                                             class="my-auto"/>
                                    </div>

                                    <div class="col-md-10">
                                        <h5 class="mb-2">Check in</h5>
                                        <div class="select-dropdown" id="date_booking_from"
                                             data-target-input="nearest">
                                            <input type="text" class="form-control datetimepicker-input"
                                                   data-target="#date_booking_from" id="start" name="booking_from"
                                                   required="True"/>
                                            <div class=""
                                                 data-target="#date_booking_from"
                                                 data-toggle="datetimepicker">
                                                <div class="input-group-text"
                                                     style="position: absolute;right: 0px;top: -27px;background: none;border: none;">
                                                    <i class="fa fa-calendar"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-sm-12 col-lg-3">
                                <div class="row">
                                    <div class="col-md-2 d-flex mb-2 mt-3">
                                        <img src="/tis_venue_booking/static/src/images/calendar_out.png"
                                             class="my-auto"/>
                                    </div>

                                    <div class="col-md-10">
                                        <h5 class="mb-2">Check out</h5>
                                        <div class="select-dropdown" id="date_booking_to"
                                             data-target-input="nearest">
                                            <input type="text" class="form-control datetimepicker-input"
                                                   data-target="#date_booking_to" id="end" name="booking_to"
                                                   required="True"/>
                                            <div class="" data-target="#date_booking_to"
                                                 data-toggle="datetimepicker">
                                                <div class="input-group-text"
                                                     style="position: absolute;right: 0px;top: -27px;background: none;border: none;">
                                                    <i class="fa fa-calendar"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-sm-12 col-lg-2">
                                <h5 class="mb-2">Venue</h5>
                                <div class="select-dropdown">
                                    <select name="venue" class="dynamic_options" id="dynamic_options">

                                    </select>
                                    <select name="venue" id="select_venues">
                                        <option>-- select an option --</option>
                                        <t t-esc="all_venues"></t>
                                        <t t-foreach="all_venues" t-as="l">
                                            <option t-att-value="l.id">
                                                <t t-esc="l.name"/>
                                            </option>
                                        </t>
                                    </select>
                                    <script>
                                        var token = $('input[name="csrf_token"]').attr('value');
                                    </script>
                                </div>
                            </div>
                            <div class="col-md-12 col-sm-12 col-lg-1 mt-3">
                                <button class="btn_main" id="search_button">
                                    <i class="fa fa-search"></i>
                                    Search
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </section>

            <section class="brands mt-5 mb-5">
                <div class="container">
                    <div class="carousel-wrap">
                        <div id="category" class="owl-carousel">
                            <t t-foreach="venue_type" t-as="o">
                                <div class="item">
                                    <a t-attf-href="/venue/by/type/#{o.id}">
                                        <t t-if="o.image">
                                            <img t-attf-src="data:image/*;base64,{{o.image}}"
                                                 class="rounded mx-auto d-block" alt="Owl Image"/>
                                            <p>
                                                <t t-esc="o.name"/>
                                            </p>
                                        </t>
                                        <t t-else="">
                                            <img src="/tis_venue_booking/static/src/images/image.png"
                                                 class="rounded mx-auto d-block"/>
                                            <p>
                                                <t t-esc="o.name"/>
                                            </p>
                                        </t>
                                    </a>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
            </section>

            <section class="rec_spot mt-5 mb-5">
                <div class="container">
                    <div class="row">
                        <div class="col-md-3">
                            <!--<h3>Filter By</h3>-->
                            <form class="price mb-5" action="/venue/filtered" method="post"
                                  enctype="multipart/form-data">
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                                <p>Filter Budget</p>
                                <div class="">
                                    <t t-set="i" t-value="1"/>
                                    <t t-foreach="all_venues" t-as="l">
                                        <t t-set="currency" t-value="l.currency_id.symbol">
                                        </t>
                                        <t t-if="i==1">
                                            <div class="">
                                                <input type="range"
                                                       class="custom-range align-middle o_we_quality_range"
                                                       id="budget" name="budget" min="0" max="100000" step="1"
                                                       aria-describedby="rangeQualityHelp" value="0"/>
                                                <label>Upto:
                                                    <span>
                                                        <t t-esc="currency"/>
                                                    </span>
                                                    <span class="budget-output" for="budget"/>
                                                </label>
                                            </div>
                                            <script type='text/javascript'>

                                                const budget = document.querySelector('#budget')
                                                const output = document.querySelector('.budget-output')

                                                output.textContent = budget.value

                                                budget.addEventListener('input', function() {

                                                output.textContent = budget.value
                                                });
                                                var token = $('input[name="csrftoken"]').attr('value');
                                            </script>
                                        </t>
                                        <t t-set="i" t-value="i+1"/>
                                    </t>
                                </div>

                                <p class="mt-3">Filter Capacity</p>
                                <div class="">
                                    <div class="">
                                        <input type="range" class="custom-range align-middle o_we_quality_range"
                                               id="capacity" name="capacity" min="0" max="10000" step="1"
                                               aria-describedby="rangeQualityHelp" value="0"></input>
                                        <label>Upto:
                                            <span class="capacity-output" for="capacity"></span>
                                        </label>
                                    </div>
                                    <script type='text/javascript'>
                                        const capacity = document.querySelector('#capacity')
                                        const output_capacity = document.querySelector('.capacity-output')
                                        output_capacity.textContent = capacity.value
                                        capacity.addEventListener('input', function() {
                                        output_capacity.textContent = capacity.value
                                        });
                                        var token = $('input[name="csrftoken"]').attr('value');
                                    </script>
                                </div>
                                <hr/>
                                <label class="frm_dtl_labal">
                                    <span class="headings">Booking Type</span>
                                    <br/>
                                    <br/>
                                    <input type="radio" id="type_days"
                                           name="booking_type"
                                           required="True"
                                           value="day" checked="checked"/>
                                    <label for="day">Day Basis</label>&amp;nbsp;&amp;nbsp;&amp;nbsp;
                                    <input type="radio" id="type_hours"
                                           name="booking_type"
                                           value="hour"
                                           style="margin-left: 8%;"/>
                                    <label for="hour">Hour Basis</label>
                                </label>
                            </form>

                            <div class="amenities mb-5">
                                <p>Amenitites</p>
                                <t t-foreach="amenities" t-as="amenity">
                                    <input type="checkbox" id="amenities_select" name="amenities"
                                           t-att-value="amenity.id"/>
                                    <label for="amenities" t-att-value="amenity.id">
                                        <t t-esc="amenity.name"/>
                                    </label>
                                    <br/>
                                </t>
                                <!--                                <t t-if="amenities">-->
                                <!--                                    <button id="filter_amenities">Apply</button>-->
                                <!--                                </t>-->

                            </div>
                        </div>


                        <!--                -->
                        <div class="col-md-9">
                            <!--<h3>Available Venue</h3>-->
                            <div class="row">
                                <div class="show" style="display: contents;width: 100%;"></div>
                            </div>
                            <div class="row static_card">
                                <t t-foreach="all_venues" t-as="o">
                                    <a t-attf-href="/venue/#{o.id}">
                                        <div class="col-md-4 mb-5">

                                            <div class="card h-100 mb-4">
                                                <t t-if="o.image_medium">
                                                    <img style="width: 100%;"
                                                         t-attf-src="data:image/png;base64,#{o.image_medium}"/>
                                                </t>
                                                <t t-else="">
                                                    <img style="width: 100%;"
                                                         src="/tis_venue_booking/static/src/images/image.png"/>
                                                </t>
                                                <div class="rec_content text-center mt-3 mb-5">
                                                    <h2>
                                                        <t t-esc="o.name" style="text-transform: uppercase;"/>
                                                    </h2>
                                                    <p>
                                                        <t t-if="o.charges_per_day">
                                                            <span t-esc="o.charges_per_day"/>
                                                            <span t-esc="o.currency_id.symbol"/>
                                                        </t>
                                                        <t t-else="">Not Defined</t>
                                                        / Day -
                                                        <t t-if="o.charges_per_hour">
                                                            <span t-esc="o.charges_per_hour"/>
                                                            <span t-esc="o.currency_id.symbol"/>
                                                        </t>
                                                        <t t-else="">Not Defined</t>
                                                        / Hour
                                                    </p>
                                                    <p>Capacity :
                                                        <t t-if="o.capacity">
                                                            <t t-esc="o.capacity"/>
                                                            Units
                                                        </t>
                                                        <t t-else="">Not Defined</t>
                                                    </p>
                                                    <p>Seating :
                                                        <t t-if="o.seating">
                                                            <t t-esc="o.seating"/>
                                                            Units
                                                        </t>
                                                        <t t-else="">Not Defined</t>
                                                    </p>
                                                    <a t-attf-href="/venue/#{o.id}/booking">
                                                        <button>Request Booking</button>
                                                    </a>
                                                </div>
                                            </div>

                                        </div>
                                    </a>
                                </t>
                            </div>
                        </div>
                    </div>


                </div>
            </section>
        </t>
    </template>
</odoo>