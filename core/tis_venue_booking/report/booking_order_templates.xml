<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_bookingorder">
        <t t-call="web.external_layout">
            <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)"/>
            <t t-set="address">
                <div t-field="doc.partner_id"
                     t-options='{"widget": "contact", "fields": ["address", "name","phone","mobile","website"], "no_marker": True, "phone_icons": True}'/>
                <p t-if="doc.partner_id.vat">
                    <t t-esc="doc.company_id.country_id.vat_label or 'Tax ID'"/>
                    :
                    <span t-field="doc.partner_id.vat"/>
                </p>
            </t>
            <div class="page" style="color:#4c4c4c;">
                <div class="oe_structure"/>
                <center>
                    <h3 style="color:#4c4c4c;margin-top: 41px;">
                        <span>Booking Order -</span>
                        <span t-field="doc.name"/>
                    </h3>
                </center>


                <div class="row mt-5 mb-3">
                    <div class="col-3">
                        <t t-if="doc.from_date">
                            <strong style="font-size: 14px;margin-top: 10px;margin-bottom: 10px;font-weight:400;color:#4c4c4c;"><span style="color: red;font-size: 16px;">Booking From</span><br/>
<!--                                <strong t-esc="datetime.datetime.strptime(str(doc.from_date), '%Y-%m-%d %H:%M:%S').strftime('%d-%m-%Y %H:%M:%S')">-->

<!--                                </strong>-->
                                <strong t-field ="doc.from_date"/>
                            </strong>
                        </t>
                    </div>
                    <div class="col-3">
                        <t t-if="doc.to_date" style="margin-top:10px;">
                            <strong style="font-size: 14px;margin-top: 10px;margin-bottom: 10px;font-weight:400;color:#4c4c4c;"><span style="color: red;font-size: 16px;">Booking To</span><br/>
<!--                                <strong t-esc="datetime.datetime.strptime(str(doc.to_date), '%Y-%m-%d %H:%M:%S').strftime('%d-%m-%Y %H:%M:%S')">-->

<!--                                </strong>-->
                                <strong t-field ="doc.to_date"/>
                            </strong>
                        </t>
                    </div>
                    <div class="col-3">
                        <t t-if="doc.confirmation_date">
                            <strong style="font-size: 14px;margin-top: 10px;margin-bottom: 10px;font-weight:400;color:#4c4c4c;"><span style="color: red;font-size: 16px;">Confirmation Date</span><br/>
<!--                                <strong t-esc="datetime.datetime.strptime(str(doc.confirmation_date), '%Y-%m-%d %H:%M:%S').strftime('%d-%m-%Y %H:%M:%S')">-->

<!--                                </strong>-->
                                <strong t-field ="doc.confirmation_date"/>
                            </strong>
                        </t>
                    </div>
                    <div class="col-3">
                        <t t-if="doc.days_count">
                            <strong style="font-size: 14px;margin-top: 10px;margin-bottom: 10px;font-weight:400;color:#4c4c4c;"><span style="color: red;font-size: 16px;">Duration</span><br/>
                                <strong t-esc="doc.days_count">
                                </strong>
                                <span t-if="doc.booking_type == 'day'">Days</span>
                                <span t-if="doc.booking_type == 'hourly'">Hours</span>
                            </strong>
                        </t>
                    </div>
                </div>
                <table class="table table-sm o_main_table" style="border: 1px solid #ccc;">
                    <thead>
                        <tr>
                            <th style="padding: 11px 9px !important;">Name</th>
                            <th class="text-right" style="padding: 11px 9px !important;">Quantity</th>
                            <th class="text-right" style="padding: 11px 9px !important;">Unit Price</th>
                            <th class="text-center" style="padding: 11px 9px !important;">Tax</th>
                            <th class="text-right" style="padding: 11px 9px !important;">Price</th>

                        </tr>
                    </thead>
                    <tbody>
                        <t t-if="doc.venue_id">
                            <tr class="bg-200 o_line_section">
                                <td colspan="5" style="padding: 14px 0 14px 13px !important;">
                                    <strong>Venue</strong>
                                </td>
                            </tr>
                            <td style="padding: 14px 0 14px 13px !important;">
                                <span t-field="doc.venue_id.name"/>
                            </td>
                            <td class="text-right" style="padding: 14px 13px !important;">
                                <span t-field="doc.days_count"/>
                            </td>
                            <td class="text-right" style="padding: 14px 13px !important;">
                                <span t-field="doc.booking_charge"/>
                            </td>
                            <td class="text-right" style="padding: 14px 13px !important;">
                                <span t-field="doc.venue_tax_ids"/>
                            </td>
                            <td class="text-right" style="padding: 14px 13px !important;">
                                <span t-field="doc.venue_booking_charge"/>
                            </td>
                        </t>
                    </tbody>
                    <tbody>
                        <t t-if="doc.additional_charge > 0">
                            <td style="padding: 14px 0 14px 13px !important;">
                                <span>Additional Charge</span>
                            </td>
                            <td class="text-right" style="padding: 14px 13px !important;">
                                <span t-field="doc.days_count"/>
                            </td>
                            <td class="text-right" style="padding: 14px 13px !important;">
                                <span t-field="doc.additional_charge"/>
                            </td>
                            <td class="text-right" style="padding: 14px 13px !important;">
                            </td>
                            <td class="text-right" style="padding: 14px 13px !important;">
                                <span t-field="doc.additional_booking_charge"/>
                            </td>
                        </t>
                    </tbody>
                    <tbody>
                        <t t-if="doc.booking_amenities_ids">
                            <t t-if="doc.booking_amenities_ids.filtered(lambda x: x.types=='inclusive')">
                                <tr class="bg-200 o_line_section">
                                    <td colspan="5">
                                        <strong>Included Amenities</strong>
                                    </td>
                                </tr>
                                <tr t-foreach="doc.booking_amenities_ids.filtered(lambda x: x.types=='inclusive')"
                                    t-as="line">
                                    <td style="padding: 14px 0 14px 13px !important;">
                                        <span t-field="line.amenities_id"/>
                                    </td>
                                    <td class="text-right" style="padding: 14px 13px !important;">
                                        <span t-esc="line.quantity * line.duration"/>
                                    </td>
                                    <td class="text-right" style="padding: 14px 13px !important;">
                                        <span t-field="line.price"/>
                                    </td>
                                    <td class="text-right" style="padding: 14px 13px !important;">
                                        <span t-field="line.taxes"/>
                                    </td>
                                    <td class="text-right" style="padding: 14px 13px !important;">
                                        <span t-field="line.price_subtotal"/>
                                    </td>
                                    <br/>
                                </tr>
                            </t>
                            <t t-if="doc.booking_amenities_ids.filtered(lambda x: x.types=='additional')">
                                <tr class="bg-200 o_line_section">
                                    <td colspan="5">
                                        <strong>Extra Amenities</strong>
                                    </td>
                                </tr>
                                <tr t-foreach="doc.booking_amenities_ids.filtered(lambda x: x.types=='additional')"
                                    t-as="line">
                                    <td style="padding: 14px 0 14px 13px !important;">
                                        <span t-field="line.amenities_id"/>
                                    </td>
                                    <td class="text-right" style="padding: 14px 13px !important;">
                                        <span t-esc="line.quantity * line.duration"/>
                                    </td>
                                    <td class="text-right" style="padding: 14px 13px !important;">
                                        <span t-field="line.price"/>
                                    </td>
                                    <td class="text-right" style="padding: 14px 13px !important;">
                                        <span t-field="line.taxes"/>
                                    </td>
                                    <td class="text-right" style="padding: 14px 13px !important;">
                                        <span t-field="line.price_subtotal"/>
                                    </td>
                                    <br/>
                                </tr>
                            </t>

                        </t>
                    </tbody>
                </table>
                <div class="clearfix">
                    <div id="total" class="row" name="total">
                        <div t-attf-class="#{'col-12' if report_type != 'html' else 'col-sm-7 col-md-5'} ml-auto">
                            <table class="table table-sm table_second">
                                <style>
                                    .table_second tr td{
                                    border: none !important;
                                    }

                                    table tr td{
                                    color: #4c4c4c;
                                    }

                                    table tr td strong{
                                    color: #4c4c4c;
                                    }
                                </style>
                                <tr class="o_subtotal">
                                    <td style="border: none !important;color: #4c4c4c;">
                                        <strong style="color: #4c4c4c;">Venue Total</strong>
                                    </td>
                                    <td class="text-right" style="border: none !important;">
                                        <span t-field="doc.venue_booking_charge"/>
                                    </td>
                                </tr>
                                <t t-if="doc.additional_charge > 0">
                                    <tr style="">
                                        <td style="color: #4c4c4c;">
                                            <strong style="color: #4c4c4c;">Additional Charges</strong>
                                        </td>
                                        <td class="text-right">
                                            <span t-field="doc.additional_booking_charge"/>
                                        </td>
                                    </tr>
                                </t>
                                <tr style="">
                                    <td style="border-bottom:1px solid #ccc !important;padding-bottom: 25px;color: #4c4c4c;">
                                        <strong style="color: #4c4c4c;">Amenities Total</strong>
                                    </td>
                                    <td class="text-right" style="border-bottom:1px solid #ccc !important;padding-bottom: 25px;">
                                        <span t-field="doc.amenities_amount_untaxed"/>
                                    </td>
                                </tr>
                                <tr class="border-black o_subtotal" style="margin-top:30px;">
                                    <td style="color: #4c4c4c;">
                                        <strong style="color: #4c4c4c;">Tax</strong>
                                    </td>
                                    <td class="text-right">
                                        <span t-field="doc.total_tax"/>
                                    </td>
                                </tr>
                                <tr style="">
                                    <td style="color: #4c4c4c;">
                                        <strong style="color: #4c4c4c;">Grand Total</strong>
                                    </td>
                                    <td class="text-right">
                                        <span t-field="doc.amount_total"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="report_bookingorder_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="tis_venue_booking.report_bookingorder" t-lang="doc.partner_id.lang"/>
            </t>
        </t>
    </template>
</odoo>