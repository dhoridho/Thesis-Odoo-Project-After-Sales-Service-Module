<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="approval_dashboard_asset_backend"  inherit_id="web.assets_backend">      
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/equip3_approval_dashboard/static/src/js/dashboard.js"/>
                <link rel="stylesheet" type="text/css" href="/equip3_approval_dashboard/static/src/css/style.css"/>
            </xpath>
        </template>

        <record id="equip3_approval_dashboard.action_view_approval_dashboard_tree" model="ir.actions.act_window">
            <field name="name">Approval Dashboard</field>
            <field name="res_model">approval.dashboard.report</field>
            <field name="view_mode">tree</field>
            <field name="help" type="html">
                <p></p>
            </field>
        </record>

        <record id="rr_approval_dashboard_board" model="ir.actions.client">
            <field name="name">Approval Dashboard</field>
            <field name="tag">rr_approval_dashboard_board</field>
        </record>

        <record id="ir_actions_server_board_approval_dashboard_board" model="ir.actions.server">
            <field name="name">Approval Dashboard</field>
            <field name="model_id" ref="equip3_approval_dashboard.model_approval_dashboard_report"/>
            <field name="state">code</field>
            <field name="activity_user_type">generic</field>
             <field name="type">ir.actions.server</field>
            <field name="code">action = model.action_dashboard_redirect()</field>
        </record>

        <record id="ir_actions_server_ess_approval_dashboard_board" model="ir.actions.server">
            <field name="name">Approval Dashboard</field>
            <field name="model_id" ref="equip3_approval_dashboard.model_approval_dashboard_report"/>
            <field name="state">code</field>
            <field name="activity_user_type">generic</field>
             <field name="type">ir.actions.server</field>
            <field name="code">action = model.action_dashboard_redirect()</field>
        </record>

        <record id="approval_dashboard_board_config_tree" model="ir.ui.view">
            <field name="name">approval_dashboard_board_config_tree</field>
            <field name="model">approval.dashboard.report.config</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="sequence" widget="handle"/>
                    <field name="name" required="1"/>
                    <field name="model_id" required="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" />
                </tree>
                </field>
        </record>

        <record id="approval_dashboard_board_config_form" model="ir.ui.view">
            <field name="name">approval_dashboard_board_config_form</field>
            <field name="model">approval.dashboard.report.config</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="name" required="1"/>
                                <field name="model_id" required="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" />
                                <field name="approval_field_id" domain="[('model_id','=',model_id),('ttype','=','many2one')]" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" required="1"/>
                                <field name="model_approval_id" readonly="1" force_save="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" required="1"/>
                                <field name="model_state_id" invisible="1" force_save="1"/>
                            </group>
                            <group>
                                
                                <field name="approval_number_field_id" domain="[('model_id','=',model_approval_id),('ttype','=','char')]" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" required="1"/>
                                <field name="approval_employee_field_id" domain="[('model_id','=',model_approval_id),('ttype','=','many2one')]" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" required="1"/>
                                <field name="approval_state_field_id" domain="[('model_id','=',model_id),('ttype','in',['selection','text'])]" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" required="1"/>
                            </group>
                        </group>   
                        <div style="padding:0px 15px;">
                            <br/><br/>
                            <h1 class="text-center">Note :</h1> 
                            <br/><br/>
                            <p style="width:50%;">
                                - <b>Name</b> : Enter the name/ket that will appear on the bar/pie chart.
                            </p>
                            <p style="width:50%;">
                                - <b>Obj Approval</b> : Enter the name of the approval object, how to get the name, please activate the debug feature then click the approval matrix tab, hover the cursor on the approval table, a pop up information will appear and see the description on <i>Relation</i>.
                            </p>
                            <br/>
                            <img class="img img-responsive" src="/equip3_approval_dashboard/static/src/img/board tutor1.png" />
                            <br/>
                            <img class="img img-responsive" src="/equip3_approval_dashboard/static/src/img/board tutor 3.png" />
                            <br/><br/>
                            <p style="width:50%;">
                                - <b>Relation Field</b> : Enter the name of the field that corresponds to the name of the record later which when clicked on the dashboard page will go to that page ex: leave,expense, employee travel.
                            </p>
                            <br/>
                            <img class="img img-responsive" src="/equip3_approval_dashboard/static/src/img/board tutor 4.png" />
                            <br/><br/>
                            <p style="width:50%;">
                                - <b>Obj Relation</b> : After entering <i>Relation Field</i>, make sure for <i>Obj Relation</i> has been auto-filled correctly in a way like the image below.
                            </p>
                            <br/>
                            <img class="img img-responsive" src="/equip3_approval_dashboard/static/src/img/board tutor5.png" />
                            <br/>
                            <img class="img img-responsive" src="/equip3_approval_dashboard/static/src/img/board tutor 6.png" />
                            <br/>
                            <br/>
                            <p style="width:50%;">
                                But there is a possibility that the name is not the same, if it is not the same then it needs to be confirmed this way :
                            </p>
                            <br/>
                            <img class="img img-responsive" src="/equip3_approval_dashboard/static/src/img/board tutor 7.png" />
                            <br/><br/>
                            <img class="img img-responsive" src="/equip3_approval_dashboard/static/src/img/board tutor 8.png" />
                            <br/><br/>
                            <img class="img img-responsive" src="/equip3_approval_dashboard/static/src/img/board tutor 9.png" />
                            <br/><br/>
                            <p style="width:50%;">
                                - <b>Number Field</b> : Enter the name of the field number/name on the record that requires approval ('Name'/'Number'/Display Name').
                            </p>
                            <br/>
                            <p style="width:50%;">
                                - <b>Employee Field</b> : Enter the name of the employee field on the record that requires approval ('Employee').
                            </p>
                            <br/>
                            <p style="width:50%;">
                                - <b>Status Field</b> : Enter the name of the approval status field (search for related words / there is a word status).
                            </p>
                            <br/><br/>
                            <h3>The following is an example of the correct dashboard configuration :</h3> 
                            <br/>
                            <img class="img img-responsive" src="/equip3_approval_dashboard/static/src/img/board tutor 10.png" />
                        </div>
                    </sheet>                
                </form>
                </field>
        </record>

        <record id="approval_dashboard_board_config_act" model="ir.actions.act_window">
            <field name="name">Configuration</field>
            <field name="res_model">approval.dashboard.report.config</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem
                name="Approvals Dashboard"
                id="menu_approval_dashboard"
                web_icon="equip3_approval_dashboard,static/description/icon.svg"
                sequence="3"/>
        <menuitem
                name="Approvals"
                id="menu_approval_dashboard_dashboard"
                action="ir_actions_server_board_approval_dashboard_board"
                parent="menu_approval_dashboard"
                sequence="1"/>

        <menuitem
                name="Configuration"
                id="menu_approval_dashboard_dashboard_config_parent"
                parent="menu_approval_dashboard"
                sequence="2"/>

        <menuitem
                name="Approvals Configuration"
                id="menu_approval_dashboard_dashboard_config"
                action="approval_dashboard_board_config_act"
                parent="menu_approval_dashboard"
                sequence="1"/>

<!--         <menuitem
                name="Configuration ESS"
                id="menu_approval_dashboard_ess_config"
                action="ir_actions_server_ess_approval_dashboard_board"
                parent="menu_approval_dashboard_dashboard_config_parent"
                sequence="2"/>
 -->
        <record id="equip3_approval_dashboard.menu_approval_dashboard" model="ir.ui.menu">
          <field name="equip_category_id" ref="equip3_hashmicro_ui.category_management"/> 
          <field name="parent_id" eval="False"/>
      </record>

    </data>
</odoo>
