<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <record id="mrp_production_tree_view_inherit" model="ir.ui.view">
            <field name="name">mrp.production.tree.view.inherit</field>
            <field name="model">mrp.production</field>
            <field name="inherit_id" ref="mrp.mrp_production_tree_view"/>
            <field name="arch" type="xml">
                <xpath expr="//tree" position="attributes">
                    <attribute name="string">Production Orders</attribute>
                </xpath>

                <xpath expr="//field[@name='name']" position="attributes">
                    <attribute name="string">Production Order</attribute>
                </xpath>

                <xpath expr="//field[@name='date_planned_start']" position="after">
                    <field name="date_planned_finished" optional="hide"/>
                    <field name="date_start" optional="hide"/>
                    <field name="date_finished" optional="hide"/>
                </xpath>

                <xpath expr="//field[@name='product_id']" position="after">
                    <xpath expr="//field[@name='product_qty']" position="move"/>
                </xpath>

                <xpath expr="//field[@name='company_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='company_id']" position="after">
                    <field name="branch_id" invisible="1"/>
                </xpath>

                <xpath expr="//field[@name='state']" position="attributes">
                    <attribute name="decoration-info">False</attribute>
                    <attribute name="decoration-muted">state == 'draft'</attribute>
                    <attribute name="decoration-warning3">state == 'approval'</attribute>
                    <attribute name="decoration-warning2">state == 'approved'</attribute>
                    <attribute name="decoration-danger">state == 'reject'</attribute>
                    <attribute name="decoration-primary">state == 'confirmed'</attribute>
                    <attribute name="decoration-danger3">state == 'cancel'</attribute>
                    <attribute name="decoration-warning">state == 'progress'</attribute>
                    <attribute name="decoration-success3">state == 'to_close'</attribute>
                    <attribute name="decoration-success">state == 'done'</attribute>
                </xpath>
            </field>
        </record>

        <record id="mrp_production_form_view_inherit" model="ir.ui.view">
            <field name="name">mrp_production_form</field>
            <field name="model">mrp.production</field>
            <field name="inherit_id" ref="mrp.mrp_production_form_view"/>
            <field name="arch" type="xml">

                <xpath expr="//form" position="attributes">
                    <attribute name="string">Production Orders</attribute>
                </xpath>

                <!-- 3 column-->

                <xpath expr="//group" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//group" position="before">
                    <group name="group_prod_order">
                        <div name="container_prod_order">
                            <div class="row" name="row_prod_order">
                                <div class="col" name="col_1">
                                    <group name="group_col_1">
                                        <field name="id" invisible="1"/>
                                        <field name="use_create_components_lots" invisible="1"/>
                                        <field name="show_lot_ids" invisible="1"/>
                                        <field name="product_tracking" invisible="1"/>
                                        <field name="product_id" context="{'default_type': 'product'}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        <field name="product_tmpl_id" invisible="1"/>
                                        <field name="product_description_variants" attrs="{'invisible': [('product_description_variants', 'in', (False, ''))], 'readonly': [('state', '!=', 'draft')]}"/>
                                        <label for="product_qty" string="Quantity"/>
                                        <div class="o_row no-gutters d-flex">
                                            <div attrs="{'invisible': [('state', '=', 'draft')]}" class="o_row">
                                                <field name="qty_producing" class="text-left" attrs="{'readonly': ['|', ('state', '=', 'cancel'), '&amp;', ('state', '=', 'done'), ('is_locked', '=', True)]}"/>
                                                /
                                            </div>
                                            <field name="product_qty" class="oe_inline text-left" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <label for="product_uom_id" string="" class="oe_inline"/>
                                            <field name="product_uom_category_id" invisible="1"/>
                                            <field name="product_uom_id" options="{'no_open': True, 'no_create': True}" force_save="1" groups="uom.group_uom" attrs="{'readonly': [('state', '!=', 'draft')]}" class="oe_inline"/>
                                            <span class="text-bf">To Produce</span>
                                        </div>
                                        <field name="mrp_plan_id" readonly="1" attrs="{'invisible' : [('mrp_plan_id', '=', False)]}"/>
                                        <field name="user_id" domain="[('share', '=', False)]"/>
                                        <label for="lot_producing_id" attrs="{'invisible': ['|', ('state', '=', 'draft'), ('product_tracking', 'in', ('none', False))]}"/>
                                        <div class="o_row" attrs="{'invisible': ['|', ('state', '=', 'draft'), ('product_tracking', 'in', ('none', False))]}">
                                            <field name="lot_producing_id" context="{'default_product_id': product_id, 'default_company_id': company_id}" attrs="{'invisible': [('product_tracking', 'in', ('none', False))]}"/>
                                            <button name="action_generate_serial" type="object" class="btn btn-primary fa fa-plus-square-o" aria-label="Creates a new serial/lot number" title="Creates a new serial/lot number" role="img" attrs="{'invisible': ['|', ('product_tracking', 'in', ('none', False)), ('lot_producing_id', '!=', False)]}"/>
                                        </div>
                                        <field name="bom_id" context="{'default_product_tmpl_id': product_tmpl_id}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                    </group>
                                </div>
                                <div class="col" name="col_2">
                                    <group name="group_col_2">
                                        <label for="date_planned_start"/>
                                        <div class="oe_inline">
                                            <field name="date_planned_start" attrs="{'readonly': [('state', '!=', 'draft')]}" class="mr8 oe_inline"/>
                                            <strong class="mr8 oe_inline">to</strong>
                                            <field name="date_planned_finished" class="oe_inline" readonly="1" force_save="1"/>
                                            <field name="delay_alert_date" invisible="1"/>
                                            <field string=" " name="json_popover" widget="stock_rescheduling_popover" attrs="{'invisible': [('delay_alert_date', '=', False)]}"/>
                                        </div>
                                        <label for="date_start" string="Actual Date" attrs="{'invisible': [('date_start', '=', False), ('date_finished', '=', False)]}"/>
                                        <div class="oe_inline" attrs="{'invisible': [('date_start', '=', False), ('date_finished', '=', False)]}">
                                            <field name="date_start" class="mr8 oe_inline"/>
                                            <strong class="mr8 oe_inline">to</strong>
                                            <field name="date_finished" class="oe_inline"/>
                                        </div>
                                        <field name="is_user_working" invisible="1"/>
                                        <field name="workorder_working_count" invisible="1"/>
                                        <label for="duration_expected"/>
                                        <div>
                                            <field name="duration_expected" widget="float_time_hms" class="oe_inline"/> hours
                                        </div>
                                        <label for="duration"/>
                                        <div>
                                            <field name="duration" widget="equip_time_counter" class="oe_inline"/> hours
                                        </div>
                                        <field name="production_location_id" invisible="1" readonly="1"/>
                                        <field name="bom_finished_type" invisible="1"/>
                                        <field name="bom_operation_start_mode" invisible="1"/>
                                    </group>
                                </div>
                                <div class="col" name="col_3">
                                    <group name="group_col_3">
                                        <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}" readonly="1" force_save="1"/>
                                    </group>
                                </div>
                            </div>
                        </div>
                    </group>
                </xpath>
                
                <!-- BUTTONS -->
                <xpath expr="//button[@name='action_confirm']" position="attributes">
                    <attribute name="attrs">{
                        'invisible': ['|',
                            '&amp;', ('is_matrix_on', '=', True), ('state', '!=', 'approved'),
                            '&amp;', ('is_matrix_on', '=', False), ('state', '!=', 'draft')
                        ]}</attribute>
                </xpath>
                <xpath expr="//button[@name='action_cancel']" position="attributes">
                    <attribute name="attrs">{
                        'invisible': [
                            ('state', 'not in', ['draft', 'approval', 'approved', 'confirmed']),
                        ]}</attribute>
                </xpath>
                <xpath expr="//button[@name='action_cancel'][2]" position="replace"></xpath>
                <xpath expr="//button[@name='button_scrap']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//button[@name='button_unplan']" position="replace">
                    <button name="button_unplan" type="object" string="Unplan" attrs="{'invisible': ['|', ('is_planned', '=', False), ('state', 'in', ('progress', 'to_close', 'done', 'cancel'))]}"/>
                </xpath>
                <xpath expr="//button[@name='button_plan']" position="attributes">
                    <attribute name="attrs">{'invisible': ['|', '|', ('state', 'not in', ('confirmed', 'progress')), ('workorder_ids', '=', []), ('is_planned', '=', True)]}</attribute>
                </xpath>
                <xpath expr="//field[@name='show_lock']" position="after">
                    <field name="user_is_approver" invisible="1"/>
                    <button string="Request Approval" name="action_approval" type="object" class="oe_highlight" attrs="{'invisible': ['|',('state', '!=', 'draft'),('is_matrix_on', '=', False)]}"/>
                    <button string="Approve" name="action_approve" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', ('state', '!=', 'approval'), ('user_is_approver', '=', False), ('is_matrix_on', '=', False)]}"/>
                    <button string="Reject" name="action_reject" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', ('state', '!=', 'approval'), ('user_is_approver', '=', False), ('is_matrix_on', '=', False)]}"/>
                </xpath>
                <xpath expr="//button[@name='button_mark_done'][2]" position="replace">
                    <button
                        name="button_mark_done"
                        attrs="{'invisible' : ['|',('state', 'not in', ['confirmed','progress','to_close']),('mrp_force_done', '=', False)]}"
                        string="Mark as Done"
                        type="object"
                        class="oe_highlight"
                    />
                </xpath>
                <xpath expr="//button[@name='button_mark_done'][2]" position="after">
                    <button
                        name="button_mark_done"
                        attrs="{'invisible' : ['|',('state', '!=', 'to_close'),('mrp_force_done', '=', True)]}"
                        string="Mark as Done"
                        type="object"
                        class="oe_highlight"
                    />
                </xpath>
                <xpath expr="//header" position="inside">
                    <button name="action_set_draft" string="Set To Draft" type="object" attrs="{'invisible': ['|', ('is_locked', '=', True), ('state', '!=', 'reject')]}" class="oe_highlight"/>
                </xpath>

                <xpath expr="//button[@name='button_mark_done'][1]" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//button[@name='button_unbuild']" position="attributes">
                    <attribute name="attrs">{'invisible': [('can_unbuild', '=', False)]}</attribute>
                </xpath>

                <!-- SMART BUTTONS -->
                <xpath expr="//button[@name='action_view_mrp_production_childs']" position="before">
                    <button class="oe_stat_button" name="action_view_unbuilds" type="object" icon="o-hm-smart-all-repair-order" attrs="{'invisible': [('unbuild_count', '=', 0)]}">
                        <div class="o_field_widget o_stat_info">
                            <span class="o_stat_value"><field name="unbuild_count"/></span>
                            <span class="o_stat_text">Unbuilds</span>
                        </div>
                    </button>
                </xpath>

                <!-- SHEET -->
                <xpath expr="//field[@name='product_id']" position="after">
                    <field name="is_matrix_on" invisible="1"/>
                    <field name="is_branch_required" invisible="1"/>
                    <field name="can_unbuild" invisible="1"/>
                </xpath>

                <xpath expr="//field[@name='product_id']" position="attributes">
                    <attribute name="string">Finished Goods</attribute>
                </xpath>

                <xpath expr="//field[@name='state']" position="replace">
                    <field name="state" widget="statusbar" statusbar_visible="draft,approved,confirm,progress,done" attrs="{'invisible': [('is_matrix_on', '=', False)]}"/>
                    <field name="state_no_approval_matrix" widget="statusbar" statusbar_visible="draft,confirm,progress,done" attrs="{'invisible': [('is_matrix_on', '=', True)]}"/>
                </xpath>
<!--                <xpath expr="//label[@for='date_planned_start']" position="replace"/>-->
<!--                <xpath expr="//group/div/div/div[@name='col_2']/group/div[hasclass('o_row')]" position="replace">-->
<!--                    <label for="duration"/>-->
<!--                    <div>-->
<!--                        <field name="duration" widget="equip_time_counter" class="oe_inline"/> hours-->
<!--                    </div>-->
<!--                </xpath>-->
                <xpath expr="//group/div/div/div[@name='col_3']/group" position="inside">
                    <field name="branch_id" attrs="{'required': [('is_branch_required', '=', True)]}" options="{'no_create': True, 'no_create_edit':True}"/>
                    <field name="create_date" string="Created On" readonly="1"/>
                    <field name="create_uid" string="Created By" readonly="1"/>
                    <field name="approval_matrix_id" attrs="{'invisible': [('is_matrix_on', '=', False)], 'required': [('is_matrix_on', '=', True)]}" readonly="1" force_save="1"/>
                    <field name="mrp_force_done" invisible="1"/>
                    <field name="is_mr_created" invisible="1"/>
                </xpath>
<!--                <xpath expr="//field[@name='bom_id']" position="after">-->
<!--                    <label for="date_planned_start"/>-->
<!--                    <div class="oe_inline">-->
<!--                        <field name="date_planned_start" attrs="{'readonly': [('state', '!=', 'draft')]}" class="mr8 oe_inline"/>-->
<!--                        <strong class="mr8 oe_inline">to</strong>-->
<!--                        <field name="date_planned_finished" class="oe_inline" readonly="1" force_save="1"/>-->
<!--                        <field name="delay_alert_date" invisible="1"/>-->
<!--                        <field string=" " name="json_popover" widget="stock_rescheduling_popover" attrs="{'invisible': [('delay_alert_date', '=', False)]}"/>-->
<!--                    </div>-->
<!--                    <label for="date_start" string="Actual Date" attrs="{'invisible': [('date_start', '=', False), ('date_finished', '=', False)]}"/>-->
<!--                    <div class="oe_inline" attrs="{'invisible': [('date_start', '=', False), ('date_finished', '=', False)]}">-->
<!--                        <field name="date_start" class="mr8 oe_inline"/>-->
<!--                        <strong class="mr8 oe_inline">to</strong>-->
<!--                        <field name="date_finished" class="oe_inline"/>-->
<!--                    </div>-->
<!--                    <field name="is_user_working" invisible="1"/>-->
<!--                    <field name="workorder_working_count" invisible="1"/>-->
<!--                    <label for="duration_expected"/>-->
<!--                    <div>-->
<!--                        <field name="duration_expected" widget="float_time_hms" class="oe_inline"/> hours-->
<!--                    </div>-->
<!--                </xpath>-->
                <xpath expr="//field[@name='product_id']" position="before">
                    <field name="sale_order_id" attrs="{'invisible': [('sale_order_id', '=', False)]}"/>
                </xpath>
                <xpath expr="//field[@name='company_id']" position="replace">
                    <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}" readonly="1" force_save="1"/>
                </xpath>

                <xpath expr="//sheet/group/div/div/div[@name='col_1']/group/field[@name='product_id']" position="attributes">
                    <attribute name="options">{'no_create': True, 'no_create_edit':True}</attribute>
                    <attribute name="readonly">1</attribute>
                    <attribute name="force_save">1</attribute>
                </xpath>
                <xpath expr="//sheet/group/div/div/div[@name='col_1']/group/field[@name='bom_id']" position="attributes">
                    <attribute name="options">{'no_create': True, 'no_create_edit':True}</attribute>
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//sheet/group/div/div/div[@name='col_1']/group/field[@name='user_id']" position="attributes">
                    <attribute name="options">{'no_create': True, 'no_create_edit':True}</attribute>
                    <attribute name="attrs">{'readonly': [('state', '!=', 'draft')]}</attribute>
                </xpath>

                <xpath expr="//field[@name='product_id']" position="before">
                    <xpath expr="//field[@name='bom_id']" position="move"/>
                </xpath>

                <!-- FINISHED GOODS TAB -->
                <xpath expr="//field[@name='move_finished_ids']/tree" position="inside">
                    <field name="location_rejected_id"/>
                    <field name="finished_id"/>
                </xpath>

                <xpath expr="//field[@name='move_raw_ids']/parent::page" position="before">
                    <page string="Finished Goods" name="finished_goods" attrs="{'invisible': [('bom_finished_type', '!=', 'multi')]}">
                        <field name="move_finished_only_ids" context="{'force_readonly': 1}">
                            <tree string="Finished Goods">
                                <field name="product_tmpl_id" string="Product"/>
                                <field name="product_id" string="Variant"/>
                                <field name="product_uom_qty" string="Quantity"/>
                                <field name="product_uom" string="Unit of Measure"/>
                                <field name="state" invisible="1"/>
                            </tree>
                        </field>
                    </page>
                </xpath>

                <!-- MATERIAL/COMPONENT TAB -->
                <xpath expr="//field[@name='move_raw_ids']/parent::page" position="attributes">
                    <attribute name="string">Materials</attribute>
                </xpath>
                <xpath expr="//field[@name='move_raw_ids']" position="attributes">
                    <attribute name="readonly">1</attribute>
                    <attribute name="force_save">1</attribute>
                    <attribute name="context">{'default_date': date_planned_start, 'default_date_deadline': date_deadline, 'default_location_id': location_src_id, 'default_location_dest_id': production_location_id, 'default_state': 'draft', 'default_raw_material_production_id': id, 'default_picking_type_id': picking_type_id, 'default_company_id': company_id, 'force_readonly': 1}</attribute>
                </xpath>
                <xpath expr="//field[@name='move_raw_ids']/tree/field[@name='product_uom']" position="after">
                    <field name="location_id" string="Production Location" readonly="1" force_save="1"/>
                    <field name="procure_method" invisible="1"/>
                    <field name="branch_id" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='move_raw_ids']/tree/field[@name='move_line_ids']/tree" position="inside">
                    <field name="date" invisible="1"/>
                    <field name="reference" invisible="1"/>
                    <field name="company_id" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='move_raw_ids']/tree/field[@name='warehouse_id']" position="attributes">
                    <attribute name="invisible">0</attribute>
                    <attribute name="optional">hide</attribute>
                </xpath>
                <xpath expr="//field[@name='move_raw_ids']/tree/field[@name='forecast_availability']" position="attributes">
                    <attribute name="widget">free_widget</attribute>
                </xpath>
                <xpath expr="//field[@name='move_raw_ids']/tree/field[@name='forecast_availability']" position="before">
                    <field name="availability_uom_qty" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='move_raw_ids']/tree/field[@name='quantity_done']" position="attributes">
                    <attribute name="attrs">{'column_invisible': [('parent.state', 'in', ('draft', 'approval', 'approved'))], 'readonly': [('show_details_visible', '=', True)]}</attribute>
                </xpath>
                <xpath expr="//field[@name='move_raw_ids']//button[@name='action_show_details']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <!-- WORK-ORDERS -->
                <xpath expr="//field[@name='workorder_ids']" position="attributes">
                    <attribute name="attrs">{}</attribute>
                    <attribute name="readonly">1</attribute>
                    <attribute name="force_save">1</attribute>
                </xpath>

                <!-- BY-PRODUCTS TAB -->
                <xpath expr="//field[@name='move_byproduct_ids']/tree/field[@name='operation_id']" position="attributes">
                    <attribute name="invisible">0</attribute>
                    <attribute name="string">Produced in Operation</attribute>
                    <attribute name="options">{'no_create': True, 'no_create_edit':True}</attribute>
                </xpath>
                <xpath expr="//field[@name='move_byproduct_ids']/tree/field[@name='operation_id']" position="after">
                    <field name="production_byproduct_loc_id" options="{'no_create': True, 'no_create_edit':True}"/>
                </xpath>
                <xpath expr="//field[@name='move_byproduct_ids']" position="attributes">
                   <attribute name="attrs">{}</attribute>
                   <attribute name="readonly">1</attribute>
                   <attribute name="force_save">1</attribute>
                </xpath>
                <xpath expr="//field[@name='move_byproduct_ids']/tree" position="attributes">
                    <attribute name="default_order">is_done,product_id</attribute>
                </xpath>
                <xpath expr="//page[@name='finished_products']/field[@name='move_byproduct_ids']/tree/field[@name='product_id']" position="attributes">
                    <attribute name="options">{'no_create': True, 'no_create_edit':True}</attribute>
                </xpath>
                <xpath expr="//page[@name='finished_products']/field[@name='move_byproduct_ids']/tree/field[@name='product_uom']" position="attributes">
                    <attribute name="options">{'no_create': True, 'no_create_edit':True}</attribute>
                </xpath>

                <!-- LABOR TAB -->
                <xpath expr="//field[@name='move_byproduct_ids']/parent::page" position="after">
                    <page name="labor" string="Labor">
                        <group>
                            <field name="labor_hide_assign_button" invisible="1"/>
                            <field name="labor_type" widget="radio" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="labor_workorder_id" string="Production Work Order" attrs="{'readonly': [('state', '!=', 'draft')]}" options="{'no_create': True, 'no_create_edit': True}"/>
                            <field name="labor_group_id" attrs="{'invisible': [('labor_type', '!=', 'with_group')], 'readonly': [('state', '!=', 'draft')]} " options="{'no_create': True, 'no_create_edit': True}"/>
                            <field name="labor_ids" attrs="{'invisible': [('labor_type', '!=', 'without_group')]}" widget="many2many_tags" options="{'no_create': True, 'no_create_edit': True}"/>
                        </group>
                        <div class="oe_edit_only mt-2 mb-2">
                            <button name="action_assign_labor" type="object" class="oe_inline oe_highlight mr-2" string="Assign" attrs="{'invisible': [('labor_hide_assign_button', '=', True)]}"/>
                            <button name="action_remove_labor" type="object" class="oe_inline oe_highlight" string="Remove All" attrs="{'invisible': [('assign_ids', '=', [])]}"/>
                        </div>
                        <field name="assign_ids" attrs="{'invisible': [('assign_ids', '=', [])]}">
                            <tree editable="bottom" create="false" trash-icon="['pending', 'ready', 'cancel'].includes($workorder_state)">
                                <field name="plan_id" invisible="1"/>
                                <field name="production_id" invisible="1"/>
                                <field name="allowed_workorder_ids" invisible="1"/>
                                <field name="workorder_id" string="Production Work Order"/>
                                <field name="workorder_state" invisible="1"/>
                                <field name="labor_id"/>
                            </tree>
                        </field>
                    </page>
                </xpath>

                <!-- MISCELLANEOUS TAB -->
                <xpath expr="//page[@name='miscellaneous']//field[@name='picking_type_id']" position="replace">
                    <field name="picking_type_id" invisible="1"/>
                </xpath>
                <xpath expr="//page[@name='miscellaneous']//field[@name='location_src_id']" position="replace">
                    <field name="location_src_id" groups="stock.group_stock_multi_locations" options="{'no_create': True}" invisible="0"/>
                </xpath>
                <xpath expr="//page[@name='miscellaneous']//field[@name='location_dest_id']" position="attributes">
                    <attribute name="string">Finished Location</attribute>
                </xpath>
                <xpath expr="//page[@name='miscellaneous']//field[@name='location_dest_id']" position="after">
                    <field name="rejected_location_dest_id" groups="stock.group_stock_multi_locations" options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}" string="Rejected Location"/>
                </xpath>
                <xpath expr="//page[@name='miscellaneous']//field[@name='origin']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <!-- APPROVAL MATRIX TAB -->
                <xpath expr="//notebook" position="inside">
                    <page string="Approval Matrix Lines" name="approval_matrix_lines" attrs="{'invisible': [('is_matrix_on', '=', False)]}">
                        <field name="approval_matrix_line_ids" context="{
                            'tree_view_ref': 'equip3_manuf_operations.view_mrp_approval_matrix_entry_tree',
                            'form_view_ref': 'equip3_manuf_operations.view_mrp_approval_matrix_entry_form',
                        }"/>
                    </page>
                </xpath>

                <!-- OPTIMIZATION -->
                <!-- field/action bellow is not relevan anymore -->
                <xpath expr="//button[@name='action_view_mrp_production_sources']" position="replace"/>
                <xpath expr="//button[@name='action_view_mrp_production_backorders']" position="replace"/>
                <xpath expr="//field[@name='show_final_lots']" position="replace"/>
                <xpath expr="//button[@name='action_see_move_scrap']" position="replace"/>

            </field>
        </record>

        <record id="ks_view_mrp_production_form_inherit" model="ir.ui.view">
            <field name="name">ks_view_mrp_production_form_inherit</field>
            <field name="model">mrp.production</field>
            <field name="inherit_id" ref="ks_gantt_view_mrp.ks_view_mrp_production_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='ks_gantt_mrp_setting']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//page[@name='ks_gantt_task_link']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        <record id="view_mrp_production_filter_inherited" model="ir.ui.view">
            <field name="name">view.mrp.production.filter.inherited</field>
            <field name="model">mrp.production</field>
            <field name="inherit_id" ref="mrp.view_mrp_production_filter"/>
            <field name="arch" type="xml">
                <!-- SEARCH BAR -->
                <xpath expr="//field[@name='name']" position="before">
                    <field name="mrp_plan_id"/>
                </xpath>
                <xpath expr="//filter[@name='filter_draft']" position="after">
                    <filter name="approval" string="To be Approved" domain="[('state', '=', 'approval')]"/>
                    <filter name="approved" string="Approved" domain="[('state', '=', 'approved')]"/>
                    <filter name="reject" string="Rejected" domain="[('state', '=', 'reject')]"/>
                </xpath>
                <xpath expr="//field[last()]" position="after">
                    <field name="date_start"/>
                </xpath>
                <xpath expr="//field[@name='move_raw_ids']" position="attributes">
                    <attribute name="string">Material</attribute>
                </xpath>
                <xpath expr="//field[@name='product_id']" position="attributes">
                    <attribute name="string">Finished Goods</attribute>
                </xpath>
                <xpath expr="//field[@name='name']" position="attributes">
                    <attribute name="string">Production Order</attribute>
                </xpath>
                <xpath expr="//field[@name='name'][2]" position="replace"/>

                <!-- FILTERS AND GROUPBY -->
                <xpath expr="//group" position="inside">
                    <filter string="Production Plan" name="mrp_plan_id" domain="[]" context="{'group_by': 'mrp_plan_id'}"/>
                </xpath>
                <xpath expr="//filter[@name='waiting']" position="attributes">
                    <attribute name="string">Waiting for Material</attribute>
                </xpath>
                <xpath expr="//filter[@name='filter_ready']" position="attributes">
                    <attribute name="string">Material Available</attribute>
                </xpath>
                <xpath expr="//filter[@name='product']" position="attributes">
                    <attribute name="string">Finished Goods</attribute>
                </xpath>
            </field>
        </record>

        <record id="view_production_calendar" model="ir.ui.view">
            <field name="name">mrp.production.calendar</field>
            <field name="model">mrp.production</field>
            <field name="inherit_id" ref="mrp.view_production_calendar"/>
            <field name="arch" type="xml">
                <xpath expr="//calendar" position="attributes">
                    <attribute name="string">Production Orders</attribute>
                </xpath>
            </field>
        </record>

        <record id="view_production_pivot" model="ir.ui.view">
            <field name="name">mrp.production.pivot</field>
            <field name="model">mrp.production</field>
            <field name="inherit_id" ref="mrp.view_production_pivot"/>
            <field name="arch" type="xml">
                <xpath expr="//pivot" position="attributes">
                    <attribute name="string">Production Orders</attribute>
                </xpath>
            </field>
        </record>

        <record id="view_production_graph" model="ir.ui.view">
            <field name="name">mrp.production.graph</field>
            <field name="model">mrp.production</field>
            <field name="inherit_id" ref="mrp.view_production_graph"/>
            <field name="arch" type="xml">
                <xpath expr="//graph" position="attributes">
                    <attribute name="string">Production Orders</attribute>
                </xpath>
            </field>
        </record>

        <record id="mrp.mrp_production_report" model="ir.actions.act_window">
            <field name="name">Production Orders</field>
        </record>

        <record id="mrp.action_mrp_production_form" model="ir.actions.act_window">
            <field name="name">Production Orders</field>
        </record>

        <record id="mrp.act_product_mrp_production_workcenter" model="ir.actions.act_window">
            <field name="name">Production Orders</field>
        </record>

    </data>
</odoo>
