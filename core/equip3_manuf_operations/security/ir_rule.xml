<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data>

        <!-- mrp.approval.matrix -->
        <record id="mrp_approval_matrix_multi_company_rule" model="ir.rule">
            <field name="name">MRP Approval Matrix Multi-Company</field>
            <field name="model_id" ref="model_mrp_approval_matrix"/>
            <field name="domain_force">[
                '|', 
                    ('company_id', '=', False), 
                    ('company_id', 'in', company_ids)
            ]</field>
        </record>

        <record id="mrp_approval_matrix_multi_branch_rule" model="ir.rule">
            <field name="name">MRP Approval Matrix Multi-Branch</field>
            <field name="model_id" ref="model_mrp_approval_matrix"/>
            <field name="domain_force">[
                '|', 
                    ('branch_id', '=', False), 
                    ('branch_id', 'in', branch_ids)
            ]</field>
        </record>
        
        <!-- mrp.plan -->
        <record id="mrp_plan_multi_company_rule" model="ir.rule">
            <field name="name">Production Plan Multi-Company</field>
            <field name="model_id" ref="model_mrp_plan"/>
            <field name="domain_force">[
                '|', 
                    ('company_id', '=', False), 
                    ('company_id', 'in', company_ids)
            ]</field>
        </record>

        <record id="mrp_plan_multi_branch_rule" model="ir.rule">
            <field name="name">Production Plan Multi-Branch</field>
            <field name="model_id" ref="model_mrp_plan"/>
            <field name="domain_force">[
                '|',
                    ('branch_id', '=', False),
                    ('branch_id', 'in', branch_ids)
            ]</field>
        </record>

        <!-- mrp.production, multi-company rule already created on mrp module -->
        <record id="mrp_production_multi_branch_rule" model="ir.rule">
            <field name="name">Production Order Multi-Branch</field>
            <field name="model_id" ref="mrp.model_mrp_production"/>
            <field name="domain_force">[
                '|',
                    ('branch_id', '=', False),
                    ('branch_id', 'in', branch_ids),
                '|',
                    ('bom_id', '=', False),
                    '|',
                        ('bom_id.branch_id', '=', False),
                        ('bom_id.branch_id', 'in', branch_ids)
            ]</field>
        </record>

        <!-- mrp.workorder, multi-company rule already created on mrp module -->
        <record id="mrp_workorder_multi_branch_rule" model="ir.rule">
            <field name="name">Job Order Multi-Branch</field>
            <field name="model_id" ref="mrp.model_mrp_workorder"/>
            <field name="domain_force">[
                '|',
                    ('branch_id', '=', False),
                    ('branch_id', 'in', branch_ids)
            ]</field>
        </record>

        <record id="mrp_workorder_labor_rule" model="ir.rule">
            <field name="name">Job Order Labor Rule</field>
            <field name="model_id" ref="model_mrp_workorder"/>
            <field name="groups" eval="[(4, ref('mrp.group_mrp_user'))]"/>
            <field name="domain_force">[('wo_user_ids', 'in', [user.id])]</field>
        </record>

        <record id="mrp_workorder_manager_rule" model="ir.rule">
            <field name="name">Job Order Manager Rule</field>
            <field name="model_id" ref="model_mrp_workorder"/>
            <field name="groups" eval="[(4, ref('mrp.group_mrp_manager'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <!-- mrp.unbuild, multi-company rule already created on mrp module -->
        <record id="mrp_unbuild_multi_branch_rule" model="ir.rule">
            <field name="name">Production Unbuild Multi-Branch</field>
            <field name="model_id" ref="mrp.model_mrp_unbuild"/>
            <field name="domain_force">[
                '|', 
                    ('branch_id', '=', user.branch_id.id),
                    ('branch_id', 'in', branch_ids)
            ]</field>
        </record>
    </data>
</odoo>