<?xml version="1.0"?>
<odoo>
    <data>

        <!-- Working Schedule Summary List View -->
        <record id="view_employee_working_schedule_summary_tree" model="ir.ui.view">
            <field name="name">Employee Working Schedule Calendar Tree</field>
            <field name="model">employee.working.schedule.calendar</field>
            <field name="arch" type="xml">
                <tree string="Working Schedule Calendar">
                    <field name="employee_id"/>
                    <field name="contract_id"/>
                    <field name="department_id"/>
                    <field name="dayofweek"/>
                    <field name="checkin"/>
                    <field name="checkout"/>
                    <field name="working_hours"/>
                    <field name="is_holiday" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="view_employee_working_schedule_summary_form" model="ir.ui.view">
            <field name="name">Employee Working Schedule Calendar Form</field>
            <field name="model">employee.working.schedule.calendar</field>
            <field name="arch" type="xml">
                <form string="Working Schedule Calendar" create="false" edit="false">
                    <sheet>
                        <group>
                            <field name="employee_id"/>
                            <field name="contract_id"/>
                            <field name="department_id"/>
                            <field name="working_hours"/>
                            <field name="dayofweek"/>
                            <field name="date_start"/>
                            <field name="date_end"/>
                            <field name="schedule" invisible="1"/>
                            <field name="day_type" attrs="{'invisible':[('schedule','!=','shift_pattern')]}"/>
                            <field name="hour_from" widget="float_time"/>
                            <field name="hour_to" widget="float_time"/>
                            <field name="tolerance_late" widget="float_time"/>
                            <field name="attendance_formula_id"/>
                            <field name="break_from" widget="float_time"/>
                            <field name="break_to" widget="float_time"/>
                            <field name="minimum_hours" widget="float_time"/>
                            <field name="checkin" invisible="0"/>
                            <field name="checkout" invisible="0"/>
                            <field name="start_checkin"/>
                            <field name="end_checkout"/>
                            <field name="is_import" readonly="1"/>
                            <field name="total_working_time" invisible="1"/>
                            <field name="state" invisible="1"/>
                            <field name="date_working" invisible="1"/>
                            <field name="is_holiday" invisible="1"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_employee_working_schedule_search" model="ir.ui.view">
            <field name="name">Employee Working Schedule Calendar Search</field>
            <field name="model">employee.working.schedule.calendar</field>
            <field name="arch" type="xml">
                <search string="Search Working Schedule Calendar">
                    <field name="employee_id" string='Name'
                           filter_domain="['|', ('employee_id', 'ilike', self), ('employee_id', '=', False)]"/>
                    <field name="employee_id"/>
                    <field name="contract_id"/>
                    <field name="department_id"/>
                    <field name="working_hours"/>
                    <separator/>
                    <filter string="Current Year" name="year"
                            domain="[('date_start','&gt;=',time.strftime('%%Y-01-01')),('date_start','&lt;=',time.strftime('%%Y-12-31'))]"/>
                    <separator/>
                    <filter name="department" string="Department" domain="[]" context="{'group_by':'department_id'}"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter name="employee" string="Employees" domain="[]" context="{'group_by':'employee_id'}"/>
                        <filter name="contracts" string="Contracts" domain="[]" context="{'group_by':'contract_id'}"/>
                        <filter name="schedules" string="Working Schedules" domain="[]"
                                context="{'group_by':'working_hours'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="view_employee_working_schedule_summary_calendar" model="ir.ui.view">
            <field name="name">Employee Working Schedule Calendar View</field>
            <field name="model">employee.working.schedule.calendar</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <calendar string="Working Schedule Calendar" date_start="checkin" date_stop="checkout" mode="month"
                          color="employee_id" hide_time="true" event_limit="5" delete="false">
                    <field name="name"/>
                    <field name="employee_id"/>
                </calendar>
            </field>
        </record>

        <record id="action_employee_working_schedule_summary" model="ir.actions.act_window">
            <field name="name">Employee Working Calendar</field>
            <field name="res_model">employee.working.schedule.calendar</field>
            <field name="view_mode">calendar,tree,form</field>
            <field name="domain">[]</field>
            <field name="context">{'search_default_year': 0, 'search_default_department': 1, 'search_default_employee':
                1}
            </field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="view_employee_working_schedule_search"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to add a new Employee Working Calendar.
                </p>
            </field>
        </record>

        <menuitem action="action_employee_working_schedule_summary" id="employee_working_schedule_summary_mgmt"
                  parent="hr_attendance.menu_hr_attendance_manage_attendances"
                  groups="equip3_hr_employee_access_right_setting.group_hr_attendance_hr_manager"
                  sequence="1"/>

    </data>
</odoo>