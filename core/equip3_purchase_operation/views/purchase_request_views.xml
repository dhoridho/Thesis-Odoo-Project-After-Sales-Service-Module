<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="purchase_request_view_form" model="ir.ui.view">
        <field name="name">purchase.request.view.form</field>
        <field name="model">purchase.request</field>
        <field name="inherit_id" ref="purchase_request.view_purchase_request_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//group" position="before">
                <!--                <div class="oe_title">-->
                <!--                    <h1>-->
                <!--                        <field name="name" readonly="1"/>-->
                <!--                    </h1>-->
                <!--                </div>-->
                <div>
                    <div class="row">
                        <div class="col" name="col_1">
                            <group>
                                <field name="requested_by" attrs="{'readonly': [('is_editable','=', False)]}"/>
                                <field name="assigned_to" attrs="{'readonly': [('is_editable','=', False)]}"/>
                            </group>
                        </div>
                        <div class="col" name="col_2">
                            <group>
                                <label for="is_single_request_date" invisible="1"/>
                                <div class="o_row" name="request_date" style="margin-top:20px">
                                    <field name="is_single_request_date" nolabel="1" attrs="{'readonly':[('state', 'in', ['to_approve', 'approved', 'purchase_request'])]}" style="margin-right: 20px;"/>
                                    <span>Single Expected Date</span>
                                </div>
                                <field name="request_date" attrs="{'invisible' : [('is_single_request_date', '=', False)],'required' : [('is_single_request_date', '=', True)], 'readonly': [('state', 'in', ['to_approve', 'approved', 'purchase_request'])]}"
                                       string="Expected Date"/>
                                <label for="is_single_delivery_destination" invisible="1"/>
                                <field name="filter_destination_warehouse" invisible="1"/>
                                <div class="o_row" name="destination_warehouse">
                                    <field name="is_single_delivery_destination" nolabel="1" attrs="{'readonly':[('state', 'in', ['to_approve', 'approved', 'purchase_request'])]}" style="margin-right: 20px;"/>
                                    <span>Single Destination</span>
                                </div>
                                <field name="destination_warehouse" widget="many2one_tags"
                                       attrs="{'invisible' : [('is_single_delivery_destination', '=', False)],'required' : [('is_single_delivery_destination', '=', True)], 'readonly': [('state', 'in', ['to_approve', 'approved', 'purchase_request'])]}"
                                       domain="filter_destination_warehouse"/>
                                <field name="picking_type_id" attrs="{'readonly': [('is_editable','=', False)]}"/>
                                <field name="origin" class="oe_inline" attrs="{'readonly': [('is_editable','=', False)]}"/>
                                <field name="description" attrs="{'readonly': [('is_editable','=', False)]}"/>
                                <field name="group_id" attrs="{'readonly': [('is_editable','=', False)]}"/>
                            </group>
                        </div>
                        <div class="col" name="col_3">
                            <group>
                                <field name="date_start"/>
                                <field name="creation_date" readonly="1" force_save="1"/>
                                <field name="expiry_date" attrs="{'invisible' : [('expiry_date', '=', False)]}"/>
                                <field name="pr_request_date"/>
                                <field name="company_id" groups="base.group_multi_company" widget="selection" attrs="{'readonly': [('is_editable','=', False)]}"/>
                            </group>
                        </div>
                    </div>
                </div>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree" position="attributes">
                <attribute name="editable">bottom</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']//form//field[@name='analytic_account_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']//tree/field[@name='analytic_account_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='company_id']" position="attributes">
                <attribute name="readonly">1</attribute>
            </xpath>
            <xpath expr="//field[@name='group_id']" position="attributes">
                <attribute name="attrs">{'readonly': [('state', 'in', ['to_approve', 'approved', 'purchase_request'])]}</attribute>
            </xpath>
            <xpath expr="//field[@name='group_id']" position="after">
                <field name="approval_matrix_id"
                       attrs="{'invisible' : ['|', ('is_approval_matrix_request', '=', False), ('approval_matrix_id', '=', False)]}"
                       invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='approval_matrix_id']" position="after">
                <field name="is_approval_matrix_request" invisible="1"/>
                <field name="is_approve_button" invisible="1"/>
                <field name="approval_matrix_line_id" invisible="1"/>
                <field name="price_total" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='picking_type_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='requested_by']" position="after">
                <field name="department_id"/>
                <field name='company_id' position="move"/>
                <field name="currency_id"
                       options="{'no_create': True, 'no_open': True}"
                       groups="base.group_multi_currency" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                <field name="branch_id" attrs="{'readonly':[('state', 'in', ['to_approve', 'approved', 'purchase_request'])]}"/>
                <field name="analytic_accounting" invisible="1"/>
                <field name="show_analytic_tags" invisible="1"/>
                <field name="analytic_account_group_ids" string="Analytic Group" widget="many2many_tags"
                       attrs="{'invisible': ['|',('analytic_accounting', '=', False),('show_analytic_tags','=',False)], 'readonly': [('state', 'in', ['purchase_request', 'done', 'cancel', 'approved', 'to_approve'])]}"/>
            </xpath>
            <xpath expr="//field[@name='department_id']" position="attributes">
                <attribute name="attrs">{'invisible': [('is_purchase_request_department', '=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']//tree/field[@name='product_qty']" position="after">
                <field name="product_uom_category_id" invisible="1"/>
                <field name="analytic_account_group_ids" string="Analytic Group" widget="many2many_tags"
                       attrs="{'column_invisible': ['|',('parent.analytic_accounting', '==', False),('parent.show_analytic_tags', '==', False)],'required' : [('parent.show_analytic_tags','=',True)]}"/>
            </xpath>
            <xpath expr="//field[@name='line_ids']//tree//field[@name='date_required']" position="attributes">
                <attribute name="attrs">{'readonly': [('is_editable','=', False)], 'column_invisible': [('parent.is_single_request_date', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']//form//field[@name='date_required']" position="attributes">
                <attribute name="attrs">{'readonly': [('is_editable','=', False)], 'invisible': [('parent.is_single_request_date', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']//form//field[@name='date_required']" position="before">
                <field name="analytic_account_group_ids" string="Analytic Group" widget="many2many_tags"
                       attrs="{'invisible': ['|',('parent.analytic_accounting', '==', False),('parent.show_analytic_tags', '==', False)],'required' : [('parent.show_analytic_tags','=',True)]}"/>
            </xpath>
            <xpath expr="//field[@name='line_ids']" position="attributes">
                <attribute name="context">{'default_analytic_account_group_ids': analytic_account_group_ids,
                    'line_ids': line_ids}</attribute>
                <attribute name="attrs">{'readonly': [('state', 'in', ['to_approve', 'approved', 'purchase_request'])]}</attribute>
            </xpath>
            <xpath expr="//field[@name='assigned_to']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='description']" position="attributes">
                <attribute name="attrs">{'readonly': [('state', 'in', ['to_approve', 'approved', 'purchase_request'])]}</attribute>
            </xpath>
            <xpath expr="//field[@name='description']" position="after">
                <field name="is_goods_orders" invisible="1"/>
                <field name="is_requested_by" invisible="1"/>
                <field name="is_purchase_request_department" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='date_start']" position="attributes">
                <attribute name="attrs">{'invisible': [('state', '=', 'draft')]}</attribute>
                <attribute name="readonly">1</attribute>
            </xpath>
            <xpath expr="//field[@name='name']" position="attributes">
                <attribute name="attrs">{'invisible': [('state', '=', 'draft')]}</attribute>
                <attribute name="readonly">1</attribute>
            </xpath>

            <xpath expr="//label[@for='name']" position="attributes">
                <attribute name="attrs">{'invisible': [('state', '=', 'draft')]}</attribute>
            </xpath>
            <xpath expr="//field[@name='requested_by']" position="attributes">
                <attribute name="attrs">{'readonly': ['|', ('is_requested_by', '=', False), ('state', 'in', ['to_approve', 'approved', 'purchase_request'])]}</attribute>
            </xpath>
            <field name="state" position="attributes">
                <attribute name="statusbar_visible">draft,to_approve,approved</attribute>
            </field>
            <xpath expr="//header" position="after">
                <header>
                    <field name="purchase_req_state" widget="statusbar" statusbar_visible="pending,in_progress,done"
                           attrs="{'invisible' : ['|', ('state', '!=', 'purchase_request'), ('purchase_req_state', 'in', ('cancel', 'close'))]}"/>
                    <field name="purchase_req_state_1" widget="statusbar" statusbar_visible="pending,in_progress,cancel"
                           attrs="{'invisible' : [('purchase_req_state', '!=', 'cancel')]}"/>
                    <field name="purchase_req_state_2" widget="statusbar" statusbar_visible="pending,in_progress,close"
                           attrs="{'invisible' : [('purchase_req_state', '!=', 'close')]}"/>
                </header>
            </xpath>
            <xpath expr="//button[@name='button_done']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//button[@name='button_rejected']" position="before">
                <button
                        name="button_done_pr"
                        string="Done"
                        type="object"
                        class="oe_highlight"
                        attrs="{'invisible': [('state', 'in', ('draft', 'to_approve', 'approved'))]}"
                />
            </xpath>
            <xpath expr="//header" position="replace">
                <header>

                    <button name="%(purchase_request.action_purchase_request_line_make_purchase_order)d"
                            attrs="{'invisible': ['|', ('state', '!=', 'purchase_request'), ('purchase_req_state', 'in', ('done', 'cancel', 'close'))]}"
                            string="Create RFQ" type="action" class="oe_highlight"/>

                    <button name="button_done_pr"
                            attrs="{'invisible': ['|', ('state', '!=', 'purchase_request'), ('purchase_req_state', 'in', ('done', 'cancel', 'close'))]}"
                            class="oe_highlight" string="Done" type="object"
                            groups="purchase_request.group_purchase_request_manager"/>

                    <button name="button_close_pr"
                            attrs="{'invisible': ['|', ('state', '!=', 'purchase_request'), ('purchase_req_state', 'in', ('done', 'cancel', 'close'))]}"
                            string="Close" type="object"/>

                    <button name="button_cancel_pr"
                            attrs="{'invisible': ['|', ('state', '!=', 'purchase_request'), ('purchase_req_state', 'in', ('process', 'cancel', 'done', 'close'))]}"
                            string="Cancel" type="object"/>
                    <field name="show_confirm" invisible="1"/>
                    <button name="button_confirm_pr" attrs="{'invisible': [('show_confirm', '=', False)]}"
                            class="oe_highlight" string="Confirm" type="object"/>

                    <!--                    <button name="button_draft"-->
                    <!--                            attrs="{'invisible': [('state', 'not in', ('to_approve','approved','rejected','done')),('purchase_req_state', '!=', 'cancel')]}"-->
                    <!--                            string="Reset To Draft" type="object" states="rejected,approved"-->
                    <!--                            groups="purchase_request.group_purchase_request_manager"/>-->

                    <button name="sh_quotation_revision"
                            attrs="{'invisible': [('state','!=','rejected'),('purchase_req_state', '!=', 'cancel')]}"
                            string="Purchase Request Revisions" type="object" class="oe_highlight"
                            groups="purchase_request.group_purchase_request_manager"/>


                    <button name="button_to_approve" string="Request For Approval" type="object" class="oe_highlight"
                            attrs="{'invisible': ['|', '|', '|', ('state', '!=', 'draft'),('purchase_req_state', '=', 'cancel'), ('approval_matrix_id', '=', False), ('is_approval_matrix_request', '=', False)]}"/>
                    <button name="button_approved" string="Approve" type="object" class="oe_highlight"
                            groups="purchase_request.group_purchase_request_manager"
                            attrs="{'invisible': ['|', '|', '|', '|', ('state', '!=', 'to_approve'),('purchase_req_state', '=', 'cancel'),  ('approval_matrix_id', '=', False), ('is_approval_matrix_request', '=', False), ('is_approve_button', '=', False)]}"/>
                    <button name="action_reject" string="Reject" type="object" class="decoration-secondary"
                            attrs="{'invisible' : ['|', ('state', '!=', 'to_approve'), ('is_approve_button', '=', False)]}"/>
<!--                    <button name="action_confirm_purchase_request" string="Confirm Purchase Request" type="object"-->
<!--                            class="oe_highlight"-->
<!--                            attrs="{'invisible': [('state', '!=', 'draft'),('is_approval_matrix_request', '=', True), ('approval_matrix_id', '!=', False)]}"/>-->
                    <button name="button_rejected" states="to_approve,approved" string="Reject" type="object"
                            groups="purchase_request.group_purchase_request_manager" invisible="1"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,purchase_request"
                           statusbar_colors="{&quot;approved&quot;:&quot;blue&quot;}"
                           attrs="{'invisible': [('is_approval_matrix_request', '=', True), ('approval_matrix_id', '!=', False)]}"/>
                    <field name="pr_state" widget="statusbar"
                           statusbar_visible="draft,to_approve,approved,purchase_request"
                           attrs="{'invisible': ['|', ('is_approval_matrix_request', '=', False), ('approval_matrix_id', '=', False)]}"/>
                </header>
            </xpath>
            <xpath expr="//field[@name='origin']" position="attributes">
                <attribute name="attrs">{'readonly': [('state', 'in', ['to_approve', 'approved', 'purchase_request'])]}</attribute>
            </xpath>
            <xpath expr="//field[@name ='line_ids']//tree/field[@name='product_id']" position="before">
                <field name="sequence" widget="handle"/>
                <field name="sequence2" readonly="1" force_save="1"/>
            </xpath>
            <xpath expr="//field[@name ='line_ids']//tree/field[@name='estimated_cost']" position="after">
                <field name="price_total" widget="monetary"/>
            </xpath>
            <xpath expr="//field[@name ='line_ids']//tree/field[@name='company_id']" position="after">
                <field name="branch_id" invisible="1"/>
                <field name="company_id" invisible="1"/>
                <field name="filter_destination_warehouse_line" invisible="1"/>
                <field name="dest_loc_id" readonly="False" attrs="{'column_invisible': [('parent.is_single_delivery_destination', '=', True)]}" domain="filter_destination_warehouse_line"/>
                <field name="incoming_stock"/>
                <field name="current_qty"/>
                <field name="remaning_qty"/>
            </xpath>
            <xpath expr="//field[@name='line_ids']//tree//field[@name='company_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name ='line_ids']/form/sheet/group/group[1]/field[@name='product_id']"
                   position="after">
                <field name="price_total" invisible="1"/>
                <field name="product_uom_category_id" invisible="1"/>
            </xpath>
            <xpath expr="//notebook/page/field[@name='line_ids']/form/sheet/group/group" position="after">
                <group>
                    <field name="branch_id" invisible="1"/>
                    <field name="company_id" invisible="1"/>
                    <field name="dest_loc_id" required="True" readonly="False" attrs="{'invisible': [('parent.is_single_delivery_destination', '=', True)]}"/>
                    <field name="incoming_stock"/>
                    <field name="current_qty"/>
                    <field name="remaning_qty"/>
                    <field name="purchase_req_budget"/>
                    <!--                    <field name="rem_budget"/>-->
                </group>
            </xpath>
            <xpath expr="//notebook" position="inside">
                <page string="Approval Matrix Line" name="approved_matrix_ids"
                      attrs="{'invisible' : [('approval_matrix_id', '=', False)]}">
                    <label for="approval_matrix_id" style="margin-bottom: 13px;"/>
                    <field name="approval_matrix_id"
                           attrs="{'invisible' : ['|', ('is_approval_matrix_request', '=', False), ('approval_matrix_id', '=', False)]}"/>
                    <field name="approved_matrix_ids" context="{'approved_matrix_ids': approved_matrix_ids}">
                        <tree editable="bottom">
                            <field name="sequence"/>
                            <field name="user_ids" widget="many2many_tags"/>
                            <field name="minimum_approver"/>
                            <field name="state_char"/>
                            <field name="time_stamp"/>
                            <field name="feedback"/>
                        </tree>
                    </field>
                </page>
            </xpath>

            <xpath expr="//field[@name='name']" position="after">
                <field name="is_revision_pr" invisible="1" />
                <field name="sh_purchase_request_id" invisible="1" />
                <field name="sh_purchase_request_revision_config" invisible="1" />
            </xpath>
            <xpath expr="//div[@name='button_box']" position="inside">
                <button class="oe_inline oe_stat_button" type="object" name="open_quality_check" icon="fa-clipboard"
                        attrs="{'invisible':['|',('pr_count','=',0),('sh_purchase_request_revision_config','=',False)]}">
                    <field string="Purchase Request Revisions" name="pr_count" widget="statinfo" />
                </button>
            </xpath>
            <xpath expr="//page[@name='approved_matrix_ids']" position="before">
                <page string="Purchase Request Revisions" name="request_revision"
                      attrs="{'invisible':['|', ('is_revision_pr', '=', False), ('sh_purchase_request_revision_config', '=', False)]}">
                    <group>
                        <field name="sh_revision_pr_id" widget="many2many_list" nolabel="1" readonly="1" />
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <record id="view_purchase_request_tree_inherit" model="ir.ui.view">
        <field name="name">purchase.request.view.tree.inherit</field>
        <field name="model">purchase.request</field>
        <field name="inherit_id" ref="purchase_request.view_purchase_request_tree"/>
        <field name="arch" type="xml">
            <field name="state" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="state" position="after">
                <field name="state" optional="show" widget="badge" decoration-primary="state == 'draft'" decoration-warning="state == 'to_approve'" decoration-success="state == 'approved'" decoration-primary2="state == 'purchase_request'" decoration-danger="state == 'rejected'" decoration-success2="state == 'done'"/>
                <field name="purchase_req_state" string="2nd Status" optional="show" widget="badge" decoration-secondary="purchase_req_state == 'cancel'" decoration-warning2="purchase_req_state == 'pending'" decoration-primary3="purchase_req_state == 'in_progress'" decoration-success2="purchase_req_state == 'done'"/>
                <field name="expiry_date" optional="show"/>
                <field name="pr_request_date" optional="show"/>
                <field name="request_date" optional="hide" string="Expected Date"/>
                <field name="analytic_account_group_ids" optional="hide" widget="many2many_tags" string="Analytic Group"/>
                <field name="department_id" optional="hide"/>
                <field name="destination_warehouse" optional="hide"/>
                <field name="origin" optional="hide"/>
                <field name="branch_id" optional="show"/>
                <field name="company_id" position="move"/>
            </field>
            <xpath expr="//field[@name='requested_by']" position="attributes">
                <attribute name="optional">show</attribute>
            </xpath>
            <xpath expr="//field[@name='company_id']" position="attributes">
                <attribute name="optional">hide</attribute>
            </xpath>
            <!--            <xpath expr="//field[@name='assigned_to']" position="after">-->
            <!--                <field name="company_id" optional="show" position="move"/>-->
            <!--            </xpath>-->
            <xpath expr="//field[@name='activity_ids']" position="attributes">
                <attribute name="optional">hide</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_form_purchase_request_line_inherit" model="ir.ui.view">
        <field name="name">purchase.request.line.inherit</field>
        <field name="model">purchase.request.line</field>
        <field name="inherit_id" ref="purchase_request.purchase_request_line_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='company_id']" position="after">
                <field name="purchase_order"/>
                <field name="branch_id"/>
                <field name="product_uom_category_id" invisible="1"/>
            </xpath>
            <xpath expr="//page[@name='allocations']//field[@name='purchase_request_allocation_ids']//field[@name='stock_move_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='cancelled']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_form_purchase_request_line" model="ir.ui.view">
        <field name="name">purchase.request.line.inherit</field>
        <field name="model">purchase.request.line</field>
        <field name="inherit_id" ref="purchase_request.purchase_request_line_tree"/>
        <field name="arch" type="xml">
            <tree position="inside">
                <field name="branch_id" optional="show"/>
                <field name="company_id" optional="hide" position="move"/>
            </tree>
            <xpath expr="//field[@name='estimated_cost']" position="after">
                <field name="price_total" widget="monetary"/>
            </xpath>
            <xpath expr="//field[@name='product_qty']" position="after">
                <field name="qty_in_progress"/>
                <field name="qty_done"/>
                <field name="qty_cancelled"/>
            </xpath>
            <xpath expr="//field[@name='purchase_state']" position="after">
                <field name="purchase_order"/>
            </xpath>
            <xpath expr="//field[@name='request_id']" position="after">
                <field name="purchase_req_state" string="PR Status" optional="show" widget="badge" decoration-warning2="purchase_req_state == 'pending'" decoration-primary3="purchase_req_state == 'in_progress'"/>
            </xpath>
            <xpath expr="//field[@name='request_state']" position="replace">
                <field name="request_state" optional="hide"/>
            </xpath>
        </field>
    </record>

    <record id="inherit_purchase_request_line_purchase_order_form_view" model="ir.ui.view">
        <field name="name">view.purchase.request.line.make.purchase.order.tree.inherits</field>
        <field name="model">purchase.request.line.make.purchase.order</field>
        <field name="inherit_id" ref="purchase_request.view_purchase_request_line_make_purchase_order"/>
        <field name="arch" type="xml">
            <xpath expr="//form/separator" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form/separator[2]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form/newline" position="attributes">
                <attribute name="style">display: none</attribute>
            </xpath>
            <xpath expr="//form/newline[2]" position="attributes">
                <attribute name="style">display: none</attribute>
            </xpath>
            <xpath expr="//form/newline[3]" position="attributes">
                <attribute name="style">display: none</attribute>
            </xpath>
            <xpath expr="//form/newline[4]" position="attributes">
                <attribute name="style">display: none</attribute>
            </xpath>
            <xpath expr="//form/group" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form/group[2]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form/group[2]" position="after">
                <group>
                    <field name="create_rfq" required="1"/>
                    <field name="purchase_order_id" attrs="{'invisible': [('create_rfq','!=','existing_rfq')],'required': [('create_rfq','=','existing_rfq')]}"/>
                    <field name="partner_id" attrs="{'invisible': [('create_rfq','!=','existing_rfq')],'required': [('create_rfq','=','existing_rfq')]}" readonly="1"/>
                    <field name="supplier_ids" widget="many2many_tags" attrs="{'invisible': [('create_rfq','!=','new_rfq')],'required': [('create_rfq','=','new_rfq')]}"/>
                </group>
            </xpath>
            <field name="item_ids" position="after">
                <b><field name="message" nolabel="1" style="font-size: 16px;color: red;"/></b>
            </field>
            <field name="supplier_id" position="attributes">
                <attribute name="invisible">True</attribute>
                <attribute name="context">{'res_partner_search_mode': 'supplier', 'show_vat': True,
                    'tree_view_ref': 'equip3_purchase_operation.view_res_partner_line_tree',
                    'default_is_vendor': 1,
                    'search_default_supplier': 1}</attribute>
            </field>
            <xpath expr="//field[@name='keep_description']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='product_qty']" position="before">
                <field name="rem_qty"/>
            </xpath>
            <field name="purchase_order_id" position="attributes">
                <attribute name="domain"></attribute>
            </field>
            <xpath expr="//button[@name='make_purchase_order']" position="attributes">
                <attribute name="name">mod_make_purchase_order</attribute>
            </xpath>
        </field>
    </record>

    <record model="ir.actions.act_window" id="product_purchase_requests_services">
        <field name="name">Purchase Requests</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.request</field>
        <field name="view_mode">tree,form</field>
        <field name="context">
            {
            "search_default_requested_by": uid,
            'services_good': 1,
            'default_is_services_orders': True,
            'default_is_single_request_date' : True,
            'default_is_single_delivery_destination' : True
            }
        </field>
        <field name="domain">[('is_services_orders', '=', True)]</field>
        <field name="search_view_id" ref="purchase_request.view_purchase_request_search"/>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to start a new purchase request process.
            </p>
            <p>
                A purchase request is an instruction to Purchasing to procure
                a certain quantity of materials services, so that they are
                available at a certain point in time.
            </p>
        </field>
    </record>

    <record id="product_purchase_request_line_services" model="ir.actions.act_window">
        <field name="name">Purchase Request Lines</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.request.line</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'services_good': 1, 'default_is_services_orders': True}</field>
        <field name="domain">[('is_services_orders', '=', True)]</field>
        <field name="search_view_id" ref="purchase_request.purchase_request_line_search"/>
    </record>
    <record id="product_purchase_request_line_services_assigned" model="ir.actions.act_window">
        <field name="name">Assigned Requisition Line</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.request.line</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'services_good': 1, 'default_is_services_orders': True}</field>
        <field name="domain">[('is_services_orders', '=', True),('assigned_to','!=',False)]</field>
        <field name="search_view_id" ref="purchase_request.purchase_request_line_search"/>
    </record>
    <record id="product_purchase_request_line_services_not_assigned" model="ir.actions.act_window">
        <field name="name">Purchase Request Lines</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.request.line</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'services_good': 1, 'default_is_services_orders': True}</field>
        <field name="domain">[('is_services_orders', '=', True),('assigned_to','=',False),('request_state','!=','rejected')]</field>
        <field name="search_view_id" ref="purchase_request.purchase_request_line_search"/>
    </record>

    <record model="ir.actions.act_window" id="purchase_request_orders_form_action">
        <field name="name">Purchase Requests</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.request</field>
        <field name="view_mode">tree,form</field>
        <field name="context">
            {
            "search_default_requested_by": uid,
            'default_is_goods_orders': True,
            'default_is_single_request_date':True,
            'default_is_single_delivery_destination':True
            }
        </field>
        <field name="search_view_id" ref="purchase_request.view_purchase_request_search"/>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to start a new purchase request process.
            </p>
            <p>
                A purchase request is an instruction to Purchasing to procure
                a certain quantity of materials services, so that they are
                available at a certain point in time.
            </p>
        </field>
    </record>

    <record id="product_purchase_request_line_orders" model="ir.actions.act_window">
        <field name="name">Purchase Request Lines</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.request.line</field>
        <field name="view_mode">tree,form</field>
        <field name="context"></field>
        <field name="domain">[]</field>
        <field name="search_view_id" ref="purchase_request.purchase_request_line_search"/>
    </record>

    <record id="product_purchase_request_line_orders_not_assigned" model="ir.actions.act_window">
        <field name="name">Purchase Request Lines</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.request.line</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{}</field>
        <field name="domain">[('assigned_to','=',False),('request_state','!=','rejected')]</field>
        <field name="search_view_id" ref="purchase_request.purchase_request_line_search"/>
    </record>
    <record id="product_purchase_request_line_orders_assigned" model="ir.actions.act_window">
        <field name="name">Assigned Requisition Line</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.request.line</field>
        <field name="view_mode">tree,form</field>
        <field name="context"></field>
        <field name="domain">[('assigned_to','!=',False)]</field>
        <field name="search_view_id" ref="purchase_request.purchase_request_line_search"/>
    </record>

    <record id="purchase_request_revision_action" model="ir.actions.act_window">
        <field name="name">Purchase Request Revisions</field>
        <field name="res_model">purchase.request</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="purchase_request.view_purchase_request_tree" />
        <field name="domain">[('sh_purchase_request_id', '=', active_id)]</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Revised Purchase Request.
            </p>
        </field>
    </record>

    <!-- purchase.request.line inherit search view -->
    <record id="inherit_purchase_request_line_search" model="ir.ui.view">
        <field name="name">purchase.request.line.inherit.view.search</field>
        <field name="model">purchase.request.line</field>
        <field name="inherit_id" ref="purchase_request.purchase_request_line_search"/>
        <field name="arch" type="xml">
            <!-- Add your xpath here -->
            <xpath expr="//search" position="inside">
                <filter
                        name="branch"
                        string="Branch"
                        domain="[('branch_id','in',context.get('allowed_branch_ids'))]"
                />
            </xpath>
            <xpath expr="//group" position="inside">
                <!-- Add your fields here -->
                <filter name="create_date" string="Createion Date" domain="[]" context="{'group_by':'create_date'}"/>
                <filter name="date_required" string="Expected Date" domain="[]" context="{'group_by':'date_required'}"/>
            </xpath>
        </field>
    </record>

    <record id="good_purchase_request_line_form_action_assigned" model="ir.actions.act_window">
        <field name="name">Assigned Requisition Line</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.request.line</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'goods_order': 1, 'default_is_goods_orders': True}</field>
        <field name="domain">[('is_goods_orders', '=', True),('assigned_to','!=',False)]</field>
        <field name="search_view_id" ref="purchase_request.purchase_request_line_search" />
    </record>
    <record id="good_purchase_request_line_form_action_not_assigned" model="ir.actions.act_window">
        <field name="name">Purchase Request Lines</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.request.line</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'goods_order': 1, 'default_is_goods_orders': True}</field>
        <field name="domain">[('is_goods_orders', '=', True),('assigned_to','=',False),('purchase_req_state','in',['pending', 'in_progress'])]</field>
        <field name="search_view_id" ref="purchase_request.purchase_request_line_search" />
    </record>
</odoo>