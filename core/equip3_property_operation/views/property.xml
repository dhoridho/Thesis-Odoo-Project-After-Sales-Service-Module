<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <!-- product.product inherit form view -->
    <record id="property_product_operation_form_inherit" model="ir.ui.view">
        <field name="name">product.product.inherit.view.form</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="property_rental_mgt_app.product_normal_form_view_inherit"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='reserve_property']" position="replace">
                <button class="oe_highlight" type="object" name="rent_property_with_approval" string="Reserve Rent Property" icon="fa-home" states="rent"/>
            </xpath>
            <xpath expr="//button[@name='buy_now_property']" position="replace">
                <button class="oe_highlight" type="object" name="sale_property_with_approval" string="Buy Now Property" icon="fa-shopping-cart" states="sale" />
            </xpath>
            <xpath expr="//field[@name='default_code']" position="after" modifiers="{'readonly':[['is_property','=',true],['state','!=','draft']],'required':[['state','=','draft']]}">
                <field name="rent_branch_id" attrs="{'invisible':[('property_book_for', 'not in', ['rent'])], 'required':[('property_book_for', '=', 'rent')]}" />
                <field name="approvalmatrix_rent" attrs="{'invisible':[('property_book_for', '=', 'sale')]}"/>
                <field name="sale_branch_id" attrs="{'invisible':[('property_book_for', 'not in', ['sale'])], 'required':[('property_book_for', '=', 'sale')]}" />
                <field name="approvalmatrix_sale" attrs="{'invisible':[('property_book_for', '=', 'rent')]}"/>
            </xpath>
        </field>
    </record>
</odoo>