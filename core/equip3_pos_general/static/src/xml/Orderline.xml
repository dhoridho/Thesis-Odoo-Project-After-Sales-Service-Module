<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="RetailOrderline" t-inherit="equip3_pos_masterdata.RetailOrderline" t-inherit-mode="extension" owl="1">
        <xpath expr="//tr/td[1]" position="replace">
            <td style="text-align: center">
                <t t-if="env.pos.config.display_image_orderline and !env.isMobile and state.screen == 'Products'">
                    <img class='orderline_image' t-att-src="props.line.get_line_image()"/>
                </t>
            </td>
        </xpath>
        <xpath expr="//tr/td[2]" position="replace">
            <td style="text-align: left">
                <span class="product-name">
                    <t t-esc="props.line.get_full_product_name()"/>
                    <span> </span>
                    <!-- <t t-if="props.line.get_product().tracking!=='none' &amp;&amp; (env.pos.picking_type.use_create_lots || env.pos.picking_type.use_existing_lots)">
                        <t t-if="props.line.has_valid_product_lot()">
                            <i t-on-click.stop="lotIconClicked"
                               class="oe_link_icon fa fa-list oe_icon line-lot-icon oe_green"
                               aria-label="Valid product lot"
                               role="img"
                               title="Valid product lot"
                            />
                        </t>
                        <t t-else="">
                            <i t-on-click.stop="lotIconClicked"
                               class="oe_link_icon fa fa-list oe_icon line-lot-icon oe_red"
                               aria-label="Invalid product lot"
                               role="img"
                               title="Invalid product lot"
                            />
                        </t>
                    </t> -->
                </span>
                <div class="prod-price-qty-list">
                    <div class="flex_price_with_unit_cl">
                        <t t-if="props.line.display_discount_policy() == 'without_discount' and
                            props.line.get_unit_display_price() &lt; props.line.get_lst_price()">
                            <s>
                                <t t-esc="env.pos.format_currency(props.line.get_fixed_lst_price(),'Product Price',env.pos.get_order().currency)" />
                            </s>
                            <t t-esc="env.pos.format_currency(props.line.get_unit_display_price(),'Product Price',env.pos.get_order().currency)" />
                        </t>
                        <t t-else="">
                            <t t-esc="env.pos.format_currency(props.line.get_unit_display_price(),'Product Price',env.pos.get_order().currency)" />
                        </t>
                         <em class="">
                            <span> X  </span>
                            <t t-esc="props.line.get_quantity_str_with_uom()" />
                        </em>
                    </div>
                    <t t-if="props.line.get_discount_str() !== '0'">
                        <li class="info">
                            With a
                            <em>
                                <t t-esc="props.line.get_discount_str()" />%
                            </em>
                            discount
                        </li>
                    </t>
                   
                </div>
            </td>
        </xpath>
        <xpath expr="//tr/td[3]" position="replace">
            <td></td>
        </xpath>
        <xpath expr="//tr/td[4]" position="replace">
            <td></td>
        </xpath>
    </t>
     
    <t t-name="OrderSummaryExt" t-inherit="point_of_sale.OrderSummary" t-inherit-mode="extension" owl="1">
        <xpath expr="//table[@class='summary-table'][1]" position="attributes">
            <attribute name="style">display: inline-table;</attribute>
        </xpath>
    </t>
    <t t-name="RetailProductItem" t-inherit="equip3_pos_masterdata.RetailProductItem" t-inherit-mode="extension" owl="1">
        <xpath expr="//article//i[hasclass('product-info-button')]" position="replace">
            <span></span>
        </xpath>
        <xpath expr="//span[@title='Total Variants']" position="replace"/>
        <xpath expr="//ProductCountInCart" position="replace"/>
    </t>
    <t t-name="FeatureButtons" t-inherit="equip3_pos_masterdata.FeatureButtons" t-inherit-mode="extension" owl="1">
        <div class="control-buttons" position="attributes">
            <attribute name="class">pos-button-list</attribute>
        </div>
    </t>
    <t t-name="ProductsWidgetControlPanelExt" t-inherit="point_of_sale.ProductsWidgetControlPanel" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('categories')]" position="replace">
            <t t-if="props.subcategories.length > 0 and env.pos.config.iface_display_categ_images and !env.isMobile and state.showAllCategory">
                <div class="category">
                    <div class="category-list-scroller">
                        <div id="owl-example" class="owl-carousel">
                            <t t-foreach="props.subcategories" t-as="category" t-key="category.id">
                                <CategoryButton category="category"/>
                            </t>
                        </div>
                    </div>
                </div>
            </t> 
        </xpath>
        <xpath expr="//span[hasclass('right_button')][1]" position="attributes">
            <attribute name="style">float: right; margin-right: 10px; display: none;</attribute>
        </xpath>
        <xpath expr="//span[hasclass('right_button')][2]" position="attributes">
            <attribute name="style">float: right; display: none;</attribute>
        </xpath>
        <xpath expr="//span[hasclass('right_button')][2]" position="after">
            <button class="button show-buttons cat-button"
                    title="Set Products View"
                    t-if="!env.isMobile"
                    t-on-click="setProductsView">
                <t t-if="env.pos.config.product_view == 'box'">
                    <i class="fa fa-list"/>
                </t>
                <t t-else="">
                    <i class="fa fa-th"/>
                </t>
            </button>
        </xpath>
        <xpath expr="//div[hasclass('rightpane-header')]//button[hasclass('cat-button')]" position="replace"/>
        
        <xpath expr="//span[hasclass('right_button')][2]" position="after">
            <button class="button footer-cart-button"
                    t-if="env.pos.config.custom_sale and env.pos.config.custom_sale_product_id"
                    t-on-click="addCustomSale">
                <i class="fa fa-plus"/>
            </button>
        </xpath>
                  

    </t>
    <t t-name="ProductScreen" t-inherit="point_of_sale.ProductScreen" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('screen-full-width')]//button[hasclass('total-value')]" position="replace"/>
        <xpath expr="//div[hasclass('screen-full-width')]//button[hasclass('set-customer')]" position="replace"/>
        <xpath expr="//div[hasclass('screen-full-width')]//div[@class='leftpane left_02']//div[@class='subpads']" position="replace"/>
        <xpath expr="//div[hasclass('screen-full-width')]//div[@class='subpads']" position="replace"/>
    </t>
    <t t-name="BackToFloorButtonExt" t-inherit="pos_restaurant.BackToFloorButton" t-inherit-mode="extension" owl="1">
        <xpath expr="//span[@class='order-button floor-button']" position="attributes">
            <attribute name="class">order-button floor-button ticket-button</attribute>
        </xpath>
    </t>
    <t t-name="OrderWidget" t-inherit="point_of_sale.OrderWidget" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[@class='order-container']" position="attributes">
            <attribute name="style">box-shadow: 0 9px 0px 0px white, 0 -9px 0px 0px white, 10px 0 15px -4px rgb(214 216 219 / 80%), -10px 0 15px -4px rgb(214 216 219 / 80%);border-top: unset !important; border-bottom: unset !important;</attribute>
        </xpath>
        <xpath expr="//div[@class='order']//t[1]" position="before">
            <div class="cart_order_title">

                <div style="padding-left: 20px;">
                    <span>Order </span> 
                    <span><t t-esc="getSequenceNumber()"/></span>
                    <button t-on-click="newOrder" class="new_order_btn" style="margin-left: 10px;">
                        <span style="font-size: 40px !important; color: white; position: relative; top: -12px;">+</span>
                    </button>
                    
                    <button t-on-click="onClickSyncSessionOrder" 
                        t-if="env and env.pos and env.pos.config and env.pos.config.is_manual_sync_for_sync_between_session"
                        class="sync_session_current_order_button" 
                        style="margin-left: 19px;"> 
                        <span style="color: #2F8f5c; font-weight: bold;">
                            <t t-if="pos_sync_session_order.state == 'connecting'">
                                <i aria-label="Sync Connecting" title="Sync Connecting" class="fa fa-fw fa-spin fa-spinner"></i>
                            </t>
                            <span>Sync</span>
                        </span>
                    </button>

                    <button class="sync_session_current_order_by_submit_button" 
                        t-if="env and env.pos and env.pos.config and env.pos.config.is_manual_sync_for_sync_between_session"
                        t-on-click="onClickSyncSessionOrderBySubmit"
                        t-att-data-screen_type="env.pos.config.screen_type"
                        style="margin-left: 19px;"
                        t-att-class="env.pos.config.screen_type != 'cashier' and 'oe_hidden' ">
                        <span style="color: #2F8f5c; font-weight: bold;">
                            <t t-if="pos_sync_session_order.submit_state == 'connecting'">
                                <i aria-label="Sync Connecting" title="Sync Connecting" class="fa fa-fw fa-spin fa-spinner"></i>
                            </t>
                            <span>Submit</span>
                        </span>
                    </button>
                    
                </div>

                <div style="display: inline-flex;">
                    <span class="order_screen_clear_cart">
                        <button t-on-click="clearCart" class="clear_cart_btn" style="border:3px solid red;">
                            <span class="fa fa-times"/>
                            <span style="">
                               <!-- <font size="1px">Clear Order</font>-->
                            </span>
                        </button>
                    </span>
                </div>

            </div>
        </xpath>
        <xpath expr="//table[hasclass('summary-table')]//colgroup//col[3]" position="attributes">
            <attribute name="width">0%</attribute>
        </xpath>
        <xpath expr="//table[hasclass('summary-table')]//colgroup//col[2]" position="attributes">
            <attribute name="width">65%</attribute>
        </xpath>  
    </t>

    <t t-name="PosOrderRowExt" t-inherit="equip3_pos_masterdata.PosOrderRow" t-inherit-mode="extension" owl="1">
        <xpath expr="//tr[hasclass('receipt-line')]" position="inside">
            <td style="text-align: center">
                <span class="product-line-name">
                    <t t-esc="order.void_state"/>
                </span>
            </td>
        </xpath>
    </t>

    <t t-name="PosOrderDetailExt" t-inherit="equip3_pos_masterdata.PosOrderDetail" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('client-details-right')]/div[hasclass('client-detail')][1]" position="after">
            <t t-if="order.void_state">
                <div class='client-detail'>
                    <span class='label'>Void Status</span>
                    <span class="detail value" style="color: #E04040">
                        <t t-esc='order.void_state'/>
                    </span>
                </div>
            </t>
            <t t-if="order.void_order_id">
                <div class='client-detail'>
                    <span class='label'>Void Order of</span>
                    <span class="detail value" style="color: #E04040">
                        <t t-esc='order.void_order_id[1]'/>
                    </span>
                </div>
            </t>
        </xpath>
    </t>

</templates>
