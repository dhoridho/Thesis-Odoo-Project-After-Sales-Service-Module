<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_report_pos_order_search_inherit" model="ir.ui.view">
        <field name="name">view.report.pos.order.search.inherit</field>
        <field name="model">report.pos.order</field>
        <field name="inherit_id" ref="point_of_sale.view_report_pos_order_search"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='filter_date']" position="after">
                <filter string="This Month" name="this_month" domain="[
                    ('date', '&lt;', (context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01')), 
                    ('date', '&gt;=', time.strftime('%%Y-%%m-01'))]"/>
            </xpath>
        </field>
    </record>

    <record id="point_of_sale.action_report_pos_order_all" model="ir.actions.act_window">
        <field name="name">Orders Analysis</field>
        <field name="res_model">report.pos.order</field>
        <field name="view_mode">graph,pivot</field>
        <field name="search_view_id" ref="point_of_sale.view_report_pos_order_search"/>
        <field name="context">{'search_default_this_month':1, 'group_by_no_leaf':1,'group_by':[]}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No data yet!
            </p><p>
                Create a new POS order
            </p>
        </field>
    </record>
    
    <record id="view_report_pos_order_pivot" model="ir.ui.view">
        <field name="name">report.pos.order.pivot</field>
        <field name="inherit_id" ref="point_of_sale.view_report_pos_order_pivot"/>
        <field name="model">report.pos.order</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='date']" position="after">
                <field name="pos_branch_id" type="row"/>
                <!-- <field name="seller_id" type="row"/> -->
                <field name="analytic_account_id" type="row"/>
                <field name="hour_group_id" type="row"/>
            </xpath>
        </field>
    </record>

    <record id="view_report_pos_order_graph" model="ir.ui.view">
        <field name="name">report.pos.order.graph</field>
        <field name="model">report.pos.order</field>
        <field name="arch" type="xml">
            <graph string="Point of Sale Analysis">
                <field name="product_categ_id" type="row"/>
                <field name="price_total" type="measure"/>
            </graph>
        </field>
    </record>

    <record id="view_report_pos_order_search" model="ir.ui.view">
        <field name="name">report.pos.order.search</field>
        <field name="inherit_id" ref="point_of_sale.view_report_pos_order_search"/>
        <field name="model">report.pos.order</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='config_id']" position="before">
                <field name="pos_branch_id" type="row"/>
                <!-- <field name="seller_id" type="row"/> -->
                <field name="analytic_account_id" type="row"/>
            </xpath>
            <xpath expr="//filter[@name='pos']" position="before">
                <filter string="Branch" name="branch" context="{'group_by': 'pos_branch_id'}"/>
                <!-- <filter string="Seller" name="seller" context="{'group_by': 'seller_id'}"/> -->
                <filter string="Analytic Account" name="analytic_account"
                        context="{'group_by': 'analytic_account_id'}"/>
            </xpath>
        </field>
    </record>

    <record id="view_report_pos_order_discount_pivot" model="ir.ui.view">
        <field name="name">report.pos.order.discount.pivot</field>
        <field name="model">report.pos.order</field>
        <field name="arch" type="xml">
            <pivot>
                <field name="pos_branch_id" type="row"/>
                <field name="config_id" type="row"/>
                <field name="promotion_id" type="col"/>
                <field name="order_id" type="measure"/>
                <field name="total_discount" type="measure"/>
                <field name="journal_id" invisible="1"/>
                <field name="analytic_account_id" invisible="1"/>
                <!-- <field name="cashier_id" invisible="1"/> -->
                <field name="delay_validation" invisible="1"/>
                <field name="employee_id" invisible="1"/>
                <field name="invoiced" invisible="1"/>
                <field name="pricelist_id" invisible="1"/>
                <field name="product_tmpl_id" invisible="1"/>
                <field name="nbr_lines" invisible="1"/>
                <!-- <field name="seller_id" invisible="1"/> -->
                <field name="state" invisible="1"/>
                <field name="user_id" invisible="1"/>
                <field name="voucher_id" invisible="1"/>
                <field name="voucher_count" invisible="1"/>
                <field name="voucher_value" invisible="1"/>
            </pivot>
        </field>
    </record>

    <record id="view_report_pos_order_voucher_pivot" model="ir.ui.view">
        <field name="name">report.pos.order.voucher.pivot</field>
        <field name="model">report.pos.order</field>
        <field name="arch" type="xml">
            <pivot>
                <field name="pos_branch_id" type="row"/>
                <field name="config_id" type="row"/>
                <field name="voucher_id" type="col"/>
                <field name="order_id" type="measure"/>
                <field name="voucher_value" type="measure"/>
                <field name="journal_id" invisible="1"/>
                <field name="promotion_id" invisible="1"/>
                <field name="promotion_count" invisible="1"/>
                <field name="analytic_account_id" invisible="1"/>
                <!-- <field name="cashier_id" invisible="1"/> -->
                <field name="delay_validation" invisible="1"/>
                <field name="employee_id" invisible="1"/>
                <field name="invoiced" invisible="1"/>
                <field name="pricelist_id" invisible="1"/>
                <field name="product_tmpl_id" invisible="1"/>
                <field name="nbr_lines" invisible="1"/>
                <!-- <field name="seller_id" invisible="1"/> -->
                <field name="state" invisible="1"/>
                <field name="user_id" invisible="1"/>

                <field name="price_sub_total" invisible="1"/>
                <field name="total_discount" invisible="1"/>
            </pivot>
        </field>
    </record>

    <record id="view_report_pos_discount_graph" model="ir.ui.view">
        <field name="name">report.pos.order.discount.graph</field>
        <field name="model">report.pos.order</field>
        <field name="arch" type="xml">
            <graph string="POS Discount Graph">
                <field name="promotion_id" type="row"/>
                <!-- <field name="promotion_count" type="measure"/> -->
                <field name="analytic_account_id" invisible="1"/>
                <!-- <field name="cashier_id" invisible="1"/> -->
                <field name="delay_validation" invisible="1"/>
                <field name="employee_id" invisible="1"/>
                <field name="invoiced" invisible="1"/>
                <field name="pricelist_id" invisible="1"/>
                <field name="product_tmpl_id" invisible="1"/>
                <field name="nbr_lines" invisible="1"/>
                <!-- <field name="seller_id" invisible="1"/> -->
                <field name="state" invisible="1"/>
                <field name="user_id" invisible="1"/>

                <field name="voucher_count" invisible="1"/>
                <field name="voucher_value" invisible="1"/>
            </graph>
        </field>
    </record>

    <record id="view_report_pos_voucher_graph" model="ir.ui.view">
        <field name="name">report.pos.order.voucher.graph</field>
        <field name="model">report.pos.order</field>
        <field name="arch" type="xml">
            <graph string="POS Voucher Graph">
                <field name="voucher_id" type="row"/>
                <!-- <field name="promotion_count" type="measure"/> -->

                <field name="analytic_account_id" invisible="1"/>
                <!-- <field name="cashier_id" invisible="1"/> -->
                <field name="delay_validation" invisible="1"/>
                <field name="employee_id" invisible="1"/>
                <field name="invoiced" invisible="1"/>
                <field name="pricelist_id" invisible="1"/>
                <field name="product_tmpl_id" invisible="1"/>
                <field name="nbr_lines" invisible="1"/>
                <!-- <field name="seller_id" invisible="1"/> -->
                <field name="state" invisible="1"/>
                <field name="user_id" invisible="1"/>
                
                <field name="price_sub_total" invisible="1"/>
                <field name="total_discount" invisible="1"/>
            </graph>
        </field>
    </record>

    <record id="action_report_pos_order_discount" model="ir.actions.act_window">
        <field name="name">Discount Analysis</field>
        <field name="res_model">report.pos.order</field>
        <field name="view_mode">pivot,graph</field>
        <!-- <field name="search_view_id" ref="point_of_sale.view_report_pos_order_search"/> -->
        <field name="context">{'pivot_view_ref': 'equip3_pos_general.view_report_pos_order_discount_pivot', 'graph_view_ref': 'equip3_pos_general.view_report_pos_discount_graph', 'group_by_no_leaf':1,'group_by':[]}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No data yet!
            </p><p>
                Create a new POS order
            </p>
        </field>
    </record>

    <record id="action_report_pos_order_voucher" model="ir.actions.act_window">
        <field name="name">Voucher Analysis</field>
        <field name="res_model">report.pos.order</field>
        <field name="view_mode">pivot,graph</field>
        <!-- <field name="search_view_id" ref="point_of_sale.view_report_pos_order_search"/> -->
        <field name="context">{'pivot_view_ref': 'equip3_pos_general.view_report_pos_order_voucher_pivot', 'graph_view_ref': 'equip3_pos_general.view_report_pos_voucher_graph', 'group_by_no_leaf':1,'group_by':[]}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No data yet!
            </p><p>
                Create a new POS order
            </p>
        </field>
    </record>

    <record id="action_report_pos_order_pivot" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">pivot</field>
        <field name="view_id" ref="point_of_sale.view_report_pos_order_pivot"/>
        <field name="act_window_id" ref="point_of_sale.action_report_pos_order_all"/>
    </record>

    <record id="action_report_pos_order_graph" model="ir.actions.act_window.view">
        <field name="sequence" eval="2"/>
        <field name="view_mode">graph</field>
        <field name="view_id" ref="point_of_sale.view_report_pos_order_graph"/>
        <field name="act_window_id" ref="point_of_sale.action_report_pos_order_all"/>
    </record>

    <record id="action_report_pos_order_discount_pivot" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">pivot</field>
        <field name="view_id" ref="equip3_pos_general.view_report_pos_order_discount_pivot"/>
        <field name="act_window_id" ref="equip3_pos_general.action_report_pos_order_discount"/>
    </record>

    <record id="action_report_pos_order_discount_graph" model="ir.actions.act_window.view">
        <field name="sequence" eval="2"/>
        <field name="view_mode">graph</field>
        <field name="view_id" ref="equip3_pos_general.view_report_pos_discount_graph"/>
        <field name="act_window_id" ref="equip3_pos_general.action_report_pos_order_discount"/>
    </record>

    <record id="action_report_pos_order_voucher_pivot" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">pivot</field>
        <field name="view_id" ref="equip3_pos_general.view_report_pos_order_voucher_pivot"/>
        <field name="act_window_id" ref="equip3_pos_general.action_report_pos_order_voucher"/>
    </record>

    <record id="action_report_pos_order_voucher_graph" model="ir.actions.act_window.view">
        <field name="sequence" eval="2"/>
        <field name="view_mode">graph</field>
        <field name="view_id" ref="equip3_pos_general.view_report_pos_voucher_graph"/>
        <field name="act_window_id" ref="equip3_pos_general.action_report_pos_order_voucher"/>
    </record>
    
    <menuitem id="menu_discount_and_voucher_analysis" name="Discount And Voucher" parent="point_of_sale.menu_point_rep"/>

    <menuitem id="menu_report_pos_order_discount" name="Discount Analysis" action="action_report_pos_order_discount" parent="menu_discount_and_voucher_analysis" groups="equip3_pos_masterdata.group_pos_supervisor" sequence="6"/>

    <menuitem id="menu_report_pos_order_voucher" name="Voucher Analysis" action="action_report_pos_order_voucher" parent="menu_discount_and_voucher_analysis" groups="equip3_pos_masterdata.group_pos_supervisor" sequence="7"/>

    <menuitem id="point_of_sale.menu_report_pos_order_all" name="Orders Analysis" action="point_of_sale.action_report_pos_order_all" parent="point_of_sale.menu_point_rep" sequence="3"/>
 
</odoo>