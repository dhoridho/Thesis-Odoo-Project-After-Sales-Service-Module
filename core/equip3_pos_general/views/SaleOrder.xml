<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="booking_order_sale_form" model="ir.ui.view">
            <field name="name">sale.order.form.retail.inherit</field>
            <field name="model">sale.order</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='other_information']/group/group[@name='sale_info']" position="after">
                    <group name="pos_info" string="Point Of Sale">
                        <field name="is_self_pickup"/>
                    </group>
                </xpath>
                <xpath expr="//field[@name='date_order']" position="after">
                    <field name="book_order" attrs="{'invisible': [('book_order', '=', False)]}"/>
                    <field name="payment_partial_amount" attrs="{'invisible': [('book_order', '=', False)]}"/>
                    <field name="payment_partial_method_id" attrs="{'invisible': [('book_order', '=', False)]}"/>
                    <field name="pos_branch_id" invisible="1"/>
                </xpath>
                <xpath expr="//notebook" position="inside">
                    <page string="Booked Information" name="booking_order"
                          attrs="{'invisible': [('book_order', '=', False)]}">
                        <group>
                            <group>
                                <field name="ean13"/>
                                <field name="delivery_phone"/>
                                <field name="delivery_address"/>
                                <field name="delivered_date"/>
                            </group>
                            <group>
                                <field name="pos_config_id"/>
                                <field name="pos_order_id"/>
                                <field name="pos_location_id" invisible="1"/>
                            </group>
                        </group>
                    </page>
                </xpath>
                <xpath expr="//field[@name='order_line']//tree/field[@name='product_id']" position="before">
                    <field name="pos_note" optional="hide"/>
                </xpath>
            </field>
        </record>

        <record id="view_sales_order_filter" model="ir.ui.view">
            <field name="name">sale.order.filter.branch</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_sales_order_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//group" position="inside">
                    <filter string="Branch" name="branch" domain="[]" context="{'group_by':'pos_branch_id'}"/>
                    <filter string="Point Of Sale" name="branch" domain="[]" context="{'group_by':'pos_config_id'}"/>
                </xpath>
            </field>
        </record>
                  

        <record id="pos_hr.pos_order_form_inherit" model="ir.ui.view">
            <field name="active">False</field>
        </record>

        <!-- <record id="point_of_sale.menu_pos_dashboard" model="ir.ui.menu">
            <field name="menu_icon_file" type="base64" file="equip3_pos_general/static/src/img/dashboard.png"/>
            <field name="menu_icon_filename">PosDashboard.png</field>
        </record> -->

        <record id="pos_order_form_inherit_user" model="ir.ui.view">
            <field name="name">pos.order.form.inherit.user</field>
            <field name="model">pos.order</field>
            <field name="inherit_id" ref="point_of_sale.view_pos_pos_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='user_id']" position="after">
                    <field name="cashier_id" string="Cashier" readonly="1"/>
                </xpath>
                <xpath expr="//field[@name='picking_type_id']" position="after">
                    <field name="void_order_id" attrs="{'invisible': [('void_order_id','=',False)]}" readonly="1"/>
                </xpath>
                <xpath expr="//button[@name='action_stock_picking']" position="attributes">
                    <attribute name="icon">o-hm-icon o-hm-smart-pos-pickings</attribute>
                </xpath>
            </field>
        </record>

        <record id="equip3_pos_masterdata_coupon_program_view_coupon_program_form_inherit" model="ir.ui.view">
            <field name="name">equip3_pos_masterdata_coupon_program_view_coupon_program_form_inherit</field>
            <field name="model">coupon.program</field>
            <field name="inherit_id" ref="equip3_pos_general.coupon_program_view_coupon_program_form"/>
            <field name="arch" type="xml"> 
                <xpath expr="//button[@name='action_view_pos_orders']" position="attributes">
                    <attribute name="icon">o-hm-icon o-hm-smart-pos-pos-order</attribute>
                </xpath>
            </field>
        </record>

        <!-- <record id="coupon_program_view_coupon_program_form_inherit" model="ir.ui.view">
            <field name="name">coupon_program_view_coupon_program_form_inherit</field>
            <field name="model">coupon.program</field>
            <field name="inherit_id" ref="coupon.coupon_program_view_coupon_program_form"/>
            <field name="arch" type="xml"> 
                <xpath expr="//button[@name='528']" position="attributes">
                    <attribute name="icon">o-hm-icon o-hm-smart-pos-coupons</attribute>
                </xpath>
            </field>
        </record> -->
        

        <record id="pos_order_list_select_inherit_user" model="ir.ui.view">
            <field name="name">pos.order.list.select.inherit.user</field>
            <field name="model">pos.order</field>
            <field name="inherit_id" ref="pos_hr.pos_order_list_select_inherit"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='cashier']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='cashier']" position="after">
                    <field name="cashier_id"/>
                </xpath>
                <xpath expr="//filter[@name='by_cashier']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='by_cashier']" position="after">
                    <filter string="Cashier" name="cashier_id" domain="[]" context="{'group_by': 'cashier_id'}"/>
                    <filter string="Void Order" name="void_order_id" domain="[]" context="{'group_by': 'void_order_id'}"/>
                </xpath>
            </field>
        </record>

        <record id="view_pos_order_tree_inherit_user" model="ir.ui.view">
            <field name="name">pos.order.tree.inherit.user</field>
            <field name="model">pos.order</field>
            <field name="inherit_id" ref="pos_hr.view_pos_order_tree_inherit"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='employee_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='employee_id']" position="replace">
                    <field name="cashier_id" widget="many2one_avatar_user"/>
                </xpath>
            </field>
        </record>

        <record id="view_pos_order_kanban_inherit" model="ir.ui.view">
            <field name="name">view.pos.order.kanban.inherit</field>
            <field name="model">pos.order</field>
            <field name="inherit_id" ref="point_of_sale.view_pos_order_kanban"/>
            <field name="arch" type="xml"> 
                <xpath expr="//templates" position="replace">
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                <div class="o_kanban_record_top">
                                    <div class="o_kanban_record_headings">
                                        <strong class="o_kanban_record_title">
                                            <span t-if="record.partner_id.value">
                                                <t t-esc="record.partner_id.value"/>
                                            </span>
                                            <span t-else="">
                                                <t t-esc="record.name.value"/>
                                            </span>
                                        </strong>
                                    </div>
                                    <strong><field name="amount_total" widget="monetary"/></strong>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <span class="span_pos_reference"><t t-esc="record.pos_reference.value"/></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-8 text-muted">
                                        <span><t t-esc="record.date_order.value"/></span>
                                    </div>
                                    <div class="col-4">
                                        <span class="float-right text-right span_field_state">
                                            <field name="state" widget="label_selection"
                                                options="{'classes': {
                                                    'draft': 'info-hm',    
                                                    'cancel': 'draft',  
                                                    'paid': 'success', 
                                                    'done': 'danger2',
                                                    'invoiced': 'success3', 
                                                    'quotation': 'warning',
                                                }}"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </xpath>
            </field>
        </record>   

        <record id="pos_order_partial_payment_tree" model="ir.ui.view">
            <field name="name">Partial Orders</field>
            <field name="model">pos.order</field>
            <field name="priority">20</field>
            <field name="arch" type="xml">
                <tree string="POS Orders" create="0">
                    <field name="name"/>
                    <field name="ean13"/>
                    <field name="pos_reference" optional="hide"/>
                    <field name="partner_id" optional="hide"/>
                    <field name="shipping_id" optional="hide"/>
                    <field name="date_order" optional="hide"/>
                    <field name="user_id" optional="hide"/>
                    <field name="session_id"/>
                    <field name="amount_tax" sum="Amount total" widget="monetary"/>
                    <field name="amount_paid" sum="Amount total" widget="monetary"/>
                    <field name="amount_total" sum="Amount total" widget="monetary"/>
                    <field name="paid_date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <!-- <record id="view_report_pos_order_search_inherit_user" model="ir.ui.view">
            <field name="name">report.pos.order.search.inherit.user</field>
            <field name="model">report.pos.order</field>
            <field name="inherit_id" ref="pos_hr.view_report_pos_order_search_inherit"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='employee_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='employee_id']" position="after">
                    <filter string="Cashier" name="cashier_id" domain="[]" context="{'group_by':'cashier_id'}"/>
                </xpath>
            </field>
        </record> -->
    </data>
</odoo>
