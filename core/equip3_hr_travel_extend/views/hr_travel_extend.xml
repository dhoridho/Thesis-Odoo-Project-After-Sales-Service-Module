<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!--        Start Travel Request-->
        <record id="bi_employee_travel_managment.seq_idea" model="ir.sequence">
            <field name="name">travel_sequencer</field>
            <field name="code">travel.request</field>
            <field name="prefix">TRR/%(year)s/%(month)s/%(day)s/</field>
            <field name="padding">3</field>
        </record>

        <record id="view_travel_request_filter" model="ir.ui.view">
            <field name="name">travel.request.filter</field>
            <field name="model">travel.request</field>
            <field name="arch" type="xml">
                <search string="Search">
                    <field name="employee_id"/>
                    <filter string="Pending My Approval" name="pending_my_approval" domain="[('approvers_ids', 'in', uid),('approved_user_ids','not in',uid)]"/>
                </search>
            </field>
        </record>

        <record id="equip3_view_travel_req_form" model="ir.ui.view">
            <field name="name">travel.request.equip3.form</field>
            <field name="model">travel.request</field>
            <field name="inherit_id" ref="bi_employee_travel_managment.view_travel_req_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[3]" position="attributes">
                    <attribute name="string">Cash Advance</attribute>
                </xpath>
                <xpath expr="//button[@name='action_approve']" position="replace">
                    <button name="wizard_approve" string="Approve" type="object"
                            groups="equip3_hr_employee_access_right_setting.group_hr_travel_manager" class="oe_highlight"
                            attrs="{'invisible': ['|', ('is_approver', '=', False), ('is_approved', '=', True)]}"/>
                </xpath>
                <xpath expr="//button[@name='action_reject']" position="replace">
                    <button name="wizard_reject" string="Reject" type="object"
                            groups="equip3_hr_employee_access_right_setting.group_hr_travel_manager" class="oe_highlight"
                            attrs="{'invisible': ['|', ('is_approver', '=', False), ('is_approved', '=', True)]}"/>
                </xpath>
                <xpath expr="//field[@name='advance_payment_ids']" position="replace">
                    <field name="cash_advance_ids" widget="one2many_list"
                           attrs="{'readonly':[('state','not in',['draft','confirmed','approved'])]}">
                        <tree editable="bottom">
                            <field name="employee_id" readonly="1"/>
                            <field name="name"/>
                            <field name="amount"/>
                            <field name="state" readonly="1"/>
                        </tree>
                    </field>
                </xpath>
                <xpath expr="//field[@name='employee_id']" position="before">
                    <field name="cash_advance_state" invisible="1"/>
                    <field name="is_return_button_visible" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='state']" position="replace">
                    <field name="state" widget="statusbar"
                           statusbar_visible="draft,confirmed,approved,cancelled,returned"
                           attrs="{'invisible': ['|', ('state', 'in', ('cash_advance_submitted', 'returned', 'submitted')), ('is_travel_approval_matrix', '=', False)]}"/>
                    <field name="state1" widget="statusbar"
                           statusbar_visible="draft,confirmed,approved,cash_advance_submitted,returned"
                           attrs="{'invisible': ['|', ('state', 'in', ('draft', 'confirmed', 'approved', 'cancelled', 'rejected')), ('is_travel_approval_matrix', '=', False)]}"/>
                    <field name="state2"
                           widget="statusbar"
                           statusbar_visible="draft,approved,cash_advance_submitted,returned"
                           attrs="{'invisible': [('is_travel_approval_matrix', '=', True)]}"/>

                </xpath>
                <xpath expr="//button[@name='return_from_trip']" position="before">
                    <button name="create_cash_advance" string="Create Cash Advance"
                            type="object" class="btn-primary" attrs="{'invisible':[('state','!=','approved')]}"/>
                </xpath>
                <xpath expr="//button[@name='return_from_trip']" position="replace">
                    <button name="return_from_trip" string="Return"
                            type="object"
                            attrs="{'invisible': [('is_return_button_visible', '!=', True)]}"/>
                </xpath>
                <xpath expr="//field[@name='expence_sheet_id']" position="after">
                    <field name="cash_advance_orgin_id" readonly="1" force_save="1"
                           context="{'form_view_ref' : 'equip3_accounting_cash_advance.vendor_deposite_inherit_view_form_new'}"/>
                </xpath>
                <xpath expr="//field[@name='expense_ids']" position="replace">
                    <field name="expense_ids" nolabel="1" widget="many2many"
                           domain="[('state', '=', 'draft'), ('employee_id', '=', employee_id)]"
                           options="{'reload_on_button': True}"
                           context="{'form_view_ref' : 'hr_expense.hr_expense_view_form_without_header', 'default_employee_id': employee_id}"
                           force_save="1">
                        <tree decoration-danger="is_refused" editable="bottom">
                            <field name="date" optional="show"/>
                            <field name="name"/>
                            <field name="state" invisible="1"/>
                            <field name="reference" optional="hide"/>
                            <field name="analytic_account_id" optional="show" domain="['|', ('company_id', '=', False)]"
                                   groups="analytic.group_analytic_accounting"/>
                            <field name="analytic_tag_ids" optional="hide" widget="many2many_tags"
                                   groups="analytic.group_analytic_tags"/>
                            <field name="account_id" optional="hide"/>
                            <field name="message_unread" invisible="1"/>
                            <field name="attachment_number" string=" "/>
                            <button name="action_get_attachment_view" string="View Attachments" type="object"
                                    icon="fa-paperclip"/>
                            <field name="unit_amount" optional="hide" widget="monetary"
                                   options="{'currency_field': 'currency_id'}"/>
                            <field name="currency_id" optional="hide"/>
                            <field name="quantity" optional="hide"/>
                            <field name="company_id" invisible="1"/>
                            <field name="tax_ids" optional="show" widget="many2many_tags"
                                   groups="account.group_account_readonly"/>
                            <field name="total_amount" optional="show"/>
                            <field name="company_currency_id" invisible="1"/>
                            <field name="total_amount_company" optional="show" groups="base.group_multi_currency"/>
                            <field name="is_refused" invisible="True"/>
                        </tree>
                    </field>
                </xpath>


                <xpath expr="//field[@name='req_date']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='employee_id']" position="before">
                    <field name="is_readonly" invisible="1" />
                    <field name="domain_employee_ids" invisible="1" />
                </xpath>

                <xpath expr="//field[@name='employee_id']" position="attributes">
                    <attribute name="attrs">{'readonly':['|',('is_readonly','=',True),('state','!=','draft')]}</attribute>
                    <attribute name="domain">[('id','in',domain_employee_ids)]</attribute>
                </xpath>
                <xpath expr="//field[@name='confirm_date']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='approve_date']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='department_manager_id']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='department_manager_id']" position="after">
                    <field name="department_id" readonly="1"/>
                    <field name="job_id" readonly="1"/>
                    <field name="currency_id" attrs="{'readonly':[('state','!=','draft')]}"/>
                </xpath>
                <xpath expr="//group[2]" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//group[3]" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='name']" position="after">
                    <field name="approvers_ids" widget="many2many_tags" invisible="1"/>
                    <field name="approved_user_ids" widget="many2many_tags" invisible="1" readonly="0"/>
                    <field name="is_approver" invisible="1"/>
                    <field name="is_approved" invisible="1"/>
                    <field name="approved_user_text" invisible="1"/>
                    <field name="approved_user" invisible="1" readonly="0"/>
                    <field name="job_id" invisible="1"/>
                    <field name="department_id" invisible="1"/>
                    <field name="feedback_parent" invisible="1"/>
                    <field name="is_travel_approval_matrix" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='available_departure_date']" position="attributes">
                    <attribute name="attrs">{'readonly':[('state','!=','draft')]}</attribute>
                </xpath>
                <xpath expr="//field[@name='departure_mode_travel_id']" position="attributes">
                    <attribute name="attrs">{'readonly':[('state','!=','draft')]}</attribute>
                </xpath>
                <xpath expr="//field[@name='visa_agent_id']" position="attributes">
                    <attribute name="attrs">{'readonly':[('state','!=','draft')]}</attribute>
                </xpath>
                <xpath expr="//field[@name='available_return_date']" position="attributes">
                    <attribute name="attrs">{'readonly':[('state','!=','draft')]}</attribute>
                </xpath>
                <xpath expr="//field[@name='return_mode_travel_id']" position="attributes">
                    <attribute name="attrs">{'readonly':[('state','!=','draft')]}</attribute>
                </xpath>
                <xpath expr="//field[@name='ticket_booking_agent_id']" position="attributes">
                    <attribute name="attrs">{'readonly':[('state','!=','draft')]}</attribute>
                </xpath>
                <xpath expr="//field[@name='bank_id']" position="attributes">
                    <attribute name="attrs">{'readonly':[('state','!=','draft')]}</attribute>
                </xpath>
                <xpath expr="//field[@name='cheque_number']" position="attributes">
                    <attribute name="attrs">{'readonly':[('state','!=','draft')]}</attribute>
                </xpath>

                <xpath expr="//page[last()]" position="after">
                    <page string="Approval Matrix Lines"
                          attrs="{'invisible': [('is_travel_approval_matrix', '!=', True)]}">
                        <field name="travel_approver_user_ids">
                            <tree editable="bottom" create="false" delete="false">
                                <field name="name"/>
                                <field name="user_ids" widget="many2many_tags" readonly="1" force_save="1"/>
                                <field name="matrix_user_ids" widget="many2many_tags" invisible="1" readonly="1" force_save="1"/>
                                <field name="is_delegation_mail_sent" invisible="1"/>
                                <field name="minimum_approver" readonly="1" force_save="1"/>
                                <field name="timestamp" invisible="1" force_save="1"/>
                                <field name="approver_state" invisible="1" force_save="1"/>
                                <field name="approval_status" readonly="1" force_save="1"/>
                                <field name="approved_time" readonly="1" force_save="1"/>
                                <field name="is_approve" invisible="1" force_save="1"/>
                                <field name="approved_employee_ids" invisible="1"/>
                                <field name="feedback" readonly="1" force_save="1"/>
                            </tree>
                        </field>
                    </page>
                </xpath>
                <xpath expr="//sheet" position="after">
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                        <field name="activity_ids" widget="mail_activity"/>
                    </div>
                </xpath>
            </field>
        </record>
        <!--        Start Approve view-->
        <record id="view_travel_req_approve_form" model="ir.ui.view">
            <field name="name">travel.request.approve.form</field>
            <field name="model">travel.request</field>
            <field name="priority">80</field>
            <field name="arch" type="xml">
                <form string="Travel Request to Approve" create="0">
                    <header>

                        <button name="action_confirm" string="Confirm"
                                type="object" states="draft" class="btn-primary"/>
                        <button name="wizard_approve" string="Approve" type="object"
                                groups="equip3_hr_employee_access_right_setting.group_hr_travel_manager" class="oe_highlight"
                                attrs="{'invisible': ['|', ('is_approver', '=', False), ('is_approved', '=', True)]}"/>
                        <button name="wizard_reject" string="Reject" type="object"
                                groups="equip3_hr_employee_access_right_setting.group_hr_travel_manager" class="oe_highlight"
                                attrs="{'invisible': ['|', ('is_approver', '=', False), ('is_approved', '=', True)]}"/>
                        <button name="create_cash_advance" string="Create Cash Advance"
                                type="object" class="btn-primary" attrs="{'invisible':[('state','!=','approved')]}"/>
                        <button name="return_from_trip" string="Return"
                                type="object"
                                attrs="{'invisible': [('is_return_button_visible', '!=', True)]}"/>
                        <button name="action_create_expence" string="Create Expenses"
                                type="object" states="returned"/>
                        <button name="action_draft" string="Reset To Draft"
                                type="object" states="returned,submitted"/>
                        <field name="state" widget="statusbar"
                               statusbar_visible="draft,confirmed,approved,cancelled,returned"
                               attrs="{'invisible': [('state', 'in', ('cash_advance_submitted', 'returned', 'submitted'))]}"/>
                        <field name="state1" widget="statusbar"
                               statusbar_visible="draft,confirmed,approved,cash_advance_submitted,cancelled,returned"
                               attrs="{'invisible': [('state', 'in', ('draft', 'confirmed', 'approved', 'rejected'))]}"/>
                    </header>
                    <sheet>
                        <h2>
                            <field name="name"/>
                            <field name="approvers_ids" widget="many2many_tags" invisible="1"/>
                            <field name="approved_user_ids" widget="many2many_tags" invisible="1" readonly="0"/>
                            <field name="is_approver" invisible="1"/>
                            <field name="is_approved" invisible="1"/>
                            <field name="approved_user_text" invisible="1"/>
                            <field name="approved_user" invisible="1" readonly="0"/>
                            <field name="job_id" invisible="1"/>
                            <field name="department_id" invisible="1"/>
                            <field name="feedback_parent" invisible="1"/>
                        </h2>
                        <div class="oe_button_box">
                            <button name="action_expence_sheet" type="object" class="oe_stat_button" icon="fa-archive"
                                    attrs="{'invisible':[('state','!=','submitted')]}">
                                <strong>Expense</strong>
                            </button>
                        </div>
                        <group>

                            <group>
                                <field name="cash_advance_state" invisible="1"/>
                                <field name="is_return_button_visible" invisible="1"/>
                                <field name="employee_id" attrs="{'readonly':[('state','!=','draft')]}"/>
                                <field name="department_manager_id" readonly="1"/>
                                <field name="department_id" readonly="1"/>
                                <field name="job_id" readonly="1"/>
                                <field name="currency_id" attrs="{'readonly':[('state','!=','draft')]}"/>
                            </group>
                            <group invisible="1">
                                <field name="request_by"/>
                                <field name="confirm_by"/>
                                <field name="approve_by"/>
                            </group>
                            <group>
                                <field name="req_date" invisible="1"/>
                                <field name="confirm_date" invisible="1"/>
                                <field name="approve_date" invisible="1"/>
                                <field name="expence_sheet_id"/>
                                <field name="cash_advance_orgin_id" readonly="1" force_save="1"
                                       context="{'form_view_ref' : 'equip3_accounting_cash_advance.vendor_deposite_inherit_view_form_new'}"/>
                            </group>

                        </group>
                        <notebook>
                            <page string="Travel Request information">
                                <group>
                                    <group>
                                        <field name="travel_purpose" attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="project_id" attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="account_analytic_id"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                    </group>
                                </group>
                                <group string="Travel Details">
                                    <group>

                                        <label for="from_city" string="From"/>
                                        <div class="o_address_format">

                                            <field name="from_city" placeholder="City" class="o_address_city"
                                                   attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="from_state_id" class="o_address_state" placeholder="State"
                                                   options="{&quot;no_open&quot;: True}"
                                                   attrs="{'readonly':[('state','!=','draft')]}"/>

                                            <field name="from_country_id" placeholder="Country"
                                                   class="o_address_country"
                                                   options="{&quot;no_open&quot;: True}"
                                                   attrs="{'readonly':[('state','!=','draft')]}"/>
                                        </div>
                                    </group>


                                    <group>

                                        <label for="to_street" string="To"/>
                                        <div class="o_address_format">
                                            <field name="to_street" placeholder="Street..." class="o_address_street"
                                                   attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="to_street_2" placeholder="Street 2..." class="o_address_street"
                                                   attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="to_city" placeholder="City" class="o_address_city"
                                                   attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="to_state_id" class="o_address_state" placeholder="State"
                                                   options="{'no_open': True}"
                                                   attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="to_zip_code" placeholder="ZIP" class="o_address_zip"
                                                   attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="to_country_id" placeholder="Country" class="o_address_country"
                                                   options="{'no_open': True}"
                                                   attrs="{'readonly':[('state','!=','draft')]}"/>
                                        </div>

                                    </group>


                                </group>
                                <group>
                                    <group>
                                        <field name="req_departure_date" attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="req_return_date" attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="req_travel_mode_id" attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="days"/>
                                    </group>
                                    <group>

                                        <field name="phone_no" attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="email" attrs="{'readonly':[('state','!=','draft')]}"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Other Info">
                                <group>
                                    <group>
                                        <field name="available_departure_date"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="departure_mode_travel_id"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="visa_agent_id"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>

                                    </group>
                                    <group>
                                        <field name="available_return_date"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="return_mode_travel_id"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="ticket_booking_agent_id"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                    </group>

                                </group>
                                <group string="Accounting Info">
                                    <group>
                                        <field name="bank_id" attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="cheque_number" attrs="{'readonly':[('state','!=','draft')]}"/>
                                    </group>
                                    <group></group>
                                </group>
                            </page>
                            <page string="Cash Advance">
                                <field name="cash_advance_ids" widget="one2many_list"
                                       attrs="{'readonly':[('state','not in',['draft','confirmed','approved'])]}">
                                    <tree editable="bottom">
                                        <field name="employee_id" readonly="1"/>
                                        <field name="name"/>
                                        <field name="amount"/>
                                        <field name="state" readonly="1"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Expenses" attrs="{'invisible':[('state','not in',['submitted','returned'])]}">
                                <field name="expense_ids" nolabel="1" widget="many2many"
                                       domain="[('state', '=', 'draft'), ('employee_id', '=', employee_id)]"
                                       options="{'reload_on_button': True}"
                                       context="{'form_view_ref' : 'hr_expense.hr_expense_view_form_without_header', 'default_employee_id': employee_id}"
                                       force_save="1">
                                    <tree decoration-danger="is_refused" editable="bottom">
                                        <field name="date" optional="show"/>
                                        <field name="name"/>
                                        <field name="state" invisible="1"/>
                                        <field name="reference" optional="hide"/>
                                        <field name="analytic_account_id" optional="show"
                                               domain="['|', ('company_id', '=', False)]"
                                               groups="analytic.group_analytic_accounting"/>
                                        <field name="analytic_tag_ids" optional="hide" widget="many2many_tags"
                                               groups="analytic.group_analytic_tags"/>
                                        <field name="account_id" optional="hide"/>
                                        <field name="message_unread" invisible="1"/>
                                        <field name="attachment_number" string=" "/>
                                        <button name="action_get_attachment_view" string="View Attachments"
                                                type="object"
                                                icon="fa-paperclip"/>
                                        <field name="unit_amount" optional="hide" widget="monetary"
                                               options="{'currency_field': 'currency_id'}"/>
                                        <field name="currency_id" optional="hide"/>
                                        <field name="quantity" optional="hide"/>
                                        <field name="company_id" invisible="1"/>
                                        <field name="tax_ids" optional="show" widget="many2many_tags"
                                               groups="account.group_account_readonly"/>
                                        <field name="total_amount" optional="show"/>
                                        <field name="company_currency_id" invisible="1"/>
                                        <field name="total_amount_company" optional="show"
                                               groups="base.group_multi_currency"/>
                                        <field name="is_refused" invisible="True"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Approval Matrix Lines">
                                <field name="travel_approver_user_ids">
                                    <tree editable="bottom" create="false" delete="false">
                                        <field name="name"/>
                                        <field name="user_ids" widget="many2many_tags" readonly="1" force_save="1"/>
                                        <field name="matrix_user_ids" widget="many2many_tags" invisible="1" readonly="1" force_save="1"/>
                                        <field name="is_delegation_mail_sent" invisible="1"/>
                                        <field name="minimum_approver" readonly="1" force_save="1"/>
                                        <field name="timestamp" invisible="1" force_save="1"/>
                                        <field name="approver_state" invisible="1" force_save="1"/>
                                        <field name="approval_status" readonly="1" force_save="1"/>
                                        <field name="approved_time" readonly="1" force_save="1"/>
                                        <field name="is_approve" invisible="1" force_save="1"/>
                                        <field name="approved_employee_ids" invisible="1"/>
                                        <field name="feedback" readonly="1" force_save="1"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_travel_req_approve_tree" model="ir.ui.view">
        <field name="name">travel.request.approve.tree</field>
        <field name="model">travel.request</field>
        <field name="arch" type="xml">
            <tree string="Travel Request to Approve" create="0">
                <field name="name"/>
                <field name="employee_id"/>

                <field name="department_manager_id"/>
                <field name="department_id"/>
                <field name="job_id"/>

                <field name="currency_id"/>
                <field name="request_by" invisible="1"/>
                <field name="confirm_by"/>
                <field name="approve_by" invisible="1"/>
                <field name="state" decoration-primary="state == 'draft'"
                 decoration-warning="state == 'confirmed'"
                 decoration-success="state == 'approved'"
                 decoration-secondary="state == 'cancelled'"
                 decoration-danger="state == 'rejected'"
                 decoration-info="state == 'cash_advance_submitted'"
                 decoration-success2="state == 'returned'"
                 decoration-success3="state == 'submitted'"
                 widget='badge' string="Status"/>
            </tree>
        </field>
    </record>
        <!--        End Approve View-->
        <record id="equip3_view_travel_req_tree" model="ir.ui.view">
            <field name="name">travel.request.equip3.tree</field>
            <field name="model">travel.request</field>
            <field name="inherit_id" ref="bi_employee_travel_managment.view_travel_req_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='employee_id']" position="before">
                    <field name="name"/>
                </xpath>
                <xpath expr="//field[@name='request_by']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='approve_by']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='confirm_by']" position="after">
                    <field name="state"/>
                </xpath>
                <xpath expr="//field[@name='state']" position="attributes">
                    <attribute name="decoration-primary">state == 'draft'</attribute>
                    <attribute name="decoration-warning">state == 'confirmed'</attribute>
                    <attribute name="decoration-success">state == 'approved'</attribute>
                    <attribute name="decoration-secondary">state == 'cancelled'</attribute>
                    <attribute name="decoration-danger">state == 'rejected'</attribute>
                    <attribute name="decoration-info">state == 'cash_advance_submitted'</attribute>
                    <attribute name="decoration-success2">state == 'returned'</attribute>
                    <attribute name="decoration-success3">state == 'submitted'</attribute>
                    <attribute name="widget">badge</attribute>
                    <attribute name="string">Status</attribute>
                </xpath>
            </field>
        </record>


        <record id="bi_employee_travel_managment.action_travel_req_hr" model="ir.actions.act_window">
            <field name="name">Travel Request To Approve</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">travel.request</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="context">{'search_default_pending_my_approval': 1,'is_to_approve':True}</field>
            <field name="domain">[('state','in',['confirmed'])]</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create"></p>
                <p></p>
            </field>
            <field name="view_ids" eval="[
            (5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('equip3_hr_travel_extend.view_travel_req_approve_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('equip3_hr_travel_extend.view_travel_req_approve_form')})]"/>
        </record>

        <record id="bi_employee_travel_managment.action_travel_req" model="ir.actions.act_window">
            <field name="name">Employee Travel Request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">travel.request</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create"></p>
                <p></p>
            </field>
            <field name="view_ids" eval="[
            (5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('bi_employee_travel_managment.view_travel_req_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('bi_employee_travel_managment.view_travel_req_form')})]"/>
        </record>

        <!--        End Travel Request-->

        <record id="view_travel_vendor_deposit_form" model="ir.ui.view">
            <field name="name">travel.vendor.deposit.form</field>
            <field name="model">travel.vendor.deposit</field>
            <field name="arch" type="xml">
                <form string="Cash Advance">
                    <sheet>
                        <group>
                            <group>
                                <field name="travel_cash_id" readonly="1"/>
                                <field name="employee_id" readonly="1"/>
                                <field name="name"/>
                            </group>
                            <group>
                                <field name="amount"/>
                                <field name="state" readonly="1"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="vendor_deposite_travel_view_equip3_form" model="ir.ui.view">
            <field name="name">vendor.deposit.travel.equip3.view.form</field>
            <field name="model">vendor.deposit</field>
            <field name="inherit_id" ref="equip3_accounting_cash_advance.vendor_deposite_inherit_view_form_new"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='company_id']" position="before">
                    <field name="travel_id" domain="[('employee_id', '=', employee_id), '|', ('cash_advance_orgin_id', '=', False),
                  ('cash_advance_state', '=', 'draft')]"
                           attrs="{'readonly': [('state', 'not in', ['draft','confirmed'])]}"/>
                </xpath>
            </field>
        </record>


        <!-- My Expense sheet -->
        <record id="view_hr_travel_my_expense_sheet_form_inherit" model="ir.ui.view">
            <field name="name">hr.travel.my.expense.sheet.form.inherit</field>
            <field name="model">hr.expense.sheet</field>
            <field name="inherit_id" ref="equip3_hr_expense_extend.view_hr_my_expense_sheet_approve_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='expense_cycle']" position="before">
                    <field name="travel_id" string='Travel' style="height:20px;"
                           attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="is_ca_travel" invisible="1"/>
                    <field name="is_ca_number_readonly" invisible="1"/>
                    <field name="is_exp_line_readonly" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='cash_advance_number_ids']" position="replace">
                    <field name="cash_advance_number_ids" widget="many2many_tags"
                           attrs="{'required': [('expense_advance', '=', True)], 'invisible': [('expense_advance', '!=', True)], 'readonly': [('is_ca_number_readonly', '!=', False)]}"/>
                </xpath>
                <xpath expr="//field[@name='expense_line_ids']" position="attributes">
                    <attribute name="attrs">
                        {'readonly':['|', ('state','!=','draft'), ('is_exp_line_readonly','=', True)]}
                    </attribute>
                </xpath>
            </field>
        </record>
        <!-- Expense sheet Approve -->
        <record id="view_hr_travel_expense_sheet_form_inherit" model="ir.ui.view">
            <field name="name">hr.travel.expense.sheet.form.inherit</field>
            <field name="model">hr.expense.sheet</field>
            <field name="inherit_id" ref="equip3_hr_expense_extend.view_hr_expense_sheet_approve_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='expense_cycle']" position="before">
                    <field name="travel_id" string='Travel' style="height:20px;"
                           attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="is_ca_travel" invisible="1"/>
                    <field name="is_ca_number_readonly" invisible="1"/>
                    <field name="is_exp_line_readonly" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='cash_advance_number_ids']" position="replace">
                    <field name="cash_advance_number_ids" widget="many2many_tags"
                           attrs="{'required': [('expense_advance', '=', True)], 'invisible': [('expense_advance', '!=', True)], 'readonly': [('is_ca_number_readonly', '!=', False)]}"/>
                </xpath>
                <xpath expr="//field[@name='expense_line_ids']" position="attributes">
                    <attribute name="attrs">
                        {'readonly':['|', ('state','!=','draft'), ('is_exp_line_readonly','=', True)]}
                    </attribute>
                </xpath>
            </field>
        </record>
        <!-- Expense sheet Post -->
        <record id="view_hr_travel_expense_sheet_post_form_inherit" model="ir.ui.view">
            <field name="name">hr.travel.expense.sheet.post.form.inherit</field>
            <field name="model">hr.expense.sheet</field>
            <field name="inherit_id" ref="equip3_hr_expense_extend.view_hr_expense_sheet_post_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='expense_cycle']" position="before">
                    <field name="travel_id" string='Travel' style="height:20px;"
                           attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="is_ca_travel" invisible="1"/>
                    <field name="is_ca_number_readonly" invisible="1"/>
                    <field name="is_exp_line_readonly" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='cash_advance_number_ids']" position="replace">
                    <field name="cash_advance_number_ids" widget="many2many_tags"
                           attrs="{'required': [('expense_advance', '=', True)], 'invisible': [('expense_advance', '!=', True)], 'readonly': [('is_ca_number_readonly', '!=', False)]}"/>
                </xpath>
                <xpath expr="//field[@name='expense_line_ids']" position="attributes">
                    <attribute name="attrs">
                        {'readonly':['|', ('state','!=','draft'), ('is_exp_line_readonly','=', True)]}
                    </attribute>
                </xpath>
            </field>
        </record>
        <!-- Expense sheet Pay -->
        <record id="view_hr_travel_expense_sheet_pay_form_inherit" model="ir.ui.view">
            <field name="name">hr.travel.expense.sheet.pay.form.inherit</field>
            <field name="model">hr.expense.sheet</field>
            <field name="inherit_id" ref="equip3_hr_expense_extend.view_hr_expense_sheet_pay_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='expense_cycle']" position="before">
                    <field name="travel_id" string='Travel' style="height:20px;"
                           attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="is_ca_travel" invisible="1"/>
                    <field name="is_ca_number_readonly" invisible="1"/>
                    <field name="is_exp_line_readonly" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='cash_advance_number_ids']" position="replace">
                    <field name="cash_advance_number_ids" widget="many2many_tags"
                           attrs="{'required': [('expense_advance', '=', True)], 'invisible': [('expense_advance', '!=', True)], 'readonly': [('is_ca_number_readonly', '!=', False)]}"/>
                </xpath>
                <xpath expr="//field[@name='expense_line_ids']" position="attributes">
                    <attribute name="attrs">
                        {'readonly':['|', ('state','!=','draft'), ('is_exp_line_readonly','=', True)]}
                    </attribute>
                </xpath>
            </field>
        </record>
    </data>
</odoo>