<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    
    <record id="product_warehouse_cost_wizard_form" model="ir.ui.view">
        <field name="name">product.warehouse.cost.wizard.form</field>
        <field name="model">product.warehouse.cost.wizard</field>
        <field name="arch" type="xml">
        <form string="Product Warehouse Cost" delete="false" create="false" edit="false">
            <group>
                <group>
                    <field name="product_id" readonly="1"/>
                </group>
                <field name="product_cost_line_ids" nolabel="1" readonly="1" coslpan="2">
                    <tree>
                        <field name="warehouse_id"/>
                        <field name="cost"/>
                    </tree>
                </field>
            </group>
        </form>
        </field>
    </record>
    
    <record id="action_product_warehouse_cost_wizard" model="ir.actions.act_window">
        <field name="name">Product Warehouse Cost</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">product.warehouse.cost.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="view_id" ref="product_warehouse_cost_wizard_form" />
    </record>
    
    <!-- Product Template form View Inherited-->
    <record id="product_warehouse_cost_inherit" model="ir.ui.view">
        <field name="name">product.warehouse.cost.inherit</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">

            <xpath expr="//form//sheet//notebook//page[@name='general_information_new']//group//group[@name='standard_price']//div[@name='standard_price_uom']" position="after">
                <field name="cost_method"/>
<!--            <field name="is_cost_per_warehouse"/> -->
                <button name="action_product_warehouse_cost" string="Cost Price List" type="object" class="oe_link"  attrs="{'invisible': ['|',('is_cost_per_warehouse','=',False),('cost_method','!=','average')]}"/>
            </xpath>

            <xpath expr="//form//sheet//notebook//page[@name='general_information_new']//group//group[@name='standard_price']//label[@for='standard_price']" position="replace">
                <field name="is_cost_per_warehouse" invisible="1"/>
                <label for="standard_price" 
                       groups="base.group_user" 
                       attrs="{'invisible': ['|','&amp;',('is_cost_per_warehouse','=',True),('cost_method','=','average'),'&amp;',('product_variant_count', '&gt;', 1), ('is_product_variant', '=', False)]}"/>
            </xpath>
            <xpath expr="//form//sheet//notebook//page[@name='general_information_new']//group//group[@name='standard_price']//div[@name='standard_price_uom']" position="replace">
                <div name="standard_price_uom" groups="base.group_user" 
                     attrs="{'invisible': ['|','&amp;',('is_cost_per_warehouse','=',True),('cost_method','=','average'),'&amp;',('product_variant_count', '&gt;', 1), ('is_product_variant', '=', False)]}" 
                     class="o_row">
                    <field name="categ_costing_method" invisible="1"/>
                    <field name="standard_price" widget="monetary" options="{'currency_field': 'cost_currency_id', 'field_digits': True}" attrs="{'readonly': [('categ_costing_method', 'not in', ['standard'])]}"/>
                    <span groups="uom.group_uom" class="oe_read_only">per
                        <field name="uom_name"/>
                    </span>
                </div>
            </xpath>
        </field>
    </record>

    <record id="product_variant_easy_edit_view_bom_inherit" model="ir.ui.view">
        <field name="name">product.product.product.view.form.easy.bom.inherit</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="mrp_account.product_variant_easy_edit_view_bom_inherit"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='standard_price']" position="after">
                <field name="categ_costing_method" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='standard_price']" position="attributes">
                <attribute name="attrs">{'invisible': [('type', '=', 'asset')], 'readonly': [('categ_costing_method', 'not in', ['standard'])]}</attribute>
            </xpath>
        </field>
    </record>
</odoo>