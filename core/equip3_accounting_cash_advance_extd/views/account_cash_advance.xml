<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="view_account_cash_advance_form" model="ir.ui.view">
        <field name="name">view.account.cash advance.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='internal_notes']" position="after">
                <page name="cash_advance" string="Cash Advance">
                    <group>
                        <group>
                            <field name="is_employee_cash_adv"/>
                            <div class="text-muted">
                                This feature is used for creating cash advance purposes. To create a cash advance,
                                please make sure that your employee is an individual type partner and no contact is
                                added.
                            </div>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <record id="view_vendor_deposit_acc_ca_form" model="ir.ui.view">
        <field name="name">view.vendor.deposit.acc.ca.form</field>
        <field name="model">vendor.deposit</field>
        <field name="inherit_id" ref="equip3_accounting_cash_advance.vendor_deposite_inherit_view_form_new"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='employee_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='employee_id']" position="after">
                <field name="partner_id" string="Employee" required="1" domain="[('is_employee_cash_adv', '=', True)]" attrs="{'readonly': [('state','!=','draft')]}"/>
            </xpath>
            <xpath expr="//field[@name='state']" position="attributes">
                <attribute name="statusbar_visible">draft,confirmed,post,converted,reconciled</attribute>
            </xpath>
            <xpath expr="//button[@name='action_convert_expense']" position="after">
                <field name="is_cash_advance_approval_matrix" invisible="1"/>
                <button string="Reconcile" class="oe_highlight" states="post" type="action"
                        name="%(equip3_accounting_deposit.action_account_vendor_deposit_reconcile)d"/>
                <button string="Confirm" class="oe_highlight" attrs="{'invisible' : ['|',('is_cash_advance_approval_matrix', '=', True),('state','!=','draft')]}" type="object" name="action_confirm"/>
            </xpath>
            <xpath expr="//button[@name='action_pay_cash_advance']" position="attributes">
                <attribute name="states">confirmed</attribute>
            </xpath>
        </field>
    </record>
</odoo>