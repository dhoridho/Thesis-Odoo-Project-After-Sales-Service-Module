<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="employee_expense_limit_id_inherit_cash" model="ir.ui.view">
            <field name="name">employee.expense.limit.id</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="dev_expense_limit.employee_expense_limit_id"/>
            <field name="arch" type="xml">

                <xpath expr="//page[@name='expense_limit']" position="before">
                    <field name="is_readonly_self_service" invisible="1"/>
                </xpath>
                <xpath expr="//page[@name='expense_limit']" position="replace">
                    <page string="Expense Limit">
                        <group col="4" colspan="4">
                            <separator string="Expense" colspan="4"/>
                            <field name="employee_expense_line"
                                   attrs="{'readonly':[('is_readonly_self_service','=',True)]}" nolabel="1">
                                <tree string="Expense Line" editable="bottom">
                                    <field name="product_id" domain="[('can_be_expensed','=',True)]"
                                           options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,'no_create': True}" required="1"/>
                                    <field name="limit"/>
                                </tree>
                            </field>
                        </group>
                        <group>
                            <group>
                                <separator string="Cash Advance"/>
                                <field name="cash_advance_limit" widget='monetary'
                                       attrs="{'readonly':[('is_readonly_self_service','=',True)]}"/>
                            </group>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>
        <record id="view_classification_hr_job_cash_inherit_form" model="ir.ui.view">
            <field name="name">hr.classification.hr.job.cash.inherit.form</field>
            <field name="model">hr.job</field>
            <field name="inherit_id" ref="hr.view_hr_job_form"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook" position="inside">
                    <page string="Cash Advance Limit" id="expense_limit">
                        <group col="4" colspan="4">
                            <group>
                                <separator string="Cash Advance"/>
                                <field name="currency_id" invisible="1"/>
                                <field name="cash_advance_limit" widget='monetary'/>
                            </group>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>

        <record id="equip3_accounting_cash_advance.vendor_deposite_inherit_view_tree" model="ir.ui.view">
            <field name="name">vendor.deposit.inherit.view.tree</field>
            <field name="model">vendor.deposit</field>
            <field name="priority" eval="100"/>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="communication"/>
                    <field name="employee_id"/>
                    <field name="payment_date" string="Date"/>
                    <field name="amount"/>
                    <field name="state"
                    decoration-primary="state == 'draft'"
                        decoration-warning="state == 'to_approve'"
                        decoration-warning2="state == 'confirmed'"
                        decoration-success="state == 'approved'" 
                        decoration-warning3="state == 'returned'" 
                        decoration-success3="state == 'post'" 
                        decoration-success2="state == 'converted'" 
                        decoration-primary2="state == 'reconciled'" 
                        decoration-secondary="state == 'cancelled'"
                        decoration-danger="state == 'rejected'" 
                        widget='badge'/>
                </tree>
            </field>
        </record>

        <record id="equip3_accounting_cash_advance.vendor_deposite_inherit_view_form_new" model="ir.ui.view">
            <field name="name">vendor.deposit.inherit.view.form</field>
            <field name="model">vendor.deposit</field>
            <field name="priority" eval="100"/>
            <field name="arch" type="xml">
                <form string="Cash Advance">
                    <header>
                        <button string="Approve" name="wizard_approve" type="object" class="oe_highlight"
                                attrs="{'invisible': ['|', ('is_approver', '=', False), ('is_approved', '=', True)]}"/>
                        <button string="Reject" name="wizard_reject" type="object" class="oe_highlight"
                                attrs="{'invisible': ['|', ('is_approver', '=', False), ('is_approved', '=', True)]}"/>
                        <button string="Pay Cash Advance" name="action_pay_cash_advance" type="object"
                                class="oe_highlight"
                                states="approved"
                                groups="equip3_hr_cash_advance.group_cash_advance_administrator"
                                />
                        <button string="Reconcile as Expense" name="action_convert_expense" type="object"
                                class="oe_highlight" states="post"
                                groups="equip3_hr_cash_advance.group_cash_advance_administrator"
                                />
                        <button string="Return Cash Advance" class="oe_highlight" states="post" type="action"
                                name="%(equip3_accounting_cash_advance.action_account_cash_advance_return_deposit)d"/>
                        <button string="Confirm" name="action_confirm" type="object" class="oe_highlight"
                                states="draft"/>
                        <button string="Cancel" name="action_cancel_cash_advance" type="object" class="oe_highlight"
                                states="draft"/>
                        <button string="Set to Draft" name="action_set_draft" type="object" class="oe_highlight"
                                states="canceled"/>
                        <field name="is_show_cancel" invisible="1"/>
                        <field name="state" widget="statusbar"
                               statusbar_visible="draft,confirmed,approved,post,returned,converted,reconciled,cancelled,rejected" attrs="{'invisible':[('is_cash_advance_approval_matrix','=',False)]}"/>
                        <field name="state_clone" widget="statusbar"
                               statusbar_visible="draft,approved,post,returned,converted,reconciled,cancelled" attrs="{'invisible':[('is_cash_advance_approval_matrix','!=',False)]}"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="is_cash_advance" invisible="1"/>
                                <field name="from_hr" invisible="1"/>
                                <field name="is_readonly" invisible="1"/>
                                <field name="employee_id" 
                                       attrs="{'readonly': [('is_readonly', '=', True)]}"
                                       domain="[('id','in',employee_domain_ids)]"
                                       />
                                <field name="employee_domain_ids" widget="many2many_tags"
                                        invisible="1"
                                      />
                                <field name="advance_date" required="1"
                                       attrs="{'readonly': [('state', 'not in', ['draft','confirmed'])]}"/>
                                <field name="amount" force_save="1" readonly="1"/>
                                <field name="approvers_ids" widget="many2many_tags" invisible="1"/>
                                <field name="approved_user_ids" widget="many2many_tags" invisible="1" readonly="0"/>
                                <field name="is_approver" invisible="1"/>
                                <field name="is_approved" invisible="1"/>
                                <field name="approved_user_text" invisible="1"/>
                                <field name="approved_user" invisible="1"/>
                                <field name="feedback_parent" invisible="1"/>
                                <field name="remaining_amount" readonly="1" force_save="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="account_tag_ids" widget="many2many_tags" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="cash_advance_cycle_id" readonly="1" force_save="1" invisible="1"/>
                                <field name="cycle_code_id" readonly="1" force_save="1"/>
                                <field name="communication" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="move_id" readonly="1" force_save="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"
                                       groups="equip3_accounting_accessright_setting.group_cash_advance_manager"
                                       invisible="1"/>
                                <field name="return_cash_advance_ids" widget="many2many_tags"
                                       string="Return Cash Advance" invisible="1" force_save="1"
                                       groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                <field name="create_uid" string="Created By" invisible="1"/>
                                <field name="create_date" string="Created Date" invisible="1"/>
                                <field name="is_cash_advance_approval_matrix" invisible="1"/>
                            </group>
                            <group>
                                <field name="payment_date" attrs="{'readonly': [('state', '!=', 'draft')]}"
                                       invisible="1"/>
                                <field name="deposit_reconcile_journal_id"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}" string="Reconcile Journal"
                                       invisible="1" force_save="1"
                                       groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                <field name="journal_id" required="1" attrs="{'readonly': [('state', '!=', 'draft')]}"
                                       invisible="1"/>
                                <field name="filter_deposit_account_ids" invisible="1"/>
                                <field name="deposit_account_id" attrs="{'readonly': [('state', '!=', 'draft')]}"
                                       string="Cash Advance Account" domain="[('id', 'in', filter_deposit_account_ids)]"
                                       force_save="1" invisible="1"
                                       groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                <field name="currency_id" attrs="{'readonly': [('state', '!=', 'draft')]}"
                                       invisible="1"/>
                                <field name="company_id" readonly="1" force_save="1"/>
                                <field name="filter_branch_ids" invisible="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="branch_id" domain="[('id', 'in', filter_branch_ids)]"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="create_date" string="Created on" readonly="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="create_uid" string="Created by" readonly="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>

                            </group>
                        </group>
                        <notebook>
                            <page string="Cash Advance Lines" id="cash_advance_details">
                                <field name="advance_line_ids" attrs="{'readonly': [('state', '!=', 'draft')]}">
                                    <tree editable="bottom">
                                        <field name="name"/>
                                        <field name="amount" widget='monetary'/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Accounting Information" name="acc_information">
                                <group>
                                    <group>
                                        <field name="payment_date"
                                               attrs="{'readonly': [('state', '!=', 'approved')], 'invisible': [('state', 'in', ['draft','confirmed'])]}"/>
                                        <field name="journal_id" required="1"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"
                                               groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                        <field name="currency_id" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        <field name="move_id" readonly="1" force_save="1"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"
                                               groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                    </group>
                                    <group>
                                        <field name="employee_partner_id"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"
                                               readonly="0" required="1"/>
                                        <field name="deposit_reconcile_journal_id"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"
                                               string="Reconcile Journal"
                                               readonly="1" force_save="1"
                                               groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                        <field name="deposit_account_id"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"
                                               string="Cash Advance Account"
                                               domain="[('id', 'in', filter_deposit_account_ids)]" force_save="1"
                                               readonly="1"
                                               groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                        <field name="return_cash_advance_ids" widget="many2many_tags"
                                               string="Return Cash Advance" readonly="1" force_save="1"
                                               groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Approval Matrix Lines" attrs="{'invisible':[('is_cash_advance_approval_matrix','=',False)]}">
                                <field name="cash_approver_user_ids">
                                    <tree editable="bottom" create="false" delete="false">
                                        <field name="name"/>
                                        <field name="user_ids" widget="many2many_tags" readonly="1" force_save="1"/>
                                        <field name="matrix_user_ids" widget="many2many_tags" invisible="1" readonly="1" force_save="1"/>
                                        <field name="is_delegation_mail_sent" invisible="1"/>
                                        <field name="minimum_approver" readonly="1" force_save="1"/>
                                        <field name="timestamp" invisible="1" force_save="1"/>
                                        <field name="approver_state" invisible="1" force_save="1"/>
                                        <field name="approval_status" readonly="1" force_save="1"/>
                                        <field name="approved_time" readonly="1" force_save="1"/>
                                        <field name="is_approve" invisible="1"/>
                                        <field name="approved_employee_ids" invisible="1"/>
                                        <field name="feedback"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>

        <!-- Start Cash Advance Pivot View -->
        <record id="vendor_deposit_view_pivot" model="ir.ui.view">
            <field name="name">vendor.deposit.pivot</field>
            <field name="model">vendor.deposit</field>
            <field name="arch" type="xml">
                <pivot string="Cash Advance Analysis" sample="1">
                    <field name="employee_id" type="row"/>
                    <field name="payment_date" interval="month" type="col"/>
                    <field name="amount" type="measure"/>
                    <field name="remaining_amount" invisible="1"/>
                    <field name="invoice_count" invisible="1"/>
                    <field name="reconcile_count" invisible="1"/>
                </pivot>
            </field>
        </record>
        <!-- End Cash Advance Pivot View -->

        <!-- Start Cash Advance Graph View -->
        <record id="vendor_deposit_view_graph" model="ir.ui.view">
            <field name="name">vendor.deposit.graph</field>
            <field name="model">vendor.deposit</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
                <graph orientation="vertical" string="Cash Advance Analysis" type="bar">
                    <field name="employee_id" type="row"/>
                    <field name="payment_date" type="col"/>
                    <field name="amount" type="measure"/>
                    <field name="remaining_amount" invisible="1"/>
                    <field name="invoice_count" invisible="1"/>
                    <field name="reconcile_count" invisible="1"/>
                </graph>
            </field>
        </record>
        <!-- End Cash Advance Graph View -->

        <!-- End Cash Advance Search -->
        <record id="vendor_deposit_view_filter" model="ir.ui.view">
            <field name="name">vendor.deposit.select</field>
            <field name="model">vendor.deposit</field>
            <field name="arch" type="xml">
                <search string="Advance Filter">
                    <field name="employee_id"/>
                    <field name="payment_date"/>
                    <field name="department_id"/>
                    <filter string="Pending My Approval" name="pending_my_approval" domain="[('approvers_ids', 'in', uid),('approved_user_ids','not in',uid)]"/>
                    <filter string="This Year" name="payment_date"
                            domain="[('payment_date','&lt;',(context_today()+relativedelta(years=1)).strftime('%%Y-01-01')), ('payment_date','&gt;=',time.strftime('%%Y-01-01'))]"/>
                    <separator orientation="vertical"/>
                </search>
            </field>
        </record>
        <!-- End Cash Advance Search -->

        <menuitem
                name="Cash Advance Request"
                id="equip3_accounting_cash_advance.menu_action_cash_advance_vendor"
                action="equip3_accounting_cash_advance.action_account_cash_advance"
                parent="equip3_accounting_cash_advance.menu_action_cash_advance"
                groups="equip3_accounting_accessright_setting.group_cash_advance_user,equip3_accounting_accessright_setting.group_cash_advance_manager"

        />

        <!--Start Advance to Approve -->
        <record id="vendor_deposite_inherit_view_tree_manager" model="ir.ui.view">
            <field name="name">vendor.deposit.inherit.view.tree.manager</field>
            <field name="model">vendor.deposit</field>
            <field name="priority" eval="100"/>
            <field name="arch" type="xml">
                <tree create="0">
                    <field name="name"/>
                    <field name="communication"/>
                    <field name="employee_id"/>
                    <field name="payment_date" string="Date"/>
                    <field name="amount"/>
                    <field name="state"
                            decoration-primary="state == 'draft'"
                        decoration-warning="state == 'to_approve'"
                        decoration-warning2="state == 'confirmed'"
                        decoration-success="state == 'approved'" 
                        decoration-warning3="state == 'returned'" 
                        decoration-success3="state == 'post'" 
                        decoration-success2="state == 'converted'" 
                        decoration-primary2="state == 'reconciled'" 
                        decoration-secondary="state == 'cancelled'"
                        decoration-danger="state == 'rejected'" 
                        widget='badge'/>
                </tree>
            </field>
        </record>

        <record id="vendor_deposite_inherit_view_form_manager" model="ir.ui.view">
            <field name="name">vendor.deposit.inherit.view.form.manager</field>
            <field name="model">vendor.deposit</field>
            <field name="priority" eval="100"/>
            <field name="arch" type="xml">
                <form string="Cash Advance" create="0">
                    <header>
                        <button string="Approve" name="wizard_approve" type="object" class="oe_highlight"
                                attrs="{'invisible': ['|', ('is_approver', '=', False), ('is_approved', '=', True)]}"/>
                        <button string="Reject" name="wizard_reject" type="object" class="oe_highlight"
                                attrs="{'invisible': ['|', ('is_approver', '=', False), ('is_approved', '=', True)]}"/>
                        <button string="Pay Cash Advance" name="action_pay_cash_advance" type="object"
                                class="oe_highlight"
                                states="approved"/>
                        <button string="Convert to Expense" name="action_convert_expense" type="object"
                                class="oe_highlight" states="post"/>
                        <button string="Return Cash Advance" class="oe_highlight" states="post" type="action"
                                name="%(equip3_accounting_cash_advance.action_account_cash_advance_return_deposit)d"/>
                        <button string="Confirm" name="action_confirm" type="object" class="oe_highlight"
                                states="draft"/>
                        <button string="Cancel" name="action_cancel_cash_advance" type="object" class="oe_highlight"
                                states="draft"/>
                        <button string="Set to Draft" name="action_set_draft" type="object" class="oe_highlight"
                                states="canceled"/>
                        <field name="is_show_cancel" invisible="1"/>
                        <field name="state" widget="statusbar"
                               statusbar_visible="draft,confirmed,approved,post,returned,converted,reconciled,cancelled,rejected" attrs="{'invisible':[('is_cash_advance_approval_matrix','=',False)]}"/>
                        <field name="state_clone" widget="statusbar"
                               statusbar_visible="draft,approved,post,returned,converted,reconciled,cancelled" attrs="{'invisible':[('is_cash_advance_approval_matrix','!=',False)]}"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="is_cash_advance" invisible="1"/>
                                <field name="from_hr" invisible="1"/>
                                <field name="employee_id" readonly="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="advance_date" required="1"
                                       attrs="{'readonly': [('state', 'not in', ['draft','confirmed'])]}"/>
                                <field name="amount" force_save="1" readonly="1"/>
                                <field name="approvers_ids" widget="many2many_tags" invisible="1"/>
                                <field name="approved_user_ids" widget="many2many_tags" invisible="1" readonly="0"/>
                                <field name="is_approver" invisible="1"/>
                                <field name="is_approved" invisible="1"/>
                                <field name="approved_user_text" invisible="1"/>
                                <field name="approved_user" invisible="1"/>
                                <field name="feedback_parent" invisible="1"/>
                                <field name="remaining_amount" readonly="1" force_save="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="cycle_code_id" readonly="1" force_save="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="communication" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="move_id" readonly="1" force_save="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"
                                       groups="equip3_accounting_accessright_setting.group_cash_advance_manager"
                                       invisible="1"/>
                                <field name="return_cash_advance_ids" widget="many2many_tags"
                                       string="Return Cash Advance" invisible="1" force_save="1"
                                       groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                <field name="create_uid" string="Created By" invisible="1"/>
                                <field name="create_date" string="Created Date" invisible="1"/>
                                <field name="is_cash_advance_approval_matrix" invisible="1"/>
                            </group>
                            <group>
                                <field name="payment_date" attrs="{'readonly': [('state', '!=', 'draft')]}"
                                       invisible="1"/>
                                <field name="deposit_reconcile_journal_id"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}" string="Reconcile Journal"
                                       invisible="1" force_save="1"
                                       groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                <field name="journal_id" required="1" attrs="{'readonly': [('state', '!=', 'draft')]}"
                                       invisible="1"/>
                                <field name="filter_deposit_account_ids" invisible="1"/>
                                <field name="deposit_account_id" attrs="{'readonly': [('state', '!=', 'draft')]}"
                                       string="Cash Advance Account" domain="[('id', 'in', filter_deposit_account_ids)]"
                                       force_save="1" invisible="1"
                                       groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                <field name="currency_id" attrs="{'readonly': [('state', '!=', 'draft')]}"
                                       invisible="1"/>
                                <field name="company_id" readonly="1" force_save="1"/>
                                <field name="filter_branch_ids" invisible="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="branch_id" domain="[('id', 'in', filter_branch_ids)]"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="create_date" string="Created on" readonly="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="create_uid" string="Created by" readonly="1"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>

                            </group>
                        </group>
                        <notebook>
                            <page string="Cash Advance Lines" id="cash_advance_details">
                                <field name="advance_line_ids" attrs="{'readonly': [('state', '!=', 'draft')]}">
                                    <tree editable="bottom">
                                        <field name="name"/>
                                        <field name="amount" widget='monetary'/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Accounting Information" name="acc_information">
                                <group>
                                    <group>
                                        <field name="payment_date"
                                               attrs="{'readonly': [('state', '!=', 'approved')], 'invisible': [('state', 'in', ['draft','confirmed'])]}"/>
                                        <field name="journal_id" required="1"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"
                                               groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                        <field name="currency_id" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        <field name="move_id" readonly="1" force_save="1"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"
                                               groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                    </group>
                                    <group>
                                        <field name="employee_partner_id"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"
                                               readonly="0" required="1"/>
                                        <field name="deposit_reconcile_journal_id"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"
                                               string="Reconcile Journal"
                                               readonly="1" force_save="1"
                                               groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                        <field name="deposit_account_id"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"
                                               string="Cash Advance Account"
                                               domain="[('id', 'in', filter_deposit_account_ids)]" force_save="1"
                                               readonly="1"
                                               groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                        <field name="return_cash_advance_ids" widget="many2many_tags"
                                               string="Return Cash Advance" readonly="1" force_save="1"
                                               groups="equip3_accounting_accessright_setting.group_cash_advance_manager"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Approval Matrix Lines" attrs="{'invisible':[('is_cash_advance_approval_matrix','=',False)]}">
                                <field name="cash_approver_user_ids">
                                    <tree editable="bottom" create="false" delete="false">
                                        <field name="name"/>
                                        <field name="user_ids" widget="many2many_tags" readonly="1" force_save="1"/>
                                        <field name="matrix_user_ids" widget="many2many_tags" invisible="1" readonly="1" force_save="1"/>
                                        <field name="is_delegation_mail_sent" invisible="1"/>
                                        <field name="minimum_approver" readonly="1" force_save="1"/>
                                        <field name="timestamp" invisible="1" force_save="1"/>
                                        <field name="approver_state" invisible="1" force_save="1"/>
                                        <field name="approval_status" readonly="1" force_save="1"/>
                                        <field name="approved_time" readonly="1" force_save="1"/>
                                        <field name="is_approve" invisible="1"/>
                                        <field name="approved_employee_ids" invisible="1"/>
                                        <field name="feedback"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="action_account_cash_advance_approve_manager" model="ir.actions.act_window">
            <field name="name">Advance to Approve</field>
            <field name="res_model">vendor.deposit</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_is_cash_advance': True,'default_is_approve':True,'search_default_pending_my_approval': 1}</field>
            <field name="domain">[('is_cash_advance','=', True), ('state','=','confirmed'),
                ('approvers_ids', '=', uid)]
            </field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('equip3_hr_cash_advance.vendor_deposite_inherit_view_tree_manager')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('equip3_hr_cash_advance.vendor_deposite_inherit_view_form_manager')})]"/>
        </record>

        <menuitem
                name="Advance to Approve"
                id="menu_account_cash_advance_approve"
                action="equip3_hr_cash_advance.action_account_cash_advance_approve_manager"
                parent="equip3_accounting_cash_advance.menu_action_cash_advance"
                sequence="2"
        />

        <record model='ir.ui.menu' id='menu_account_cash_advance_approve'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_hr_cash_advance.group_cash_advance_supervisor')])]"/>
        </record>

        <!-- End Advance to Approve -->
        <!-- Start Advance to Pay -->

        <record id="action_account_cash_advance_pay" model="ir.actions.act_window">
            <field name="name">Advance to Pay</field>
            <field name="res_model">vendor.deposit</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_is_cash_advance': True}</field>
            <field name="domain">[('is_cash_advance','=', True), ('state','=','approved')]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('equip3_hr_cash_advance.vendor_deposite_inherit_view_tree_manager')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('equip3_hr_cash_advance.vendor_deposite_inherit_view_form_manager')})]"/>
        </record>

        <menuitem
                name="Advance to Pay"
                id="menu_account_cash_advance_pay"
                action="action_account_cash_advance_pay"
                parent="equip3_accounting_cash_advance.menu_action_cash_advance"
                sequence="3"
        />

        <record model='ir.ui.menu' id='menu_account_cash_advance_pay'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_hr_cash_advance.group_cash_advance_supervisor')])]"/>
        </record>

        <!--End Advance to Pay -->
        <!-- Start All Advance -->

        <record id="action_account_cash_advance_all" model="ir.actions.act_window">
            <field name="name">All Advance</field>
            <field name="res_model">vendor.deposit</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_is_cash_advance': True,'default_from_hr': True}</field>
            <field name="domain">[('is_cash_advance','=', True), ('state', 'not in', ['draft','to_approve','confirmed'])]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('equip3_hr_cash_advance.vendor_deposite_inherit_view_tree_manager')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('equip3_hr_cash_advance.vendor_deposite_inherit_view_form_manager')})]"/>
        </record>

        <menuitem
                name="All Advance"
                id="menu_account_cash_advance_all"
                action="action_account_cash_advance_all"
                parent="equip3_accounting_cash_advance.menu_action_cash_advance"
                sequence="4"
        />

        <record model='ir.ui.menu' id='menu_account_cash_advance_all'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_hr_cash_advance.group_cash_advance_supervisor')])]"/>
        </record>

        <!--End All Advance -->
        <!-- start Pivot Menu -->
        <record id="action_account_cash_advance_pivot_report" model="ir.actions.act_window">
            <field name="name">Cash Advance Analysis</field>
            <field name="res_model">vendor.deposit</field>
            <field name="view_mode">pivot,graph</field>
            <field name="context">{'default_is_cash_advance': True}</field>
            <field name="domain">[('is_cash_advance','=', True)]</field>
        </record>
        <menuitem
                name="Reporting"
                id="menu_account_cash_advance_report"
                parent="equip3_accounting_cash_advance.menu_action_cash_advance"
                groups="equip3_accounting_accessright_setting.group_cash_advance_manager"
                sequence="4"
        />
        <record model='ir.ui.menu' id='menu_account_cash_advance_report'>
            <field name="groups_id"
                   eval="[(6, 0, [ref('equip3_accounting_accessright_setting.group_cash_advance_manager')])]"/>
        </record>
        <menuitem
                name="Cash Advance Analysis"
                id="menu_account_cash_advance_analysis_report"
                action="action_account_cash_advance_pivot_report"
                parent="menu_account_cash_advance_report"
                sequence="1"
        />

        <record model='ir.ui.menu' id='menu_account_cash_advance_analysis_report'>
            <field name="groups_id"
                   eval="[(6, 0, [ref('equip3_accounting_accessright_setting.group_cash_advance_manager')])]"/>
        </record>


        <!-- End Pivot Menu -->


        <!-- Start Active False -->
        <menuitem
                name="Cash Advance"
                id="equip3_accounting_cash_advance.menu_action_cash_advance_vendor"
                action="equip3_accounting_cash_advance.action_account_cash_advance"
                parent="equip3_accounting_cash_advance.menu_action_cash_advance"
                active="False"
        />


        <!--End  Active False -->


        <!--Start Cash Advance -->
        <record id="action_account_cash_advance_approve_custom" model="ir.actions.act_window">
            <field name="name">Cash Advance</field>
            <field name="res_model">vendor.deposit</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_is_cash_advance': True,'default_from_hr': True}</field>
            <field name="domain">[('is_cash_advance','=', True), ('employee_id.user_id', '=', uid)]</field>
        </record>

        <record id="action_cash_advance_tree_approve_view_custom" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="equip3_accounting_cash_advance.vendor_deposite_inherit_view_tree"/>
            <field name="act_window_id" ref="action_account_cash_advance_approve_custom"/>
        </record>

        <record id="action_cash_advance_form_approve_view_custom" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="equip3_accounting_cash_advance.vendor_deposite_inherit_view_form_new"/>
            <field name="act_window_id" ref="action_account_cash_advance_approve_custom"/>
        </record>

        <menuitem
                name="Cash Advance"
                id="menu_account_cash_advance_approve_custom"
                action="action_account_cash_advance_approve_custom"
                parent="equip3_accounting_cash_advance.menu_action_cash_advance"
                sequence="1"
        />

        <record model='ir.ui.menu' id='menu_account_cash_advance_approve_custom'>
            <field name="groups_id"
                   eval="[(6, 0, [ref('equip3_accounting_accessright_setting.group_cash_advance_user')])]"/>
        </record>
        <!--         End Advance Advance-->


        <!--        Start Configuration order-->

        <menuitem
                name="Configuration"
                id="equip3_accounting_cash_advance.menu_action_cash_advance_configuration"
                parent="equip3_accounting_cash_advance.menu_action_cash_advance"
                sequence="6"
        />
        <record model='ir.ui.menu' id='equip3_accounting_cash_advance.menu_action_cash_advance_configuration'>
            <field name="groups_id"
                   eval="[(6, 0, [ref('equip3_accounting_accessright_setting.group_cash_advance_manager')])]"/>
        </record>

        <!--        End Configuration Order-->
        <!--        Start Account-->
        <record id="view_cash_advance_move_form_inherit" model="ir.ui.view">
            <field name="name">view.move.form.inherit.branch</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='line_ids']//tree//field[@name='branch_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//div[@name='journal_div']" position="after">
<!--                    <field name="company_id"/>-->
                    <label for="company_id"/>
                     <div name="company_id" class="d-flex">
                        <field name="company_id"/>
                    </div>
                </xpath>
            </field>
        </record>
        <!--        End Account-->

    </data>
</odoo>