<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="customer_signature_form_view_second_page" name="Country Signature">
            <t t-call="website.layout">
                <div id="wrap"> 
                    <div class="oe_structure">
                        <section id='customer_country_form_section' style="background-color: #f6eded;">
                            <div class='container'>
                                <form method="post" style="width: 55%;margin-left: 250px;" action="/customer/signature/3">
                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                    <input type="checkbox" name="agree_terms_condition" class="d-none" t-att-value="terms_conditions"/>
                                    <div class='row'>
                                        <div class='col-lg-12'>
                                            <div class="mt-3" style="padding: 10px;height: 500px;">
                                                <div class='heading mt-3 text-center'>
                                                    <h5><b>Choose Your Nationality</b></h5>
                                                    <h5 class="text-500">Please select your country to specify what identity documents to scan, an identity document is required to validate your identity.</h5>
                                                </div>
                                                <div class='col-lg-6  mt-2'>
                                                    <div class="form-group div_country">
                                                        <label class="col-form-label" for="country_id">Country</label>
                                                        <select id="country_id" name="country_id" required="required" class="form-control">
                                                            <option value="">Country...</option>
                                                            <t t-foreach="countries" t-as="c">
                                                                <option t-att-value="c.id" t-att-selected="c.id == (country and country.id or -1)">
                                                                    <t t-esc="c.name" />
                                                                </option>
                                                            </t>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="container">
                                        <div class="mb-4 mt-4 text-left">
                                            <a href="/my/account" class="btn btn-primary back_button_1">
                                                Back
                                            </a>
                                            <button class='btn btn-primary pull-right' id='first_next_page' type='submit'>Next</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </section>
                    </div>
                </div>
            </t>
    </template>

    <template id="customer_signature_form_view_third_page" name="imag_upload">
            <t t-call="website.layout">
                <div id="wrap"> 
                    <div class="oe_structure">
                        <section id='img_upload_form_section' style="background-color: #f6eded;">
                            <div class='container' >
                                <form method="post" style="width: 55%;margin-left: 250px;" action="/customer/signature/4">
                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                    <input type="text" name="country_id" class="d-none" t-att-value="country_id"/>
                                    <div class='row'>
                                        <div class='col-lg-12'>
                                            <div class='text-center' style="background-color: #ccc7c7;padding: 15px; background-color: #f6eded;">
                                                <div class='heading mt-3 text-center'>
                                                    <h5><b>Upload Your Identity Card</b></h5>
                                                    <h5 class="text-500">This document is required to validate your identity, please upload an actual image of your Identity Card.</h5>
                                                </div>
                                                <div class="identity_img" t-if="identity_image">
                                                    <img id="identity_preview" t-att-src="'data:image/png;base64,%s' % to_text(identity_image)" class="img-thumbnail"/>
                                                </div>
                                                <div class='identity_img' t-if="not identity_image">
                                                    <img id="identity_preview" src="/equip3_sale_esignature/static/src/img/plus_icon.png" class="img-thumbnail"/>
                                                    <img id="identity_preview_image" src="/equip3_sale_esignature/static/src/img/plus_icon.png" class="img-thumbnail d-none"/>
                                                    <div id="webcam" class="d-none" style='margin-left: 385px;'></div>
                                                    <input type="button" id="btnCaptureIdentity" value="Capture" class="mt-3 d-none"/>
                                                </div>
                                                <input t-if="not identity_image" type="text" id="identity_image" name="identity_image" class="file d-none"/>
                                                <div class="input-group my-3 d-none">
                                                    <div class="input-group-prepend">
                                                    <button type="button" class="identity_pic_browse btn btn-primary">Browse...</button>
                                                    </div>
                                                    <input type="text" class="form-control" placeholder="Upload File" id="file"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="container">
                                        <div class="mb-4 mt-4 text-left">
                                            <a href="/customer/signature/2" class="btn btn-primary back_button">
                                                Back
                                            </a>
                                            <button class='btn btn-primary pull-right' id='first_next_page' type='submit'>Next</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </section>
                    </div>
                </div>
            </t>
    </template>

    <template id="customer_signature_form_view_fourth_page" name="imag_upload">
            <t t-call="website.layout">
                <div id="wrap"> 
                    <div class="oe_structure">
                        <section id='img_selfie_form_section' style="background-color: #f6eded;">
                            <div class='container' style="background-color: #f6eded;">
                                <form method="post" style="width: 55%;margin-left: 250px;" action="/customer/signature/5">
                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                    <input type="text" name="country_id" class="d-none" t-att-value="country_id"/>
                                    <input type="image" name="identity_image" class="d-none" t-att-value="identity_image"/>
                                    <div class='row'>
                                        <div class='col-lg-12'>
                                            
                                            <div class='text-center' style="background-color: #ccc7c7;padding: 15px; background-color: #f6eded;">
                                                <div class='heading mt-3 text-center'>
                                                    <h5><b>Upload Your Selfie</b></h5>
                                                    <h5 class="text-500">This document is required to validate your identity, please upload an actual image of your clear selfie.</h5>
                                                </div>
                                                <div class='identity_img' t-if="selfie_img">
                                                    <img id="selfie_preview" t-att-src="'data:image/png;base64,%s' % to_text(selfie_img)" class="img-thumbnail"/>
                                                </div>
                                                <div class='identity_img' t-if="not selfie_img">
                                                    <img id="selfie_preview" src="/equip3_sale_esignature/static/src/img/plus_icon.png" class="img-thumbnail"/>
                                                    <img id="selfie_preview_image" src="/equip3_sale_esignature/static/src/img/plus_icon.png" class="img-thumbnail d-none"/>
                                                    <div id="webcam" class="d-none" style='margin-left: 385px;'></div>
                                                    <input type="button" id="btnCaptureSelfie" value="Capture" class="mt-3 d-none"/>
                                                </div>
                                                <input type="text" t-if="not selfie_img" id="selfie_image" name="selfie_image" class="file d-none"/>
                                                <div class="input-group my-3 d-none">
                                                    <div class="input-group-prepend">
                                                    <button type="button" class="selfie_pic_browse btn btn-primary">Browse...</button>
                                                    </div>
                                                    <input type="text" class="form-control" placeholder="Upload File" id="file"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="container">
                                        <div class="mb-4 mt-4 text-left">
                                            <a href="/customer/signature/3" class="btn btn-primary">
                                                Back
                                            </a>
                                            <button class='btn btn-primary pull-right' id='first_next_page' type='submit'>Next</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </section>
                    </div>
                </div>
            </t>
    </template>

    <template id="customer_signature_form_view_fifth_page" name="customer_details">
            <t t-call="website.layout">
                <div id="wrap"> 
                    <div class="oe_structure">
                        <section id='customer_details_form_section' style="background-color: #f6eded;">
                            <div class='container' >
                                <form method="post" style="width: 55%;margin-left: 250px;" action="/customer/signature/6">
                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                    <input type="text" name="country_id" class="d-none" t-att-value="country_id"/>
                                    <input type="image" name="identity_image" class="d-none" t-att-value="identity_image"/>
                                    <input type="image" name="selfie_image" class="d-none" t-att-value="selfie_image"/>
                                    <div class='row'>
                                        <div class='col-lg-12'>
                                            <div class="mt-3" style="padding: 10px;height: 600px; background-color: #f6eded;">
                                                <div class='heading mt-3 text-center'>
                                                    <h5><b>Enter Personal Data</b></h5>
                                                    <h5 class="text-500">Enter your identity based on your KTP or Resident Certificate, also enter an active email and phone number.</h5>
                                                </div>
                                                <div class='col-12'>
                                                    <div class="form-group d-flex mt-5">
                                                      <label style="width:50%;" for="identity_number"><b>Identity Number</b></label>
                                                      <span style="color:red;" class="d-none identity_no_warning ml-3 warning">Must be 16 digits!</span>
                                                      <input type="text" class="form-control" id="identity_no" name="identity_number" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" required="required" t-att-value="partner.identity_number" maxlength="16" size="16"/>
                                                    </div>
                                                    <div class="form-group d-flex mt-5">
                                                      <label for="full_name" style="width:50%;"><b>Name</b></label>
                                                      <span style="color:red;" class="d-none full_name_warning ml-3 warning">Minimal value is 3 characters!</span>
                                                      <input type="text" class="form-control" id="full_name" t-att-value="pic_partner_id.name" name="full_name" required="required"/>
                                                    </div>
                                                    <div class="form-group d-flex mt-5">
                                                      <label for="d_o_b" style="width:50%;"><b>Date Of Birth</b></label>
                                                      <span style="color:red;" class="d-none birth_date_warning ml-3 warning">Fill the right value!</span>
                                                      <input type="date" class="form-control" id="d_o_b" t-att-value="partner.date_of_birth" name="date_of_birth" required="required"/>
                                                    </div>
                                                    <div class="form-group d-flex mt-5">
                                                      <label for="phone_no" style="width:50%;"><b>Phone Number</b></label>
                                                      <span style="color:red;" class="d-none phone_no_warning ml-3 warning">Minimal value is 5 characters!</span>
                                                      <input type="text" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" class="form-control" id="phone_no" name="phone_no" t-att-value="pic_partner_id.phone"  required="required"/>
                                                    </div>
                                                    <div class="form-group d-flex mt-5">
                                                      <label for="email" style="width:50%;"><b>Email</b></label>
                                                      <span style="color:red;" class="d-none email_warning ml-3 warning">Fill the correct email!</span>
                                                      <input type="email" class="form-control" id="email_id" t-att-value="pic_partner_id.email" name="email_id" required="required"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="container ml-4">
                                        <div class="mb-4 mt-4 text-left">
                                            <a href="/customer/signature/4" class="btn btn-primary">
                                                Back
                                            </a>
                                            <button type="submit" id="form_submit" class='btn btn-primary d-none'>Submit</button>
                                            <button type="button" id="last_page" class='btn btn-primary pull-right'>Submit</button>
                                        </div>
                                    </div>
                                </form>
                                <div class="m-4">
                                    <div id="warning_modal" class="modal" tabindex="-1">
                                        <div class="modal-dialog" role="agree_terms_condition">
                                            <div class="col-lg-auto modal-content mt256">
                                                <div class="modal-body text-center">
                                                    <h2>Warning</h2>
                                                    <h3 class="text-secondary"><small>Please fill correct data and try again!</small></h3>
                                                </div>
                                                <div class="modal-footer">
                                                <button type="submit" class="btn btn-primary" data-dismiss="modal">Ok</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="m-4">
                                    <div id="submit_modal" class="modal fade" tabindex="-1">
                                        <div class="modal-dialog modal-lg modal-dialog-centered">
                                            <div class="modal-content">
                                                <div class="modal-body text-center" style="border: 2px solid #e6dada;padding: 10px;height: 500px;overflow-y: scroll; background-color:#f6eded;">
                                                    <div class="modal-body">
                                                        <h3 class="text-500"><small>Please read and understand the message below</small></h3>
                                                    </div>
                                                    <h3 class="text-secondary"><small>You will use an electronic signature to sign electronic documents with PT. HashMicro Solutions Indonesia.</small></h3><br/>
                                                    <h3 class="text-secondary"><small><t t-esc="request.env.user.company_id.name"/> collaborates with PT Privy Identity Digital as a certified Electronic Signature Provider and Electronic Certification Provider under the Ministry of Communication and Information Technology of the Republic of Indonesia under the Privy brand.You agree to register as a Privy user for electronic signature creation data and an electronic certificate issued by PT Privy Identity Digital in order to use the Electronic Signature service to sign electronic documents.You authorize <t t-esc="request.env.user.company_id.name"/> to forward your ID card, selfie, mobile number and email address as registration data to PT Privy Identity Digital in order to comply with the provisions of laws and regulations, namely Government Regulation Number 71 of 2019 concerning Electronic System and Transaction Operators, and Ministry of Information Regulations and Communication Number 11 of 2018 concerning the Implementation of Electronic Certification</small></h3>
                                                </div>
                                                <div class="modal-footer text-center">
                                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                    <div class='col-lg-12'>
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                                        <button type="button" id="modal_done" class="btn btn-primary">Done</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </t>
    </template>

    <template id="customer_signature_final_form_view" name="customer_details">
        <t t-call="website.layout">
            <div id="wrap"> 
                <div class="oe_structure">
                    <section id='customer_details_form_section' style="background-color: #f6eded;">
                        <div class='container' >
                            <div class='mt-5 heading text-left'>
                                <h2><b>Personal Data</b></h2>
                            </div>
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                            <div class='row'>
                                <div class='col-lg-12 d-flex mb-5' style="padding: 10px;height: 300px; background-color: #f6eded;">
                                    <div class='col-lg-6'>
                                        <div class="form-group">
                                            <label for="account_status"><b>Account Status:</b></label>
                                            <span t-esc="request.env.user.partner_id.signature_status or ''"/>
                                        </div>
                                        <div class="form-group">
                                            <label for="identity_number"><b>Identity Number:</b></label>
                                            <span t-esc="sale_esignature_id.identity_number or '' "/>
                                        </div>
                                        <div class="form-group">
                                            <label for="full_name"><b>Full Name:</b></label>
                                            <span t-esc="sale_esignature_id.full_name or '' "/>
                                        </div>
                                        <div class="form-group">
                                            <label for="d_o_b"><b>Date Of Birth:</b></label>
                                            <span t-esc="sale_esignature_id.date_of_birth or '' "/>
                                        </div>
                                        <div class="form-group">
                                            <label for="reason"><b>Reason:</b></label>
                                            <span t-esc="request.env.user.partner_id.signature_reason or ''"/>
                                        </div>
                                    </div>
                                    <div class='col-lg-6'>
                                        <div class="form-group">
                                            <label for="phone_no"><b>Phone Number:</b></label>
                                            <span t-esc="sale_esignature_id.phone_no or '' "/>
                                        </div>
                                        <div class="form-group">
                                            <label for="email_id"><b>E-mail:</b></label>
                                            <span t-esc="sale_esignature_id.email_id or '' "/>
                                        </div>
                                        <div class="form-group d-flex">
                                            <label for="selfie_image"><b>Selfie:</b></label>
                                            <span class="ml-2">
                                                <a t-attf-href="/web/content/#{selfie_attachment_id.id}?download=true&amp;access_token=#{selfie_attachment_id.access_token}" target="_blank">
                                                    <div class='oe_attachment_name'><i class="mr-2 fa fa-download" />selfie.png</div>
                                                </a>
                                            </span>
                                        </div>
                                        <div class="form-group d-flex">
                                            <label for="identity_card"><b>Identity Card:</b></label>
                                            <span class="ml-2">
                                                <a t-attf-href="/web/content/#{identity_attachment_id.id}?download=true&amp;access_token=#{identity_attachment_id.access_token}" target="_blank">
                                                    <div class='oe_attachment_name'><i class="mr-2 fa fa-download" />identity.png</div>
                                                </a>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </t>
    </template>
    
</odoo>