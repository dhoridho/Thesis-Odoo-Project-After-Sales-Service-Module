<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="apply_inherit" inherit_id="website_hr_recruitment.apply">
            <xpath expr="//div[@id='jobs_section']" position="replace">

                <!-- <t t-set="question_job_position_ids" t-value="job.question_job_position.ids"/> -->
                <t t-set="question_job_positions"
                   t-value="request.env['question.job.position'].sudo().search([('job_id','=',job.id)], order='seq')"/>
                <t t-set="question_job_position"
                   t-value="request.env['question.job.position'].sudo().search([('hr_job_id','=',job.id)], order='seq')"/>
                <form action="/recruiter-submit" method="post" enctype="multipart/form-data" role="form"
                class="d-flex flex-grow-1 align-items-center"
                >
                    <div class="o_survey_form_job row" style="margin: 40px">
                        <input type="hidden" class="form-control" name="job_id" t-att-value="job.id"/>

                        <t t-foreach="question_job_positions" t-as="question">
                            <t t-if="question.question and question.show_in_job_portal">
                                <!--                                <div class="form-group col-md-4">-->
                                <!--                                    <label for="question"><t t-esc="question.question.question"/></label>-->
                                <!--                                </div>-->
                                <div class="o_survey_form_content col-md-8">
                                    <t t-if="question.question.type == 'text' or question.question.type == 'multiple'">
                                        <div t-att-class="'js_question-wrapper pb-4'"
                                             t-att-id="question.id" t-att-data-required="question.mandatory"
                                             t-att-data-constr-error-msg="'This question requires an answer'"
                                             t-att-data-validation-error-msg="'The answer you entered is not valid.'">
                                            <div class="mb-4">
                                                <h3>
                                                    <span t-field='question.question'/>
                                                    <span t-if="question.mandatory" class="text-danger">*</span>
                                                </h3>
                                                <!--                                                <div t-if="not is_html_empty(question.description)"-->
                                                <!--                                                     t-field='question.description'-->
                                                <!--                                                     class="text-muted oe_no_empty mt-1"/>-->
                                            </div>
                                            <div class="o_survey_comment_container p-0">
                                            <input t-att-type="text"
                                                   class="form-control o_survey_question_text_box bg-transparent text-dark rounded-0 p-0"
                                                   t-att-name="question.id"
                                                   t-att-data-question-type="char_box"
                                                   />
                                            </div>
                                            <div class="o_survey_question_error overflow-hidden border-0 py-0 px-3 alert alert-danger"
                                                 role="alert"></div>
                                        </div>
                                        <!--                                        <input type="text" class="form-control" t-attf-name="input_#{question.id}" t-att-required="question.mandatory"/>-->
                                    </t>

                                    <t t-if="question.question.type == 'round'">
                                        <input type="number" class="form-control" t-attf-name="input_#{question.id}"
                                               t-att-required="question.mandatory"
                                        />
                                    </t>

                                    <t t-if="question.question.type == 'decimal'">
                                        <input type="number" class="form-control" step="0.01"
                                               t-attf-name="input_#{question.id}" t-att-required="question.mandatory"/>
                                    </t>

                                    <t t-if="question.question.type == 'file'">
                                        <input type="file" class="form-control" t-attf-name="input_#{question.id}"
                                               t-att-required="question.mandatory"/>
                                        <div class="o_survey_question_error overflow-hidden border-0 py-0 px-3 alert alert-danger"
                                             role="alert"></div>
                                    </t>

                                    <t t-if="question.question.type == 'many2one'">
                                        <select class="form-control" t-attf-name="input_#{question.id}"
                                                t-att-required="question.mandatory">
                                            <t t-foreach="question.question.get_data_model()" t-as="data">
                                                <option t-attf-value="#{data.name}"><t t-esc="data.name"/></option>
                                            </t>
                                        </select>
                                    </t>
                                </div>
                            </t>
                        </t>

                        <t t-foreach="question_job_position" t-as="question">
                            <t t-if="question.question and question.show_in_job_portal_specific_question">
                                <div class="form-group col-md-4">
                                    <label for="question"><t t-esc="question.question.question"/></label>
                                </div>
                                <div class="col-md-8">
                                    <t t-if="question.question.type == 'text' or question.question.type == 'multiple'">
                                        <input type="text" class="form-control" t-attf-name="input_#{question.id}"
                                               t-att-required="question.mandatory_specific_question"/>
                                    </t>

                                    <t t-if="question.question.type == 'round'">
                                        <input type="number" class="form-control" t-attf-name="input_#{question.id}"
                                               t-att-required="question.mandatory_specific_question"/>
                                    </t>

                                    <t t-if="question.question.type == 'decimal'">
                                        <input type="number" class="form-control" step="0.01"
                                               t-attf-name="input_#{question.id}"
                                               t-att-required="question.mandatory_specific_question"/>
                                    </t>

                                    <t t-if="question.question.type == 'file'">
                                        <input type="file" class="form-control" t-attf-name="input_#{question.id}"
                                               t-att-required="question.mandatory_specific_question"/>

                                    </t>

                                    <t t-if="question.question.type == 'many2one'">
                                        <select class="form-control" t-attf-name="input_#{question.id}"
                                                t-att-required="question.mandatory_specific_question">
                                            <t t-foreach="question.question.get_data_model()" t-as="data">
                                                <option t-attf-value="#{data.name}"><t t-esc="data.name"/></option>
                                            </t>
                                        </select>
                                    </t>
                                </div>
                            </t>
                        </t>

                        <t t-if="job.question_job_position">
                            <div class="col-md-12 col-12">
                                <div class="form-group">
                                   <button type="submit" t-att-value="'finish'"
                                            class="btn-job btn-primary  o_survey_navigation_submit">
                                       Submit
                                    </button><span class="font-weight-bold text-muted ml-2 d-none d-md-inline"> or press
                                    Enter</span>
                                </div>
                            </div>
                        </t>

                    </div>
                </form>
            </xpath>
        </template>


    </data>
</odoo>