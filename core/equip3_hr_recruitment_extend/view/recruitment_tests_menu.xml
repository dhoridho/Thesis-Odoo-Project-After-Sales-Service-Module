<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <menuitem
        id="recruitment_tests_menu"
        name="Tests"
        parent="hr_recruitment.menu_hr_recruitment_root"
        groups="equip3_hr_accessright_settings.equip3_group_hr_recruitment_user"
        sequence="30"/>
        />

        <record id="recruitment_tests_menu" model="ir.ui.menu">
            <field name="equip_icon_class">o-hm-sidebar-parent-hrm-tests</field> 
        </record>

        <record model="ir.ui.view" id="search_survey_inherit">
          <field name="name">survey.survey.inherit.search</field>
          <field name="model">survey.survey</field>
          <field name="inherit_id" ref="survey.survey_survey_view_search"/>
          <field name="arch" type="xml">
           
              <xpath expr="//group" position="inside">
                <filter string="Category" name="groupby_category" context="{'group_by': 'category_id'}"/>
                    
                 
              </xpath>
          </field>
      </record>


      <record model="ir.actions.act_window" id="action_survey_form_survey_recruitment_extend">
        <field name="name">Recruitment Test</field>
        <field name="res_model">survey.survey</field>
        <field name="view_mode">tree,kanban,form,activity</field>
        <field name="context">{'search_default_groupby_category': 1}</field>
        <field name="domain">
            [
                ('survey_type','=','general'), 
                ('category_id.name', '!=', 'Aptitude'),
            ]
        </field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Add a new survey
            </p>
            <p>
                You can create surveys for different purposes: customer opinion, services feedback, recruitment
                interviews, employee's periodical evaluations, marketing campaigns, etc.
            </p>
            <p>
                Design easily your survey, send invitations and analyze answers.
            </p>
        </field>
    </record>

        <!-- <record id="survey_survey_view_search" model="ir.ui.view">
          <field name="name">survey.survey.search</field>
          <field name="model">survey.survey</field>
          <field name="arch" type="xml">
              <search string="Survey">
                  <field string="Survey" name="title"/>
                  <filter string="Certification" name="certification" domain="[('certification', '=', True)]"/>
                  <separator/>
                  <filter string="Archived" name="inactive" domain="[('active', '=', False)]"/>
                  <separator/>
                  <filter invisible="1" string="Late Activities" name="activities_overdue"
                      domain="[('my_activity_date_deadline', '&lt;', context_today().strftime('%Y-%m-%d'))]"
                      help="Show all records which has next action date is before today"/>
                  <filter invisible="1" string="Today Activities" name="activities_today"
                      domain="[('my_activity_date_deadline', '=', context_today().strftime('%Y-%m-%d'))]"/>
                  <filter invisible="1" string="Upcoming Activities" name="activities_upcoming_all"
                      domain="[('my_activity_date_deadline', '&gt;', context_today().strftime('%Y-%m-%d'))]"/>
                  <group expand="0" string="Group By">
                      <filter string="State" name="groupby_state" context="{'group_by': 'state'}"/>
                  </group>
              </search>
          </field>
      </record> -->


        <menuitem id="recruitment_recruitment_test" name="Recruitment Test" parent="recruitment_tests_menu" sequence="1" action="action_survey_form_survey_recruitment_extend" />
        <menuitem id="recruitment_psychological_test" name="Psychological Test" parent="recruitment_tests_menu" sequence="2" action="equip3_hr_survey_extend.psychological_test_action" />

        <!-- <record model="ir.actions.act_window" id="survey.action_survey_user_input">
            <field name="name">Participations</field>
            <field name="res_model">survey.user_input</field>
            <field name="view_mode">tree,kanban,form,pivot,graph</field>
            <field name="view_id" ref="survey.survey_user_input_view_tree"></field>
            <field name="search_view_id" ref="survey.survey_user_input_view_search"/>
            <field name="context">{'search_default_group_by_survey': True}</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_empty_folder">
                Nobody has replied to your surveys yet
              </p>
            </field>
        </record> -->

        <record model="ir.actions.act_window" id="action_survey_user_input_recruitment">
            <field name="name">Test Result</field>
            <field name="res_model">survey.user_input</field>
            <field name="view_mode">tree,kanban,form,pivot,graph</field>
            <field name="view_id" ref="survey.survey_user_input_view_tree"></field>
            <field name="search_view_id" ref="survey.survey_user_input_view_search"/>
            <field name="context">{'search_default_group_by_survey': True}</field>
            <field name="domain">[('state','=','done')]</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_empty_folder">
                Nobody has replied to your surveys yet
              </p>
            </field>
        </record>
        <record model="ir.actions.act_window" id="action_survey_user_input_recruitment_smart">
            <field name="name">Test Result</field>
            <field name="res_model">survey.user_input</field>
            <field name="view_mode">tree,kanban,form,pivot,graph</field>
            <field name="view_id" ref="survey.survey_user_input_view_tree"></field>
            <field name="search_view_id" ref="survey.survey_user_input_view_search"/>
            <field name="context">{'search_default_group_by_applicant': True}</field>
            <field name="domain">[('active', '=', True), ('survey_type', '!=', 'INTERVIEW'), ('state','=','done'), ('is_all_test_result','=', True)]</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_empty_folder">
                Nobody has replied to your surveys yet
              </p>
            </field>
        </record>
        <menuitem id="recruitment_test_results" name="Test Results" parent="recruitment_tests_menu" sequence="3" action="action_survey_user_input_recruitment" />

    </data>
</odoo>