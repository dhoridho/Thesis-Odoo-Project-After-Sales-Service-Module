<?xml version="1.0" encoding="utf-8"?>
<template xml:space="preserve">
    <t t-name="MrpKioskHome">
        <div style="height: 100%;width: 100%;background-color: #787373;display: flex;flex-direction: column;align-items: center;justify-content: center;">
            <div class="o_home_container" style="background-color: white; width: 80%;border-radius: 7px;display: flex;flex-direction: column;align-items: center;justify-content: center;padding: 40px 20px;position: relative;">
                <div style="position: absolute;right: 0;top: 0;display: flex;border-radius: 7px;">
                    <button class="btn btn-danger o_btn_close" style="border-radius: 3px 7px 3px 3px !important;">
                        <i class="fa fa-close" style="color: white;"></i>
                    </button>
                </div>
                <div>
                    <h1>WELCOME</h1>
                </div>
                <div style="margin-top: 10px;">
                    <h2><t t-esc="widget.recordData.workcenter_id.display_name"/> - <t t-esc="widget.recordData.workorder_id"/> - <t t-esc="widget.recordData.name"/></h2>
                </div>
                <div style="margin-top: auto;margin-bottom: auto;display: flex;">
                    <button class="btn btn-primary mr-2 o_btn_scan" style="margin-top: 30px;">
                        <i class="fa fa-barcode mr-2" style="font-size: 13px !important;"></i>
                        SCAN NOW
                    </button>
                    <button class="btn btn-danger o_btn_stop" style="margin-top: 30px;border-radius: 7px !important;display: none;">
                        <i class="fa fa-barcode mr-2" style="color: white;"></i>
                        STOP
                    </button>
                </div>

                <div style="width: 50%;display: flex;margin-top: 30px;">
                    <input placeholder="Type Labor ID" class="o_input_labor mr-2" style="width: -webkit-fill-available;"/>
                    <button class="btn btn-primary o_btn_enter">Enter</button>
                </div>

                <div class="o_device_container" style="margin-top: 50px; text-align: center;display: none;">
                    <div style="display: flex;height: 30px;align-items: center;justify-content: center;">
                        <h3 class="mr-2">Camera</h3>
                        <select class="o_device" style="height: 100%;"/>
                    </div>
                    <div style="margin-top: 10px;">
                        <video id="kiosk_device_video" width="300" height="200" style="border: 1px solid gray;"></video>
                    </div>
                    <div style="margin-top: 10px;text-align: center;">Result:</div>
                    <code class="o_device_result"/>
                </div>
            </div>
        </div>
    </t>

    <t t-name="MrpKioskMaterial">
        <tr t-att-data-id="move.id">
            <td data-name="product_id" style="padding: 0.5rem 0.3rem;"><t t-esc="move.product_id.display_name"/></td>
            <td data-name="lot_ids" style="padding: 0.5rem 0.3rem;">
                <t t-foreach="move.lot_ids" t-as="lot">
                    <span style="box-shadow: rgb(9 30 66 / 25%) 0px 4px 8px -2px, rgb(9 30 66 / 8%) 0px 0px 0px 1px; padding: 3px; border-radius: 5px; margin-right: 5px; background-color: white;">
                        <t t-esc="lot.name"/>
                    </span>
                </t>
            </td>
            <td data-name="product_uom_qty" style="padding: 0.5rem 0.3rem; text-align: right;"><t t-esc="widget.formatFloat(move.product_uom_qty)"/></td>
            <td data-name="quantity_done" style="padding: 0.5rem 0.3rem; text-align: right;">
                <input class="o_input_quantityDone" t-att-value="widget.formatFloat(move.quantity_done)"></input></td>
            <td data-name="product_uom" style="padding: 0.5rem 0.3rem;"><t t-esc="move.product_uom.display_name"/></td>
        </tr>
    </t>

    <t t-name="MrpKioskWorkorder">
        <t t-set="o" t-value="widget.recordData"/>
        <div class="o_mrp_kiosk_mode" style="height: 100%;display: flex;color: #181F4c;padding: 0px 0px 5px 0px;">
            <div class="o_workorder_info" style="width: 20%;padding: 10px;"></div>
            <div style="width: 80%;">
                <div style="height: 150px;">
                    <div style="min-height: 100%;padding: 10px;">
                        <div style="margin-bottom: 10px;display: flex;width: 100%;">
                            <div class="o_workorder_buttons" style="width: 70%;display: flex;height: 60px;">
                                
                            </div>
                            <div style="position: relative;width: 30%;">
                                <div style="position: absolute;right: 0;top: 0;">
                                    <button class="btn btn-primary o_button_sync" style="white-space: nowrap;margin-right: 10px;box-shadow: rgb(9 30 66 / 25%) 0px 4px 8px -2px, rgb(9 30 66 / 8%) 0px 0px 0px 1px !important;">
                                        <i class="fa fa-plus mr-2"></i>SYNC
                                    </button>
                                    <span class="fa fa-wifi o_button_wifi" style="font-size: 20px;margin-right: 10px;color: #28a745;"></span>
                                    <span class="fa fa-close o_button_close" style="font-size: 20px; cursor: pointer;"></span>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 15px;display: flex;">
                            <div style="display: flex;padding-right: 10px;width: 50%;height: fit-content;">
                                <input class="o_input_material" style="width: -webkit-fill-available;" placeholder="Type Barcode/Lot/Serial Number"/>
                                <button class="btn btn-primary o_button_add_material" style="margin-left: 10px;white-space: nowrap;box-shadow: rgb(9 30 66 / 25%) 0px 4px 8px -2px, rgb(9 30 66 / 8%) 0px 0px 0px 1px !important;">
                                    <i class="fa fa-plus mr-2"></i>ADD
                                </button>
                                <button class="btn btn-primary o_button_scan" style="margin-left: 10px;white-space: nowrap;box-shadow: rgb(9 30 66 / 25%) 0px 4px 8px -2px, rgb(9 30 66 / 8%) 0px 0px 0px 1px !important;">
                                    <i class="fa fa-search mr-2"></i>SCAN
                                </button>
                                <button class="btn btn-danger o_button_stop_scan d-none" style="margin-left: 10px;white-space: nowrap;box-shadow: rgb(9 30 66 / 25%) 0px 4px 8px -2px, rgb(9 30 66 / 8%) 0px 0px 0px 1px !important; border-radius: 7px !important;">
                                    <i class="fa fa-search mr-2" style="color: white;"></i>STOP
                                </button>
                            </div>
                            <div style="width: 50%; padding-left: 10px;">
                                <div style="border-radius: 7px;background-color: #f6f6f5;height: 100%;display: flex;padding: 10px;width: 100%;box-shadow: rgb(9 30 66 / 25%) 0px 4px 8px -2px, rgb(9 30 66 / 8%) 0px 0px 0px 1px;">
                                    <div style="font-weight: bold;">ENGINE ON</div>
                                    <div style="margin-left: auto;font-weight: bold;" class="o_time_counter"><t t-esc="widget.formatFloatTime(o.duration)"/></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="height: calc(100% - 150px);">
                    <div style="height: 100%;display: flex;">
                        <div style="width: 50%;height: 100%;padding: 10px;">
                            <div style="height: 100%;background-color: #f6f6f5;border-radius: 7px;padding: 20px;box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;">
                                <div style="font-weight: bold;margin-bottom: 20px;">INSTRUCTION</div>
                                <div style="height: 90%; width: 100%;" class="o_instruction">
                                    <!-- <div id="instructionCarousel" class="carousel slide" data-ride="carousel">
                                        <ol class="carousel-indicators">
                                            <li data-target="#instructionCarousel" data-slide-to="0" class="active"></li>
                                            <li data-target="#instructionCarousel" data-slide-to="1"></li>
                                            <li data-target="#instructionCarousel" data-slide-to="2"></li>
                                        </ol>
                                        <div class="carousel-inner">
                                            <div class="carousel-item active">
                                                <img class="d-block w-100" src="/equip3_manuf_kiosk/static/img/drill-worksheet.jpg" alt="First slide"/>
                                            </div>
                                            <div class="carousel-item">
                                                <img class="d-block w-100" src="/equip3_manuf_kiosk/static/img/assembly-worksheet.jpg" alt="Second slide"/>
                                            </div>
                                            <div class="carousel-item">
                                                <img class="d-block w-100" src="/equip3_manuf_kiosk/static/img/cutting-worksheet.jpg" alt="Third slide"/>
                                            </div>
                                        </div>
                                        <a class="carousel-control-prev" href="#instructionCarousel" role="button" data-slide="prev">
                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                        <a class="carousel-control-next" href="#instructionCarousel" role="button" data-slide="next">
                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Next</span>
                                        </a>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                        <div style="width: 50%;height: 100%;padding: 10px;">
                            <div style="height: 100%;">
                                <div style="width: 100%;display: flex;height: 100px;">
                                    <div style="width: 80%;height: 100%;padding-right: 5px;">
                                        <div style="width: 100%;height: 100%;background-color: #f6f6f5;border-radius: 7px;padding: 0px 10px;box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;">
                                            <div style="width: 100%;display: flex;height: 50%;align-items: center;">
                                                <div style="width: 70%;font-weight: bold;">FINISHED GOODS</div>
                                                <div style="width: 30%;">
                                                    <input class="o_input_finishedQty" style="width: 100%; text-align: right;" t-att-value="widget.formatFloat([widget.finishedQty, 2])"/>
                                                </div>
                                            </div>
                                            <div style="width: 100%;display: flex;height: 50%;align-items: center;">
                                                <div style="width: 70%;font-weight: bold;">REJECTED GOODS</div>
                                                <div style="width: 30%;">
                                                    <input class="o_input_rejectedQty" style="width: 100%; text-align: right;" t-att-value="widget.formatFloat([widget.rejectedQty, 2])"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="width: 20%;height: 100%;padding-left: 5px;">
                                        <div style="width: 100%;height: 100%;">
                                            <div style="height: 50%;display: flex;padding-bottom: 5px;">
                                                <button class="btn btn-success o_button_add_qty" data-name="finishedQty" style="width: 100%;border-radius: 7px !important;font-weight: bold;box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;">+1</button>
                                            </div>
                                            <div style="height: 50%;display: flex;padding-top: 5px;">
                                                <button class="btn btn-danger o_button_add_qty" data-name="rejectedQty" style="width: 100%;border-radius: 7px !important;font-weight: bold;box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;">+1</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="height: calc(100% - 100px);padding-top: 20px;">
                                    <div style="height: 100%;">
                                        <div class="o_label_container" style="font-weight: bold;height: 10%;display: flex;align-items: center;">MATERIALS</div>
                                        <div style="height: 90%;background-color: #f6f6f5;border-radius: 7px;box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px; display: flex; justify-content: center;">
                                            <div class="o_device_container d-none" style="text-align: center;">
                                                <div style="display: flex;height: 30px;align-items: center;justify-content: center;">
                                                    <h3 class="mr-2">Camera</h3>
                                                    <select class="o_device" style="height: 100%;"/>
                                                </div>
                                                <div style="margin-top: 10px; text-align: center;">
                                                    <video id="kiosk_device_video" width="300" height="200" style="border: 1px solid gray;"></video>
                                                </div>
                                                <div style="margin-top: 10px;text-align: center;">Result:</div>
                                                <code class="o_device_result"/>
                                            </div>
                                            <div style="overflow: scroll; width: 100%;padding: 30px;" class="o_materials">
                                                <table class="o_list_table table table-sm table-hover table-striped o_list_table_ungrouped o_table_material">
                                                    <thead>
                                                        <tr>
                                                            <th>Product</th>
                                                            <th>Lot/Serial Number</th>
                                                            <th>To Consume</th>
                                                            <th>Consumed</th>
                                                            <th>UoM</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <t t-foreach="o.move_raw_ids" t-as="move">
                                                            <t t-call="MrpKioskMaterial"/>
                                                        </t>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="MrpKioskWorkorderInfo">
        <div style="height: 100%;background-color: #f6f6f5;border-radius: 7px;padding: 20px;display: flex;flex-direction: column;box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;">
            <div style="">
                <div style="width: 100%;">
                    <img src="/equip3_hashmicro_ui/static/src/img/hashmicro-logo-white.png" style="width: 100%;"/>
                </div>
                <div style="font-weight: bold;text-align: center;margin-top: 15px;">
                    <h4><t t-esc="o.workcenter_id.display_name"/></h4>
                </div>
            </div>
            <div style="height: 80%;display: flex;flex-direction: column;">
                <div style="margin-top: auto;">
                    <div style="font-weight: bold;overflow-wrap: break-word;">
                        <h2><t t-esc="o.workorder_id"/></h2>
                    </div>
                    <div style="font-weight: bold;"><t t-esc="o.name"/></div>
                    <div style="font-weight: bold;"><t t-esc="o.product_id.display_name"/></div>
                </div>
                <div style="margin-top: auto;">
                    <div style="font-weight: bold;">
                        <h3>Employee</h3>
                    </div>
                    <div><t t-esc="employee.name"/> - <t t-esc="employee.sequence_code"/></div>
                </div>
                <div style="margin-top: auto;">
                    <div style="font-weight: bold;">
                        <h3>Actual Duration</h3>
                    </div>
                    <div class="o_duration"><t t-esc="formatFloatTime(o.duration)"/> Hours</div>
                </div>
                <div style="margin-top: auto;">
                    <div style="font-weight: bold;">
                        <h3>Expected Duration</h3>
                    </div>
                    <div><t t-esc="formatFloatTime(o.duration_expected)"/> Hours</div>
                </div>
                <div style="margin-top: auto;">
                    <div style="font-weight: bold;">
                        <h3>Scheduled Date</h3>
                    </div>
                    <div>Start: <t t-esc="formatDatetime(o.date_planned_start)"/></div>
                    <div>End: <t t-esc="formatDatetime(o.date_planned_finished)"/></div>
                </div>
                <div style="margin-top: auto;">
                    <div style="font-weight: bold;">
                        <h3>Actual Date</h3>
                    </div>
                    <div>Start: <t t-esc="formatDatetime(o.date_start)"/></div>
                    <div>End: <t t-esc="formatDatetime(o.date_finished)"/></div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="MrpKioskWorkorderButtons">
        <button t-if="!(['draft', 'done'].includes(o.production_state) || o.working_state === 'blocked')" class="btn btn-danger o_button_workorder" data-name="mrp.act_mrp_block_workcenter_wo" data-type="action" t-attf-data-context='{"default_workcenter_id": {{ o.workcenter_id.id }}}' style="width: 32%;font-weight: bold;border-radius: 7px !important;box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;">BLOCK</button>
        <button t-if="!(['draft', 'done'].includes(o.production_state) || o.working_state !== 'blocked')" class="btn btn-danger o_button_workorder" data-name="button_unblock" data-type="object" style="width: 32%;margin-left: 10px;font-weight: bold;border-radius: 7px !important;box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;">UNBLOCK</button>
        <button t-if="!(['draft', 'done'].includes(o.production_state) || o.working_state === 'blocked' || o.is_user_working === false)" class="btn o_button_workorder" data-name="button_pending" data-type="object" style="color: #FFFFFF;background-color: #EBC500;border-color: #EBC500;width: 32%;margin-left: 10px;font-weight: bold;border-radius: 7px !important;box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;">PAUSE</button>
        <button t-if="!(['draft', 'done'].includes(o.production_state) || o.working_state === 'blocked' || o.state === 'done' || o.is_user_working !== false)" class="btn btn-success o_button_workorder" data-name="button_start" data-type="object" style="width: 32%;margin-left: 10px;font-weight: bold;border-radius: 7px !important;box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;">START</button>
        <button t-if="!(['draft', 'done'].includes(o.production_state) || o.working_state === 'blocked' || o.is_user_working === false)" class="btn btn-success o_button_workorder" data-name="button_finish_wizard" data-type="object" style="width: 32%;margin-left: 10px;font-weight: bold;border-radius: 7px !important;box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;">DONE</button>
    </t>
</template>