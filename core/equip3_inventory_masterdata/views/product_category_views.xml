<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="product_category_form_view_inherit" model="ir.ui.view">
        <field name="model">product.category</field>
        <field name="inherit_id" ref="stock_account.view_category_property_form" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='parent_id']" position="after">
                <field name="stock_type" class="oe_inline" required="1" />
            </xpath>

            <xpath expr="//group/field[@name='property_stock_account_output_categ_id']"
                position="after">
                <field name="stock_transfer_transit_account_id" />
            </xpath>

            <xpath expr="//group[@name='account_stock_property']" position="after">
                <group name="account_service_property" string="Account Service Properties"
                    groups="account.group_account_readonly"
                    attrs="{'invisible':['|', ('property_valuation', '=', 'manual_periodic'), ('stock_type', '!=', 'service')]}">
                    <field name="property_stock_valuation_account_id" options="{'no_create': True}"
                        attrs="{'required':[('property_valuation', '=', 'real_time')]}"
                        string="Service Valuation Account" />
                    <field name="property_stock_journal"
                        attrs="{'required':[('property_valuation', '=', 'real_time')]}"
                        string="Service Journal" />
                    <field name="property_stock_account_input_categ_id"
                        attrs="{'required':[ ('property_valuation', '=', 'real_time')]}"
                        string="Service Input Account" />
                    <field name="property_stock_account_output_categ_id"
                        attrs="{'required':[ ('property_valuation', '=', 'real_time')]}"
                        string="Service Output Account" />
                    <field name="stock_transfer_transit_account_id"
                        string="Service Transfer Transit Account" />
                    <div colspan="2" class="alert alert-info mt16" role="status">
                        <b>Set other input/output accounts on specific </b><button
                            name="%(stock.action_prod_inv_location_form)d" role="button"
                            type="action" class="btn-link"
                            style="padding: 0;vertical-align: baseline;" string="locations" />. </div>
                </group>
            </xpath>

            <xpath expr="//group[@name='account_stock_property']" position="attributes">
                <attribute name="attrs">{'invisible':['|', ('property_valuation', '=',
                    'manual_periodic'), ('stock_type', '=', 'service')]}</attribute>
            </xpath>

            <xpath expr="//field[@name='property_account_expense_categ_id']" position="after">
                <field name="property_service_account_id"
                    attrs="{'invisible': [('stock_type', '!=', 'service')]}" />
            </xpath>

            <xpath expr="//sheet" position="after">
                <div class="oe_chatter">
                    <field name="message_follower_ids" />
                    <field name="message_ids" />
                </div>
            </xpath>
        </field>
    </record>

    <record id="product_category_form_view_inherited" model="ir.ui.view">
        <field name="model">product.category</field>
        <field name="inherit_id" ref="product.product_category_form_view" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='route_ids']" position="replace" />
            <xpath expr="//field[@name='removal_strategy_id']" position="replace">
                <group>
                    <field name="removal_strategy_id" options="{'no_create': True}"
                        string="Removal Strategy" />
                    <field name="product_limit" />
                    <field name="min_val"
                        attrs="{'invisible': [('product_limit', 'in', ['no_limit','str_rule',False])]}" />
                    <field name="max_val"
                        attrs="{'invisible': [('product_limit', 'in', ['no_limit','str_rule',False])]}" />
                </group>
                <group>
                    <field name="delivery_limit" />
                    <field name="delivery_limit_min_val"
                        attrs="{'invisible': [('delivery_limit', 'in', ['no_limit','str_rule',False])]}" />
                    <field name="delivery_limit_max_val"
                        attrs="{'invisible': [('delivery_limit', 'in', ['no_limit','str_rule',False])]}" />
                </group>
            </xpath>
            <xpath expr="//sheet" position="after">
                <div class="oe_chatter">
                    <field name="message_follower_ids" />
                    <field name="message_ids" />
                </div>
            </xpath>
        </field>
    </record>

</odoo>
