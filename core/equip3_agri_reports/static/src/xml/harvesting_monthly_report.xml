<templates>
    <t t-name="HarvestingMonthlyReportTemplate">
        <div class="o_view_agri_report">
            <div class="o_agri_report_header"></div>
            <div class="o_agri_report_content">
            </div>
        </div>
    </t>
    
    <t t-name="HarvestingMonthlyReportHeader">
        <div class="o_agri_report_title">
            <h1>Harvesting Monthly Report</h1>
        </div>

        <div class="o_agri_control_panel">
            <div class="o_panel_left">
                <div class="o_report_buttons">
                    <button type="button" class="o_print_pdf btn btn-primary mr-2">Print (PDF)</button>
                    <button type="button" class="o_print_xlsx btn btn-primary" id="xlsx">Export (XLSX)</button>
                </div>
            </div>
            <div class="o_panel_right">
                <div class="o_report_filter">
                    <div class="o_filter mr-2">
                        <div class="dropleft o_filter_date">
                            <t t-set="filter_date" t-value="filters['filter_date']"/>
                            <a class="btn btn-secondary dropdown-toggle o_filter_date_btn" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" t-att-data-filter-date="filter_date['active'][0]">
                                <t t-esc="filter_date['active'][1]"/>
                            </a>
                            <ul class="dropdown-menu o_filter_date_dropdown" aria-labelledby=".o_filter_date_btn">
                                <t t-foreach="filter_date['selection']" t-as="selection">
                                    <t t-if="selection[0] != 'custom'">
                                        <t t-if="selection[0] == 'last_month'">
                                            <li class="dropdown-divider"></li>
                                        </t>
                                        <li><a class="dropdown-item o_filter_date_item" href="#" t-att-data-filter-date="selection[0]">
                                            <t t-esc="selection[1]"/>
                                        </a></li>
                                    </t>
                                </t>
                                <li class="dropdown-divider"></li>
                                <li class="o_filter_date_custom">
                                    <a class="dropdown-item o_filter_date_custom_btn" data-toggle="collapse" href="#" role="button" aria-expanded="false">
                                        Custom
                                    </a>
                                    <div class="collapse o_filter_date_custom_collapse">
                                        <div class="o_filter_date_custom_container">
                                            <div class="o_custom_date_from"></div>
                                            <div class="o_custom_date_to mt-2"></div>
                                            <button class="btn btn-sm btn-secondary w-100 mt-2 o_apply_custom_date">Apply</button>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="o_apply">
                        <button type="button" class="o_apply_filter btn btn-primary">Apply</button>
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="HarvestingMonthlyReportTable">

        <table class="table o_table_agri_report">
            <thead>
                <tr>
                    <th rowspan="2">ESTATE</th>
                    <th rowspan="2">DIVISION</th>
                    <th rowspan="2">BLOCK</th>
                    <th rowspan="2">TT</th>
                    <th rowspan="2">HA</th>
                    <th rowspan="2">PKK</th>
                    <th rowspan="2">PKK/HA</th>
                    <t t-foreach="header" t-as="head">
                        <th colspan="10" style="text-align: center; border-left: 1px solid #dee2e6;"><t t-esc="head[1]"/></th>
                    </t>
                </tr>
                <tr>
                    <t t-foreach="header">
                        <th style="border-left: 1px solid #dee2e6;">ROTASI</th>
                        <th>KG</th>
                        <th>TON/HA</th>
                        <th>RP</th>
                        <th>RP/KG</th>
                        <th>JJG</th>
                        <th>BJR</th>
                        <th>JJG/PKK</th>
                        <th>HK</th>
                        <th>KG/HK</th>
                    </t>
                </tr>
            </thead>

            <t t-foreach="data" t-as="line">
                <tbody class="o_row" >
                    <tr>
                        <td><t t-esc="line['estate']"/></td>
                        <td><t t-esc="line['division']"/></td>
                        <td><t t-esc="line['block']"/></td>
                        <td><t t-esc="line['tt']"/></td>
                        <td><t t-esc="line['ha']"/></td>
                        <td><t t-esc="line['pkk']"/></td>
                        <td><t t-esc="line['pkk/ha']"/></td>

                        <t t-foreach="line['months']" t-as="line_month">
                            <td style="border-left: 1px solid #dee2e6;"><t t-esc="line_month_value['rotasi']"/></td>
                            <td><t t-esc="line_month_value['kg']"/></td>
                            <td><t t-esc="line_month_value['ton/ha']"/></td>
                            <td><t t-esc="line_month_value['rp']"/></td>
                            <td><t t-esc="line_month_value['rp/kg']"/></td>
                            <td><t t-esc="line_month_value['jjg']"/></td>
                            <td><t t-esc="line_month_value['bjr']"/></td>
                            <td><t t-esc="line_month_value['jjg/pkk']"/></td>
                            <td><t t-esc="line_month_value['hk']"/></td>
                            <td><t t-esc="line_month_value['kg/hk']"/></td>
                        </t>

                    </tr>
                </tbody>
            </t>
        </table>
    </t>
</templates>