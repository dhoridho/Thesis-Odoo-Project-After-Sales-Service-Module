<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Hide Expense Limit Tab in Employee Masters -->
    <record id="equip3_hide_employee_expense_limit_id" model="ir.ui.view">
        <field name="name">employee.expense.limit.id</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="equip3_hr_cash_advance.employee_expense_limit_id_inherit_cash"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/notebook/page[last()]" position="attributes">
                <attribute name="invisible">0</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_hr_expense_product_limit_form" model="ir.ui.view">
        <field name="name">hr.expense.product.limit</field>
        <field name="model">hr.expense.cycle</field>
        <field name="inherit_id" ref="equip3_hr_expense_extend.view_hr_expense_cycle_from"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='hr_year_id']" position="after">
                <field name="apply_to" required="1"/>
                <field name="employee_id"
                       attrs="{
                        'invisible': [('apply_to', '!=', 'by_employee')],
                        'required': [('apply_to', '=', 'by_employee')]
                        }"
                       widget="many2many_tags"/>
                <field name="job_id"
                       attrs="{
                        'invisible': [('apply_to', '!=', 'by_job_position')],
                        'required': [('apply_to', '=', 'by_job_position')]
                        }"
                       widget="many2many_tags"/>
                <field name="department_id"
                       attrs="{
                        'invisible': [('apply_to', '!=', 'by_department')],
                        'required': [('apply_to', '=', 'by_department')]
                        }"
                       widget="many2many_tags"/>
                <field name="company_id"
                       attrs="{
                        'invisible': [('apply_to', '!=', 'by_company')],
                        'required': [('apply_to', '=', 'by_company')]
                        }"
                       readonly="1"/>
            </xpath>
            <xpath expr="//sheet/notebook/page[last()]" position="after">
                <page string="Product Limit" name="product_limit">
                    <field name="expense_limit_line_ids">
                        <tree editable="bottom">
                            <field name="product_id"/>
                            <field name="limit_type"/>
                            <field name="limit"/>
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>
</odoo>