<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>
        <template id="report_customer_deposit">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.html_container">
                        <t t-call="equip3_accounting_deposit.deposit_request_exclusive_external_layout">
                            <t t-set="o" t-value="o.with_context({'lang':o.create_uid.partner_id.lang})"/>
                            <t t-set="theme_color" t-value="o.company_id and o.company_id.theme_color"/>
                            <t t-set="theme_text_color" t-value="o.company_id and o.company_id.theme_text_color"/>
                            <t t-set="company_color" t-value="o.company_id and o.company_id.company_color"/>
                            <t t-set="company_address_color" t-value="o.company_id and o.company_id.company_address_color"/>
                            <t t-set="customer_color" t-value="o.company_id and o.company_id.customer_color"/>
                            <t t-set="customer_address_color" t-value="o.company_id and o.company_id.customer_address_color"/>
                            <t t-set="text_color" t-value="o.company_id and o.company_id.text_color"/>
                            <div class="page" t-att-style="'font-family:'+o.company_id.font_id.family+';font-size:'+str(o.company_id.font_size)+'px;'">
                                <div width="100%">
                                    <div style="margin:0; padding:0px 0 20px;" width="100%">
                                        <div class="oe_structure"/>
                                        <div style="clear: both;display: table;width: 100%;">
                                            <div  t-attf-style="padding:10px 0px 0px 0px; height:5px;border-top: 2px solid #{theme_color or '#000000'};    margin-top: 25px;margin-bottom: 25px;"/>
                                        </div>
                                        <div align="left"  style="padding:20px 0px;" valign="top">
                                            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                                                <tr>
                                                    <td>
                                                        <h3><strong>Customer Deposit</strong></h3>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>

                                        <div align="left"  style="padding:0 0px;" valign="top">
                                            <table border="0" cellpadding="0" cellspacing="0" t-attf-style="color: #{theme_text_color or '#000000'}; border: 1px solid #{theme_color or '#000000'};" width="100%">
                                                <tr t-attf-style="background-color: #{theme_color or '#000000'};">
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <strong>
                                                            <span class="text-left">Deposit Number</span>
                                                        </strong>
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width: 2%;">
                                                        :
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <t t-if="o.state1 != 'draft'">
                                                            <span t-field="o.name"/>
                                                        </t>
                                                        <t t-if="o.state1 == 'draft'">
                                                            <span>/</span>
                                                        </t>
                                                        
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:8%;">
                                                        
                                                    </td>

                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <strong>
                                                            <span class="text-left">Payment Date </span>
                                                        </strong>
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width: 2%;">
                                                        :
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <span t-field="o.payment_date"/>
                                                    </td>
                                                </tr>

                                                <tr t-attf-style="background-color: #{theme_color or '#000000'};">
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <strong>
                                                            <span class="text-left">Partner</span>
                                                        </strong>
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width: 2%;">
                                                        :
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <span t-field="o.partner_id"/>
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:8%;">
                                                        
                                                    </td>

                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <strong>
                                                            <span class="text-left">Payment Method </span>
                                                        </strong>
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width: 2%;">
                                                        :
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <span t-field="o.journal_id"/>
                                                    </td>
                                                </tr>


                                                <tr t-attf-style="background-color: #{theme_color or '#000000'};">
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <strong>
                                                            <span class="text-left">Deposit Account </span>
                                                        </strong>
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width: 2%;">
                                                        :
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <span t-field="o.deposit_account_id"/>
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:8%;">
                                                        
                                                    </td>

                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <strong>
                                                            <span class="text-left">Journal Entry  </span>
                                                        </strong>
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width: 2%;">
                                                        :
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <span t-field="o.deposit_move_id"/>
                                                    </td>
                                                </tr>

                                                <tr t-attf-style="background-color: #{theme_color or '#000000'};">
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <strong>
                                                            <span class="text-left">Paid Amount </span>
                                                        </strong>
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width: 2%;">
                                                        :
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        <span t-field="o.amount"/>
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:8%;">
                                                        
                                                    </td>

                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                       
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width: 2%;">
                                                        
                                                    </td>
                                                    <td name="td_sched_date_h" t-attf-style="padding:5px 15px; font-weight:bold; width:15%;">
                                                        
                                                    </td>
                                                </tr>
     
                                                    
                                                
                                            </table>
                                        </div>
                                        
                                        <div align="left"  style="padding:20px 0px 0 0; font-weight:bold; width:100%;" valign="top">
                                            <table class="table table-sm" style="border:0.5px solid #fff;  border-collapse: collapse; padding:15px; border-bottom:1px solid #fff;" width="100%" t-if="o.invoice_deposit_ids">
                                                
                                                
                                                <thead>
                                                    <tr t-attf-style="page-break-inside: avoid !important;background-color: #{theme_color or '#000000'}; color: #{theme_text_color or '#000000'};">
                                                        <th name="th_serial_no" class="text-center" t-attf-style="padding:5px 10px; text-align: center; border:1px solid #{theme_color or '#000000'} !important; border-right:0px solid #{theme_color or '#000000'} !important; font-weight:bold;" width="8%">Invoice No.</th>
                                                        

                                                        <th name="th_product" t-attf-style="padding:5px 10px; border:1px solid #{theme_color or '#000000'} !important; border-right:0px solid #{theme_color or '#000000'} !important; font-weight:bold;" width="22%">
                                                            <strong>Customer</strong>
                                                        </th>

                                                        <th name="th_product" t-attf-style="padding:5px 10px; border:1px solid #{theme_color or '#000000'} !important; border-right:0px solid #{theme_color or '#000000'} !important; font-weight:bold;" width="22%">
                                                            <strong>Invoice Date</strong>
                                                        </th>

                                                        <th name="th_quantity" class="text-center" t-attf-style="padding:5px 10px; border:1px solid #{theme_color or '#000000'} !important; border-right:0px solid #{theme_color or '#000000'} !important; font-weight:bold;" width="15%">
                                                        <strong>Period</strong>
                                                        </th>

                                                        <th name="th_uom" class="text-center" t-attf-style="padding:5px 10px; border:1px solid #{theme_color or '#000000'} !important; border-right:0px solid #{theme_color or '#000000'} !important; font-weight:bold;" width="10%">
                                                            <strong>Fiscal Year</strong>
                                                        </th>

                                                        <th name="usage_type" class="text-center" t-attf-style="padding:5px 10px; border:1px solid #{theme_color or '#000000'} !important; border-right:0px solid #{theme_color or '#000000'} !important; font-weight:bold;" width="10%">
                                                            <strong>Company</strong>
                                                        </th>

                                                        <th name="usage_type" class="text-center" t-attf-style="padding:5px 10px; border:1px solid #{theme_color or '#000000'} !important; border-right:0px solid #{theme_color or '#000000'} !important; font-weight:bold;" width="10%">
                                                            <strong>Total</strong>
                                                        </th>

                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <t t-set="count" t-value="0" />
                                                    <t t-foreach="o.invoice_deposit_ids" t-as="invoice">
                                                        
                                                            <t t-set="po_color" t-value="o.company_id.even_party_color"/>
                                                            
                                                            <tr t-att-style="'page-break-inside: avoid !important;background-color: '+ po_color + '; color: ' + text_color ">


                                                                <td class=" text-center"  t-att-style="'padding:5px 10px; border:0.5px solid #fff !important; border-right:0px solid #fff !important;'">
                                                                    <span t-field="invoice.name"/>
                                                                </td>

                                                                <td class=" text-center"  t-att-style="'padding:5px 10px; border:0.5px solid #fff !important; border-right:0px solid #fff !important;'">
                                                                    <span t-field="invoice.partner_id"/>
                                                                </td>

                                                                <td class=" text-center" t-att-style="'padding:5px 10px; border:0.5px solid #fff !important; border-right:0px solid #fff !important;'">
                                                                    <span t-field="invoice.invoice_date"/><br/>
                                                                    
                                                                </td>

                                                                <td class="text-center"  t-att-style="'padding:5px 10px; border:0.5px solid #fff !important; border-right:0px solid #fff !important;'">
                                                                    <span t-field="invoice.period_id"/>
                                                                </td>

                                                                <td class="text-center" t-att-style="'padding:5px 10px; border:0.5px solid #fff !important; border-right:0px solid #fff !important;'">
                                                                    <span t-field="invoice.fiscal_year"/>
                                                                </td>

                                                                <td class="text-center" t-att-style="'padding:5px 10px; border:0.5px solid #fff !important; border-right:0px solid #fff !important;'">
                                                                    <span t-field="invoice.company_id"/>
                                                                </td>

                                                                <td class="text-center" t-att-style="'padding:5px 10px; border:0.5px solid #fff !important; border-right:0px solid #fff !important;'">
                                                                    <span t-field="invoice.amount_total"/>
                                                                </td>

                                                            </tr>
                                                        </t>
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                    </div>
                                </div>

                            </div>
                        </t>
                    </t>
                </t>
            </t>
        </template>

        
        <record id="action_report_customer_deposit" model="ir.actions.report">
            <field name="name">Print Customer Deposit </field>
            <field name="model">customer.deposit</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">equip3_accounting_deposit.report_customer_deposit</field>
            <field name="report_file">equip3_accounting_deposit.report_customer_deposit</field>
            <field name="print_report_name">'Customer Deposi - %s' % (object.name)</field>
            <field name="binding_model_id" ref="equip3_accounting_deposit.model_customer_deposit"/>
            <field name="binding_type">report</field>
        </record>
    </data>
</odoo>