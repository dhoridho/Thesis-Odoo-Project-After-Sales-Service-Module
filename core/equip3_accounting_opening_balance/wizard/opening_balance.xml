<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_form_opening_balance" model="ir.ui.view">
        <field name="name">Generate Opening Balance</field>
        <field name="model">opening.balance</field>
        <field name="arch" type="xml">
            <form string="Generate Opening Balance">
                <div>
                    <p>
                        Post Opening Balance Journal Entries.
                        <br/>
                        The wizard will post Journal Entries for Opening Balance.
                    </p>
                </div>
                <group>
                    <field name="account_date" required="1"/>
                    <field name="company_id" invisible="1"/>
                    
                    <field name="journal_id" required="1" options="{'no_open': True, 'no_create': True, 'no_quick_create': True, 'no_create_edit': True}"/>    
                    <field name="is_import"/>
                    <field name="attachement_opening_balance_ids" widget="many2many_binary" attrs="{'invisible': [('is_import', '=', False)]}"/>
                    <!-- <field name="analytic_group_ids" widget="many2many_tags" required="1" options="{'no_open': True, 'no_create': True, 'no_quick_create': True, 'no_create_edit': True}"/> -->
                    <field name="line_ids" attrs="{'invisible': [('is_import', '=', True)]}">
                        <tree editable="bottom" string="Journal Items">
                            <field name="account_id" options="{'no_open': True, 'no_create': True, 'no_quick_create': True, 'no_create_edit': True}"/>
<!--                            <field name="analytic_tag_ids" groups="analytic.group_analytic_tags"-->
<!--                                   widget="many2many_tags"/>-->
                            <field name="company_id" invisible="1"/>
                            <field name="partner_id"/>
                            <field name="company_currency_id" invisible="1"/>
                            <field name="debit" sum="Total Debit"/>
                            <field name="credit" sum="Total Credit"/>
                            <field name="date_id"/>
                        </tree>
                    </field>

                    
                </group>
                <footer>
                    <button name="generate_je" string="Confirm" type="object" class="oe_highlight" attrs="{'invisible': [('is_import', '=', True)]}" />
                    <button name="import_opening_balance" string="Confirm and Import" type="object" class="oe_highlight" attrs="{'invisible': [('is_import', '=', False)]}" />
                    <button string="Cancel" special="cancel" class="btn-secondary"/>          
                    <!-- <button name="download_opening_balance_csv" string="Download CSV" type="object" class="oe_highlight" /> -->
                    <button name="download_opening_balance_xls" string="Download Template" type="object" class="oe_highlight"/>
                </footer>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="generate_opening_balance_action_wizard">
        <field name="name">Generate Opening Balance</field>
        <field name="res_model">opening.balance</field>
        <field name="view_mode">form</field>
        <field name="type">ir.actions.act_window</field>
        <field name="target">new</field>
    </record>

    <menuitem name="Generate Opening Balance"
              action="generate_opening_balance_action_wizard"
              id="menu_opening_balance_wizard"
              parent="account.menu_finance_entries_generate_entries"
    />

</odoo>