<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <data>
    
        <template id="equip3_hr_sg_reports.cpf_return_container">
            <t t-call="web.html_container">
                <t t-set="o" t-value="o"/>
                <t t-call="sg_hr_report.external_layout">
                    <div class="page">
                        <div class="border-table" style="border: 1px solid black; padding:10px; margin-bottom: 25px;">
                            <table width="100%">
                                <tr t-foreach="o.get_basic_info()" t-as="i">
                                    <tr>
                                        <td style="font-size: 15px; font-weight: bold; padding-bottom: 1em;">
                                            <span t-esc="i.get('company')"/>
                                        </td>
                                        <td style="font-size: 15px; font-weight: bold; padding-bottom: 1em; text-align:right;">
                                            <span t-esc="i.get('date')"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-size: 14px; font-weight: bold; padding-bottom: 1em;">
                                            CPF RETURN FOR THE MONTH OF <span t-esc="i.get('period')"/>
                                        </td>
                                    </tr>
                                </tr>
                            </table>
                            <table width="100%" style="margin-top: 20px; margin-bottom: 20px;border-collapse: collapse;">
                                <thead>
                                    <tr style="text-align:left;border-bottom: 1px solid black !important;padding: 4px;">
                                        <th>Employee Name</th>
                                        <th>CPF Account No.</th>
                                        <th>Contract Status</th>
                                        <th>Mandatory Contribution</th>
                                        <th>Voluntary Contribution</th>
                                        <th>Last Contribution</th>
                                        <th>MBMF Fund</th>
                                        <th>SINDA Fund</th>
                                        <th>CDAC Fund</th>
                                        <th>ECF Fund</th>
                                        <th>SDL Fund</th>
                                        <th>Ordinary Wages</th>
                                        <th>Additional Wages</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="t_mandatory_contribution" t-value="0"/>
                                    <t t-set="t_voluntary_contribution" t-value="0"/>
                                    <t t-set="t_last_contribution" t-value="0"/>
                                    <t t-set="t_mbmf" t-value="0"/>
                                    <t t-set="t_sinda" t-value="0"/>
                                    <t t-set="t_cdac" t-value="0"/>
                                    <t t-set="t_ecf" t-value="0"/>
                                    <t t-set="t_sdl" t-value="0"/>
                                    <t t-set="t_ordinary_wages" t-value="0"/>
                                    <t t-set="t_additional_wages" t-value="0"/>
                                    <t t-foreach="o.get_report_data()" t-as="e">
                                        <t t-set="t_mandatory_contribution" t-value="t_mandatory_contribution + e.get('mandatory_contribution')"/>
                                        <t t-set="t_voluntary_contribution" t-value="t_voluntary_contribution + e.get('voluntary_contribution')"/>
                                        <t t-set="t_last_contribution" t-value="t_last_contribution + e.get('last_contribution')"/>
                                        <t t-set="t_mbmf" t-value="t_mbmf + e.get('mbmf_fund')"/>
                                        <t t-set="t_sinda" t-value="t_sinda + e.get('sinda_fund')"/>
                                        <t t-set="t_cdac" t-value="t_cdac + e.get('cdac_fund')"/>
                                        <t t-set="t_ecf" t-value="t_ecf + e.get('ecf_fund')"/>
                                        <t t-set="t_sdl" t-value="t_sdl + e.get('cpfdsl_fund')"/>
                                        <t t-set="t_ordinary_wages" t-value="t_ordinary_wages + e.get('ordinary_wages')"/>
                                        <t t-set="t_additional_wages" t-value="t_additional_wages + e.get('additional_wages')"/>
                                        <tr style="border-bottom: 1px solid black;">
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('employee_name')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('identification_id')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('contract_status')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('mandatory_contribution')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('voluntary_contribution')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('last_contribution')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('mbmf_fund')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('sinda_fund')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('cdac_fund')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('ecf_fund')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('cpfdsl_fund')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('ordinary_wages')"/>
                                            </td>
                                            <td style="padding: 4px;">
                                                <span t-esc="e.get('additional_wages')"/>
                                            </td>
                                        </tr>
                                    </t>
                                    <tr style="border-bottom: 1px solid black; padding:10px;text-align: left;">
                                        <th style="padding: 4px;">
                                            Total
                                        </th>
                                        <th style="padding: 4px;"></th>
                                        <th style="padding: 4px;"></th>
                                        <th style="padding: 4px;">
                                            <span t-esc="t_mandatory_contribution"/>
                                        </th>
                                        <th style="padding: 4px;">
                                            <span t-esc="t_voluntary_contribution"/>
                                        </th>
                                        <th style="padding: 4px;">
                                            <span t-esc="t_last_contribution"/>
                                        </th>
                                        <th style="padding: 4px;">
                                            <span t-esc="t_mbmf"/>
                                        </th>
                                        <th style="padding: 4px;">
                                            <span t-esc="t_sinda"/>
                                        </th>
                                        <th style="padding: 4px;">
                                            <span t-esc="t_cdac"/>
                                        </th>
                                        <th style="padding: 4px;">
                                            <span t-esc="t_ecf"/>
                                        </th>
                                        <th style="padding: 4px;">
                                            <span t-esc="t_sdl"/>
                                        </th>
                                        <th style="padding: 4px;">
                                            <span t-esc="t_ordinary_wages"/>
                                        </th>
                                        <th style="padding: 4px;">
                                            <span t-esc="t_additional_wages"/>
                                        </th>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </t>
            </t>
        </template>

        <template id="equip3_hr_sg_reports.cpf_return_report_pdf_template">
            <t t-foreach="docs" t-as="o">
                <t t-call="equip3_hr_sg_reports.cpf_return_container"/>
            </t>
        </template>

        <record id="equip3_hr_sg_reports_paperformat_euro_landscape" model="report.paperformat">
            <field name="name">A4</field>
            <field name="default" eval="True" />
            <field name="format">A4</field>
            <field name="page_height">0</field>
            <field name="page_width">0</field>
            <field name="orientation">Landscape</field>
            <field name="margin_top">40</field>
            <field name="margin_bottom">32</field>
            <field name="margin_left">7</field>
            <field name="margin_right">7</field>
            <field name="header_line" eval="False" />
            <field name="header_spacing">35</field>
            <field name="dpi">90</field>
        </record>

        <record id="equip3_hr_sg_reports.cpf_return_report_pdf" model="ir.actions.report">
            <field name="name">CPF Return Report PDF</field>
            <field name="model">cpf.return.checking.wizard</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">equip3_hr_sg_reports.cpf_return_report_pdf_template</field>
            <field name="report_file">equip3_hr_sg_reports.cpf_return_report_pdf_template</field>
            <field name="attachment_use">1</field>
            <field name="binding_type">report</field>
            <field name="binding_model_id" eval="False"/>
            <field name="paperformat_id" ref="equip3_hr_sg_reports_paperformat_euro_landscape"/>
            <field name="print_report_name">'CPF Return Checking'</field>
        </record>
    
    </data>
    

</odoo>
