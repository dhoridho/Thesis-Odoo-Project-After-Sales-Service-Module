<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="project_form_view_inherit_construction_purchase" model="ir.ui.view">
            <field name="name">Project Form View Inherit Construction Purchase</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="equip3_construction_masterdata.project_form_view_inherit_construction"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='project_completion']" position="before">
                    <page name="contract_subcon_ids" string="Contract Subcon" readonly="1" groups="abs_construction_management.group_construction_manager">
                        <field name="contract_subcon_ids" readonly="1">
                            <tree editable="bottom">
                                <field name="sequence" widget="handle" invisible="1"/>
                                <field name="project_id" invisible="1"/>
                                <field name="sr_no" />
                                <field name="name" force_save="1"/>
                                <field name="partner_id" force_save="1"/>
                                <field name="order_date" force_save="1"/>
                                <field name="contract_amount_subcon" string="Total Contract Amount" force_save="1"/>
                            </tree>
                        </field>
                    </page>
                </xpath>
            </field>
        </record>

        <record id="contract_order_subcon_construction_purchase" model="ir.ui.view">
            <field name="name">Contract Order Subcon Purchase</field>
            <field name="model">contract.subcon.const</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="partner_id" force_save="1"/>
                            </h1>
                        </div>
                        <group>
                            <group string="Main Contract">
                                <field name="name" force_save="1"/>
                                <field name="order_date" force_save="1"/>
                                <field name="subcon_contract_amount" force_save="1"/>
                                <label for="subcon_down_payment" string="Down Payment"/>
                                <div class="d-flex" >
                                    <field name="subcon_dp_method" force_save="1" 
                                        placeholder="Method"/>
                                    <span class="oe_inline o_form_label mx-3 oe_read_only"> Amount </span>
                                    <span class="oe_inline o_form_label mx-3 oe_edit_only"> Amount </span>
                                    <field name="subcon_down_payment" 
                                        placeholder="Amount" force_save="1"/>
                                    <label for="subcon_down_payment" string="%%"  class="oe_inline"
                                        attrs="{'invisible': [('subcon_dp_method', '!=', 'per')]}" />
                                </div>
                                <field name="subcon_dp_amount"  invisible="1" force_save="1"/>
                                <field name="subcon_retention1" force_save="1"/>
                                <field name="subcon_retention1_amount"  invisible="1" force_save="1"/>
                                <field name="subcon_retention1_date" invisible="1" force_save="1"/>
                                <field name="subcon_retention_term_1" force_save="1"/>
                                <field name="subcon_retention2" force_save="1"/>
                                <field name="subcon_retention2_amount"  invisible="1" force_save="1"/>
                                <field name="subcon_retention2_date" invisible="1" force_save="1"/>
                                <field name="subcon_retention_term_2" force_save="1"/>
                                <field name="subcon_tax_id" widget="many2many_tags" force_save="1"/>
                                <field name="subcon_payment_term" force_save="1"/>
                            </group>
                            <group string="Total All Contract">
                                <field name="contract_amount_subcon" force_save="1"/>
                                <field name="dp_amount_subcon" invisible="1" force_save="1"/>
                                <field name="retention1_amount_subcon" invisible="1" force_save="1"/>
                                <field name="retention2_amount_subcon" invisible="1" force_save="1"/>
                                <field name="subcon_outstanding_limit" invisible="1" force_save="1"/>
                                <field name="subcon_status_progress" invisible="1" force_save="1"/>
                                <field name="company_id" invisible="1"/>
                            </group>
                        </group>
                        <notebook>
                            <page name="variation_subcon_ids" string="Variation Order Subcon" >
                                <field name="variation_subcon_ids" readonly="1">
                                    <tree editable="bottom">
                                        <field name="sequence" widget="handle" invisible="1"/>
                                        <field name="project_id" invisible="1"/>
                                        <field name="sr_no" />
                                        <field name="name" force_save="1"/>
                                        <field name="order_date" force_save="1"/>
                                        <field name="contract_amount" force_save="1"/>
                                        <field name="dp_method" optional="hide" force_save="1"/>
                                        <field name="down_payment" force_save="1"/>
                                        <field name="dp_amount" optional="hide" force_save="1"/>
                                        <field name="retention1" force_save="1"/>
                                        <field name="retention1_amount" optional="hide" force_save="1"/>
                                        <field name="retention1_date" invisible="1" force_save="1"/>
                                        <field name="retention_term_1" force_save="1"/>
                                        <field name="retention2" force_save="1"/>
                                        <field name="retention2_amount" optional="hide" force_save="1"/>
                                        <field name="retention2_date" invisible="1" force_save="1"/>
                                        <field name="retention_term_2" force_save="1"/>
                                        <field name="tax_id" widget="many2many_tags" force_save="1"/>
                                        <field name="payment_term" force_save="1"/>
                                        <field name="vo_payment_type" optional="hide" force_save="1"/>
                                        <field name="company_id" invisible="1"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

    </data>
</odoo>