<odoo>
    <record id="view_customer_inherit" model="ir.ui.view">
      <field name="name">view.customer.inherit</field>
      <field name="model">res.partner</field>
      <field name="mode">primary</field>
      <field name="inherit_id" ref="base.view_partner_form" />
      <field name="arch" type="xml">
        <xpath expr="//field[@name='email']" position="after">
          <field name="is_approving_matrix_customer" invisible="1" />
          <field name="approving_matrix_customer_id" invisible="1" />
        </xpath>

        <xpath expr="//sheet" position="before">
          <header>
              <field name="state_customer" widget="statusbar" statusbar_visible="draft,waiting_approval,approved"
              attrs="{'invisible':[('is_approving_matrix_customer', '=', False)]}"/>
          </header>
        </xpath>
      
        <xpath expr="//notebook" position="inside">
          <page string="Approval Matrix Line" attrs="{'invisible':['|', '|', ('is_approving_matrix_customer', '=', False), ('customer_rank', '=', 0),('is_customer', '=', False)]}"
            id="approval_matrix_customer">
              <group>
                  <field name="approving_matrix_customer_id" attrs="{'invisible':['|', ('is_approving_matrix_customer', '=', False),('supplier_rank', '>', 0)]}"/>
              </group>
              <field name="approved_matrix_ids_customer" context="{'approved_matrix_ids_customer': approved_matrix_ids_customer}" force_save="1">
                  <tree editable="bottom">
                      <field name="sequence" force_save="1"/>
                      <field name="user_ids" widget="many2many_tags" force_save="1"/>
                      <field name="minimum_approver" force_save="1"/>
                      <field name="state_char" force_save="1"/>
                      <field name="time_stamp" force_save="1" />
                      <field name="feedback" force_save="1"/>
                  </tree>
              </field>
          </page>
        </xpath>
    </field>
  </record>

  <record id="action_customer_to_approval" model="ir.actions.act_window">
      <field name="name">Customer To Approve</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">res.partner</field>
      <field name="view_mode">tree,form,kanban</field>
      <field name="domain">[('state_customer', 'in', ['draft', 'waiting_approval']), ('is_customer', '=', True)]</field>
      <field name="context">{
          'group_by': ['state_customer'],
          'res_partner_search_mode': 'customer', 
          'default_is_customer': True,
          'default_customer_rank':1,
          'create':False,
      }</field>
      <field name="view_ids" eval="[(5,0,0),
                        (0,0,{'view_mode':'tree', 'view_id': ref('base.view_partner_tree')}),
                        (0,0,{'view_mode':'form', 'view_id': ref('equip3_sale_operation.view_customer_inherit')}),
                        (0,0,{'view_mode':'kanban', 'view_id': ref('equip3_kanban_view.equip_res_partner_kanban_view')}),
                        ]"/>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
          Create a new customer in your address book
        </p><p>
          Odoo helps you easily track all activities related to a customer.
        </p>
      </field>
  </record>
    
  <record id="action_customer_rejected" model="ir.actions.act_window">
      <field name="name">Customer Rejected</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">res.partner</field>
      <field name="view_mode">tree,form,kanban</field>
      <field name="domain">[('active','=',False),('state_customer', '=', 'rejected'),('is_customer', '=', True)]</field>
      <field name="context">{
          'res_partner_search_mode': 'customer', 
          'default_is_customer': True,
          'default_customer_rank':1,
          'create':False,
      }</field>
      <field name="view_ids" eval="[(5,0,0),
                        (0,0,{'view_mode':'tree', 'view_id': ref('base.view_partner_tree')}),
                        (0,0,{'view_mode':'form', 'view_id': ref('equip3_sale_operation.view_customer_inherit')}),
                        (0,0,{'view_mode':'kanban', 'view_id': ref('equip3_kanban_view.equip_res_partner_kanban_view')}),
                        ]"/>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
          Create a new customer in your address book
        </p><p>
          Odoo helps you easily track all activities related to a customer.
        </p>
      </field>
  </record>
    
  <record id="action_customer_blacklisted" model="ir.actions.act_window">
      <field name="name">Customer Blacklisted</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">res.partner</field>
      <field name="view_mode">tree,form,kanban</field>
      <field name="domain">[('active','=',False),('state_customer', '=', 'blacklisted'),('is_customer', '=', True)]</field>
      <field name="context">
        {
          'res_partner_search_mode': 'customer', 
          'default_is_customer': True,
          'default_customer_rank':1,
          'create':False,
        }
      </field>
      <field name="view_ids" eval="[(5,0,0),
                        (0,0,{'view_mode':'tree', 'view_id': ref('base.view_partner_tree')}),
                        (0,0,{'view_mode':'form', 'view_id': ref('equip3_sale_operation.view_customer_inherit')}),
                        (0,0,{'view_mode':'kanban', 'view_id': ref('equip3_kanban_view.equip_res_partner_kanban_view')}),
                        ]"/>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
          Create a new customer in your address book
        </p><p>
          Odoo helps you easily track all activities related to a customer.
        </p>
      </field>
  </record>
    
  <record id="action_customer_menu_inherited" model="ir.actions.act_window">
    <field name="name">Customer</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">res.partner</field>
    <field name="view_mode">kanban,tree,form</field>
    <field name="domain">[('is_customer', '=', True), ('state_customer','=', 'approved')]</field>
    <field name="context">{
        'res_partner_search_mode': 'customer', 
        'default_is_customer': True,
        'default_customer_rank':1,
    }</field>
    <field name="view_ids" eval="[(5,0,0),
                      (0,0,{'view_mode':'kanban', 'view_id': ref('equip3_kanban_view.equip_res_partner_kanban_view')}),
                      (0,0,{'view_mode':'tree', 'view_id': ref('base.view_partner_tree')}),
                      (0,0,{'view_mode':'form', 'view_id': ref('equip3_sale_operation.view_customer_inherit')})
                      ]"/>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        Create a new customer in your address book
      </p><p>
        Odoo helps you easily track all activities related to a customer.
      </p>
    </field>
  </record>
    

  <menuitem id="customer_dropdown_menu"
      name="Customers"
      parent="equip3_sale_masterdata.customer_menu"
      sequence="4" 
      groups="sales_team.group_sale_salesman"/>
      
  <menuitem
      id="sale.res_partner_menu"
      active ="False"/>
      
  <menuitem id="menu_customer_partner"
      name="Customers"
      parent="equip3_sale_operation.customer_dropdown_menu"
      action="equip3_sale_operation.action_customer_menu_inherited"
      sequence="1" 
      groups="sales_team.group_sale_salesman"/>
      
  <menuitem 
      id="menu_customer_to_approve"
      name="Customer To Approve"
      parent="equip3_sale_operation.customer_dropdown_menu"
      action="equip3_sale_operation.action_customer_to_approval"
      sequence="2"
      />
  <menuitem 
      id="menu_customer_rejected"
      name="Customer Rejected"
      parent="equip3_sale_operation.customer_dropdown_menu"
      action="equip3_sale_operation.action_customer_rejected"
      sequence="3"
      />
  <menuitem 
      id="menu_customer_blacklisted"
      name="Customer Blacklisted"
      parent="equip3_sale_operation.customer_dropdown_menu"
      action="equip3_sale_operation.action_customer_blacklisted"
      sequence="4"
      />
</odoo>
