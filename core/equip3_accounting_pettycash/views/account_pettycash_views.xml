<odoo>
    <data>
        <record id="view_account_pettycash_tree" model="ir.ui.view">
            <field name="name">account.pettycash.tree</field>
            <field name="model">account.pettycash</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="custodian"/>
                    <field name="cash_journal"/>
                    <field name="journal"/>
                    <field name="amount"/>
                    <field name="balance"/>
                    <field name="virtual_balance"/>
                    <field name="company_id"/>
                    <field name="branch_id"/>
                    <field name="create_date"/>
                    <field name="state" widget="badge" decoration-success="state == 'closed'" decoration-muted="state == 'draft'" decoration-warning="state == 'open'"/>
                </tree>
            </field>
        </record>

        <record id="view_account_pettycash_form" model="ir.ui.view">
            <field name="name">account.pettycash.form</field>
            <field name="model">account.pettycash</field>
            <field name="arch" type="xml">
                <form string="Petty Cash">
                    <header>
                        <button string="Validate" name="validate" states="draft" type="object" class="oe_highlight"/>
                        <button name="%(replenish_petty_cash_fund)d" type="action"
                                string="Replenish" class="oe_highlight"
                                attrs="{'invisible': ['|', ('state', '!=', 'open'), ('is_replenished', '=', True)]}"/>
                        <button name="%(reconcile_pettycash_fund)d" type="action"
                                string="Reconcile" class="oe_highlight"
                                attrs="{'invisible': [('state', '!=', 'open')]}"/>
                        <button name="%(change_petty_cash_fund)d" type="action"
                                string="Modify"
                                attrs="{'invisible': [('state', '!=', 'open')]}"/>
                        <button name="%(close_petty_cash_fund)d" type="action"
                                string="Close"
                                attrs="{'invisible': [('state', '!=', 'open')]}"/>
                        <button string="Cancel Voucher" name="cancel" invisible='1' states="open" type="object"
                                class="oe_highlight"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,open,closed"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1 class="mt0">
                                <field name="number"/>
                            </h1>
                        </div>

                        <group>
                            <group id="header_left_group">
                                <field name="is_replenished" invisible="1"/>
                                <field name="name" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="account_date" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="custodian" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <!-- <field name="custodian" attrs="{'readonly': [('state', '!=', 'draft')]}" groups="base.menu_administration"/> -->
                                <field name="cash_journal" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="journal" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="amount" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="analytic_group_ids" widget="many2many_tags" domain="[('company_id','=',company_id)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            </group>
                            <group id="header_right_group">
                                <field name="balance"/>
                                <field name="virtual_balance"/>
                                <field name="currency_id" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="active_manual_currency_rate" invisible="1"/>
                                <field name="apply_manual_currency_exchange" attrs="{'invisible': [('active_manual_currency_rate', '=', False)]}" />
                                <field name="manual_currency_exchange_inverse_rate"
                                    attrs="{'invisible': ['|',('apply_manual_currency_exchange', '=', False),('active_manual_currency_rate', '=', False)],'required':[('apply_manual_currency_exchange', '=', True)]}" />
                                <field name="manual_currency_exchange_rate"
                                    attrs="{'invisible': ['|',('apply_manual_currency_exchange', '=', False),('active_manual_currency_rate', '=', False)],'required':[('apply_manual_currency_exchange', '=', True)]}" />
                                <field name="company_id" readonly='1' attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <!-- <field name="branch_id" attrs="{'readonly': [('state', '!=', 'draft')]}"/> -->
                                 <field name="branch_id" attrs="{'readonly': [('state', '!=', 'draft')]}"  required="1" options="{'no_create': True, 'no_create_edit': True}"/>
                                <!-- <field name="effective_date"
                                       attrs="{'readonly': [('state', '!=', 'draft')], 'required': True}"/> -->
                                <field name="is_custodian_user" invisible="1"/>
                            </group>
                            <group/>
                            <group string="Other Information" name="mr_other_info">
                                <field name="create_uid" string="Created By" readonly="1" can_create="true"
                                       can_write="true" modifiers="{'readonly':true}" id="create_uid"/>
                                <field name="create_date" string="Created Date" readonly="1"
                                       modifiers="{'readonly':true}" id="create_date"/>
                            </group>
                        </group>
                        <notebook>
                            <page id="vouchers" string="Vouchers">
                                <button string="Create Voucher" name="create_voucher" type="object" class="oe_highlight"
                                        attrs="{'invisible': [('state', 'in', ['draft','closed'])]}"/>
                                <field name="voucher_id"/>
                            </page>
                            <page id="voucher_history" string="Voucher History">
                                <field name="paid_voucher_ids"/>
                            </page>
                            <page id="cash_activity" string="Cash Activity">
                                <field name="move_id" widget='many2many'>
                                    <tree string="Cash Activity">
                                        <field name="name" string="Journal"/>
                                        <field name="date" string="Date"/>
                                        <field name="ref" string="Reference"/>
                                        <field name="state" widget="badge" decoration-danger="state == 'rejected'" decoration-warning2="state == 'approved'" decoration-success="state == 'posted'" decoration-warning3="state == 'to_approve'" decoration-muted="state == 'draft'" decoration-danger3="state == 'cancelled'" decoration-danger2="state == 'failed'"/>
                                        <field name="currency_id"/>
                                        <field name="amount_total_signed" string="Amount"/>
                                    </tree>
                                </field>
                            </page>
                            <page name="auto_replenishment" string="Petty Cash Auto Replenishment">
                                <group name="group_auto_replenishment" string="Petty Cash Auto Replenishment">
                                    <div>
                                        <div>
                                            <field name="auto_replenish" attrs="{'readonly': [('state', '=', 'open')]}"/>
                                            <label string="Auto Replenishment " for="auto_replenish"/>
                                        </div>
                                        <group name="replenish_group" attrs="{'invisible': [('auto_replenish', '=', False)]}">
                                            <field name="replenish_interval" string="Replenish Interval" class="o_light_label" widget="radio" attrs="{'readonly': [('state', '=', 'open')]}"/>
                                            <field name="times" string="Frequency" class="o_light_label"
                                                   attrs="{'invisible': [('replenish_interval', '=', 'week')], 'readonly': [('state', '=', 'open')]}" style="width:40%"/>
                                            <field name="replenish_date" string="Replenish Date" class="o_light_label"
                                                   attrs="{'invisible': [('replenish_interval', '=', 'week')], 'readonly': [('state', '=', 'open')]}" style="width:40%"/>
                                            <field name="replenish_week" string="Replenish Week" class="o_light_label"
                                                   attrs="{'invisible': [('replenish_interval','=','month')], 'readonly': [('state', '=', 'open')]}" style="width:40%"/>
                                            <field name="replenish_intervals" class="o_light_label"
                                                   attrs="{'invisible': [('replenish_interval','=','month')], 'readonly': [('state', '=', 'open')]}" style="width:40%"/>
                                            <field name="replenish_date_2" string="Replenish Date 2" class="o_light_label"
                                                   attrs="{'invisible': ['|',('replenish_interval', '!=', 'month'),('times','!=','2')], 'readonly': [('state', '=', 'open')]}" style="width:40%"/>
                                        </group>
                                    </div>
                                </group>
                            </page>

                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="view_move_form_inherited_chg_order" model="ir.ui.view">
            <field name="name">view.move.form.inherited.chg.order</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='line_ids']/tree" position="attributes">
                    <attribute name="default_order">debit desc</attribute>
                </xpath>
            </field>
        </record>


        <record id="action_account_pettycash" model="ir.actions.act_window">
            <field name="name">Petty Cash</field>
            <field name="res_model">account.pettycash</field>
            <field name="view_mode">tree,kanban,form,graph</field>
            <field name="context"></field>
            <field name="domain"></field>
            <field name="view_id" ref="view_account_pettycash_tree"/>
        </record>

        

    </data>
</odoo>