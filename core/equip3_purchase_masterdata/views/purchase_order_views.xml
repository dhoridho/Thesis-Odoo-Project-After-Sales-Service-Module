<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <menuitem id="menu_procurement_vendor" name="Vendor Management"
    parent="purchase.menu_purchase_root" sequence="5" />

    <!--Venders dropdown menu-->
    <menuitem id="menu_procurement_vendor_main" name="Vendors"
    parent="equip3_purchase_masterdata.menu_procurement_vendor" sequence="1" />

    <!--Venders under dropdown menu-->
    <menuitem id="menu_procurement_vendor_sub" name="Vendors" action="account.res_partner_action_supplier"
    parent="menu_procurement_vendor_main" sequence="1" />

    <record id="purchase.menu_procurement_management_supplier_name" model="ir.ui.menu">
        <field name="parent_id" ref="menu_procurement_vendor_main"/>
        <field name="sequence">1</field>
    </record>
    <record id="vendor_evaluation.vendor_evaluation" model="ir.ui.menu">
        <field name="parent_id" ref="menu_procurement_vendor"/>
        <field name="sequence">3</field>
    </record>

    <!-- res.partner inherit form view -->
    <record id="res_partner_purchase_button_inherit_view_form" model="ir.ui.view">
        <field name="name">res.partner.inherit.view.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="purchase.res_partner_view_purchase_buttons"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/div[@name='button_box']/button[@name='%(purchase.act_res_partner_2_purchase_order)d']" position="attributes">
                <attribute name="icon">o-hm-smart-all-purchased</attribute>
            </xpath>
        </field>
    </record>

    <record id="purchase_form_view_inherit" model="ir.ui.view">
        <field name="name">direct.purchase.form.view.inherit</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="is_vendor_pricelist" invisible="1"/>
            </xpath>
            <xpath expr="//sheet/notebook/page[@name='products']/field[@name='order_line']/tree/field[@name='product_qty']" position="after">
                <field name="planned" invisible="1"/>
                <field name="is_vendor_pricelist_line" invisible="1"/>
            </xpath>
        </field>
    </record>

    <!-- purchase.order inherit tree view -->
    <record id="inherit_purchase_order_view_tree" model="ir.ui.view">
        <field name="name">purchase.order.inherit.view.tree</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_view_tree"/>
        <field name="arch" type="xml">
            <!-- Add your xpath here -->
            <field name="state" position="attributes">
                <attribute name="invisible">0</attribute>
            </field>
        </field>
    </record>

    <record id="action_vendor_to_approval" model="ir.actions.act_window">
        <field name="name">Vendor To Approve</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="domain">[('state', 'in', ['draft', 'waiting_approval']), ('is_vendor', '=', True)]</field>
        <field name="context">{'group_by': ['state'],'search_default_supplier': 1,'res_partner_search_mode': 'supplier', 'default_is_company':True, 'default_supplier_rank': 1, 'create':False}</field>
        <field name="view_ids" eval="[(5,0,0),
						              (0,0,{'view_mode':'tree', 'view_id': ref('equip3_purchase_masterdata.view_partner_tree_inherits')}),
                          (0,0,{'view_mode':'kanban', 'view_id': ref('equip3_purchase_masterdata.equip_res_partner_kanban_view')}),
                          (0,0,{'view_mode':'form', 'view_id': ref('equip3_purchase_masterdata.view_partner_form_inherits')}),
                          ]"/>
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            Create a new supplier in your address book
          </p><p>
            Odoo helps you easily track all activities related to a supplier.
          </p>
        </field>
    </record>

    <record id="action_vendor_rejected" model="ir.actions.act_window">
        <field name="name">Vendor Rejected</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="domain">[('active','=',False),('state', '=', 'rejected'), ('is_vendor', '=', True)]</field>
        <field name="context">{'search_default_supplier': 1,'res_partner_search_mode': 'supplier', 'default_is_company':True, 'default_supplier_rank': 1, 'create':False}</field>
        <field name="view_ids" eval="[(5,0,0),
						              (0,0,{'view_mode':'tree', 'view_id': ref('equip3_purchase_masterdata.view_partner_tree_inherits')}),
                          (0,0,{'view_mode':'kanban', 'view_id': ref('equip3_purchase_masterdata.equip_res_partner_kanban_view')}),
                          (0,0,{'view_mode':'form', 'view_id': ref('equip3_purchase_masterdata.view_partner_form_inherits')}),
                          ]"/>
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            Create a new supplier in your address book
          </p><p>
            Odoo helps you easily track all activities related to a supplier.
          </p>
        </field>
    </record>

    <record id="action_vendor_blacklisted" model="ir.actions.act_window">
        <field name="name">Vendor Blacklisted</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="domain">[('active','=',False),('state', '=', 'blacklisted'), ('is_vendor', '=', True)]</field>
        <field name="context">{'search_default_supplier': 1,'res_partner_search_mode': 'supplier', 'default_is_company':True, 'default_supplier_rank': 1, 'create':False}</field>
        <field name="view_ids" eval="[(5,0,0),
						              (0,0,{'view_mode':'tree', 'view_id': ref('equip3_purchase_masterdata.view_partner_tree_inherits')}),
                          (0,0,{'view_mode':'kanban', 'view_id': ref('equip3_purchase_masterdata.equip_res_partner_kanban_view')}),
                          (0,0,{'view_mode':'form', 'view_id': ref('equip3_purchase_masterdata.view_partner_form_inherits')}),
                          ]"/>
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            Create a new supplier in your address book
          </p><p>
            Odoo helps you easily track all activities related to a supplier.
          </p>
        </field>
    </record>

    <menuitem 
        id="sh_all_in_one_purchase_tools.menu_purchase_template_product" 
        groups="sh_all_in_one_purchase_tools.group_enable_purchase_custom_product_template" 
        name="Custom Product Template" 
        action="sh_all_in_one_purchase_tools.action_purchase_template_product" 
        parent="purchase.menu_purchase_products" 
        sequence="35"/>

    <menuitem 
    id = "menu_vendor_to_approve"
    name = "Vendor To Approve"
    parent = "menu_procurement_vendor_main"
    action = "action_vendor_to_approval"
    sequence = "2"
    />

    <menuitem 
    id = "menu_vendor_rejected"
    name = "Vendor Rejected"
    parent = "menu_procurement_vendor_main"
    action = "action_vendor_rejected"
    sequence = "3"
    />
    <menuitem 
    id = "menu_vendor_blacklisted"
    name = "Blacklisted Vendors"
    parent = "menu_procurement_vendor_main"
    action = "action_vendor_blacklisted"
    sequence = "4"
    />
    <function model="purchase.order" name="action_vendors_approve_menu"/>
</odoo>
