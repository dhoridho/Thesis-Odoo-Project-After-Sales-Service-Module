<odoo>
    <data>

        <record id="view_partner_tree_inherits" model="ir.ui.view">
            <field name="name">view.partner.tree.inherits</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="vendor_sequence"/>
                    <field name="display_name"/>
                    <field name="phone"/>
                    <field name="email"/>
                    <field name="rfm_segment_id" invisible="1"/>
                    <field name="user_id" invisible="1"/>
                    <field name="city"/>
                    <field name="country_id"/>
                    <field name="branch_id"/>
                    <field name="company_id"/>
                </tree>
            </field>
        </record>

        <record id="sh_vendor_signup_res_partner_form_view_inherit" model="ir.ui.view">
			<field name="name">sh.vendor.signup.res.partner.form.view.inherit</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="sh_vendor_signup.sh_vendor_signup_res_partner_form_view"/>
			<field name="arch" type="xml">
                <xpath expr="//field[@name='vendor_products']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
			</field>
		</record>

        <record id="res_partner_tree_view" model="ir.ui.view">
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='display_name']" position="before">
                    <field name="vendor_sequence" invisible="context.get('default_customer_rank')"/>
                </xpath>
            </field>
        </record>

        <!-- <record id="res_partner_kanban_view" model="ir.ui.view">
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.res_partner_kanban_view"/>
            <field name="arch" type="xml">
                <xpath expr="//div[hasclass('oe_kanban_global_click')]/t/div[hasclass('o_kanban_image_fill_left')]" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//div[hasclass('oe_kanban_global_click')]/t/div[hasclass('o_kanban_image')]" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//div[hasclass('oe_kanban_global_click')]/t[2]/div[hasclass('o_kanban_image_fill_left')]" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='type']" position="after">
                    <field name="is_vendor"/>
                    <field name='company_type'/>
                    <field name="customer_rank"/>
                </xpath>
                <xpath expr="//div[hasclass('oe_kanban_details')]" position="before">
                    <t t-if="record.is_vendor.raw_value and !record.customer_rank.raw_value">
                        <t t-if="record.is_vendor.raw_value and record.company_type.raw_value == 'company'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image1.png'"/>
                        <t t-elif="record.is_vendor.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'contact'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image2.png'"/>
                        <t t-elif="record.is_vendor.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'invoice'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image3.png'"/>
                        <t t-elif="record.is_vendor.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'delivery'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image4.png'"/>
                        <t t-elif="record.is_vendor.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'other'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image5.png'"/>
                        <t t-elif="record.is_vendor.raw_value and record.company_type.raw_value == 'person' and (record.type.raw_value == 'private' or record.type.raw_value == 'pic')" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image6.png'"/>
                        <t t-else="">
                            <t t-if="record.is_company.raw_value" t-set="placeholder" t-value="'/base/static/img/company_image.png'"/>
                            <t t-else="" t-set="placeholder" t-value="'/base/static/img/avatar_grey.png'"/>
                        </t>
                        <div class="o_kanban_image_fill_left d-none d-md-block" t-attf-style="background-image:url('#{kanban_image('res.partner', 'image_128', record.id.raw_value,  placeholder)}')">
                            <img class="o_kanban_image_inner_pic" t-if="record.parent_id.raw_value" t-att-alt="record.parent_id.value" t-att-src="kanban_image('res.partner', 'image_128', record.parent_id.raw_value)"/>
                        </div>
                        <div class="o_kanban_image d-md-none" t-attf-style="background-image:url('#{kanban_image('res.partner', 'image_128', record.id.raw_value,  placeholder)}')">
                            <img class="o_kanban_image_inner_pic" t-if="record.parent_id.raw_value" t-att-alt="record.parent_id.value" t-att-src="kanban_image('res.partner', 'image_128', record.parent_id.raw_value)"/>
                        </div>
                    </t>
                </xpath>
            </field>
        </record> -->

        <record id="view_partner_form_inherits" model="ir.ui.view">
            <field name="name">res.partner.form.inherits</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='email']" position="after">
                    <field name="is_approving_matrix_vendor" invisible="1" />
                    <field name="supplier_rank" invisible="1"/>
                    <field name="customer_rank" invisible="1"/>
                    <field name="is_similiar" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='branch_id']" position="after">
                    <field name="filter_branch" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='branch_id']" position="attributes">
                    <attribute name="domain">filter_branch</attribute>
                    <attribute name="options">{'no_create':True,
                        'no_create_edit':True}</attribute>
                </xpath>
                <xpath expr="//div[hasclass('oe_title')]" position="before">
                    <div class="row">
                        <div class="col-12">
                            <field name="is_similiar" invisible="1"/>
                            <p width="100%" class="alert alert-danger" role="alert" attrs="{'invisible':[('is_similiar','=',False)]}">This vendor have a similar identity with another vendor</p>
                        </div>
                    </div>
                </xpath>
                <xpath expr="//widget[@name='web_ribbon']" position="attributes">
                    <!-- Add your fields here -->
                    <attribute name="attrs">{'invisible': ['|',('active', '=', True),('state','=','blacklisted')]}</attribute>
                </xpath>
                <xpath expr="//widget[@name='web_ribbon']" position="after">
                    <!-- Add your fields here -->
                    <widget name="web_ribbon" title="Blacklisted" bg_color="bg-dark" attrs="{'invisible': ['|',('active', '=', True),('state','!=','blacklisted')]}"/>
                </xpath>
                <xpath expr="//div[@class='oe_button_box']" position="inside">
                    <button name="action_open_similiar_partner" type="object" class="oe_stat_button" icon="o-hm-smart-crm-similiar-vendors" attrs="{'invisible':[('is_similiar','!=',True)]}">
                        <field name="similiar_partner_count" string="Similiar Vendor" widget="statinfo"/>
                    </button>
                </xpath>
                <xpath expr="//field[@name='child_ids']/kanban//div[hasclass('o_kanban_image')]" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='child_ids']/kanban//field[@name='type']" position="after"
                    >
                    <field name="is_vendor"/>
                    <field name='company_type'/>
                    <field name="customer_rank"/>
                </xpath>
                <xpath expr="//field[@name='child_ids']/kanban//div[hasclass('o_kanban_image')]" position="after">
                    <div class="o_kanban_image" t-if="record.is_vendor.raw_value and !record.customer_rank.raw_value">
                        <t t-if="record.is_vendor.raw_value and record.company_type.raw_value == 'company'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image1.png'"/>
                        <t t-elif="record.is_vendor.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'contact'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image2.png'"/>
                        <t t-elif="record.is_vendor.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'invoice'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image3.png'"/>
                        <t t-elif="record.is_vendor.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'delivery'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image4.png'"/>
                        <t t-elif="record.is_vendor.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'other'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image5.png'"/>
                        <t t-elif="record.is_vendor.raw_value and record.company_type.raw_value == 'person' and (record.type.raw_value == 'private' or record.type.raw_value == 'pic')" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image6.png'"/>
                        <t t-else="" t-set="placeholder" t-value="'/base/static/img/avatar_grey.png'"/>
                        <img alt="Avatar" t-att-src="placeholder"/>
                    </div>
                </xpath>
                <xpath expr="//sheet" position="before">
                    <header>
                        <field name="supplier_rank" invisible="1"/>
                        <field name="is_approving_matrix_vendor" invisible="1"/>
                        <field name="is_vendor" invisible="1"/>
                        <field name="is_approve_button" invisible="1"/>
                        <button name="action_request_for_approval" string="Request For Approval" type="object" class="oe_highlight" attrs="{'invisible':['|', '|', '|', ('state', '!=', 'draft'), ('is_approving_matrix_vendor', '=', False), ('supplier_rank', '=', 0), ('is_vendor', '=', False)]}"/>
                        <button name="action_approved" string="Approve" type="object" class="oe_highlight" attrs="{'invisible':['|', '|', '|',('state', '!=', 'waiting_approval'), ('is_approving_matrix_vendor', '=', False), ('is_approve_button', '=', False), ('supplier_rank', '=', 0)]}"/>
                        <button name="action_rejected" string="Reject" type="object" class="decoration-secondary" attrs="{'invisible':['|', '|', '|',('state', '!=', 'waiting_approval'), ('is_approving_matrix_vendor', '=', False), ('is_approve_button', '=', False), ('supplier_rank', '=', 0)]}"/>
                        <button name="action_set_to_draft" string="Set to Draft" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('state', '=', 'blacklisted'), ('state', '!=', 'rejected')]}" />
                        <button string="Blacklist" name="%(blacklist_partner_wiz_action)d" type="action" class="" attrs="{'invisible':[('state','=','blacklisted')]}"/>
                        <button string="Unblacklist" name="%(whitelist_partner_wiz_action)d" type="action" class="" attrs="{'invisible':[('state','!=','blacklisted')]}"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,waiting_approval,approved" invisible="1"/>
                        <field name="state1" widget="statusbar" statusbar_visible="draft,waiting_approval,rejected" invisible="1"/>
                        <field name="state2" widget="statusbar" statusbar_visible="draft,waiting_approval,approved" attrs="{'invisible':['|', '|', '|', ('is_approving_matrix_vendor', '=', False), ('state', '=', 'rejected'), ('supplier_rank', '=', 0), ('is_vendor', '=', False)]}"/>
                        <field name="state3" widget="statusbar" statusbar_visible="draft,waiting_approval,rejected" attrs="{'invisible':['|', '|', '|', ('is_approving_matrix_vendor', '=', False), ('state', '!=', 'rejected'), ('supplier_rank', '=', 0), ('is_vendor', '=', False)]}"/>
                    </header>
                </xpath>
                <!-- <xpath expr="//h1" position="after">
                    <div class="oe_read_only" attrs="{'invisible': [('is_vendor', '!=', 1)]}">
                        <h3>
                            <lable>Vendor ID : </lable>
                            <field name="vendor_sequence" />
                            <field name="is_vendor" invisible="True"/>
                        </h3>
                    </div>
                </xpath> -->
                <xpath expr="//h1" position="after">
                    <field name="supplier_rank" invisible="1"/>
                    <div class='d-flex' attrs="{'invisible': ['|', '|',('supplier_rank', '=', 0), ('id', '=', False), ('is_vendor','=',False)]}">
                        <span>Vendor ID :&amp;nbsp;</span>
                        <field name="vendor_sequence" context="{'default_is_vendor': True}"/>
                    </div>
                </xpath>
                <!-- <xpath expr="//div[@class='d-flex']" position="attributes">
                    <attribute name="attrs">{'invisible': [('is_vendor','=',False)]}</attribute>
                </xpath> -->
                <xpath expr="//form/sheet/notebook/page[@name='sales_purchases'] /group/group[@name='purchase']/field[@name='property_supplier_payment_term_id']" position="before">
                    <label for="is_vendor" string="Is a Vendor"/>
                    <field name="is_vendor" invisible="0" nolabel="1" context="{'default_is_vendor': True}"/>
                    <field name="vendor_creation_date" force_save='1'/>
                </xpath>
                <xpath expr="//field[@name='category_id']" position="after">
                    <field name="is_approve_button" invisible="1"/>
                </xpath>
                <xpath expr="//notebook" position="inside">
                    <page string="Approval Matrix Line" attrs="{'invisible':['|', '|', ('is_approving_matrix_vendor', '=', False), ('supplier_rank', '=', 0),('is_vendor', '=', False)]}">
                        <group>
                            <field name="approving_matrix_vendor_id" attrs="{'invisible':['|', ('is_approving_matrix_vendor', '=', False),('customer_rank', '>', 0)]}"/>
                        </group>
                        <field name="approved_matrix_ids" context="{'approved_matrix_ids': approved_matrix_ids}">
                            <tree editable="bottom">
                                <field name="sequence"/>
                                <field name="user_ids" widget="many2many_tags"/>
                                <field name="minimum_approver" />
                                <field name="state_char" />
                                <field name="time_stamp" />
                                <field name="feedback" />
                            </tree>
                        </field>
                    </page>
                    <page name="blacklist_history_ids" string="Blacklist History">
                        <field name="blacklist_history_ids">
                            <tree editable="bottom">
                                <field name="date"/>
                                <field name="user_id"/>
                                <field name="type"/>
                                <field name="reason"/>
                            </tree>
                        </field>
                    </page>
                </xpath>
                <xpath expr="//field[@name='visible_eval']" position="attributes">
                    <attribute name="attrs">{'invisible': [('supplier_rank', '=', 0)]}</attribute>
                </xpath>
                <xpath expr="//label[@for='visible_eval']" position="attributes">
                    <attribute name="attrs">{'invisible': [('supplier_rank', '=', 0)]}</attribute>
                </xpath>
                <xpath expr="//button[@name='create_new_evaluation']" position="attributes">
                    <attribute name="attrs">{'invisible': [('supplier_rank', '=', 0)]}</attribute>
                </xpath>
                <xpath expr="//field[@name='child_ids']" position="attributes">
                    <!-- Add your fields here -->
                    <attribute name="context">{'default_parent_id': active_id, 'default_street': street, 'default_street2': street2, 'default_city': city, 'default_state_id': state_id, 'default_zip': zip, 'default_country_id': country_id, 'default_lang': None, 'default_user_id': user_id, 'default_type': 'other', 'default_is_vendor':1}</attribute>
                </xpath>
                <xpath expr="//notebook/page[@name='contact_addresses']/field[@name='child_ids']/form/sheet/group/group/field[@name='title']" position="after">
                    <field name="gender" attrs="{'invisible':[('type','!=','contact')]}"/>
                    <field name="place" attrs="{'invisible':[('type','!=','contact')]}"/>
                    <field name="birthdate" attrs="{'invisible':[('type','!=','contact')]}"/>
                </xpath>
            </field>
        </record>

        <record id="view_form_res_partner_inherit_new" model="ir.ui.view">
            <field name="name">res.partner.view.form.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="equip3_hashmicro_ui.view_form_res_partner_inherit_new_column"/>
            <field name="arch" type="xml">
                <xpath expr="//group/div/div/div[@name='col_1']/group/field[@name='type']" position="before">
                    <label for="visible_eval"/>
                    <div>
                        <field name="visible_eval" widget="priority"/>
                        <span>
                            <button name="create_new_evaluation" type="object" string="New Evaluation" class="oe_link"/>
                        </span>
                    </div>
                </xpath>
                <xpath expr="//group/div/div/div[@name='col_3']/group/label[@for='lang']" position="before">
                    <field name="capital_revenue" />
                    <label string="Company Size" for="company_size"/>
                    <div>
                        <field name="company_size" class="o_address_custom col-md-4" style="padding-left:10px;"/>
                        -
                        <field name="company_size2" class="o_address_custom col-md-4" style="padding-left:10px;"/>
                    </div>
                </xpath>
            </field>
        </record>

        <record id="hide_button_inherit_purchase" model="ir.ui.view">
            <field name="name">res.partner.view.form.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="purchase.res_partner_view_purchase_buttons"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='%(purchase.act_res_partner_2_purchase_order)d']" position="attributes">                    <!-- Hide smart button Purchases -->
                    <attribute name="attrs">{'invisible': [('is_vendor', '=', False)]}</attribute>
                </xpath>
                <xpath expr="//button[@name='%(purchase_stock.action_purchase_vendor_delay_report)d']" position="attributes">
                    <attribute name="attrs">{'invisible': [('is_vendor', '=', False)]}</attribute>
                </xpath>
            </field>
        </record>

        <record id="hide_smartbutton_vendorbil_purchase" model="ir.ui.view">
            <field name="name">hide.smartbutton.vendorbil.purchase</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="purchase.res_partner_view_purchase_account_buttons"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='%(purchase.act_res_partner_2_supplier_invoices)d']" position="attributes">
                    <attribute name="attrs">{'invisible': [('is_vendor', '=', False)]}</attribute>
                </xpath>
            </field>
        </record>

        <record id="equip_res_partner_kanban_view" model="ir.ui.view">
            <field name="name">res.partner.kanban</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="equip3_kanban_view.equip_res_partner_kanban_view"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='type']" position="after">
                    <field name="is_vendor"/>
                    <field name='company_type'/>
                </xpath>

                <xpath expr="//div[hasclass('o_equip_kanban_image')]/t[@t-if='!record.is_company.raw_value']//t[@t-else]" position="after">
                    <t t-if="record.is_company.raw_value" t-set="placeholder" t-value="'/base/static/img/company_image.png'"/>
                    <t t-else="" t-set="placeholder" t-value="'/base/static/img/avatar_grey.png'"/>
                </xpath>

                <xpath expr="//div[hasclass('o_equip_kanban_image')]//t[@t-if='!record.is_company.raw_value']//div[hasclass('o_kanban_image_fill_left')]" position="before">
                    <t t-if="record.is_vendor.raw_value">
                        <t t-if="record.type.raw_value == 'contact'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image2.png'"/>
                        <t t-elif="record.type.raw_value == 'invoice'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image3.png'"/>
                        <t t-elif="record.type.raw_value == 'delivery'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image4.png'"/>
                        <t t-elif="record.type.raw_value == 'other'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image5.png'"/>
                        <t t-elif="record.type.raw_value == 'private' or record.type.raw_value == 'pic'" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image6.png'"/>
                    </t>
                </xpath>
    
                <xpath expr="//div[hasclass('o_equip_kanban_image')]//t[@t-else]//div[hasclass('o_kanban_image_fill_left')]" position="before">
                    <t t-if="record.is_vendor.raw_value" t-set="placeholder" t-value="'/equip3_purchase_masterdata/static/src/img/ven_image1.png'"/>
                </xpath>
            </field>
        </record>

        <record id="account.res_partner_action_supplier" model="ir.actions.act_window">
            <field name="context">{'search_default_supplier': 1,'res_partner_search_mode': 'supplier', 'default_is_company': True, 'default_supplier_rank': 1, 'default_is_vendor': 1}</field>
            <!--            <field name="view_id" ref="equip3_purchase_masterdata.view_partner_tree_inherits"/>-->
            <field name="view_mode">kanban,tree,form,activity</field>
            <field name="domain">[('vendor_sequence', '!=', False),('supplier_rank', '>', 0),('is_vendor', '=', True),('state2','=','approved')]</field>
            <field name="view_ids" eval="[(5,0,0),
                          (0,0,{'view_mode':'kanban', 'view_id': ref('equip3_purchase_masterdata.equip_res_partner_kanban_view')}),
                          (0,0,{'view_mode':'tree', 'view_id': ref('equip3_purchase_masterdata.view_partner_tree_inherits')}),
                          (0,0,{'view_mode':'form', 'view_id': ref('equip3_purchase_masterdata.view_partner_form_inherits')}),
                          ]"/>
        </record>

    </data>
</odoo>