<odoo>

    <data>

        <template id="question_video" name="Question: Video">
            <div 
                 t-att-id="question.id"
                 t-att-data-constr-error-msg="'This question requires an answer'"
                 t-att-data-validation-error-msg="'The answer you entered is not valid.'">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                        <div class="modal fade modal_open_qustion_popup" t-att-id="'modal_open_qustion_popup_'+str(question.id)" role="dialog">
                            <div class="modal-dialog modal-lg">
                              <div class="modal-content">
                              <!--   <div class="modal-header" style="padding-left: 0px;">
                                  <button type="button" class="close" data-dismiss="modal"/>
                                </div> -->
                                <div class="modal-body" style="text-align: center; ">
         
                                  <div  class="div_play_youtube">
                                    <p t-field="question.title" class="text-left"/>
                                    <p style="color:red;"  class="text-left information_text_youtube" t-if="question.youtube_url">* Please watch this video until it end, after that then continue the recording process.</p>
                                    <div class="youtube_player" t-att-id="'youtube_player_'+str(question.id)" t-att-src="question.youtube_url" t-att-data-response_time="question.video_response_time" t-att-data-preparation_time="question.video_preparation_time" t-att-data-attempt_limit="question.video_attempt_limit" t-if="question.youtube_url">
                                   
                                    </div>
                                    <div class="all_player" t-att-id="'all_player_'+str(question.id)"  t-att-data-response_time="question.video_response_time" t-att-data-preparation_time="question.video_preparation_time" t-att-data-attempt_limit="question.video_attempt_limit" >
                                   
                                    </div>

                                    <div class="block_if_count_null">
                                      <p class="text-left duration_record" style="display:none;"><b>Response Time : <span class="countdownduration text-center"/></b></p>
                                      <div class="div_response_record" style="display:none;    margin-bottom: 20px;">
                                        <a  class="btn btn-primary done_answering_record" >Done Answering</a>
                                        <a  class="btn btn-light retry_response_record" style="margin-right: 15px;opacity:0.7;pointer-events:none">Retry (<t t-esc="question.video_attempt_limit"/> retries left)</a>

                                        <a  class="btn btn-primary submit_response_record" style="visibility: hidden;">Submit</a>
                                        <a  class="btn btn-primary submit_done_response_record " style="visibility: hidden;" >Submit</a>
                                        
                                      </div>
                                      <div class="div_preparation_time" style="display:none;">
                                        <p style="font-weight: bold;font-size: 25px;"><b>Preparation Time</b></p>
                                        <div class="countdown text-center" style="font-weight: bold;font-size: 25px;"></div>
                                        <a  class="btn btn-primary start_response_record" style="margin-bottom: 20px;">Start Recording</a>
                                      </div>
                                      <video controls="1" class="vid1" style="display:none;pointer-events:none;" muted="muted"></video>
                                      <video  class="vid3" controls="1" style="display:none;"></video>
                                      <br/>
                                      <p style='color: red;' class="textsettings">Please go to "Settings" to make sure your microphone and camera runs smootly.</p>
                                      <div class="o_survey_brand_message rounded settingviews" style='border-radius: 8px; border: 1px solid black; width: 20%; margin: 0; position: relative; top: 50%; left: 40%;'>
                                        <i class="fa fa-cog" style="padding-left: 9px;"></i>
                                        <div class="px-2 py-2 d-inline-block" id="video_setting_survey" style="cursor:pointer;">
                                            Settings
                                        </div>
                                        
                                    </div>
                                    </div>

                                    <input type="file" class="form-control s_website_form_input" t-att-id="question.id" t-att-name="question.id" data-question-type="video" style="display:none;"/>
                                
                                </div>
                                <!-- testing -->
                                <div class="modal-footer" style="display:flex;">
                                  <a  class="btn btn-primary modal_close_qustion_popup" data-dismiss="modal">Close</a>
                                </div>
                              </div>
                              
                            </div>
                        </div>
                       
                    </div>
                    <a href="#" class="btn btn-primary open_qustion_popup" t-att-data-src="question.youtube_url">Open Question</a>
<!--  
                    <p id="btnStart">START RECORDING</p><p id="btnStop">STOP RECORDING</p>
                    

                    <input type="file" class="form-control s_website_form_input" t-att-id="question.id" t-att-name="question.id" data-question-type="video" /> -->
        
                </div>
                <div class="modal fade" t-att-id="'modal_all_player_'+str(question.id)" role="dialog">
                            <div class="modal-dialog modal-lg">
                              <div class="modal-content">
                                <div class="modal-header" style="padding-left: 0px;">
                                  <button type="button" class="close" data-dismiss="modal"/>
                                    <div style="display: block;width: 100%;">
                                        <h4 class="modal-title text-left"><b> Submit Your Response</b></h4>
                                    </div>
                                </div>
                                <div class="modal-body" style="text-align: center; ">
         
                                  <p>Are you sure want to submit your response ? You will not be able to come back and re-cord a new response later.</p>
                                
                                </div>
                                <div class="modal-footer" style="display:flex;">
                                  <a  class="btn btn-light button_confirm_cancel_response" >Cancel</a>
                                  <a class="btn btn-primary button_confirm_done_response"  >Submit</a>
                                </div>
                              </div>
                              
                            </div>
                        </div>
                </div>
                </template>

                

        <template id="inherit_add_config_video_survey_layout" inherit_id="survey.layout">
            <xpath expr="//div[hasclass('o_survey_brand_message')]" position="after">
                
                <div class="modal fade" id="modal_video_setting_survey" role="dialog">
                    <div class="modal-dialog modal-lg">
                      <div class="modal-content">
                        <div class="modal-header" style="padding-left: 0px;">
                          <button type="button" class="close done_config_testing" data-dismiss="modal"/>
                            <div style="display: block;width: 100%;">
                                <h4 class="modal-title text-left"><b> <i class="fa fa-cog"></i> Settings</b></h4>
                            </div>
                        </div>
                        <div class="modal-body" style="text-align: center; ">
                            <form>
                              <div class="form-group text-left">
                                <label for="email" style="font-weight: 300;">Choose Camera :</label>
                                <select class="form-control" id="choose_camera_select">

                                </select>
                              </div>
                              <div class="form-group text-left">
                                <label for="pwd" style="font-weight: 300;">Choose Microphone :</label>
                                <select class="form-control" id="choose_microphone_select">

                                </select>
                              </div>
                              <div class="form-group text-left">
                                <label for="pwd" style="font-weight: 300;">Choose Speaker :</label>
                                <select class="form-control" id="choose_speaker_select">

                                </select>
                              </div>
                              <div class="form-group text-left">
                                <label for="pwd" style="font-weight: 300;">Set Volume Levels :</label>
                                <input type="range" class="form-range" id="range_sound_screen"  min="0" max="10" value="10"/>
                              </div>
                              <div class="row">
                                  <div class="form-group text-left col-md-4">
                                    <label for="pwd" style="font-weight: 300;">Speaker Test:</label>
                                    <br/>
                                    <a href="#" class="btn btn-primary" style="background: unset;color: black;" id="test_speaker_audio"><i class="fa fa-play"></i> Play Test Sound</a>
                                    <audio  id="audio-playback1" class="hidden d-none" src="/equip3_hr_survey_extend/static/src/mp3/nokia.mp3" controls="controls"></audio>
                                  </div>
                                  <div class="form-group text-left col-md-4">
                                    <label for="pwd" style="font-weight: 300;">Microphone Test:</label>
                                    <br/>
                                    <a href="#" class="btn btn-primary" style="background: unset;color: black;" id="config_mic_test"><i class="fa fa-microphone"></i> Record Test Sound</a>
                                   
                                    <audio  id="audio-playback" class="hidden d-none" src="" controls="controls"></audio>
                                  </div>
                                  <div class="form-group text-left col-md-4">
                                    <label for="pwd" style="font-weight: 300;">Camera Test:</label>
                                    <br/>
                                    <a href="#" class="btn btn-primary" style="background: unset;color: black;" id="config_cam_test"><i class="fa fa-camera"></i> Record Test Camera</a>
                                  </div>
                              </div>
                              <!-- <video id="videocam" playsinline="1" autoplay="1"></video> -->
                            </form>

                        
                        </div>
                        <div class="modal-footer" style="display:flex;">
                          <button type="submit" class="btn btn-primary done_config_testing" data-dismiss="modal">Done</button>
                        </div>
                      </div>
                      
                    </div>
                </div>
                <div class="modal fade" id="modal_test_cam_setting_survey" role="dialog">
                    <div class="modal-dialog modal-lg">
                      <div class="modal-content">
                        <div class="modal-header" style="padding-left: 0px;">
                          <button type="button" class="close" data-dismiss="modal"/>
                            <div style="display: block;width: 100%;">
                                <h4 class="modal-title text-left"><b> <i class="fa fa-camera"></i> Record Test Camera</b></h4>
                            </div>
                        </div>
                        <div class="modal-body" style="text-align: center; ">
 
                          <video id="video_testing" playsinline="1" autoplay="1"></video>
                        
                        </div>
                        <div class="modal-footer" style="display:flex;">
                          <button type="submit" class="btn btn-primary" id="button_stop_test_camera" data-dismiss="modal">Close</button>
                        </div>
                      </div>
                      
                    </div>
                </div>
               <!--  <div class="o_survey_brand_message float-right rounded mr-3 border">
                    <i class="fa fa-cog" style="padding-left: 9px;"></i>
                    <div class="px-2 py-2 d-inline-block" id="video_setting_survey" style="cursor:pointer;">
                        Settings
                    </div>
                    
                </div> -->
            </xpath>
        </template>

        <template id="question_kraepelin" name="Question: kraepelin">
              <a href="#" class="btn btn-primary start_kraepelin" style="display: none;">Start</a>              
              <t t-set="comment_line" t-value="answer_lines.filtered(lambda line: line.value_char_box)"/>
              <div>
             <div class="spinner-container loading_span">
                <div class="inner-spinner-container">
                  <div class="survey_loader"></div>
                </div>
              </div>

            </div>
            <br />
            <table class="table table-hover table-kraepelin text-white mb-0" style="width: 1%; display: none;"
                   t-att-data-name="question.id"
                   t-att-data-question-type="question.question_type"
                   t-att-data-sub-questions="question.matrix_row_ids.ids">
                <tbody>
                    <t t-set="header_col_count" t-value="1"/>

                    <t t-foreach="range(question.kraepelin_columns)" t-as="col_label">
                        <!-- <t t-if="header_col_count % 2 != 0"> -->
                            <th style="padding: 0; border: none; pointer-events: none;">
                                <div t-att-class="'timer-%s text-center' % (header_col_count)" style="color: red; font-size: 20px; display: none;">0:00</div>
                                <div t-att-class="'timerValue-%s text-center' % (header_col_count)" style="display: none;"><p t-field="question.kraepelin_time_per_column" /></div>
                            </th>
                        <!-- </t> -->
                        <t t-set="header_col_count" t-value="header_col_count + 1"/>
                    </t>
                    
                    <t t-set="row_count" t-value="1"/>

                    <tr class="bg-white text-white" t-foreach="range(question.kraepelin_rows)" t-as="row_label">
                        <t t-set="col_count" t-value="1"/>
                        <t t-foreach="range(question.kraepelin_columns)" t-as="col_label">
                            <style>
                                span {
                                  margin-left: 0 !important;
                                }

                                input::-webkit-outer-spin-button,
                                input::-webkit-inner-spin-button {
                                  display: none;
                                }

                                td {
                                  color: black !important;
                                  min-width: 20px !important;
                                  padding: 0 !important;
                                }

                                .border-0 {
                                  background-color: lightgrey;
                                }
                            </style>

                            
                            <td t-att-class="' p-1 border-0 column-%s' % (col_count)" >
                                <t t-set="rand_num" t-value="question.generate_random_number()" />
                                <span t-esc="rand_num" t-att-class="'rand_num rand_num_col-%s' % (col_count)"/>
                                <br/>
                                <t t-if="row_count &lt; question.kraepelin_rows">
                                  <input disabled="true" t-att-class="'input-%s input_field' % (col_count)" type="text" style="margin-left:20px; width:20px" oninput="this.value=this.value.replace(/[^0-9]/g,'');" maxlength="1"/>
                                </t>
                            </td>
                            <!-- <t t-if="col_count % 2 != 0">
                                <t t-if="row_count % 2 != 0">
                                    <td t-att-class="'border-0 column-%s' % (col_count)">
                                        <t t-set="rand_num" t-value="question.generate_random_number()" />
                                        <span t-esc="rand_num" t-att-class="'rand_num rand_num_col-%s' % (col_count)"/>
                                    </td>
                                </t>
                                <t t-else="">
                                    <td t-att-class="'border-0 column-%s' % (col_count)">
                                        <span></span>
                                    </td>
                                </t>
                            </t>

                            <t t-if="col_count % 2 == 0">
                                <t t-if="row_count % 2 == 0">
                                    <td t-att-class="'border-0 column-%s' % (col_count)">
                                        <input disabled="true" t-att-class="'input-%s input_field' % (col_count)" type="text" style="text-align: center; width: 100%; height: 50%;" oninput="this.value=this.value.replace(/[^0-9]/g,'');" maxlength="1"/>
                                    </td>
                                </t>
                                <t t-else="">
                                    <td t-att-class="'border-0 column-%s' % (col_count)">
                                        <span></span>
                                    </td>
                                </t>
                            </t> -->

                            <t t-set="col_count" t-value="col_count + 1"/>

                           <!--  <t t-if="col_count > question.kraepelin_total_column">
                              <td t-att-class="'o_survey_matrix_btn border-0 position-relative'" style="color: black;">
                                 <div t-att-class="'timer-%s text-center' % (timer_count)" style="font-weight: bold;font-size: 25px;"><p t-field="question.kraepelin_time_per_row" /></div>
                                 <div t-att-class="'timerValue-%s text-center' % (timer_count)" style="font-weight: bold;font-size: 25px; display: none;"><p t-field="question.kraepelin_time_per_row" /></div>
                              </td>

                            </t> -->
                        </t>
                        <t t-set="row_count" t-value="row_count + 1"/>
                    </tr>
                </tbody>
            </table>

        </template>
    </data>
</odoo>