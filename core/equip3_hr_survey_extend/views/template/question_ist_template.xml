<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>
    <!-- Question IST -->
    <template id="question_ist" name="Question: IST">
        <t t-set="answer_line" t-value="answer_lines.filtered(lambda line: line.suggested_answer_id)"/>
        <t t-set="comment_line" t-value="answer_lines.filtered(lambda line: line.value_char_box)"/>        
        <div class="row o_survey_form_choice"
             t-att-data-name="question.id"
            data-question-type="ist">
            <t t-set="item_idx" t-value="0"/>
            <div t-if="question.ist_sub_type == 'simple_choice'" t-attf-class="col-lg-12 d-flex flex-wrap">
                <t t-set="has_correct_answer" t-value="scoring_display_correction and any(label.is_correct for label in question.suggested_answer_ids)"/>
                <t t-foreach='question.suggested_answer_ids' t-as='label'>
                    <t t-set="item_idx" t-value="label_index"/>
                    <t t-set="answer_selected" t-value="answer_line and answer_line.suggested_answer_id.id == label.id"/>
                    <t t-set="is_correct" t-value="label.answer_score > 0.0"/>

                    <!--Used for print mode with corrections -->
                    <t t-set="answer_class" t-if="not has_correct_answer" t-value="''" />
                    <t t-set="answer_class" t-elif="is_correct" t-value="'bg-success'" />
                    <t t-set="answer_class" t-elif="not is_correct" t-value="'bg-danger'" />

                    <label t-att-for="str(question.id) + '_' + str(label.id)"
                           t-att-class="'o_survey_choice_btn mr-2 mb-2 py-1 px-3 rounded %s %s' % (answer_class, 'o_survey_selected' if answer_selected else '')">
                        <t t-call="survey.survey_selection_key">
                            <t t-set="selection_key_class" t-value="'position-relative o_survey_radio_btn float-left d-flex'"/>
                        </t>
                        <span class="ml-2" t-field='label.value'/>
                        <input t-att-id="str(question.id) + '_' + str(label.id)" type="radio" t-att-value='label.id' class="o_survey_form_choice_item invisible position-absolute"
                               t-att-name='question.id'
                               t-att-checked="answer_line and answer_line.suggested_answer_id.id == label.id and 'checked' or None"
                               t-att-data-selection-key="letters[item_idx] if useKeySelection else ''"/>
                        <i class="fa fa-check-circle float-right mt-1 position-relative"></i>
                        <i class="fa fa-circle-thin float-right mt-1 position-relative"></i>
                        <t t-call="survey.question_suggested_value_image"/>                        
                    </label>
                </t>
            </div>
            <div t-if="question.ist_sub_type == 'numerical_box'" class="col-lg-12" >
                <div t-attf-class="o_survey_comment_container mt-3 py-0 px-1">
                    <input type="number" step="any" class="form-control o_survey_question_numerical_box bg-transparent text-dark rounded-0 p-0"
                        t-att-name="question.id" t-att-value="answer_lines[0].value_numerical_box if answer_lines else None"
                        t-att-data-question-type="question.ist_sub_type"
                        t-att-data-validation-float-min="question.validation_min_float_value if question.validation_required else False"
                        t-att-data-validation-float-max="question.validation_max_float_value if question.validation_required else False"/>
                </div>
            </div>
            <div t-if="question.ist_sub_type == 'char_box'" class="col-lg-12 o_survey_comment_container p-0" >
                <input t-att-type="'email' if question.validation_email else 'text'"
                    class="form-control o_survey_question_text_box bg-transparent text-dark rounded-0 p-0" t-att-name="question.id"
                    t-att-value="answer_lines[0].value_char_box if answer_lines else None"
                    t-att-data-question-type="question.ist_sub_type"
                    t-att-data-validation-length-min="question.validation_length_min if question.validation_required else False"
                    t-att-data-validation-length-max="question.validation_length_max if question.validation_required else False"/>
                <!-- <div t-attf-class="o_survey_comment_container mt-3 py-0 px-1">
                    <input type="text" class="form-control o_survey_question_text_box bg-transparent text-dark rounded-0 p-0" placeholder="Example: Flower"/>
                </div> -->
            </div>        
        </div>     
    </template>
</data>
</odoo>
