<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="PaymentScreen" t-inherit="point_of_sale.PaymentScreen" t-inherit-mode="extension" owl="1">
        <xpath expr="//section[hasclass('payment-numpad')]" position="replace"/>
        <xpath expr="//PaymentScreenPaymentLines" position="replace"/>
        <xpath expr="//div[hasclass('back')]" position="attributes">
            <attribute name="t-on-click">ButtonBackToProducts</attribute>
        </xpath>
<!--        <xpath expr="//div[hasclass('back')]" position="after">-->
<!--            <div class="button"-->
<!--                 t-on-click="showAllPaymentMethods">-->
<!--                <i class="fa fa-list"></i>-->
<!--                <span class="back_text"> <t t-esc="showAllPaymentMethodLabel"/></span>-->
<!--            </div>-->
<!--        </xpath>-->
        <xpath expr="//div[hasclass('payment-buttons')]" position="replace"/>
        <xpath expr="//div[hasclass('left-content')]//section[1]"
               position="replace"/> <!-- remove PaymentScreenStatus of mobile -->
        <xpath expr="//PaymentScreenStatus" position="replace"/>       
        <xpath expr="//div[hasclass('paymentmethods')]" position="replace"/>     
        <xpath expr="//div[hasclass('right-content')]//section[1]" position="inside">
            <PaymentScreenPaymentLines paymentLines="paymentLines" t-if="paymentLines"/>    
            <div class="summary-lines" t-if="!env.isMobile">
                <div class="order-status">
                    <PaymentScreenStatus paymentLines="paymentLines"/>
                </div>
                <div class="order-status-summary" t-if="currentOrder.is_paid()">
                    <div>
                        <div class="button next" t-att-class="{ highlight: currentOrder.is_paid() }" style="cursor: pointer; color: black;"
                        t-on-click="validateOrder(false)"> 
                        
                        <span class="next_text">
                            <t t-if="currentOrder.is_paid()">
                                <i class="fa fa-print"/>
                                COMPLETE
                                <t class="shortcut-keyboard" style="color: #fff">
                                    <span>  </span>
                                </t>
                            </t>
                            <t t-else="">
                                <!-- PENDING
                                <i class="fa fa-spin fa-spinner fa-pulse"/> -->
                            </t>
                        </span>
                    </div>   
                    </div> 
                </div>
            </div>
            <div class="payment-notes" t-if="env.pos.config.note_order and !env.isMobile">
                <textarea class="form-control orderline-input"
                        style="margin-left: 0px;min-height: 100px; width: 64%; margin-top:20px "
                        rows="4"
                        cols="50"
                        type="text"
                        placeholder="Type Notes to Receipt here ..."
                        t-on-change="OnChangeNote">
                    <t t-esc="currentOrder.get_note()"/>
                </textarea>
            </div>
            
            
        </xpath>
        <xpath expr="//div[hasclass('left-content')]" position="inside">
            <div class="payment-mobile-content" t-if="env.isMobile">
<!--                <div class="payment-action">-->
<!--                    <div class="button" t-on-click="showAllPaymentMethods">-->
<!--                        <i class="fa fa-list"></i>-->
<!--                        <span class="back_text"> <t t-esc="showAllPaymentMethodLabel"/></span>-->
<!--                    </div>-->
<!--                </div>-->
                <div class="payment-methods" t-if="PaymentMethods.length">
                    <t t-foreach="PaymentMethods" t-as="paymentMethod" t-key="paymentMethod.id">
                        <PaymentMethodButton paymentMethod="paymentMethod"/>
                    </t>
                </div>
                <div class="payment-lines clearfix" t-if="paymentLines.length">
                    <PaymentScreenPaymentLines paymentLines="paymentLines" t-if="paymentLines"/>
                </div> 
            </div>

            <div class="paymentmethods feature-buttons">
                <button class="mode-button button-use-voucher"
                        t-on-click="inputVoucherCode">
                    <i class="fa fa-gift"/>
                    <span class="payment-name">
                        Use Voucher
                    </span>
                </button>

                <t t-if="env.pos.config.print_voucher">
                    <button class="mode-button"
                            t-on-click="covertToVoucher"
                            t-att-class="{
                            'oe_hidden': !env.pos.config.print_voucher,
                        }"
                            t-att-disabled="!env.pos.config.print_voucher">
                    <i class="fa fa-gift"/>
                        <span t-if="!env.isMobile">Convert to Voucher</span>
                </button>
                </t>
                
                <DepositPaymentButton/>
                <PaymentButtons/>
                <PaymentSetCustomerButton />

                <button class="mode-button js_tip"
                        t-att-class="{
                            'oe_hidden': !env.pos.config.tip_product_id,
                            'highlight':  env.pos.config.tip_product_id
                        }"
                        t-att-disabled="!env.pos.config.tip_product_id"
                        t-on-click="addTip">
                    <i class="fa fa-heart"/>
                    <span class="payment-name">
                        Tip
                        <i class="fa fa-keyboard-o"/>
                        T
                    </span>
                </button>
                <button class="mode-button js_cashdrawer"
                        t-att-class="{
                            'oe_hidden': !env.pos.config.iface_cashdrawer,
                            'highlight':  env.pos.config.iface_cashdrawer
                        }"
                        t-att-disabled="!env.pos.config.iface_cashdrawer"
                        t-on-click="openCashbox">
                    <i class="fa fa-archive"/>
                    <span class="payment-name">
                        Open CashBox
                    </span>
                </button>
                <button class="mode-button js_gift_card"
                        t-att-class="{
                            'oe_hidden': !env.pos.config.enable_gift_card or !env.pos.get_order().get_client() or props.showGiftButton,
                            'highlight': env.pos.config.enable_gift_card and env.pos.get_order().get_client() and props.showGiftButton !== false
                        }"
                        t-att-disabled="!env.pos.config.enable_gift_card or !env.pos.get_order().get_client() or props.showGiftButton"
                        t-on-click="createPaymentLine('giftCard')">
                    <i class="fa fa-gift"/>
                    <span class="payment-name">
                        Use Gift Card
                    </span>
                </button>
         <!--        <button class="mode-button js_gift_card"
                        t-att-class="{
                            'oe_hidden': env.pos.multi_currencies.length == 0,
                            'highlight': env.pos.multi_currencies.length != 0
                        }"
                        t-att-disabled="env.pos.multi_currencies.length == 0"
                        t-on-click="changeCurrency()">
                    <span style="display: block;font-weight: 400;top: 0;position: absolute;right: 0;width: unset;"><i class="fa fa-keyboard-o"></i>V</span>
                    <i class="fa fa-list"/>
                    <span class="payment-name">
                        Currencies
                    </span>
                </button> -->
                <SplitBillButton class="mode-button"/>
            </div>
            <span class="payment-label"
                  t-if="env.pos.payment_journals and env.pos.payment_journals.length != 0 and !env.isMobile">Invoice Journals: (<t
                    t-esc="env.pos.payment_journals.length"/>)</span>
            <div class="paymentmethods"
                 t-if="env.pos.payment_journals and env.pos.payment_journals.length != 0 and !env.isMobile">
                <t t-foreach="env.pos.payment_journals" t-as="payment_journal"
                   t-key="payment_journal.id">
                    <PaymentInvoiceJournal paymentInvoiceJournal="payment_journal"/>
                </t>
            </div>
            <section class="payment-numpad">
                <PaymentScreenNumpad/>
            </section>

            <!-- <div class="payment-mobile-payment-status clearfix" t-if="env.isMobile">
                <section class="paymentlines-container">
                    <PaymentScreenStatus paymentLines="paymentLines" />
                </section>
            </div> -->

            <!-- <xpath expr="//div[hasclass('back')]" position="inside">
                <t t-if="!env.isMobile">
                    <span>  </span>
                    <i class="fa fa-keyboard-o"/>
                    ( B/ESC )
                </t>
            </xpath> -->
        </xpath>
        
        
        <xpath expr="//div[hasclass('next')]" position="replace">
            <div class="button"
                 t-if="env.pos.config.rounding_automatic"
                 t-on-click="roundingTotalPaid">
                <i class="fa fa-check"/>
                <span class="back_text"> Rounding</span>
            </div>
            
        </xpath>
        <xpath expr="//div[hasclass('top-content-center')]" position="replace">
            <div class="top-content-center">
                <t t-if="env.pos.get_order().get_due() &gt; 0">
                    <h1 class="total-value">Due: <t t-esc="env.pos.format_currency(env.pos.get_order().get_due(),false,env.pos.get_order().currency)"/></h1>
                </t>
                <t t-if="env.pos.get_order().get_due() &lt; 0">
                    <h1 class="total-value">
                        Change: <t t-esc="env.pos.format_currency(-env.pos.get_order().get_due(),false,env.pos.get_order().currency)"/>
                        <t t-if="env.pos.get_order().get_differene_currency_change()">
                            <span style="font-size: 16px">
                                ( <t t-esc="env.pos.get_order().get_differene_currency_change()"/> )
                            </span>
                        </t>
                    </h1>
                </t>
                <t t-if="env.pos.get_order().get_due() == 0">
                    <h1 class="total-value">Change: <t t-esc="env.pos.format_currency(0,false,env.pos.get_order().currency)"/></h1>
                </t>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('left-content')]" position="attributes">
            <attribute name="style">width:5%</attribute>
        </xpath>
        <xpath expr="//div[hasclass('left-content')]" position="before">
            <div class="left-content r-left-content" style="width:7%;margin-right: unset;    min-width: unset;">
                <div class="paymentmethods" style="width: 100%;z-index:1;" t-if="!env.isMobile">
                    <t t-foreach="PaymentMethods"
                       t-as="paymentMethod"
                       t-key="paymentMethod.id">
                        <PaymentMethodButton paymentMethod="paymentMethod"/>
                    </t>
                </div>
            </div>
        </xpath>
        <!-- <xpath expr="//div[hasclass('left-content')]" position="attributes">
            <attribute name="style">margin-top:-130px</attribute>
        </xpath> -->
        <!-- <xpath expr="//div[hasclass('right-content')]" position="attributes">
            <attribute name="style">margin-top:-90px</attribute>
        </xpath> -->

        
    </t>
    <t t-name="PaymentMethodButton" t-inherit="point_of_sale.PaymentMethodButton" t-inherit-mode="extension"  owl="1">
        <xpath expr="//div[hasclass('paymentmethod')]" position="attributes">
            <attribute name="style">width:40%</attribute>
        </xpath>
        <!-- <div class="button paymentmethod"
            t-on-click="trigger('new-payment-line', props.paymentMethod)">
            <div class="payment-name">
                <t t-esc="props.paymentMethod.name" />
            </div>
        </div> -->
    </t>

</templates>
