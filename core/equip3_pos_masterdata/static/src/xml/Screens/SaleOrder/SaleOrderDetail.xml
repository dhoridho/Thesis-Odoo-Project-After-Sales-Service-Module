<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="ConfirmPopupPickupSO" owl="1">
        <div role="dialog" class="modal-dialog">
            <Draggable>
                <div class="popup popup-confirm">
                    <header class="title drag-handle" style="background: #bd1f2e; color: white !important;">
                        <t t-esc="props.title" />
                    </header>
                    <main class="body">
                        <div style="    display: flex;padding: 0 25px;">
                            <div  style="width: 50%; text-align: left;">
                                <p style="margin:unset;"><b>Number</b></p>
                                <p style="margin:unset;"><t t-esc=" props.number_so" /></p>
                            </div>
                            <div style="width: 50%; text-align: right;">
                                <p style="margin:unset;"><b>Customer</b></p>
                                <p style="margin:unset;"><t t-esc=" props.name_member" /></p>
                            </div>
                        </div>
                        
                    </main>
                    <footer class="footer">
                        <div class="button confirm" t-on-click="confirm">
                            <t t-esc="props.confirmText" />
                        </div>
                        <div class="button cancel" t-on-click="cancel">
                            <t t-esc="props.cancelText" />
                        </div>
                    </footer>
                </div>
            </Draggable>
        </div>
    </t>

    <t t-name="SaleOrderDetail" owl="1">
        <t t-set="order" t-value="props.order"/>
        <section class='client-details edit'
                 style="max-height: 600px;min-height: 300px;height: fit-content;">
            <div class="header">
                <t t-if="!order.pos_order_id">
                    <button t-on-click.stop="trigger('covertToPosOrder')" style="background: #bd1f2e; color: white !important;">
                        <i class="fa fa-check-square-o"/>
                        <t t-if="!env.isMobile">Pickup</t>
                    </button>
                </t>
                <t t-if="(order.state == 'draft' or order.state == 'sent') and env.pos.config.booking_allow_confirm_sale">
                    <button t-on-click.stop="trigger('actionConfirmSale')">
                        <i class="fa fa-check"/>
                        <t t-if="!env.isMobile">Confirm Sale</t>
                    </button>
                </t>
                <t t-if="order.state == 'booked'">
                    <button t-on-click.stop="trigger('actionConfirmSelfPicking')">
                        <i class="fa fa-check"/>
                        <t t-if="!env.isMobile">Confirm Self Picking</t>
                    </button>
                </t>
                <t t-if="order.state == 'sale'">
                    <button t-on-click.stop="trigger('actionDone')">
                        <i class="fa fa-fw fa-lock"/>
                        <t t-if="!env.isMobile">Lock</t>
                    </button>
                </t>
                <button t-on-click.stop="trigger('actionPrint')">
                    <i class="fa fa-print"/>
                    <t t-if="!env.isMobile">Print</t>
                </button>
            </div>
            <div class='client-name' style="margin-bottom: 15px;">
                <div>
                    <p style="margin: unset; margin-bottom: 10px; color: black;"><b>Sales Order Reference </b></p>
                    <a class='so_link' target='_blank' order="order" t-att-href="OrderUrl" title="Open Order" style="margin-bottom: 10px;">
                        <t t-if="order.name">
                            <t t-esc="order.name"/>
                        </t>
                        <t t-if="!order.name">
                            N/A
                        </t>
                    (Click Open Order)</a>
                </div>
            </div>
            <div class='client-details-box clearfix'>
                <div class='client-details-left' style="width:40%;">
                    <div class='client-detail'>
                        <span class='label'>Customer</span>
                        <t t-esc="order.partner_id and order.partner_id[1] or ''"/>
                    </div>
                    <t t-if="order.partner">
                        <div class='client-detail'>
                            <span class='label'>Customer</span>
                            <t t-esc="order.partner.name"/>
                        </div>
                        <t t-if="order.partner.email">
                            <div class='client-detail'>
                                <span class='label'>Email</span>
                                <t t-esc="order.partner.email"/>
                            </div>
                        </t>
                        <t t-if="order.partner.phone || order.partner.mobile">
                            <div class='client-detail'>
                                <span class='label'>Phone/Mobile</span>
                                <t t-esc="order.partner.phone || order.partner.mobile"/>
                            </div>
                        </t>
                    </t>
                    <div class='client-detail'>
                        <span class='label'>Date Order</span>
                        <t t-esc='order.date_order'/>
                    </div>
                    <!-- <div class='client-detail'>
                        <span class='label'>Warehouse</span>
                        <t t-esc="order.warehouse_id and order.warehouse_id[1] or ''"/>
                    </div>
                    <div class='client-detail'>
                        <span class='label'>Branch</span>
                        <t t-esc="order.pos_branch_id and order.pos_branch_id[1] or ''"/>
                    </div> -->
                    <t t-if="order.reserve_order">
                        <div class='client-detail'>
                            <span class='label'>Reserved From</span>
                            <t t-esc='order.reserve_from'/>
                        </div>
                        <div class='client-detail'>
                            <span class='label'>Reserved To</span>
                            <t t-esc='order.reserve_to'/>
                        </div>
                        <div class='client-detail'>
                            <span class='label'>Reserved Table</span>
                            <t t-esc='order.reserve_table_id[1]'/>
                        </div>
                        <div class='client-detail'>
                            <span class='label'>Reserved No Of Guests</span>
                            <t t-esc="order.reserve_no_of_guest or ''"/>
                        </div>
                        <div class='client-detail'>
                            <span class='label'>Reserved Mobile</span>
                            <t t-esc="order.reserve_mobile or 'N/A'"/>
                        </div>
                    </t>
                </div>
                <div class='client-details-right'  style="width:60%;">
                    <div class='client-detail'>
                        <span class='label'>State</span>
                        <span style="color: #6EC89B">
                            <t t-if="order.state == 'draft'">
                                <t t-if="order.reserve_order">
                                    Reserved
                                </t>
                                <t t-else="">
                                    Quotation
                                </t>
                            </t>
                            <t t-if="order.state == 'sent'">Quotation Sent</t>
                            <t t-if="order.state == 'sale'">Sale Order</t>
                            <t t-if="order.state == 'done'">Looked</t>
                            <t t-if="order.state == 'cancel'">Cancelled</t>
                            <t t-if="order.state == 'booked'">Booked</t>
                        </span>
                    </div>
                    <t t-if="order.note">
                        <div class='client-detail'>
                            <span class='label'>Notes</span>
                            <t t-esc='order.note'/>
                        </div>
                    </t>
                    <t t-if="order.user_id">
                        <div class='client-detail'>
                            <span class='label'>Sale Persion</span>
                            <t t-esc='order.user_id[1]'/>
                        </div>
                    </t>
                    <div class='client-detail'>
                        <span class='label'>Total</span>
                        <t t-esc='env.pos.format_currency(order.amount_total)'/>
                    </div>
                </div>
            </div>
            <div class='client-details-box clearfix'>
                <div class='client-detail'>
                    <div class='lines_detail'>
                        <SaleOrderLines order="order"/> <!-- set order to props-->
                    </div>
                </div>
            </div>
        </section>
    </t>

</templates>
