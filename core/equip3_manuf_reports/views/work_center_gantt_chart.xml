<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="ks_mrp_work_order_view_gantt" model="ir.ui.view">
        <field name="name">MRP Work Order Gantt View</field>
        <field name="model">mrp.workorder</field>
        <field name="inherit_id" ref="ks_gantt_view_mrp.ks_mrp_work_order_view_gantt"/>
        <field name="arch" type="xml">
            <xpath expr="//ks_gantt" position="attributes">
                <attribute name="js_class">ks_gantt_workorder</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_mrp_work_center_gantt_chart_search" model="ir.ui.view">
        <field name="name">mrp.production.work.order.search</field>
        <field name="model">mrp.workorder</field>
        <field name="arch" type="xml">
            <search>
                <field name="production_id" string="Production Order"/>
                <field name="workcenter_id"/>
                <filter string="Ready" name="ready" domain="[('state','=','ready')]"/>
                <filter string="Pending" name="pending" domain="[('state','=','pending')]"/>
                <filter string="In Progress" name="progress" domain="[('state','=','progress')]"/>
                <filter string="Done" name="done" domain="[('state','=', 'done')]"/>
                <filter string="Late" name="late" domain="[('date_planned_start','&lt;=',time.strftime('%%Y-%%m-%%d'))]"/>
                <separator/>
                <filter string="Start Date" name="date_start_filter" date="date_start"/>
                <filter name="this_month" string="This Month" domain="[('create_date','&lt;',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01')), ('create_date','&gt;=',time.strftime('%%Y-%%m-01'))]" />
                <group expand="0" string="Group By...">
                    <filter string="Product" name="product_id" domain="[]" context="{'group_by': 'product_id'}"/>
                    <filter string="Production Plan" name="mrp_plan_id" domain="[]"
                                context="{'group_by': 'mrp_plan_id'}"/>
                    <filter string="Production Order" name="production_id" domain="[]"
                                context="{'group_by': 'production_id'}"/>
                    <filter string="Production Work Order" name="name" domain="[]" context="{'group_by': 'name'}"/>
                    <filter string="Work Center" name="groupby_workcenter_id" domain="[]"
                                context="{'group_by': 'workcenter_id'}"/>
                    <filter string="Warehouse" name="groupby_warehouse_id" domain="[]" context="{'group_by': 'warehouse_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_work_center_gantt_chart">
        <field name="name">Work Center Gantt Chart</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">mrp.workorder</field>
        <field name="domain">[]</field>
        <field name="context">{'search_default_pending':1, 'search_default_ready':1, 'search_default_progress':1, 'search_default_groupby_workcenter_id':1, 'search_default_this_month':1, 'is_gantt': True}</field>
        <field name="view_mode">ks_gantt</field>
        <field name="search_view_id" ref="view_mrp_work_center_gantt_chart_search"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new work orders performance
            </p>
        </field>
    </record>

    <record id="view_ks_mrp_work_order_view_gantt" model="ir.ui.view">
            <field name="name">MRP Production Gantt View</field>
            <field name="model">mrp.production</field>
            <field name="inherit_id" ref="ks_gantt_view_mrp.ks_mrp_production_view_gantt"/>
            <field name="arch" type="xml">
                <xpath expr="//ks_gantt" position="attributes">
                    <attribute name="create">false</attribute>
                </xpath>
            </field>
    </record>
</odoo>
