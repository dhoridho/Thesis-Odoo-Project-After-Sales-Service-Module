<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>

        <!-- Manage Sale Order Delivery -->
        <template id="manage_job_list_new_list" name="Manage Job list">
            <div class="delivercontrol_section panel panel-primary filterable col-md-12"
                 style="margin-top: -6px;}">
                <t t-call="website.layout">
                    <style>
                        .custom_btn {
                        background-color: white;
                        border: 2px solid #e7e7e7;
                        border-bottom: 1px;
                        border-top-left-radius: 12px;
                        border-top-right-radius: 12px;
                        border-bottom-left-radius: 0px;
                        border-bottom-right-radius: 0px;
                        color: black;
                        padding: 11px 20px;
                        text-align: center;
                        text-decoration: none;
                        display: inline-block;
                        font-size: 16px;
                        transition-duration: 0.4s;
                        cursor: pointer;
                        }
                        .custom_btn:focus {outline: none;}

                        .font_style{
                            font-size: 16px;
                            color: black;
                        }
                    </style>
                    <div>
                        <h5 class="background" style="margin-top: 30px;">
                            <span>My Job List</span>
                        </h5>
                    </div>
                    <div class="pull-left" name="header_manage_job_list_left" style="margin-bottom: 10px;">
                        <t t-set="breadcrumbs_searchbar" t-value="True"/>
                        <form class="mt8 float-right" role="search" t-attf-action="/page/job/list/driver" method="get">
                            <t t-call="website.website_search_box"/>
                        </form>
                    </div>
                    <div class="pull-right" name="header_manage_job_list">
                        <input type="hidden" name="delivery_boy" id="delivery_boy" t-att-value="delivery_boy.id"/>
                        <button class="btn btn-default btn-xs driver_status" id="driver_status"
                                style=" background-color: #ebebeb; margin-bottom:19px;">
                            <span id="delivery_boy_change_text" t-field="delivery_boy.status"></span>
                        </button>
                        <button class="btn btn-default btn-xs start_delivery" id="start_delivery"
                                style="background-color: #ebebeb; margin-bottom:19px;">
                            <span id="start_delivery">Start Delivery</span>
                        </button>

                    </div>
                    <div class="table-responsive replace_table">
                        <div>
                            <button class='custom_btn' id="assigned" onClick="assign()" type='object'>ASSIGN
                            </button>
                            <button class='custom_btn' id="accept" onClick="accept()" type='object'>ACCEPT
                            </button>
                            <button class='custom_btn' id="picked" onClick="picked()" type="object">PICKED</button>
                            <button class='custom_btn' id="paid" onClick="paid()" type="object">PAID</button>
                        </div>
                        <div id="click_assigned" style="display: block;">
                            <table id="display_sale_orders" width="100%" class="table table-striped"
                                   style="margin-top: 2px; border-top: hidden;}">
                                <thead>
                                    <tr>
                                        <th style ="font-size: 17px; color:black;">
                                            <span>Order No</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Customer Name</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Customer Address</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Phone</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Distance</span>
                                        </th>
                                        <th style = "text-align: center; font-size:17px;">
                                            <span>Price</span>
                                        </th>
                                        <th style = "text-align: left; font-size:17px;">
                                            <span>Status</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="manage_sale_order_delivery">
                                    <t t-foreach="picking_orders_state_assigned" t-as="picking">
                                        <t t-if="picking.order_source=='sale'">
                                            <tr t-att-id="picking.sale_order.id">
                                                <td>
                                                    <a t-att-href="'/page/job_list/order-view/' + str(picking.sale_order.id)">
                                                        <span t-field="picking.sale_order.name"/>
                                                    </a>
                                                </td>
<!--                                                <td>-->
<!--                                                    <span t-field="picking.picking_id.name"/>-->
<!--                                                </td>-->
                                                <td>
                                                    <span t-field="picking.sale_order.partner_id.name"/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.sale_order.partner_id"
                                                          t-options='{"widget": "contact", "fields": ["address"], "no_marker": True, "phone_icons": True}'/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.sale_order.partner_id.phone"/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.distance_btn_2_loc"/>
                                                    <span>KM</span>
                                                </td>
                                                <td style="border-top:0px;" class="text-right">
                                                    <t t-set="total" t-value="0"/>
                                                    <t t-foreach="picking.picking_id.move_ids_without_package" t-as="o">
                                                        <t t-foreach="picking.sale_order.order_line" t-as="so">
                                                            <t t-if="o.product_id.id == so.product_id.id and so.tax_id">
                                                                <t t-set="total"
                                                                   t-value="total + ((o.quantity_done * so.price_unit) +
                                                            (o.quantity_done * so.price_unit * so.tax_id.amount / 100))"/>
                                                            </t>
                                                            <t t-if="o.product_id.id == so.product_id.id and not so.tax_id">
                                                                <t t-set="total"
                                                                   t-value="total + ((o.quantity_done * so.price_unit))"/>
                                                            </t>
                                                        </t>
                                                    </t>

                                                    <span t-esc="total"
                                                          t-options='{"widget": "float", "precision": 2}'/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.state"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                        <div id="click_accept" style="display: none;">
                            <table id="display_sale_orders" width="100%" class="table table-striped"
                                   style="margin-top: 2px; border-top: hidden;}">
                                <thead>
                                    <tr>
                                        <th style ="font-size: 17px; color:black;">
                                            <span>Order No</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Customer Name</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Customer Address</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Phone No</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Distance</span>
                                        </th>
                                        <th style = "text-align: center; font-size: 17px">
                                            <span>Price</span>
                                        </th>
                                        <th style = "text-align: left; font-size: 17px">
                                            <span>Status</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="manage_sale_order_delivery">
                                    <t t-foreach="picking_orders_state_accept" t-as="picking">
                                        <t t-if="picking.order_source=='sale'">
                                            <tr t-att-id="picking.sale_order.id">
                                                <td>
                                                    <a t-att-href="'/page/job_list/order-view/' + str(picking.sale_order.id)">
                                                        <span t-field="picking.sale_order.name"/>
                                                    </a>
                                                </td>
<!--                                                <td>-->
<!--                                                    <span t-field="picking.picking_id.name"/>-->
<!--                                                </td>-->
                                                <td>
                                                    <span t-field="picking.sale_order.partner_id.name"/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.sale_order.partner_id"
                                                          t-options='{"widget": "contact", "fields": ["address"], "no_marker": True, "phone_icons": True}'/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.sale_order.partner_id.phone"/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.distance_btn_2_loc"/>
                                                    <span>KM</span>
                                                </td>
                                                <td style="border-top:0px;" class="text-right">
                                                    <t t-set="total" t-value="0"/>
                                                    <t t-foreach="picking.picking_id.move_ids_without_package" t-as="o">
                                                        <t t-foreach="picking.sale_order.order_line" t-as="so">
                                                            <t t-if="o.product_id.id == so.product_id.id and so.tax_id">
                                                                <t t-set="total"
                                                                   t-value="total + ((o.quantity_done * so.price_unit) +
                                                            (o.quantity_done * so.price_unit * so.tax_id.amount / 100))"/>
                                                            </t>
                                                            <t t-if="o.product_id.id == so.product_id.id and not so.tax_id">
                                                                <t t-set="total"
                                                                   t-value="total + ((o.quantity_done * so.price_unit))"/>
                                                            </t>
                                                        </t>
                                                    </t>

                                                    <span t-esc="total"
                                                          t-options='{"widget": "float", "precision": 2}'/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.state"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                        <div id="click_picked" style="display: none;">
                            <table id="display_sale_orders" width="100%" class="table table-striped"
                                   style="margin-top: 2px; border-top: hidden;}">
                                <thead>
                                    <tr>
                                        <th style ="font-size: 17px; color:black;">
                                            <span>Order No</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Picking No</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Customer Name</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Customer Address</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Distance</span>
                                        </th>
                                        <th style = "text-align: center; font-size: 17px;">
                                            <span>Price</span>
                                        </th>
                                        <th style = "text-align: left; font-size: 17px;">
                                            <span>Status</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="manage_sale_order_delivery">
                                    <t t-foreach="picking_orders_state_picked" t-as="picking">
                                        <t t-if="picking.order_source=='sale'">
                                            <tr t-att-id="picking.sale_order.id">
                                                <td>
                                                    <a t-att-href="'/page/job_list/order-view/' + str(picking.sale_order.id)">
                                                        <span t-field="picking.sale_order.name"/>
                                                    </a>
                                                </td>
                                                <td>
                                                    <span t-field="picking.picking_id.name"/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.sale_order.partner_id.name"/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.sale_order.partner_id"
                                                          t-options='{"widget": "contact", "fields": ["address"], "no_marker": True, "phone_icons": True}'/>
                                                </td>
<!--                                                <td>-->
<!--                                                    <span t-field="picking.sale_order.partner_id.phone"/>-->
<!--                                                </td>-->
                                                <td>
                                                    <span t-field="picking.distance_btn_2_loc"/>
                                                    <span>KM</span>
                                                </td>
                                                <td style="border-top:0px;" class="text-right">
                                                    <t t-set="total" t-value="0"/>
                                                    <t t-foreach="picking.picking_id.move_ids_without_package" t-as="o">
                                                        <t t-foreach="picking.sale_order.order_line" t-as="so">
                                                            <t t-if="o.product_id.id == so.product_id.id and so.tax_id">
                                                                <t t-set="total"
                                                                   t-value="total + ((o.quantity_done * so.price_unit) +
                                                            (o.quantity_done * so.price_unit * so.tax_id.amount / 100))"/>
                                                            </t>
                                                            <t t-if="o.product_id.id == so.product_id.id and not so.tax_id">
                                                                <t t-set="total"
                                                                   t-value="total + ((o.quantity_done * so.price_unit))"/>
                                                            </t>
                                                        </t>
                                                    </t>

                                                    <span t-esc="total"
                                                          t-options='{"widget": "float", "precision": 2}'/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.state"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                        <div id="click_paid" style="display: none;">
                            <table id="display_sale_orders" width="100%" class="table table-striped"
                                   style="margin-top: 2px; border-top: hidden;}">
                                <thead>
                                    <tr>
                                        <th style ="font-size: 17px; color:black;">
                                            <span>Order No</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Picking No</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Customer Name</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Customer Address</span>
                                        </th>
                                        <th style ="font-size: 17px">
                                            <span>Distance</span>
                                        </th>
                                        <th style = "text-align: center; font-size: 17px;">
                                            <span>Price</span>
                                        </th>
                                        <th style = "text-align: left; font-size: 17px;">
                                            <span>Status</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="manage_sale_order_delivery">
                                    <t t-foreach="picking_orders_state_paid" t-as="picking">
                                        <t t-if="picking.order_source=='sale'">
                                            <tr t-att-id="picking.sale_order.id">
                                                <td>
                                                    <a t-att-href="'/page/job_list/order-view/' + str(picking.sale_order.id)">
                                                        <span t-field="picking.sale_order.name"/>
                                                    </a>
                                                </td>
                                                <td>
                                                    <span t-field="picking.picking_id.name"/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.sale_order.partner_id.name"/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.sale_order.partner_id"
                                                          t-options='{"widget": "contact", "fields": ["address"], "no_marker": True, "phone_icons": True}'/>
                                                </td>
<!--                                                <td>-->
<!--                                                    <span t-field="picking.sale_order.partner_id.phone"/>-->
<!--                                                </td>-->
                                                <td>
                                                    <span t-field="picking.distance_btn_2_loc"/>
                                                    <span>KM</span>
                                                </td>
                                                <td style="border-top:0px;" class="text-right">
                                                    <t t-set="total" t-value="0"/>
                                                    <t t-foreach="picking.picking_id.move_ids_without_package" t-as="o">
                                                        <t t-foreach="picking.sale_order.order_line" t-as="so">
                                                            <t t-if="o.product_id.id == so.product_id.id and so.tax_id">
                                                                <t t-set="total"
                                                                   t-value="total + ((o.quantity_done * so.price_unit) +
                                                            (o.quantity_done * so.price_unit * so.tax_id.amount / 100))"/>
                                                            </t>
                                                            <t t-if="o.product_id.id == so.product_id.id and not so.tax_id">
                                                                <t t-set="total"
                                                                   t-value="total + ((o.quantity_done * so.price_unit))"/>
                                                            </t>
                                                        </t>
                                                    </t>

                                                    <span t-esc="total"
                                                          t-options='{"widget": "float", "precision": 2}'/>
                                                </td>
                                                <td>
                                                    <span t-field="picking.state"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                        <script>
                            var div1 = document.getElementById("click_assigned");
                            var div2 = document.getElementById("click_accept");
                            var div3 = document.getElementById("click_picked");
                            var div4 = document.getElementById("click_paid");

                            var btnAssign = document.getElementById("assigned");
                            var btnAccept = document.getElementById("accept");
                            var btnPicked = document.getElementById("picked");
                            var btnPaid = document.getElementById("paid");

                            function assign() {
                            div1.style.display = "block";
                            div2.style.display = "none";
                            div3.style.display = "none";
                            div4.style.display = "none";

                            btnAssign.style.borderLeftColor = "#ff6600";
                            btnAccept.style.borderLeftColor = "#e7e7e7";
                            btnPicked.style.borderLeftColor = "#e7e7e7";
                            btnPaid.style.borderLeftColor = "#e7e7e7";
                            }

                            function accept() {
                            div1.style.display = "none";
                            div2.style.display = "block";
                            div3.style.display = "none";
                            div4.style.display = "none";

                            btnAssign.style.borderLeftColor = "#e7e7e7";
                            btnAccept.style.borderLeftColor = "#ff6600";
                            btnPicked.style.borderLeftColor = "#e7e7e7";
                            btnPaid.style.borderLeftColor = "#e7e7e7";
                            }

                            function picked() {
                            div1.style.display = "none";
                            div2.style.display = "none";
                            div3.style.display = "block";
                            div4.style.display = "none";

                            btnAssign.style.borderLeftColor = "#e7e7e7";
                            btnAccept.style.borderLeftColor = "#e7e7e7";
                            btnPicked.style.borderLeftColor = "#ff6600";
                            btnPaid.style.borderLeftColor = "#e7e7e7";
                            }

                            function paid() {
                            div1.style.display = "none";
                            div2.style.display = "none";
                            div3.style.display = "none";
                            div4.style.display = "block";

                            btnAssign.style.borderLeftColor = "#e7e7e7";
                            btnAccept.style.borderLeftColor = "#e7e7e7";
                            btnPicked.style.borderLeftColor = "#e7e7e7";
                            btnPaid.style.borderLeftColor = "#ff6600";
                            }

                        </script>
                        <!-- <script>
                             $(document).ready(function() {
                                  $('#assigned').click(function() {assign();});
                                  $('#accept').click(function() {accept();});
                               });
                             function assign() {
                               var div1 = document.getElementById("click_assigned");
                               var div2 = document.getElementById("click_accept");
                               var div3 = document.getElementById("click_picked");
                               var div4 = document.getElementById("click_paid");
                                 if (div1.style.display === "none") {
                                     div1.style.display = "block";
                                   } else {
                                     div2.style.display = "none";
                                     div3.style.display = "none";
                                     div4.style.display = "none";
                                   }
                             }
                            function accept() {
                               var div1 = document.getElementById("click_assigned");
                               var div2 = document.getElementById("click_accept");
                               var div3 = document.getElementById("click_picked");
                               var div4 = document.getElementById("click_paid");
                                 if (div2.style.display === "none") {
                                     div2.style.display = "block";
                                   } else {
                                     div3.style.display = "none";
                                     div4.style.display = "none";
                                     div1.style.display = "none";
                                   }
                             }

                         </script>-->
                    </div>
                </t>
            </div>
        </template>
    </data>
</odoo>