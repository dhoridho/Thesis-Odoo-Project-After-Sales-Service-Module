<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="whatsapp_res_view_form_inherit" model="ir.ui.view">
        <field name="name">whatsapp.view.form.inherit.res.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="ss_whatsapp_connector.whatsapp_res_view_form"/>
        <field name="arch" type="xml">
            <button name="contacts_whatsapp" position="attributes">
                <attribute name="invisible">1</attribute>
            </button>
        </field>
    </record>

    <!-- <record id="res_partner_kanban_view" model="ir.ui.view">
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.res_partner_kanban_view"/>
        <field name="arch" type="xml">
            <xpath expr="//div[hasclass('oe_kanban_global_click')]/t/div[hasclass('o_kanban_image_fill_left')]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//div[hasclass('oe_kanban_global_click')]/t/div[hasclass('o_kanban_image')]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//div[hasclass('oe_kanban_global_click')]/t[2]/div[hasclass('o_kanban_image_fill_left')]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='type']" position="after">
                <field name="is_customer"/>
                <field name='company_type'/>
                <field name="customer_rank"/>
            </xpath>
            <xpath expr="//div[hasclass('oe_kanban_details')]" position="before">
                <t t-if="record.is_customer.raw_value">
                    <t t-if="record.is_customer.raw_value and record.company_type.raw_value == 'company'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image1.png'"/>
                    <t t-elif="record.is_customer.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'contact'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image2.png'"/>
                    <t t-elif="record.is_customer.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'invoice'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image3.png'"/>
                    <t t-elif="record.is_customer.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'delivery'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image4.png'"/>
                    <t t-elif="record.is_customer.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'other'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image5.png'"/>
                    <t t-elif="record.is_customer.raw_value and record.company_type.raw_value == 'person' and (record.type.raw_value == 'private' or record.type.raw_value == 'pic')" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image6.png'"/>
                    <t t-else="">
                        <t t-if="record.is_company.raw_value" t-set="placeholder" t-value="'/base/static/img/company_image.png'"/>
                        <t t-else="" t-set="placeholder" t-value="'/base/static/img/avatar_grey.png'"/>
                    </t>
                    <div class="o_kanban_image_fill_left d-none d-md-block" t-attf-style="background-image:url('#{kanban_image('res.partner', 'image_128', record.id.raw_value,  placeholder)}')">
                        <img class="o_kanban_image_inner_pic" t-if="record.parent_id.raw_value" t-att-alt="record.parent_id.value" t-att-src="kanban_image('res.partner', 'image_128', record.parent_id.raw_value)"/>
                    </div>
                    <div class="o_kanban_image d-md-none" t-attf-style="background-image:url('#{kanban_image('res.partner', 'image_128', record.id.raw_value,  placeholder)}')">
                        <img class="o_kanban_image_inner_pic" t-if="record.parent_id.raw_value" t-att-alt="record.parent_id.value" t-att-src="kanban_image('res.partner', 'image_128', record.parent_id.raw_value)"/>
                    </div>
                </t>
            </xpath>
        </field>
    </record> -->

    <record id="res_partner_form_view_inherit" model="ir.ui.view">
        <field name="name">res.partner.acrux.chat.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="acrux_chat_sale.res_partner_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@groups='acrux_chat.group_chat_basic_extra']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>
    
    <record id="res_partner_view_buttons_inherit" model="ir.ui.view">
            <field name="name">res.partner.view.buttons.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="sale.res_partner_view_buttons"/>
            <field name="arch" type="xml">
                <button name="%(sale.act_res_partner_2_sale_order)d" position="attributes">
                    <attribute name="invisible">1</attribute>
                </button>
                <div name="button_box" position="inside">
                    <button class="oe_stat_button" type="action" name="%(sale.act_res_partner_2_sale_order)d" 
                        groups="sales_team.group_sale_salesman"
                        icon="o-hm-smart-crm-sales">
                        <field string="Sales" name="sale_order_count" widget="statinfo"/>
                    </button>
                </div>
            </field>
    </record>

    <record id="view_form_res_partner_inherit_new" model="ir.ui.view">
        <field name="name">res.partner.view.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="equip3_hashmicro_ui.view_form_res_partner_inherit_new_column"/>
        <field name="arch" type="xml">
            <xpath expr="//group/div/div/div/group/field[@name='vat']" position="after">
                <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}" attrs="{'readonly': [('parent_id', '!=', False)]}" force_save="1" readonly="1"/>
                <field name="related_company_id"/>
                <field name="branch_id"/>
            </xpath>
            <xpath expr="//group/div/div/div[@name='col_2']/group/field[@name='user_ids']" position="after">
                <field name="contact_ids" widget="many2many_tags" readonly="1"/>
            </xpath>
        </field>
    </record>

    <record id="view_form_res_partner_inherit" model="ir.ui.view">
        <field name="name">res.partner.view.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
<!--            <field name="branch_id" position="before">-->
<!--                <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}" attrs="{'readonly': [('parent_id', '!=', False)]}" force_save="1" readonly="1"/>-->
<!--            </field>-->
            <xpath expr="//h1" position="after">
                <field name="customer_rank" invisible="1"/>
                <div class='d-flex' attrs="{'invisible': ['|', ('customer_rank', '=', 0), ('id', '=', False)]}">
                    <span>Customer ID : </span>
                    <field name="customer_sequence" />
                </div>
            </xpath>
            <xpath expr="//field[@name='child_ids']/kanban//div[hasclass('o_kanban_image')]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='child_ids']//kanban//field[@name='display_name']" position="after"
                >
                <field name="is_customer"/>
                <field name='company_type'/>
                <field name="customer_rank"/>
            </xpath>
            <xpath expr="//field[@name='child_ids']/kanban//div[hasclass('o_kanban_image')]" position="after">
                <div class="o_kanban_image" t-if="record.is_customer.raw_value or record.customer_rank.raw_value">
                    <t t-if="record.is_customer.raw_value and record.company_type.raw_value == 'company'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image1.png'"/>
                    <t t-elif="record.is_customer.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'contact'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image2.png'"/>
                    <t t-elif="record.is_customer.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'invoice'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image3.png'"/>
                    <t t-elif="record.is_customer.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'delivery'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image4.png'"/>
                    <t t-elif="record.is_customer.raw_value and record.company_type.raw_value == 'person' and record.type.raw_value == 'other'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image5.png'"/>
                    <t t-elif="record.is_customer.raw_value and record.company_type.raw_value == 'person' and (record.type.raw_value == 'private' or record.type.raw_value == 'pic')" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image6.png'"/>
                    <t t-else="" t-set="placeholder" t-value="'/base/static/img/avatar_grey.png'"/>
                    <img alt="Avatar" t-att-src="placeholder"/>
                </div>
            </xpath>
            <xpath expr="//field[@name='property_payment_term_id']" position="before">
                <field name="debtor_id" />
            </xpath>
            <xpath expr="//page[@name='sales_purchases']/group/group/field[@name='user_id']" position="before">
                <label for="is_customer" string="Is a Customer"/>
                <field name="is_customer" invisible="0" nolabel="1" context="{'default_is_customer': True}" />
                <field name="customer_creation_date" force_save='1'/>
            </xpath>
            <!-- <xpath expr="//form/sheet/notebook/page[@name='sales_purchases'] /group/group[@name='purchase']/field[@name='property_supplier_payment_term_id']" position="before">
                <field name="vendor_creation_date"/>
            </xpath> -->
            <xpath expr="//page[@name='sales_purchases']/group/group/field[@name='company_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//group[@name='sale']/field[@name='user_id']" position="after">
                <field name="is_limit_salesperson"/>
            </xpath>
<!--            <xpath expr="//group/div/div/div/group/div[@class='o_address_format']/field[@name='city']" position="attributes">-->
<!--                <attribute name="invisible">1</attribute>-->
<!--            </xpath>-->
<!--            <xpath expr="//group/div/div/div/group/div[@class='o_address_format']/field[@name='city']" position="after">-->
<!--                <field name="res_city_id" placeholder="City" class="o_address_city" attrs="{'readonly': [('type', '=', 'contact'),('parent_id', '!=', False)]}"/>-->
<!--            </xpath>-->
            <xpath expr="//field[@name='child_ids']" position="attributes">
                <!-- Add your fields here -->
<!--                <attribute name="context">{'default_parent_id': active_id, 'default_street': street, 'default_street2': street2, 'default_res_city_id': res_city_id, 'default_state_id': state_id, 'default_zip': zip, 'default_country_id': country_id, 'default_lang': None, 'default_user_id': user_id, 'default_type': 'other', 'default_is_vendor':1}</attribute>-->
            </xpath>
            <xpath expr="//field[@name='child_ids']/form/sheet/group/group/div/div[@class='o_address_format']/field[@name='city']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='child_ids']/form/sheet/group/group/div/div[@class='o_address_format']/field[@name='city']" position="after">
                <field name="res_city_id" placeholder="City" class="o_address_city" attrs="{'readonly': [('type', '=', 'contact'),('parent_id', '!=', False)]}"/>
            </xpath>
        </field>
    </record>

    <record id="res_partner_tree_view" model="ir.ui.view">
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='display_name']" position="before">
                <field name="customer_sequence" invisible="context.get('default_supplier_rank')"/>
            </xpath>
            <xpath expr="//field[@name='company_id']" position="before">
                <field name="branch_id"/>
            </xpath>
        </field>
    </record>

    <record id="view_partner_property_form_inherit" model="ir.ui.view">
        <field name="name">view.partner.property.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="product.view_partner_property_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='property_product_pricelist']" position="after">
                <field name="customer_category"/>
            </xpath>
        </field>
    </record>

    <record id="account.res_partner_action_customer" model="ir.actions.act_window">
        <field name="context">{'search_default_customer': 1,'res_partner_search_mode': 'customer', 'default_is_company': True, 'default_customer_rank': 1, 'default_is_customer': True, 'default_company_id': allowed_company_ids[0]}</field>
        <field name="domain">[('is_customer', '=', True)]</field>
    </record>
    
    <record id="res_partner_view_search_inherit_customer_filter" model="ir.ui.view">
        <field name="name">res.partner.view.search.inherit.customer.filter</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="account.res_partner_view_search"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='customer']" position="replace">
                <filter string="Is a Customer" name="customer" domain="[('is_customer','=', True)]"/>
            </xpath>
        </field>
    </record>

    <record id="partner_search_inherit" model="ir.ui.view">
        <field name="name">res.partner.search.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_res_partner_filter" />
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='group_company']" position="replace">
                <filter name="company_id" string="Company" context="{'group_by': 'company_id'}"/>
            </xpath>
        </field>
    </record>

    <record id="equip_res_partner_kanban_view" model="ir.ui.view">
        <field name="name">res.partner.kanban</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="equip3_kanban_view.equip_res_partner_kanban_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='type']" position="after">
                <field name="is_customer"/>
                <field name='company_type'/>
            </xpath>

            <xpath expr="//div[hasclass('o_equip_kanban_image')]/t[@t-if='!record.is_company.raw_value']//t[@t-else]" position="after">
                <t t-if="record.is_company.raw_value" t-set="placeholder" t-value="'/base/static/img/company_image.png'"/>
                <t t-else="" t-set="placeholder" t-value="'/base/static/img/avatar_grey.png'"/>
            </xpath>
            
            <xpath expr="//div[hasclass('o_equip_kanban_image')]//t[@t-if='!record.is_company.raw_value']//div[hasclass('o_kanban_image_fill_left')]" position="before">
                <t t-if="record.is_customer.raw_value">
                    <t t-if="record.type.raw_value == 'contact'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image2.png'"/>
                    <t t-elif="record.type.raw_value == 'invoice'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image3.png'"/>
                    <t t-elif="record.type.raw_value == 'delivery'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image4.png'"/>
                    <t t-elif="record.type.raw_value == 'other'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image5.png'"/>
                    <t t-elif="record.type.raw_value == 'private' or record.type.raw_value == 'pic'" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image6.png'"/>
                </t>
            </xpath>

            <xpath expr="//div[hasclass('o_equip_kanban_image')]//t[@t-else]//div[hasclass('o_kanban_image_fill_left')]" position="before">
                <t t-if="record.is_customer.raw_value" t-set="placeholder" t-value="'/equip3_sale_masterdata/static/src/image/cust_image1.png'"/>
            </xpath>
        </field>
    </record>

</odoo>