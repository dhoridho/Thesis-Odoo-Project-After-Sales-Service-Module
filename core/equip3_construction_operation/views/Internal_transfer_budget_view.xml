<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_change_budget_request_menu_tree" model="ir.ui.view">
            <field name="name">internal.transfer.budget.menu.tree</field>
            <field name="model">internal.transfer.budget</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="active" invisible="1"/>
                    <field name="name"/>
                    <field name="project_id"/>
                    <field name="job_sheet_id"/>
                    <field name="project_budget"/>
                    <field name="create_date"/>
                    <field name="create_by"/>
                    <field name="state"
                           widget="badge"
                           decoration-secondary="state == 'draft'"
                           decoration-warning3="state == 'to_approve'"
                           decoration-success2="state == 'approved'"
                           decoration-success="state == 'done'"
                           decoration-danger="state == 'reject'"
                           decoration-danger2="state == 'cancel'"
                           />
                </tree> 
            </field>
        </record>
        
        <record id="view_project_budget_transfer_tree" model="ir.ui.view">
            <field name="name">project.budget.transfer.menu.tree</field>
            <field name="model">internal.transfer.budget</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="active" invisible="1"/>
                    <field name="name"/>
                    <field name="project_id"/>
                    <field name="dest_project_id"/>
                    <field name="send_amt"/>
                    <field name="create_date"/>
                    <field name="create_by"/>
                    <field name="state"
                           widget="badge"
                           decoration-secondary="state == 'draft'"
                           decoration-warning3="state == 'to_approve'"
                           decoration-success2="state == 'approved'"
                           decoration-success="state == 'done'"
                           decoration-danger="state == 'reject'"
                           decoration-danger2="state == 'cancel'"
                           />
                </tree> 
            </field>
        </record>

        <record id="create_request_form" model="ir.ui.view">
            <field name="name">create_internal_transfer_budget</field>
            <field name="model">internal.transfer.budget</field>
            <field name="arch" type="xml">
                <form string="Create Internal Transfer Budget">
                    <header>
                        <!--Budget Change Request-->
                        <button string="Confirm" id='confirm1_BCR' name="confirm" type="object" class="btn-primary" attrs="{'invisible': ['|','|','|', ('state', '!=', 'draft'), ('is_change_request_approval_matrix','=',True), ('is_project_transfer','=',True), ('is_change_allocation','=',True),]}"/>
                        <button string="Confirm" id='confirm2_BCR' name="confirm" type="object" class="btn-primary" attrs="{'invisible': ['|','|','|', ('state', '!=', 'approved'), ('is_change_request_approval_matrix','=',False), ('is_project_transfer','=',True), ('is_change_allocation','=',True),]}"/>
                        <button string="Request for Approval" name="request_approval" type="object" class="btn-primary" attrs="{'invisible': ['|','|','|', ('state', '!=', 'draft'), ('is_change_request_approval_matrix','=',False), ('is_project_transfer','=',True), ('is_change_allocation','=',True)]}"/>
                        <button string="Approve" name="approve" type="object" class="btn-primary" attrs="{'invisible': ['|','|','|','|', ('state', '!=', 'to_approve'), ('is_approver', '=', False),('is_change_request_approval_matrix','=',False), ('is_project_transfer','=',True), ('is_change_allocation','=',True)]}"/>
                        <button string="Reject" name="reject" type="object" attrs="{'invisible': ['|','|','|','|', ('state', '!=', 'to_approve'), ('is_approver', '=', False),('is_change_request_approval_matrix','=',False), ('is_project_transfer','=',True), ('is_change_allocation','=',True)]}"/>

                        <field name="state" widget="statusbar" statusbar_visible="draft,done" attrs="{'invisible': ['|','|','|', ('state', 'in', ['reject','cancel']), ('is_change_request_approval_matrix', '=', True), ('is_project_transfer','=',True), ('is_change_allocation','=',True)]}"/>
                        <field name="state1" widget="statusbar" statusbar_visible="draft,approved,done" attrs="{'invisible': ['|','|','|', ('state', 'in', ['reject','cancel']), ('is_change_request_approval_matrix', '=', False), ('is_project_transfer','=',True), ('is_change_allocation','=',True)]}"/>
                        <field name="state2" widget="statusbar" statusbar_visible="draft,reject" attrs="{'invisible': ['|','|','|', ('state', '!=', 'reject'), ('is_change_request_approval_matrix', '=', False), ('is_project_transfer','=',True), ('is_change_allocation','=',True)]}"/>

                        <!--Change Allocation Request-->
                        <button string="Confirm" id='confirm1_CAB' name="confirm" type="object" class="btn-primary" attrs="{'invisible': ['|','|', ('state', '!=', 'draft'), ('is_change_allocation','=',False), ('is_asset_allocation_approval_matrix','=',True)]}"/>
                        <button string="Confirm" id='confirm2_CAB' name="confirm" type="object" class="btn-primary" attrs="{'invisible': ['|','|', ('state', '!=', 'approved'), ('is_change_allocation','=',False), ('is_asset_allocation_approval_matrix','=',False)]}"/>
                        <button string="Request for Approval" name="request_approval" type="object" class="btn-primary" attrs="{'invisible': ['|','|', ('state', '!=', 'draft'), ('is_change_allocation','=',False), ('is_asset_allocation_approval_matrix','=',False)]}"/>
                        <button string="Approve" name="approve" type="object" class="btn-primary" attrs="{'invisible': ['|','|','|', ('state', '!=', 'to_approve'), ('is_approver', '=', False), ('is_change_allocation','=',False), ('is_asset_allocation_approval_matrix','=',False)]}"/>
                        <button string="Reject" name="reject" type="object" attrs="{'invisible': ['|','|','|', ('state', '!=', 'to_approve'), ('is_approver', '=', False), ('is_change_allocation','=',False), ('is_asset_allocation_approval_matrix','=',False)]}"/>

                        <field name="state" widget="statusbar" statusbar_visible="draft,done" attrs="{'invisible': ['|','|', ('state', 'in', ['reject','cancel']), ('is_change_allocation','=',False), ('is_asset_allocation_approval_matrix','=',True)]}"/>
                        <field name="state1" widget="statusbar" statusbar_visible="draft,approved,done" attrs="{'invisible': ['|','|', ('state', 'in', ['reject','cancel']), ('is_change_allocation','=',False), ('is_asset_allocation_approval_matrix','=',False)]}"/>
                        <field name="state2" widget="statusbar" statusbar_visible="draft,reject" attrs="{'invisible': ['|','|', ('state', '!=', 'reject'), ('is_change_allocation','=',False), ('is_asset_allocation_approval_matrix','=',False)]}"/>

                        <!--Project Budget Transfer-->
                        <button string="Confirm" id='confirm1_PBT' name="confirm" type="object" class="btn-primary" attrs="{'invisible': ['|','|', ('state', '!=', 'draft'), ('is_project_transfer','=',False), ('is_project_transfer_approval_matrix','=',True)]}"/>
                        <button string="Confirm" id='confirm2_PBT' name="confirm" type="object" class="btn-primary" attrs="{'invisible': ['|','|', ('state', '!=', 'approved'), ('is_project_transfer','=',False), ('is_project_transfer_approval_matrix','=',False)]}"/>
                        <button string="Request for Approval" name="request_approval" type="object" class="btn-primary" attrs="{'invisible': ['|','|', ('state', '!=', 'draft'), ('is_project_transfer','=',False), ('is_project_transfer_approval_matrix','=',False)]}"/>
                        <button string="Approve" name="approve" type="object" class="btn-primary" attrs="{'invisible': ['|','|','|', ('state', '!=', 'to_approve'), ('is_approver', '=', False),('is_project_transfer','=',False), ('is_project_transfer_approval_matrix','=',False)]}"/>
                        <button string="Reject" name="reject" type="object" attrs="{'invisible': ['|','|','|', ('state', '!=', 'to_approve'), ('is_approver', '=', False),('is_project_transfer','=',False), ('is_project_transfer_approval_matrix','=',False)]}"/>

                        <field name="state" widget="statusbar" statusbar_visible="draft,done" attrs="{'invisible': ['|','|', ('state', 'in', ['reject','cancel']), ('is_project_transfer','=',False), ('is_project_transfer_approval_matrix','=',True)]}"/>
                        <field name="state1" widget="statusbar" statusbar_visible="draft,approved,done" attrs="{'invisible': ['|','|', ('state', 'in', ['reject','cancel']), ('is_project_transfer','=',False), ('is_project_transfer_approval_matrix','=',False)]}"/>
                        <field name="state2" widget="statusbar" statusbar_visible="draft,reject" attrs="{'invisible': ['|','|', ('state', '!=', 'reject'), ('is_project_transfer','=',False), ('is_project_transfer_approval_matrix','=',False)]}"/>


                        <button string="Create Budget Change Request" name="create_budget_bud_change_request" type="object" class="btn-secondary"
                                attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('is_project_transfer', '=', False)]}"/>
                        <button string="Cancel" name="cancel_record" type="object" 
                                confirm="Are you sure you want to cancel this record?"
                                attrs="{'invisible': [('state', '!=', 'approved')]}"/>

                        <field name="state3" widget="statusbar" statusbar_visible="draft,cancelled" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" />
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="active" invisible="1"/>
                                <field name="project_id" required="1" 
                                       options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}"/>
                                <field name="job_sheet_id" required="1" readonly="1" force_save="1"/>
                                <field name="budgeting_method" readonly="1"/>
                                <field name="budgeting_period" invisible="1"/>
                                <!-- For change allocation -->
                                <field name="project_budget" domain="[('project_id', '=', project_id),('state', '=', 'in_progress')]"
                                       options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}"
                                       attrs="{'required': [('is_change_allocation', '=', True)], 'invisible': [('is_change_allocation', '=', False)]}"/>
                                <!-- For budget change/project transfer -->
                                <field name="project_budget" 
                                       options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}"
                                       attrs="{'required': [('budgeting_period', 'in', ('monthly', 'custom')), ('is_project_transfer', '=', False)], 'invisible': ['|','|', ('budgeting_period', 'not in', ('monthly', 'custom')), ('is_project_transfer', '=', True), ('is_change_allocation', '=', True)]}"/>
                                <field name="dest_project_id" 
                                       options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}"
                                       domain="[('primary_states', '=', 'progress')]" 
                                       attrs="{'required': [('is_project_transfer', '=', True)], 'invisible': [('is_project_transfer', '=', False)]}"/>
                                <field name="dest_job_sheet_id" 
                                       attrs="{'required': [('is_project_transfer', '=', True)], 'invisible': [('is_project_transfer', '=', False)]}" 
                                       readonly="1" force_save="1"/>
                                <field name="free_amt" widget='monetary' options="{'currency_field': 'currency_id'}" readonly="1" attrs="{'invisible': ['|', ('state', '=', 'done') ,('is_change_allocation', '=', True)]}"/>
                                <field name="send_amt" widget='monetary' options="{'currency_field': 'currency_id'}" attrs="{'required': [('is_project_transfer', '=', True)], 'invisible': [('is_project_transfer', '=', False)]}"/>
                                <field name="is_continue_over_budget" invisible="1"/>
                            </group>
                            <group>
                                <field name="approve_date" readonly="1" invisible="1"/>
                                <field name="company_currency_id" readonly="1"/>
                                <field name="department_type" invisible="1"/>
                                <field name="company_id" readonly="1"/>
                                <field name="branch_id" required="1" force_save='1'/>
                                <field name="create_uid" string='Created By'/>
                                <field name="create_date" string='Creation Date'/>
                                <field name="project_scope_computed" widget="many2many_tags" invisible="1"/>
                                <field name="is_project_transfer" force_save='1' invisible="1"/>
                                <field name="is_project_budget" force_save='1' invisible="1"/>
                                <field name="is_budget_transfer" force_save='1' invisible="1"/>
                                <field name="is_change_request_approval_matrix"  invisible="1"/>
                                <field name="is_project_transfer_approval_matrix" invisible="1"/>
                                <field name="is_asset_allocation_approval_matrix" invisible="1"/>
                                <field name="is_change_allocation" invisible="1"/>
                                <field name="user_is_approver" invisible="1"/>
                                <field name="is_approval_matrix_filled" invisible="1"/>
                                <field name="approval_matrix_line_id" invisible="1"/>
                                <field name="approvers_ids" widget="many2many_tags" invisible="1"/>
                                <field name="approved_user_ids" widget="many2many_tags" invisible="1" readonly="0"/>
                                <field name="is_approver" invisible="1"/>
                                <field name="approved_user_text" invisible="1"/>
                                <field name="approved_user" invisible="1" readonly="0"/>
                                <field name="employee_id" invisible="1"/>
                                <field name="feedback_parent" invisible="1"/>
                                
                            </group>
                        </group>    
                        <group>
                            <div class="oe_inline">
                                <p role="alert"
                                    class="alert alert-info alert-dismissible rounded-0 fade show d-print-none css_editable_mode_hidden"
                                    style="font-family: inherit; font-size: 16px !important; color:inherit" >
                                    <span class="fa fa-info-circle"></span> You can input negative value for decreasing quantities (ex: -32, -1.2), or just input number for increasing quantities (ex: 32, 1.2). For unit price, just input the desired price (ex: 300, 20000)
                                </p>
                            </div>
                        </group>    
                        <notebook>
                            <page name="itb_change_line_ids" string="Change Line" attrs="{'invisible': [('is_project_transfer', '=', True)]}">
                                <field name="itb_change_line_ids" widget="one2many_list" class="o_itb_change_line_ids" force_save="1">
                                    <tree create="0" delete='false'>
                                        <field name="sr_no" force_save="1"/>
                                        <field name="type" force_save="1"/>
                                        <field name="project_scope" force_save="1" options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="section_name" force_save="1" options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="variable_ref" force_save="1" invisible='1'/>
                                        <field name="overhead_catagory" force_save="1"/>
                                        <field name="asset_category_id" force_save="1"/>
                                        <field name="group_of_product" force_save="1"/>
                                        <field name="asset_id" force_save="1"/>
                                        <field name="product_id" force_save="1"/>
                                        <field name="variable" force_save="1" string='Job Subcon'/>
                                        <field name="description" force_save="1"/>
                                        <field name="bfr_qty" force_save="1"/>
                                        <field name="bfr_time" force_save="1"/>
                                        <field name="bfr_contractors" force_save="1"/>
                                        <field name="bfr_unit_price" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="bfr_amt" force_save="1"/>
                                        <field name="uom_id" force_save="1"/>
                                        <field name="aft_qty" force_save="1"/>
                                        <field name="aft_time" force_save="1"/>
                                        <field name="aft_contractors" force_save="1"/>
                                        <field name="aft_unit_price" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="aft_amt" force_save="1"/>
                                        <field name="adj_qty" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="adj_time" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="adj_contractors" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="free_amt" force_save="1"/>
                                        <field name="is_newly_added_product" force_save="1" optional="hide"/>
                                        <field name="is_not_from_cost_sheet" optional="hide"/>
                                        <button type="object" name="revert_itb_change_line_ids" string="Revert" class="oe_edit_only btn btn-secondary p-2" />
                                    </tree>
                                    <form>
                                        <group>
                                            <field name="type" force_save="1" readonly="1"/>
                                            <field name="project_scope" force_save="1" readonly="1" options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                            <field name="section_name" force_save="1" readonly="1" options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                            <field name="variable_ref" force_save="1" invisible='1'/>
                                            <field name="group_of_product" force_save="1" readonly="1"/>
                                            <field name="product_id" force_save="1" readonly="1"/>
                                            <field name="variable" force_save="1" readonly="1"/>
                                            <field name="description" force_save="1" readonly="1"/>
                                            <field name="project_budget" widget="many2many_tags" force_save="1" readonly="1"/>
                                        </group>
                                        <notebook>
                                            <page name="project_budget_ids" string="Project Budget">
                                                <field name="project_budget_ids" widget="one2many_list" force_save="1">
                                                    <tree editable='bottom' create="0">
                                                        <field name="sequence" force_save="1" invisible="1"/>
                                                        <field name="sr_no" force_save="1"/>
                                                        <field name="project_budget" force_save="1" optional="hide"/>
                                                        <field name="bd_material_id" force_save="1" optional="hide"/>
                                                        <field name="bd_labour_id" force_save="1" optional="hide"/>
                                                        <field name="bd_overhead_id" force_save="1" optional="hide"/>
                                                        <field name="bd_equipment_id" force_save="1" optional="hide"/>
                                                        <field name="bd_subcon_id" force_save="1" optional="hide"/>
                                                        <field name="month" force_save="1"/>
                                                        <field name="bfr_qty" force_save="1" sum="Total"/>
                                                        <field name="aft_qty" force_save="1" sum="Total"/>
                                                    </tree>
                                                </field>
                                            </page>
                                        </notebook>
                                    </form>
                                </field>
                            </page>

                            <page name="itb_project_scope_ids" string="Project Scope" attrs="{'invisible': ['|', ('is_project_transfer', '=', True), ('is_change_allocation', '=', True)],}">
                                <field name="itb_project_scope_ids" widget="one2many_list" class="o_itb_material_line_ids" attrs="{'readonly': [('state', '!=', 'draft')],}">
                                    <tree editable='bottom'>
                                        <control>
                                            <create name="add_product_control" string="Add Scope"/>
                                        </control>
                                        <field name="sr_no"/>
                                        <field name="project_scope_id" force_save="1" required="1"
                                            attrs="{'readonly': [('is_generated', '=', True)]}"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="is_generated" readonly="1" force_save="1" optional="hide"/>
                                        <field name="itb_id" invisible="1"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="itb_section_ids" string="Section" attrs="{'invisible': ['|', ('is_project_transfer', '=', True), ('is_change_allocation', '=', True)],}">
                                <field name="itb_section_ids" widget="one2many_list" class="o_itb_material_line_ids" attrs="{'readonly': [('state', '!=', 'draft')],}">
                                    <tree editable='bottom'>
                                        <control>
                                            <create name="add_product_control" string="Add Section"/>
                                        </control>
                                        <field name="sr_no"/>
                                        <field name="project_scope_id" force_save="1" required="1"
                                            attrs="{'readonly': [('is_generated', '=', True)]}"
                                            domain="[('id','in',parent.project_scope_computed)]"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="section_id" force_save="1" required="1"
                                            attrs="{'readonly': [('is_generated', '=', True)]}"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="is_generated" readonly="1" force_save="1" optional="hide"/>
                                        <field name="itb_id" invisible="1"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="itb_material_line_ids" string="Material" attrs="{'invisible': [('is_project_transfer', '=', True)],}">
                                <field name="itb_material_line_ids" domain="[('is_delete', '=', False)]" widget="one2many_list" class="o_itb_material_line_ids" attrs="{'readonly': [('state', '!=', 'draft')],}">
                                    <tree editable='bottom'>
                                        <control>
                                            <create name="add_product_control" string="Add Product"/>
                                        </control>
                                        <field name="sr_no"/>
                                        <field name="cs_material_id" optional="hide" force_save="1"/>
                                        <field name="bd_material_id" optional="hide" force_save="1"/>
                                        <field name="project_scope" force_save="1" required="1"
                                            attrs="{'readonly': [('cs_material_id', '!=', False)]}"
                                            domain="[('id','in',parent.project_scope_computed)]"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="project_section_computed" widget="many2many_tags" invisible="1"/>
                                        <field name="section_name" force_save="1" required="1"
                                            domain="[('id','in',project_section_computed)]"
                                            attrs="{'readonly': ['|', ('project_scope', '=', False), ('cs_material_id', '!=', False)]}"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="variable_ref" force_save="1" invisible='1'/>
                                        <field name="group_of_product" force_save="1" required="1"
                                            attrs="{'readonly': ['|', ('section_name', '=', False), ('cs_material_id', '!=', False)]}"/>
                                        <field name="product_id" force_save="1" required="1"
                                            attrs="{'readonly': ['|', ('section_name', '=', False), ('cs_material_id', '!=', False)]}"/>
                                        <field name="description" readonly="1" force_save="1" invisible='1'/>
                                        <field name="cur_qty" readonly="1" force_save="1"/>
                                        <field name="adj_qty"/>
                                        <field name="unallocated_qty" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="unallocated_amt" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cal_qty" invisible="1" force_save="1"/>
                                        <field name="cal_cs_qty" invisible="1" force_save="1"/>
                                        <field name="uom_id" readonly="1" force_save="1"/>
                                        <field name="adj_unallocated_qty" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="adj_unallocated_amt" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cur_unit_price" readonly="1" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="adj_unit_price" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="cur_amt" readonly="1" force_save="1" optional="hide"/>
                                        <field name="adj_amt" readonly="1" optional="hide"/>
                                        <field name="adjusted" readonly="1" force_save="1"/>
                                        <field name="is_delete" invisible="1"/>
                                        <field name="is_newly_added_product" optional="hide"/>
                                        <field name="is_change_allocation" invisible="1"/>
                                        <field name="is_generated" optional="hide"/>
                                        <field name="is_not_from_cost_sheet" optional="hide"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="itb_labour_line_ids" string="Labour" attrs="{'invisible': [('is_project_transfer', '=', True)]}">
                                <field name="itb_labour_line_ids" domain="[('is_delete', '=', False)]" widget="one2many_list" class="o_itb_labour_line_ids" attrs="{'readonly': [('state', '!=', 'draft')],}">
                                    <tree editable='bottom'>
                                        <control>
                                            <create name="add_product_control" string="Add Product"/>
                                        </control>
                                        <field name="sr_no"/>
                                        <field name="cs_labour_id" optional="hide" force_save="1"/>
                                        <field name="bd_labour_id" optional="hide" force_save="1"/>
                                        <field name="project_scope" force_save="1" required="1"
                                            attrs="{'readonly': [('cs_labour_id', '!=', False)]}"
                                            domain="[('id','in',parent.project_scope_computed)]"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="project_section_computed" widget="many2many_tags" invisible="1"/>
                                        <field name="section_name" force_save="1" required="1"
                                            domain="[('id','in',project_section_computed)]"
                                            attrs="{'readonly': ['|', ('project_scope', '=', False), ('cs_labour_id', '!=', False)]}"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="variable_ref" force_save="1" invisible='1'/>
                                        <field name="group_of_product" force_save="1" required="1"
                                            attrs="{'readonly': ['|', ('section_name', '=', False), ('cs_labour_id', '!=', False)]}"/>
                                        <field name="product_id" force_save="1" required="1"
                                            attrs="{'readonly': ['|', ('section_name', '=', False), ('cs_labour_id', '!=', False)]}"/>
                                        <field name="description" readonly="1" force_save="1" invisible='1'/>
                                        <field name="cur_qty" readonly="1" force_save="1" invisible="1"/>
                                        <field name="cur_contractors" readonly="1" force_save="1"/>
                                        <field name="adj_contractors"/>
                                        <field name="cur_time" readonly="1" force_save="1"/>
                                        <field name="adj_time"/>
                                        <field name="adj_qty" invisible="1"/>
                                        <field name="unallocated_contractors" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="unallocated_time" readonly="1" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="unallocated_qty" readonly="1"  force_save="1" invisible="1"/>
                                        <field name="unallocated_amt" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cal_time" invisible="1" force_save="1"/>
                                        <field name="cal_cs_time" invisible="1" force_save="1"/>
                                        <field name="cal_contractors" invisible="1" force_save="1"/>
                                        <field name="cal_cs_contractors" invisible="1" force_save="1"/>
                                        <field name="cal_qty" invisible="1" force_save="1"/>
                                        <field name="cal_cs_qty" invisible="1" force_save="1"/>
                                        <field name="uom_id" readonly="1" force_save="1"/>
                                        <field name="adj_unallocated_contractors" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="adj_unallocated_time" force_save="1" invisible="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="adj_unallocated_qty" force_save="1" invisible="1"/>
                                        <field name="adj_unallocated_amt" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cur_unit_price" readonly="1" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="adj_unit_price" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="cur_amt" readonly="1" force_save="1" optional="hide"/>
                                        <field name="adj_amt" readonly="1" optional="hide"/>
                                        <field name="adjusted" readonly="1" force_save="1"/>
                                        <field name="is_delete" invisible="1"/>
                                        <field name="is_newly_added_product" optional="hide"/>
                                        <field name="is_change_allocation" invisible="1"/>
                                        <field name="is_generated" optional="hide"/>
                                        <field name="is_not_from_cost_sheet" optional="hide"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="itb_overhead_line_ids" string="Overhead" attrs="{'invisible': [('is_project_transfer', '=', True)]}">
                                <field name="itb_overhead_line_ids" domain="[('is_delete', '=', False)]" widget="one2many_list" class="o_itb_overhead_line_ids" attrs="{'readonly': [('state', '!=', 'draft')],}">
                                    <tree editable='bottom'>
                                        <control>
                                            <create name="add_product_control" string="Add Product"/>
                                        </control>
                                        <field name="sr_no"/>
                                        <field name="cs_overhead_id" optional="hide" force_save="1"/>
                                        <field name="bd_overhead_id" optional="hide" force_save="1"/>
                                        <field name="project_scope" force_save="1" required="1"
                                            domain="[('id','in',parent.project_scope_computed)]"
                                            attrs="{'readonly': [('cs_overhead_id', '!=', False)]}"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="project_section_computed" widget="many2many_tags" invisible="1"/>
                                        <field name="section_name" force_save="1" required="1"
                                            domain="[('id','in',project_section_computed)]"
                                            attrs="{'readonly': ['|', ('project_scope', '=', False), ('cs_overhead_id', '!=', False)]}"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="variable_ref" force_save="1" invisible='1'/>
                                        <field name="overhead_catagory" force_save="1" required="1"/>
                                        <field name="group_of_product" force_save="1" required="1"
                                            attrs="{'readonly': ['|', ('section_name', '=', False), ('cs_overhead_id', '!=', False)]}"/>
                                        <field name="product_id" force_save="1" required="1"
                                            attrs="{'readonly': ['|', ('section_name', '=', False), ('cs_overhead_id', '!=', False)]}"/>
                                        <field name="description" readonly="1" force_save="1" invisible='1'/>
                                        <field name="cur_qty" readonly="1" force_save="1"/>
                                        <field name="adj_qty"/>
                                        <field name="unallocated_qty" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="unallocated_amt" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cal_qty" invisible="1" force_save="1"/>
                                        <field name="cal_cs_qty" invisible="1" force_save="1"/>
                                        <field name="uom_id" readonly="1" force_save="1"/>
                                        <field name="adj_unallocated_qty" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="adj_unallocated_amt" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cur_unit_price" readonly="1" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="adj_unit_price" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="cur_amt" readonly="1" force_save="1" optional="hide"/>
                                        <field name="adj_amt" readonly="1" optional="hide"/>
                                        <field name="adjusted" readonly="1" force_save="1"/>
                                        <field name="is_delete" invisible="1"/>
                                        <field name="is_newly_added_product" optional="hide"/>
                                        <field name="is_change_allocation" invisible="1"/>
                                        <field name="is_generated" optional="hide"/>
                                        <field name="is_not_from_cost_sheet" optional="hide"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="itb_internal_asset_line_ids" string="Internal Asset" attrs="{'invisible': [('is_project_transfer', '=', True)]}">
                                <field name="itb_internal_asset_line_ids" domain="[('is_delete', '=', False)]" widget="one2many_list" class="o_itb_internal_asset_line_ids" attrs="{'readonly': [('state', '!=', 'draft')],}">
                                    <tree editable='bottom'>
                                        <control>
                                            <create name="add_product_control" string="Add Product"/>
                                        </control>
                                        <field name="sr_no"/>
                                        <field name="cs_asset_id" optional="hide" force_save="1"/>
                                        <field name="bd_asset_id" optional="hide" force_save="1"/>
                                        <field name="project_scope" force_save="1" required="1"
                                            attrs="{'readonly': [('cs_asset_id', '!=', False)]}"
                                            domain="[('id','in',parent.project_scope_computed)]"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="project_section_computed" widget="many2many_tags" invisible="1"/>
                                        <field name="section_name" force_save="1" required="1"
                                            domain="[('id','in',project_section_computed)]"
                                            attrs="{'readonly': ['|', ('project_scope', '=', False), ('cs_asset_id', '!=', False)]}"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="variable_ref" force_save="1" invisible='1'/>
                                        <field name="asset_category_id" force_save="1" required="1"
                                            attrs="{'readonly': ['|', ('section_name', '=', False), ('cs_asset_id', '!=', False)]}"/>
                                        <field name="asset_id" force_save="1" required="1"
                                            attrs="{'readonly': ['|', ('section_name', '=', False), ('cs_asset_id', '!=', False)]}"/>
                                        <field name="description" readonly="1" force_save="1" invisible='1'/>
                                        <field name="cur_qty" readonly="1" force_save="1"/>
                                        <field name="adj_qty"/>
                                        <field name="unallocated_qty" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="unallocated_amt" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cal_qty" invisible="1" force_save="1"/>
                                        <field name="cal_cs_qty" invisible="1" force_save="1"/>
                                        <field name="uom_id" readonly="1" force_save="1"/>
                                        <field name="adj_unallocated_qty" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="adj_unallocated_amt" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cur_unit_price" readonly="1" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="adj_unit_price" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="cur_amt" readonly="1" force_save="1" optional="hide"/>
                                        <field name="adj_amt" readonly="1" optional="hide"/>
                                        <field name="adjusted" readonly="1" force_save="1"/>
                                        <field name="is_delete" invisible="1"/>
                                        <field name="is_newly_added_product" optional="hide"/>
                                        <field name="is_change_allocation" invisible="1"/>
                                        <field name="is_generated" optional="hide"/>
                                        <field name="is_not_from_cost_sheet" optional="hide"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="itb_equipment_line_ids" string="Equipment" attrs="{'invisible': [('is_project_transfer', '=', True)]}">
                                <field name="itb_equipment_line_ids" domain="[('is_delete', '=', False)]" widget="one2many_list" class="o_itb_equipment_line_ids" attrs="{'readonly': [('state', '!=', 'draft')],}">
                                    <tree editable='bottom'>
                                        <control>
                                            <create name="add_product_control" string="Add Product"/>
                                        </control>
                                        <field name="sr_no"/>
                                        <field name="cs_equipment_id" optional="hide" force_save="1"/>
                                        <field name="bd_equipment_id" optional="hide" force_save="1"/>
                                        <field name="project_scope" force_save="1" required="1"
                                            attrs="{'readonly': [('cs_equipment_id', '!=', False)]}"
                                            domain="[('id','in',parent.project_scope_computed)]"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="project_section_computed" widget="many2many_tags" invisible="1"/>
                                        <field name="section_name" force_save="1" required="1"
                                            domain="[('id','in',project_section_computed)]"
                                            attrs="{'readonly': ['|', ('project_scope', '=', False), ('cs_equipment_id', '!=', False)]}"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="variable_ref" force_save="1" invisible='1'/>
                                        <field name="group_of_product" force_save="1" required="1"
                                            attrs="{'readonly': ['|', ('section_name', '=', False), ('cs_equipment_id', '!=', False)]}"/>
                                        <field name="product_id" force_save="1" required="1"
                                            attrs="{'readonly': ['|', ('section_name', '=', False), ('cs_equipment_id', '!=', False)]}"/>
                                        <field name="description" readonly="1" force_save="1" invisible='1'/>
                                        <field name="cur_qty" readonly="1" force_save="1"/>
                                        <field name="adj_qty"/>
                                        <field name="unallocated_qty" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="unallocated_amt" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cal_qty" invisible="1" force_save="1"/>
                                        <field name="cal_cs_qty" invisible="1" force_save="1"/>
                                        <field name="uom_id" readonly="1" force_save="1"/>
                                        <field name="adj_unallocated_qty" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="adj_unallocated_amt" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cur_unit_price" readonly="1" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="adj_unit_price" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="cur_amt" readonly="1" force_save="1" optional="hide"/>
                                        <field name="adj_amt" readonly="1" optional="hide"/>
                                        <field name="adjusted" readonly="1" force_save="1"/>
                                        <field name="is_delete" invisible="1"/>
                                        <field name="is_newly_added_product" optional="hide"/>
                                        <field name="is_change_allocation" invisible="1"/>
                                        <field name="is_generated" optional="hide"/>
                                        <field name="is_not_from_cost_sheet" optional="hide"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="itb_subcon_line_ids" string="Subcon" attrs="{'invisible': [('is_project_transfer', '=', True)]}">
                                <field name="itb_subcon_line_ids" domain="[('is_delete', '=', False)]" widget="one2many_list" class="o_itb_subcon_line_ids" attrs="{'readonly': [('state', '!=', 'draft')],}">
                                    <tree editable='bottom'>
                                        <control>
                                            <create name="add_product_control" string="Add Product"/>
                                        </control>
                                        <field name="sr_no"/>
                                        <field name="cs_subcon_id" optional="hide" force_save="1"/>
                                        <field name="bd_subcon_id" optional="hide" force_save="1"/>
                                        <field name="project_scope" force_save="1" required="1"
                                            attrs="{'readonly': [('cs_subcon_id', '!=', False)]}"
                                            domain="[('id','in',parent.project_scope_computed)]"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="project_section_computed" widget="many2many_tags" invisible="1"/>
                                        <field name="section_name" force_save="1" required="1"
                                            domain="[('id','in',project_section_computed)]"
                                            attrs="{'readonly': ['|', ('project_scope', '=', False), ('cs_subcon_id', '!=', False)]}"
                                            options="{'no_create':True, 'no_quick_create':True, 'no_create_edit':True}"/>
                                        <field name="variable_ref" force_save="1" invisible='1'/>
                                        <field name="variable" force_save="1" required="1" string='Job Subcon'
                                            attrs="{'readonly': ['|', ('section_name', '=', False), ('cs_subcon_id', '!=', False)]}"/>
                                        <field name="description" readonly="1" force_save="1" invisible='1'/>
                                        <field name="cur_qty" readonly="1" force_save="1"/>
                                        <field name="adj_qty"/>
                                        <field name="unallocated_qty" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="unallocated_amt" readonly="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cal_qty" invisible="1" force_save="1"/>
                                        <field name="cal_cs_qty" invisible="1" force_save="1"/>
                                        <field name="uom_id" readonly="1" force_save="1"/>
                                        <field name="adj_unallocated_qty" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="adj_unallocated_amt" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', False)]}"/>
                                        <field name="cur_unit_price" readonly="1" force_save="1" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="adj_unit_price" attrs="{'column_invisible': [('parent.is_change_allocation', '=', True)]}"/>
                                        <field name="cur_amt" readonly="1" force_save="1" optional="hide"/>
                                        <field name="adj_amt" readonly="1" optional="hide"/>
                                        <field name="adjusted" readonly="1" force_save="1"/>
                                        <field name="is_delete" invisible="1"/>
                                        <field name="is_newly_added_product" optional="hide"/>
                                        <field name="is_change_allocation" invisible="1"/>
                                        <field name="is_generated" optional="hide"/>
                                        <field name="is_not_from_cost_sheet" optional="hide"/>
                                    </tree>
                                </field>
                            </page>
                            <!-- tab for 'Approval Matrix'  -->
                            <page name="approval_matrix" string="Approval Matrix Line" attrs="{'invisible':['|', ('is_change_request_approval_matrix','=',False), ('is_project_transfer_approval_matrix','=',False)]}">
                                <group>
                                    <group>
                                        <field name="approving_matrix_budget_change_id" readonly="1"/>
                                    </group>
                                </group>
                                <field name="budget_change_user_ids">
                                    <tree editable="bottom" create="false" delete="false">
                                        <field name="name"/>
                                        <field name="user_ids" widget="many2many_tags" readonly="1" force_save="1"/>
                                        <field name="matrix_user_ids" widget="many2many_tags" invisible="1" readonly="1" force_save="1"/>
                                        <field name="is_delegation_mail_sent" invisible="1"/>
                                        <field name="minimum_approver" readonly="1" force_save="1"/>
                                        <field name="timestamp" invisible="1" force_save="1"/>
                                        <field name="approver_state" invisible="1" force_save="1"/>
                                        <field name="approval_status" readonly="1" force_save="1"/>
                                        <field name="approved_time" readonly="1" force_save="1"/>
                                        <field name="is_approve" invisible="1"/>
                                        <field name="approved_employee_ids" invisible="1"/>
                                        <field name="feedback" readonly="1" force_save="1"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div> 
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="budget_change_request_menu_action">
            <field name="name">Budget Change Request</field>
            <field name="res_model">internal.transfer.budget</field>
            <field name="domain">[('is_project_transfer', '=', False), ('is_change_allocation', '=', False), ('department_type', '=', 'project')]</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_department_type': 'project', 'default_is_project_transfer': False, 'default_is_change_allocation': False}</field>
            <field name="view_id" ref="view_change_budget_request_menu_tree" />
        </record>
        
        <record model="ir.actions.act_window" id="project_budget_transfer_menu_action">
            <field name="name">Project Budget Transfer</field>
            <field name="res_model">internal.transfer.budget</field>
            <field name="domain">[('is_project_transfer', '=', True), ('is_change_allocation', '=', False), ('department_type', '=', 'project')]</field>
            <field name="context">{'default_department_type': 'project', 'default_is_project_transfer': True, 'default_is_change_allocation': False}</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_project_budget_transfer_tree" />
        </record>

        <record model="ir.actions.act_window" id="project_change_allocation_menu_action">
            <field name="name">Change Allocation Budget</field>
            <field name="res_model">internal.transfer.budget</field>
            <field name="domain">[('is_project_transfer', '=', False), ('is_change_allocation', '=', True), ('department_type', '=', 'project')]</field>
            <field name="context">{'default_department_type': 'project', 'default_is_project_transfer': False, 'default_is_change_allocation': True}</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_change_budget_request_menu_tree" />
        </record>

        <record id="transfer_budget_material_view_form" model="ir.ui.view">
            <field name="name">transfer.budget.material.view.form</field>
            <field name="model">internal.transfer.budget.material.line</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="product_id"/>
                            </h1>
                        </div>
                        <group name="group_1">
                            <group name="group_1_1">
                                <field name="project_scope"/>
                                <field name="section_name"/>
                                <field name="group_of_product"/>
                                <field name="description"/>
                                <field name="cur_qty"/>
                                <field name="unallocated_qty"/>
                                <field name="unallocated_amt"/>
                                <field name="cur_unit_price"/>
                                <field name="cur_amt"/>
                            </group>
                            <group name="group_1_2">
                                <field name="uom_id"/>
                                <field name="adj_qty"/>
                                <field name="adj_unit_price"/>
                                <field name="adj_amt"/>
                                <field name="adj_unallocated_qty"/>
                                <field name="adj_unallocated_amt"/>
                                <field name="adjusted"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="transfer_budget_labour_view_form" model="ir.ui.view">
            <field name="name">transfer.budget.labour.view.form</field>
            <field name="model">internal.transfer.budget.labour.line</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="product_id"/>
                            </h1>
                        </div>
                        <group name="group_1">
                            <group name="group_1_1">
                                <field name="project_scope"/>
                                <field name="section_name"/>
                                <field name="group_of_product"/>
                                <field name="description"/>
                                <field name="cur_time"/>
                                <field name="cur_contractors"/>
                                <field name="unallocated_time"/>
                                <field name="unallocated_contractors"/>
                                <field name="unallocated_amt"/>
                                <field name="cur_unit_price"/>
                                <field name="cur_amt"/>
                            </group>
                            <group name="group_1_2">
                                <field name="uom_id"/>
                                <field name="adj_time"/>
                                <field name="adj_contractors"/>
                                <field name="adj_unit_price"/>
                                <field name="adj_amt"/>
                                <field name="adj_unallocated_time"/>
                                <field name="adj_unallocated_contractors"/>
                                <field name="adj_unallocated_amt"/>
                                <field name="adjusted"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="transfer_budget_overhead_view_form" model="ir.ui.view">
            <field name="name">transfer.budget.overhead.view.form</field>
            <field name="model">internal.transfer.budget.overhead.line</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="product_id"/>
                            </h1>
                        </div>
                        <group name="group_1">
                            <group name="group_1_1">
                                <field name="project_scope"/>
                                <field name="section_name"/>
                                <field name="group_of_product"/>
                                <field name="overhead_catagory"/>
                                <field name="description"/>
                                <field name="cur_qty"/>
                                <field name="unallocated_qty"/>
                                <field name="unallocated_amt"/>
                                <field name="cur_unit_price"/>
                                <field name="cur_amt"/>
                            </group>
                            <group name="group_1_2">
                                <field name="uom_id"/>
                                <field name="adj_qty"/>
                                <field name="adj_unit_price"/>
                                <field name="adj_amt"/>
                                <field name="adj_unallocated_qty"/>
                                <field name="adj_unallocated_amt"/>
                                <field name="adjusted"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="transfer_budget_internal_asset_view_form" model="ir.ui.view">
            <field name="name">transfer.budget.internal.asset.view.form</field>
            <field name="model">internal.transfer.budget.internal.asset.line</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="asset_id"/>
                            </h1>
                        </div>
                        <group name="group_1">
                            <group name="group_1_1">
                                <field name="project_scope"/>
                                <field name="section_name"/>
                                <field name="asset_category_id"/>
                                <field name="description"/>
                                <field name="cur_qty"/>
                                <field name="unallocated_qty"/>
                                <field name="unallocated_amt"/>
                                <field name="cur_unit_price"/>
                                <field name="cur_amt"/>
                            </group>
                            <group name="group_1_2">
                                <field name="uom_id"/>
                                <field name="adj_qty"/>
                                <field name="adj_unit_price"/>
                                <field name="adj_amt"/>
                                <field name="adj_unallocated_qty"/>
                                <field name="adj_unallocated_amt"/>
                                <field name="adjusted"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="transfer_budget_equipment_view_form" model="ir.ui.view">
            <field name="name">transfer.budget.equipment.view.form</field>
            <field name="model">internal.transfer.budget.equipment.line</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="product_id"/>
                            </h1>
                        </div>
                        <group name="group_1">
                            <group name="group_1_1">
                                <field name="project_scope"/>
                                <field name="section_name"/>
                                <field name="group_of_product"/>
                                <field name="description"/>
                                <field name="cur_qty"/>
                                <field name="unallocated_qty"/>
                                <field name="unallocated_amt"/>
                                <field name="cur_unit_price"/>
                                <field name="cur_amt"/>
                            </group>
                            <group name="group_1_2">
                                <field name="uom_id"/>
                                <field name="adj_qty"/>
                                <field name="adj_unit_price"/>
                                <field name="adj_amt"/>
                                <field name="adj_unallocated_qty"/>
                                <field name="adj_unallocated_amt"/>
                                <field name="adjusted"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <menuitem id="budget_change_menu"
              name="Budget Change"
              parent="abs_construction_management.menu_projects"
              sequence="7"/>


        <menuitem id="budget_change_request_menu" 
            name="Budget Change Request" 
            parent="equip3_construction_operation.budget_change_menu"
            action="budget_change_request_menu_action" 
            sequence="1" 
            />

        <menuitem id="change_allocation_menu"
            name="Change Allocation Budget"
            parent="equip3_construction_operation.budget_change_menu"
            action="project_change_allocation_menu_action"
            sequence="2"
            />

        <record model='ir.ui.menu' id='budget_change_request_menu'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- <menuitem id="budget_transfer_menu" 
            name="Budget Transfer" 
            parent="equip3_construction_operation.budget_change_menu"
            action="budget_transfer_menu_action" 
            sequence="2"/> -->

<!--        <record model='ir.ui.menu' id='budget_transfer_menu'>-->
<!--            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>-->
<!--        </record>-->

        <menuitem id="project_budget_transfer_menu" 
            name="Project Budget Transfer" 
            parent="equip3_construction_operation.budget_change_menu"
            action="project_budget_transfer_menu_action" 
            sequence="3"/>

        <record model='ir.ui.menu' id='project_budget_transfer_menu'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>
        
    </data>
</odoo>
