<odoo>
    <data>

        <record id="sale_order_const_view_form_2" model="ir.ui.view">
            <field name="name">sale.order.const.view.form.2</field>
            <field name="model">sale.order.const</field>
            <field name="inherit_id" ref="equip3_construction_sales_operation.sale_order_const_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//sheet/group[@name='main_form']/group[@name='left_section_main']/field[@name='contract_template']" position="after">
                    <field name="is_empty_cost_sheet" attrs="{'readonly' : [('state', 'not in', 'draft')], 'invisible' : [('contract_category','!=', 'main')]}"/>
                </xpath>
                <xpath expr="//notebook/page[@name='project_details']/group[@name='project_detail_main']/group[@name='pd_left']/field[@name='main_contract_ref']" position="after">
                    <field name="cost_sheet_ref"  force_save="1"
                           attrs="{'invisible': [('contract_category','=', 'main')], 'readonly':[('contract_category', '=', 'var')]}"/>
                    <field name="project_budget_id" invisible="1"/>
                    <field name="project_budget_ids" force_save="1" widget="many2many_tags"
                           attrs="{'invisible': [('contract_category','=', 'main')], 'readonly':[('contract_category', '=', 'var')]}"/>
                </xpath>
                <xpath expr="//sheet/group[@name='main_form']/group[@name='right_section_main']/field[@name='create_date']" position="after">
                    <field name="is_set_projects_type" readonly="1" force_save="1" invisible="1"/>
                    <field name="project_template_id" readonly="1" force_save="1"/>
                </xpath>
                <xpath expr="//div[@name='button_box']/button[@id='action_project_2']" position="after">
                    <button type="object" class="oe_stat_button" icon="o-hm-smart-construction-cost-sheet"
                            name="action_cost_sheet" attrs="{'invisible' : [('state', 'not in', ('sale', 'done'))]}">
                        <div class="o_form_field o_stat_info">
                            <span class="o_stat_text">Cost Sheet</span>
                        </div>
                    </button>
                    <button type="object" class="oe_stat_button" icon="o-hm-smart-construction-cost-sheet"
                            name="action_cost_sheet" attrs="{'invisible' : ['|', ('contract_category', '=', 'main'), ('state', 'in', ('sale', 'done'))]}">
                        <div class="o_form_field o_stat_info">
                            <span class="o_stat_text">Cost Sheet</span>
                        </div>
                    </button>
                </xpath>
                
                <xpath expr="//notebook/page[@name='order_ids']//field[@name='material_line_ids']/tree/field[@name='budget_quantity']" position="after">
                    <field name="budget_unit_price" optional="hide"/>
                    <field name="cs_material_id" invisible="1"/>
                    <field name="bd_material_id" invisible="1"/>
                    <field name="material_boq_ids" widget="many2many_tags" invisible="1" readonly="1" force_save="1"/>
                </xpath>
                <xpath expr="//notebook/page[@name='order_ids']//field[@name='labour_line_ids']/tree/field[@name='budget_time']" position="after">
                    <field name="budget_unit_price" optional="hide"/>
                    <field name="cs_labour_id" invisible="1"/>
                    <field name="bd_labour_id" invisible="1"/>
                    <field name="labour_boq_ids" widget="many2many_tags" invisible="1" readonly="1" force_save="1"/>
                </xpath>
                <xpath expr="//notebook/page[@name='order_ids']//field[@name='overhead_line_ids']/tree/field[@name='budget_quantity']" position="after">
                    <field name="budget_unit_price" optional="hide"/>
                    <field name="cs_overhead_id" invisible="1"/>
                    <field name="bd_overhead_id" invisible="1"/>
                    <field name="overhead_boq_ids" widget="many2many_tags" invisible="1" readonly="1" force_save="1"/>
                </xpath>
                <xpath expr="//notebook/page[@name='order_ids']//field[@name='internal_asset_line_ids']/tree/field[@name='budget_quantity']" position="after">
                    <field name="budget_unit_price" optional="hide"/>
                    <field name="cs_internal_asset_id" invisible="1"/>
                    <field name="bd_internal_asset_id" invisible="1"/>
                    <field name="internal_asset_boq_ids" widget="many2many_tags" invisible="1" readonly="1" force_save="1"/>
                </xpath>
                <xpath expr="//notebook/page[@name='order_ids']//field[@name='equipment_line_ids']/tree/field[@name='budget_quantity']" position="after">
                    <field name="budget_unit_price" optional="hide"/>
                    <field name="cs_equipment_id" invisible="1"/>
                    <field name="bd_equipment_id" invisible="1"/>
                    <field name="equipment_boq_ids" widget="many2many_tags" invisible="1" readonly="1" force_save="1"/>
                </xpath>
                <xpath expr="//notebook/page[@name='order_ids']//field[@name='subcon_line_ids']/tree/field[@name='budget_quantity']" position="after">
                    <field name="budget_unit_price" optional="hide"/>
                    <field name="cs_subcon_id" invisible="1"/>
                    <field name="bd_subcon_id" invisible="1"/>
                    <field name="subcon_boq_ids" widget="many2many_tags" invisible="1" readonly="1" force_save="1"/>
                </xpath>

                <xpath expr="//notebook/page[@name='order_ids']//field[@name='material_line_ids']/tree/field[@name='quantity']" position="after">
                    <field name="quantity_after" optional="hide"/>
                </xpath>
                <xpath expr="//notebook/page[@name='order_ids']//field[@name='labour_line_ids']/tree/field[@name='time']" position="after">
                    <field name="contractors_after" optional="hide"/>
                    <field name="time_after" optional="hide"/>
                </xpath>
                <xpath expr="//notebook/page[@name='order_ids']//field[@name='overhead_line_ids']/tree/field[@name='quantity']" position="after">
                    <field name="quantity_after" optional="hide"/>
                </xpath>
                <xpath expr="//notebook/page[@name='order_ids']//field[@name='internal_asset_line_ids']/tree/field[@name='quantity']" position="after">
                    <field name="quantity_after" optional="hide"/>
                </xpath>
                <xpath expr="//notebook/page[@name='order_ids']//field[@name='equipment_line_ids']/tree/field[@name='quantity']" position="after">
                    <field name="quantity_after" optional="hide"/>
                </xpath>
                <xpath expr="//notebook/page[@name='order_ids']//field[@name='subcon_line_ids']/tree/field[@name='quantity']" position="after">
                    <field name="quantity_after" optional="hide"/>
                </xpath>
            </field>
        </record>

    </data>
</odoo> 


        