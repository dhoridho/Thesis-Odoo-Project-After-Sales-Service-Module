<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- General Settings -->
        <record id="action_construction_config_settings" model="ir.actions.act_window">
            <field name="name">General Settings</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.config.settings</field>
            <field name="view_mode">form</field>
            <field name="target">inline</field>
        </record>

        <menuitem
            id="menu_construction_config_settings"
            parent="abs_construction_management.menu_configuration"
            sequence="-2"
            action="equip3_construction_accessright_setting.action_construction_configuration"
        />

        <record model='ir.ui.menu' id='menu_construction_config_settings'>
            <field name="groups_id" eval="[(6, 0, [ref('abs_construction_management.group_construction_manager')])]"/>
        </record>
        
        <menuitem
            id="menu_construction_config_settings_internal"
            parent="equip3_construction_sales_operation.configuration_internal"
            sequence="-2"
            action="equip3_construction_accessright_setting.action_construction_configuration"
        />

        <record model='ir.ui.menu' id='menu_construction_config_settings_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('abs_construction_management.group_construction_manager')])]"/>
        </record>
        
        <!-- Action Cost Sheet -->
        <record id="action_view_job_cost_sheet_internal_menu" model="ir.actions.act_window">
            <field name="name">Cost Sheet</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">job.cost.sheet</field>
            <field name="view_mode">tree,form,pivot,graph</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Cost Sheet found. Let's create one!
                </p>
            </field>
        </record>

        <record id="action_view_job_cost_sheet_internal_menu_custom" model="ir.actions.server">
            <field name="name">Cost Sheet</field>
            <field name="type">ir.actions.server</field>
            <field name="state">code</field>
            <field name="model_id" ref="equip3_construction_operation.model_job_cost_sheet"/>
            <field name="code">action = model.custom_menu()</field>
        </record>

        <!-- Menu Cost Sheet -->
        <menuitem
            id="menu_cost_sheet_internal"
            name="Cost Sheet"
            action="action_view_job_cost_sheet_internal_menu_custom"
            parent="equip3_construction_masterdata.construction_internal_project"
            sequence="3"
        />

        <record model='ir.ui.menu' id='menu_cost_sheet_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>
        
        <!-- Action Approval Cost Sheet -->
        <record id="action_approval_matrix_cost_sheet_internal" model="ir.actions.act_window">
            <field name="name">Cost Sheet Approval Matrix</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">approval.matrix.cost.sheet</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="view_id" ref="view_tree_approval_matrix_cost_sheet" />
            <field name="target">current</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Approval Matrix found. Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Configuration - Approval Matrix - Cost Sheet -->
        <menuitem
            id="menu_internal_approving_matrix_cost_sheet"
            name="Cost Sheet Approval Matrix"
            parent="equip3_construction_sales_operation.approval_matrix_internal"
            action="action_approval_matrix_cost_sheet_internal"
            sequence="2"
            
        />

        <record model='ir.ui.menu' id='menu_internal_approving_matrix_cost_sheet'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Approval Project Budget -->
        <record id="action_approval_matrix_project_budget_internal" model="ir.actions.act_window">
            <field name="name">Periodical Budget Approval Matrix</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">approval.matrix.project.budget</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Approval Matrix found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Configuration - Approval Matrix - Project Budget -->
        <menuitem 
            id="approval_matrix_project_budget_configuration_menu_internal" 
            name="Periodical Budget Approval Matrix" 
            parent="equip3_construction_sales_operation.approval_matrix_internal" 
            action="action_approval_matrix_project_budget_internal" 
            sequence="3"/>

        <record model='ir.ui.menu' id='approval_matrix_project_budget_configuration_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Approval Budget Change Request-->
        <record id="action_approval_matrix_internal_transfer_budget_internal" model="ir.actions.act_window">
            <field name="name">Budget Change Request Approval Matrix</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">approval.matrix.internal.transfer.budget</field>
            <field name="domain">[('is_project_transfer', '=', False), ('is_change_allocation', '=', False), ('department_type', '=', 'department')]</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_department_type': 'department', 'default_is_project_transfer': False, 'default_is_change_allocation': False}</field>
            <field name="view_id" ref="equip3_construction_operation.view_tree_approval_matrix_internal_transfer_budget" />
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Approval Matrix found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Configuration - Approval Matrix - Budget Change Request -->
        <menuitem 
            id="approval_matrix_internal_transfer_budget_configuration_menu_internal" 
            name="Budget Change Request Approval Matrix" 
            parent="equip3_construction_sales_operation.approval_matrix_internal" 
            action="action_approval_matrix_internal_transfer_budget_internal" 
            sequence="4"/>


        <record model='ir.ui.menu' id='approval_matrix_internal_transfer_budget_configuration_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Approval Change Allocation-->
        <record id="action_approval_matrix_internal_change_allocation" model="ir.actions.act_window">
            <field name="name">Change Allocation Approval Matrix</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">approval.matrix.internal.transfer.budget</field>
            <field name="domain">[('is_project_transfer', '=', False), ('is_change_allocation', '=', True), ('department_type', '=', 'department')]</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_department_type': 'department', 'default_is_project_transfer': False, 'default_is_change_allocation': True}</field>
            <field name="view_id" ref="equip3_construction_operation.view_tree_approval_matrix_internal_transfer_budget" />
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Approval Matrix found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Configuration - Approval Matrix - Change Allocation -->
        <menuitem 
            id="approval_matrix_internal_change_allocation_configuration_menu_internal" 
            name="Change Allocation Approval Matrix" 
            parent="equip3_construction_sales_operation.approval_matrix_internal" 
            action="action_approval_matrix_internal_change_allocation" 
            sequence="5"/>


        <record model='ir.ui.menu' id='approval_matrix_internal_change_allocation_configuration_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Approval Project Budget Transfer-->
        <record id="action_approval_matrix_project_budget_transfer_internal" model="ir.actions.act_window">
            <field name="name">Project Budget Transfer Approval Matrix</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">approval.matrix.internal.transfer.budget</field>
            <field name="domain">[('is_project_transfer', '=', True), ('is_change_allocation', '=', False), ('department_type', '=', 'department')]</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_department_type': 'department', 'default_is_project_transfer': True, 'default_is_change_allocation': False}</field>
            <field name="view_id" ref="view_tree_approval_matrix_project_budget_transfer" />
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Approval Matrix found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Configuration - Approval Matrix - Project Budget Transfer -->
        <menuitem 
            id="approval_matrix_project_budget_transfer_configuration_menu_internal" 
            name="Project Budget Transfer Approval Matrix" 
            parent="equip3_construction_sales_operation.approval_matrix_internal" 
            action="action_approval_matrix_project_budget_transfer_internal" 
            sequence="6"/>
        
        <record model='ir.ui.menu' id='approval_matrix_project_budget_transfer_configuration_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Approval Progress History-->
        <record id="action_approval_matrix_progress_history_internal" model="ir.actions.act_window">
            <field name="name">Progress History Approval Matrix</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">approval.matrix.progress.history</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="target">current</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Approval Matrix found. Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Configuration - Approval Matrix - Progress History -->
        <menuitem 
            id="approval_matrix_progress_history_configuration_menu_internal" 
            name="Progress History Approval Matrix" 
            parent="equip3_construction_sales_operation.approval_matrix_internal" 
            action="action_approval_matrix_progress_history_internal" 
            sequence="9"
        />

        <record model='ir.ui.menu' id='approval_matrix_progress_history_configuration_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Approval Budget Carry Over-->
        <record id="action_approval_matrix_budget_carry_over_internal" model="ir.actions.act_window">
            <field name="name">Budget Carry Over Approval Matrix</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">approval.matrix.budget.carry.over</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="target">current</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Approval Matrix found. Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Configuration - Approval Matrix - Progress History -->
        <menuitem 
            id="approval_matrix_budget_carry_over_configuration_menu_internal" 
            name="Budget Carry Over Approval Matrix" 
            parent="equip3_construction_sales_operation.approval_matrix_internal" 
            action="action_approval_matrix_budget_carry_over_internal" 
            sequence="7"
        />

        <record model='ir.ui.menu' id='approval_matrix_budget_carry_over_configuration_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Approval Asset Allocation-->
        <record id="action_approval_matrix_asset_allocation_internal" model="ir.actions.act_window">
            <field name="name">Asset Allocation Approval Matrix</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">approval.matrix.asset.allocation</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="target">current</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Approval Matrix found. Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Configuration - Approval Matrix - Asset Allocation -->
        <menuitem 
            id="approval_matrix_asset_allocation_configuration_menu_internal" 
            name="Asset Allocation Approval Matrix" 
            parent="equip3_construction_sales_operation.approval_matrix_internal" 
            action="action_approval_matrix_asset_allocation_internal" 
            sequence="8"/>

        <record model='ir.ui.menu' id='approval_matrix_asset_allocation_configuration_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Project Notes -->
        <record id="action_view_project_notes_menu_internal" model="ir.actions.act_window">
            <field name="name">Project Notes</field>
            <field name="res_model">project.notes</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="abs_construction_management.view_project_notes_menu_tree" />
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="target">current</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Project Note found. Let's create one!
                </p>
            </field>
        </record>


        <record id="action_view_project_notes_menu_internal_custom" model="ir.actions.server">
            <field name="name">Project Notes</field>
            <field name="type">ir.actions.server</field>
            <field name="state">code</field>
            <field name="model_id" ref="model_project_notes"/>
            <field name="code">action = model.custom_menu()</field>
        </record>

        <!-- Menu Project - Project Note -->
        <menuitem id="menu_sub_project_notes_internal"
            name = "Project Notes"
            parent="equip3_construction_masterdata.project_internal_construction"
            action = "action_view_project_notes_menu_internal_custom"
            sequence="2"/>

        
        <!-- Action Project Issue Internal -->
        <record id="action_view_project_issue_menu_internal" model="ir.actions.act_window">
            <field name="name">Project Issue</field>
            <field name="res_model">project.issue</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="view_id" ref="project_issue_view_kanban"/>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Project Issue found. Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Project - Project Issue -->
        <menuitem id="menu_sub_project_isssue_internal"
            name = "Project Issues"
            parent="equip3_construction_masterdata.project_internal_construction"
            action = "action_view_project_issue_menu_internal"
            sequence="3"/>

        <record id="view_project_budget_internal_filter" model="ir.ui.view">
            <field name="name">project.budget.internal.filter.projectid</field>
            <field name="model">project.budget</field>
            <field name="arch" type="xml">
                <search string="Search Periodical Budget">
                   <field name="project_id"/>
                   <field name="cost_sheet"/>
                   <field name="period"/>
                   <field name="month"/>
                   <field name="state"/>
                   <field name="create_uid"/>
<!--                   <group name="group_by" string="Group By">-->
<!--                       <filter name="project_id_internal" string="Project Internal" context="{'group_by' : 'project_id'}" />-->
<!--                   </group>-->
               </search>
            </field>
        </record>


        <!-- Action Project Budget -->
        <record id="project_budget_action_internal" model="ir.actions.act_window">
            <field name="name">Periodical Budget</field>
            <field name="res_model">project.budget</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="project_budget_tree_view"/>
            <field name="search_view_id" ref="view_project_budget_internal_filter"/>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'group_by': 'project_id',
                                   'default_department_type': 'department'}</field>
            <field name="target">main</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No budget found. Let's create one!
                </p>
            </field>
        </record>
        
        <!-- Menu Project - Project Budget -->
        <menuitem id="menu_sub_project_budget_internal"
            name = "Project Budget"
            parent="equip3_construction_masterdata.project_internal_construction"
            action = "project_budget_action_internal"
            groups="equip3_construction_accessright_setting.group_construction_engineer"
            sequence="4"/>

        <!-- Action Budget Carry Over -->
        <record id="project_budget_carry_action_id_internal" model="ir.actions.act_window">
            <field name="name">Budget Carry Over</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">project.budget.carry</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Budget Carry Over found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Project - Budget Carry Over -->
        <menuitem name="Budget Carry Over" 
            id="project_budget_carry_menu_id_internal"
            parent='equip3_construction_masterdata.project_internal_construction'
            action="project_budget_carry_action_id_internal" 
            groups="equip3_construction_accessright_setting.group_construction_engineer"
            sequence="5"/>

        <!-- Menu Project - Budget Change -->
        <menuitem id="budget_change_menu_internal"
              name="Budget Change"
              parent="equip3_construction_masterdata.project_internal_construction"
              sequence="5"/>

        <!-- Action Budget Change Request -->
        <record id="budget_change_request_menu_action_internal" model="ir.actions.act_window">
            <field name="name">Budget Change Request</field>
            <field name="res_model">internal.transfer.budget</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('is_project_transfer', '=', False), ('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department', 'default_is_project_transfer': False}</field>
            <field name="view_id" ref="view_change_budget_request_menu_tree" />
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Budget Change Request found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Project - Budget Change - Budget Change Request -->
        <menuitem id="budget_change_request_menu_internal"
            name = "Budget Change Request"
            parent="budget_change_menu_internal"
            action = "budget_change_request_menu_action_internal"
            sequence="1"/>


        <record model='ir.ui.menu' id='budget_change_request_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Budget Transfer -->
        <!-- <record id="budget_transfer_menu_action_internal" model="ir.actions.act_window">
            <field name="name">Budget Transfer</field>
            <field name="res_model">internal.transfer.budget</field>
            <field name="domain">[('is_budget_transfer', '=', True), ('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department', 'default_is_budget_transfer': True, 'budget_transfer': 1}</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_budget_transfer_tree" />
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Budget Transfer found, Let's create one!
                </p>
            </field>
        </record> -->

        <!-- Menu Project - Budget Change - Budget Transfer -->
        <!-- <menuitem id="budget_transfer_menu_internal"
            name="Budget Transfer" 
            parent="budget_change_menu_internal"
            action = "budget_transfer_menu_action_internal"
            sequence="2"/> -->

<!--        <record model='ir.ui.menu' id='budget_transfer_menu_internal'>-->
<!--            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>-->
<!--        </record>-->

        <!-- Action Project Budget Transfer -->
        <record id="project_budget_transfer_menu_action_internal" model="ir.actions.act_window">
            <field name="name">Project Budget Transfer</field>
            <field name="res_model">internal.transfer.budget</field>
            <field name="domain">[('is_project_transfer', '=', True), ('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department','default_is_project_transfer': True}</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_project_budget_transfer_tree" />
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Project Budget Transfer found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Project - Budget Change - Project Budget Transfer -->
        <menuitem id="project_budget_transfer_menu_internal"
            name = "Project Budget Transfer"
            parent="budget_change_menu_internal"
            action = "project_budget_transfer_menu_action_internal"
            sequence="3"/>
        
        <record model='ir.ui.menu' id='project_budget_transfer_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Progress history tree view and submenu on internal -->
        <record id="progress_history_tree_view_internal" model="ir.ui.view">
            <field name="name">progress.history.tree.view.internal</field>
            <field name="model">progress.history</field>
            <field name="arch" type="xml">
                <tree create="0" js_class="button_in_tree" default_order="date_create desc" >
                    <field name="project_id" force_save="1"/>
                    <field name="job_estimate" force_save="1" />
                    <field name="purchase_subcon" invisible="1" force_save="1"/>
                    <field name="completion_ref" invisible="1" force_save="1"/>
                    <field name="stage_computed_new" force_save="1" widget="many2many_tags" invisible="1" />
                    <field name="stage_new" force_save="1"/>
                    <field name="work_order" string="Job Order" force_save="1"/>
                    <field name="subtask" string="Subtask" optional="hide" force_save="1"/>
                    <field name="name" invisible="1" string="Job Order" force_save="1"/>
                    <field name="progress_start_date_new" force_save="1"/>
                    <field name="progress_end_date_new" force_save="1"/>
                    <field name="latest_completion" force_save="1"/>
                    <field name="latest_completion_subtask" force_save="1" optional="hide"/>
                    <field name="progress_subtask" optional="hide" force_save="1"/>
                    <field name="progress" force_save="1"/>
                    <field name="progress_summary" force_save="1"/>
                    <field name="create_by" force_save="1"/>
                    <field name="date_create" force_save="1"/>
                    <field name="department_type" invisible="1" force_save="1"/>
                    <field name="is_subcon" invisible="1" force_save="1"/>
                    <field name="is_approval_matrix_filled" invisible="1"/>
                    <field name="is_approve_button" invisible="1"/>
                    <field name="subtask_exist" invisible="1" force_save="1"/>
                    <field name="is_progress_history_approval_matrix" invisible="1" force_save="1"/>
                    <field name="approved_progress" invisible="1" force_save="1"/>
                    <field name="is_subtask" invisible="1" force_save="1"/>
                    <field name="progress_wiz" invisible="1" force_save="1"/>
                    <field name="parent_task" invisible="1" force_save="1"/>
                </tree>
            </field>
        </record>

        <record id="progress_history_tree_view_internal_approval" model="ir.ui.view">
            <field name="name">progress.history.tree.view.internal.approval</field>
            <field name="model">progress.history</field>
            <field name="arch" type="xml">
                <tree create="0" js_class="button_in_tree" default_order="date_create desc">
                    <header>
                        <button name="action_progress_history_approve" string="Approve" type="object" class="oe_highlight"/>
                        <button name="action_progress_history_reject" string="Reject" type="object" class="btn btn-secondary"/>
                    </header> 
                    <field name="project_id" force_save="1"/>
                    <field name="job_estimate" force_save="1" />
                    <field name="purchase_subcon" invisible="1" force_save="1"/>
                    <field name="completion_ref" invisible="1" force_save="1"/>
                    <field name="stage_computed_new" force_save="1" widget="many2many_tags" invisible="1" />
                    <field name="stage_new" force_save="1"/>
                    <field name="work_order" string="Job Order" force_save="1"/>
                    <field name="subtask" string="Subtask" optional="hide" force_save="1"/>
                    <field name="name" invisible="1" string="Job Order" force_save="1"/>
                    <field name="progress_start_date_new" force_save="1"/>
                    <field name="progress_end_date_new" force_save="1"/>
                    <field name="latest_completion" force_save="1"/>
                    <field name="latest_completion_subtask" force_save="1" optional="hide"/>
                    <field name="progress_subtask" optional="hide" force_save="1"/>
                    <field name="progress" force_save="1"/>
                    <field name="progress_summary" force_save="1"/>
                    <field name="create_by" force_save="1"/>
                    <field name="date_create" force_save="1"/>
                    <field name="state"
                           widget="badge"
                           decoration-success="state == 'approved'"
                           decoration-info="state == 'to_approve'"
                           decoration-danger="state == 'rejected'"
                           />
                    <field name="department_type" invisible="1" force_save="1"/>
                    <field name="is_subcon" invisible="1" force_save="1"/>
                    <field name="is_approval_matrix_filled" invisible="1"/>
                    <field name="is_approve_button" invisible="1"/>
                    <field name="subtask_exist" invisible="1" force_save="1"/>
                    <field name="is_progress_history_approval_matrix" invisible="1" force_save="1"/>
                    <field name="approved_progress" invisible="1" force_save="1"/>
                    <field name="is_subtask" invisible="1" force_save="1"/>
                    <field name="progress_wiz" invisible="1" force_save="1"/>
                    <field name="parent_task" invisible="1" force_save="1"/>
                </tree>
            </field>
        </record>

        
        <!-- Action Progress History -->
        <record id="action_progress_internal_inherit" model="ir.actions.act_window">
            <field name="name">Progress History</field>
            <field name="res_model">progress.history</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="progress_history_tree_view_internal"/>
            <field name="domain">[('work_order.is_subtask', '=', False), ('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Progress History found, Let's create one!
                </p>
            </field>
        </record>

        <record id="action_progress_internal_inherit_approval" model="ir.actions.act_window">
            <field name="name">Progress History Approval</field>
            <field name="res_model">progress.history</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="progress_history_tree_view_internal_approval"/>
            <field name="domain">[('work_order.is_subtask', '=', False), ('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Progress History found, Let's create one!
                </p>
            </field>
        </record>

        
        <!-- Menu Job Orders -->
        <menuitem id="job_order_internal_construction"
            name = "Job Orders"
            parent="equip3_construction_masterdata.construction_internal_project"
            sequence="7"
        />
        
        <!-- Action project job order -->
        <record id="open_view_project_all_internal" model="ir.actions.act_window">
            <field name="name">Projects</field>
            <field name="res_model">project.project</field>
            <field name="domain">[('department_type', '=', 'department'), ('primary_states', 'not in', ['cancelled', 'suspended'])]</field>
            <field name="context">{'default_department_type': 'department','is_project_job_order':True}</field>
            <field name="view_mode">kanban,form</field>
            <field name="view_id" ref="project.view_project_kanban"/>
            <field name="search_view_id" ref="project.view_project_project_filter"/>
            <field name="target">main</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No projects found. Let's create one!
                </p>
                <p>
                    Projects regroup tasks on the same topic and each have their own dashboard.
                </p>
            </field>
        </record>



        <!-- Menu Job Orders - Project -->
        <menuitem id="menu_projects_internal_job"
            action="open_view_project_all_internal"
            name="Projects"
            parent="job_order_internal_construction"
            sequence="1"/>

        <!-- Menu Job Orders - Job Orders -->
        <menuitem id="menu_job_order_new_internal"
            name="Job Orders"
            parent="job_order_internal_construction"
            sequence="2"/>

        <record id="job_order_internal_construction" model="ir.ui.menu">
            <field name="equip_icon_class">o-hm-sidebar-parent-construction-project</field>
        </record>

        
        <record id="edit_view_task_tree_internal_own_job" model="ir.ui.view">
            <field name="name">project.task.tree.internal.cons.own.job</field>
            <field name="model">project.task</field>
            <field eval="1" name="priority"/>
            <field name="arch" type="xml">
                <tree multi_edit="1" sample="1">
                    <field name="message_needaction" invisible="1" readonly="1"/>
                    <field name="is_closed" invisible="1" />
                    <field name="sequence" invisible="1" readonly="1"/>
                    <field name="name"/>
                    <field name="project_id" />
                    <field name="partner_id" optional="hide"/>
                    <field name="job_estimate"/>
                    <field name='department_type' invisible='1'/>
                    <field name="stage_new" />
                    <field name="parent_task" optional="hide"/>
                    <field name="is_subtask" invisible="1"/>
                    <field name="assigned_to" optional="show"/>
                    <field name="user_id" optional="show" widget="many2one_avatar_user"/>
                    <field name="company_id" groups="base.group_multi_company" optional="show"/>
                    <field name="allow_subtasks" invisible="1"/>
                    <field name="planned_hours" widget="timesheet_uom_no_toggle" sum="Initially Planned Hours" optional="show"/>
                    <field name="effective_hours" widget="timesheet_uom" sum="Effective Hours" optional="show"/>
                    <field name="remaining_hours" widget="timesheet_uom" sum="Remaining Hours" optional="hide" decoration-danger="progress &gt;= 100" decoration-warning="progress &gt;= 80 and progress &lt; 100"/>
                    <field name="subtask_effective_hours" widget="timesheet_uom" attrs="{'invisible' : [('allow_subtasks', '=', False)]}" optional="hide"/>
                    <field name="total_hours_spent" widget="timesheet_uom" attrs="{'invisible' : [('allow_subtasks', '=', False)]}" optional="hide"/>
                    <field name="progress" string='Progress Hours' widget="progressbar" optional="hide" groups="hr_timesheet.group_hr_timesheet_user"/>
                    <field name="activity_ids" widget="list_activity" optional="hide"/>
                    <field name="progress_task" string="Job Order Progress (%)" />
                    <field name="stage_completion" string="Stage Completion (%)" optional="hide"/>
                    <field name="contract_completion" string="Contract Completion (%)" optional="hide"/>
                    <field name="date_deadline" optional="hide" widget="remaining_days" attrs="{'invisible': [('is_closed', '=', True)]}"/>
                    <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}" optional="hide"/>
                    <field name="kanban_state" widget="state_selection" optional="hide" readonly="1" invisible='1'/>
                    <field name="stage_id" readonly="1" invisible='1'/>
                    <field name="company_id" groups="base.group_multi_company" optional="hide"/>
                    <field name="state" optional="show" string="Status" widget="badge"
                        decoration-primary="state == 'draft'"
                        decoration-primary2="state == 'inprogress'"
                        decoration-warning2="state == 'pending'"
                        decoration-success2="state == 'complete'"
                        decoration-secondary="state == 'cancel'"/>
                </tree>
            </field>
        </record>

        <record id="edit_view_task_tree_internal_subcon" model="ir.ui.view">
            <field name="name">project.task.tree.internal.cons.subcon</field>
            <field name="model">project.task</field>
            <field eval="1" name="priority"/>
            <field name="arch" type="xml">
                <tree multi_edit="1" sample="1">
                    <field name="message_needaction" invisible="1" readonly="1"/>
                    <field name="is_closed" invisible="1" />
                    <field name="sequence" invisible="1" readonly="1"/>
                    <field name="name"/>
                    <field name="project_id" />
                    <field name="partner_id" optional="hide"/>
                    <field name="job_estimate"/>
                    <field name="purchase_subcon" string='Contract Subcon'/>
                    <field name='department_type' invisible='1'/>
                    <field name="stage_new" />
                    <field name="parent_task" optional="hide"/>
                    <field name="is_subtask" invisible="1"/>
                    <field name="assigned_to" optional="show" />
                    <field name="user_id" optional="show" widget="many2one_avatar_user"/>
                    <field name="company_id" groups="base.group_multi_company" optional="show"/>
                    <field name="allow_subtasks" invisible="1"/>
                    <field name="planned_hours" widget="timesheet_uom_no_toggle" sum="Initially Planned Hours" optional="show"/>
                    <field name="effective_hours" widget="timesheet_uom" sum="Effective Hours" optional="show"/>
                    <field name="remaining_hours" widget="timesheet_uom" sum="Remaining Hours" optional="hide" decoration-danger="progress &gt;= 100" decoration-warning="progress &gt;= 80 and progress &lt; 100"/>
                    <field name="subtask_effective_hours" widget="timesheet_uom" attrs="{'invisible' : [('allow_subtasks', '=', False)]}" optional="hide"/>
                    <field name="total_hours_spent" widget="timesheet_uom" attrs="{'invisible' : [('allow_subtasks', '=', False)]}" optional="hide"/>
                    <field name="progress" string='Progress Hours' widget="progressbar" optional="hide" groups="hr_timesheet.group_hr_timesheet_user"/>
                    <field name="activity_ids" widget="list_activity" optional="hide"/>
                    <field name="progress_task" string="Job Order Progress (%)"/>
                    <field name="stage_completion" string="Stage Completion (%)" optional="hide"/>
                    <field name="contract_completion" string="Contract Completion (%)" optional="hide"/>
                    <field name="date_deadline" optional="hide" widget="remaining_days" attrs="{'invisible': [('is_closed', '=', True)]}"/>
                    <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}" optional="hide"/>
                    <field name="kanban_state" widget="state_selection" optional="hide" readonly="1" invisible='1'/>
                    <field name="stage_id" readonly="1" invisible='1'/>
                    <field name="company_id" groups="base.group_multi_company" optional="hide"/>
                    <field name="state" optional="show" string="Status" widget="badge"
                        decoration-primary="state == 'draft'"
                        decoration-primary2="state == 'inprogress'"
                        decoration-warning2="state == 'pending'"
                        decoration-success2="state == 'complete'"
                        decoration-secondary="state == 'cancel'"/>
                </tree>
            </field>
        </record>

        
        <!-- Action job orders -->
        <record id="action_view_task_inherited_internal" model="ir.actions.act_window">
            <field name="name">Job Orders</field>
            <field name="res_model">project.task</field>
            <field name="view_mode">tree,form,calendar,pivot,graph,activity,ks_gantt</field>
            <field name="domain">[('is_subcon', '=', False), ('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department', 'default_is_subcon': False'}</field>
            <field name="view_id" ref="equip3_construction_operation.edit_view_task_tree_internal_own_job"/>
            <field name="search_view_id" ref="project.view_task_search_form"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Job Order found. Let's create one!
                </p>
                <p>
                    To get things done, use activities and status on tasks.
                    <br/>
                    You can track progress, discuss on tasks, attach documents, etc.
                </p>
            </field>
        </record>

        <!-- Menu Job Orders - Job Orders - Job Orders -->
        <menuitem id="menu_sub_job_order_internal"
            name="Job Orders"
            parent="menu_job_order_new_internal"
            action="action_view_task_inherited_internal"
            sequence="1"/>
        
        <!-- Action job orders subcon -->
        <record id="action_view_subcontractor_task_inherited_inherit" model="ir.actions.act_window">
            <field name="name">Subcontractor Job Orders</field>
            <field name="res_model">project.task</field>
            <field name="view_mode">tree,form,calendar,pivot,graph,activity,ks_gantt</field>
            <field name="domain">[('is_subcon', '=', True), ('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department', 'default_is_subcon': True, 'subcontracting': 1}</field>
            <field name="view_id" ref="equip3_construction_operation.edit_view_task_tree_internal_subcon"/>
            <field name="search_view_id" ref="project.view_task_search_form"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Subcontractor Job Order found. Let's create one!
                </p>
                <p>
                    To get things done, use activities and status on tasks.
                    <br/>
                    You can track progress, discuss on tasks, attach documents, etc.
                </p>
            </field>
        </record>

        <!-- Menu Job Orders - Job Orders -Job Orders Subcon -->
        <menuitem id="menu_sub_subcontractor_job_order_internal"
                  name="Subcontractor Job Orders"
                  parent="menu_job_order_new_internal"
                  action="action_view_subcontractor_task_inherited_inherit"
                  sequence="2"/>
        
        <!-- Action Job Notes -->
        <record id="action_view_job_notes_menu_internal" model="ir.actions.act_window">
            <field name="name">Job Notes</field>
            <field name="res_model">job.notes</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="view_id" ref="abs_construction_management.view_job_notes_menu_tree"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Job Notes found, Let's create one!
                </p>
            </field>
        </record>

         <!-- Menu Project - Progress History -->
        <menuitem id="menu_sub_progress_history_internal"
            name = "Progress History"
            parent="job_order_internal_construction"
            action = "action_progress_internal_inherit"
            sequence="3"/>

        <menuitem id="menu_sub_progress_history_internal_approval"
            name = "Progress History"
            parent="job_order_internal_construction"
            action = "action_progress_internal_inherit_approval"
            sequence="4"/>

        <!-- Menu Job Orders - Job Notes -->
        <menuitem id="menu_sub_job_notes_internal"
                  name="Job Notes"
                  parent="job_order_internal_construction"
                  action="action_view_job_notes_menu_internal"
                  sequence="5"/>
                  

        <!-- Menu Asset -->
        <menuitem id="menu_asset_internal"
            name = "Asset"
            parent="equip3_construction_masterdata.construction_internal_project"
            sequence="8"
        />

        <!-- Action Asset -->
        <record id="modul_asset_action_internal" model="ir.actions.act_window">
            <field name="name">Asset</field>
            <field name="res_model">maintenance.equipment</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">[('vehicle_checkbox', '=', False)]</field>
            <field name="context">{"default_vehicle_checkbox" : False }</field>
            <field name="view_ids" eval="[(5,0,0), 
                            (0,0, {'sequence':1, 'view_mode':'tree', 'view_id':ref('equip3_asset_fms_masterdata.asset_view_tree')}),
                            (0,0, {'sequence':2, 'view_mode':'form', 'view_id':ref('equip3_asset_fms_masterdata.maintenance_asset_view_form')})]
                            " />
            <field name="help" type="html">
                    <p class="o_view_nocontent_smiling_face">
                        No Asset found, Let's create one!
                    </p>
            </field>
        </record>

        <!-- Menu Asset - Asset -->
        <menuitem id="equip3_construction_masterdata_asset_menu_internal"
            name="Asset"
            parent="menu_asset_internal"
            sequence="1"
            action="modul_asset_action_internal"/>

        <record model='ir.ui.menu' id='equip3_construction_masterdata_asset_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Asset -->
        <record id="maintenance_vehicle_action_internal" model="ir.actions.act_window">
            <field name="name">Vehicle</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">maintenance.equipment</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('vehicle_checkbox', '=', True)]</field>
            <field name="context">{"default_vehicle_checkbox" : "True for vehicle_checkbox field", }</field>
            <field name="view_ids" eval="[(5,0,0), 
                        (0,0, {'sequence':1, 'view_mode':'tree', 'view_id':ref('equip3_asset_fms_masterdata.maintenance_vehicle_view_tree')}),
                        (0,0, {'sequence':2, 'view_mode':'form', 'view_id':ref('equip3_asset_fms_masterdata.maintenance_vehicle_view_form')})]
                        " />
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Vehicle found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Asset - Vehicle -->
        <menuitem id="equip3_construction_masterdata_vehicle_menu_internal"
            name="Vehicle"
            parent="menu_asset_internal"
            sequence="2"
            action="maintenance_vehicle_action_internal"/>

        <record model='ir.ui.menu' id='equip3_construction_masterdata_vehicle_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Menu Asset - Project Asset -->
        <menuitem id="menu_project_asset_internal"
            name = "Project Asset"
            parent="menu_asset_internal"
            sequence="3"
        />

        <!-- Action Project Asset Request -->
        <record id="employee_asset_request_action_internal" model="ir.actions.act_window">
            <field name="name">Project Asset Request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">employee.asset.request</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department', 'default_is_project': 1}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Project Asset Request found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Asset - Project Asset - Project Asset Request -->
        <menuitem id="menu_employee_asset_request_action_internal"
            name="Project Asset Request"
            parent="menu_project_asset_internal"
            sequence="1"
            action="employee_asset_request_action_internal"/>

        <record model='ir.ui.menu' id='menu_employee_asset_request_action_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>
        
        <!-- Action Project Asset Transfer -->
        <record id="employee_asset_transfer_action_internal" model="ir.actions.act_window">
            <field name="name">Project Asset Transfer</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">employee.asset.transfer</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Project Asset Transfer found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Asset - Project Asset - Project Asset Transfer -->
        <menuitem id="menu_employee_asset_transfer_action_internal"
            name="Project Asset Transfer"
            parent="menu_project_asset_internal"
            sequence="2"
            action="employee_asset_transfer_action_internal"/>

        <record model='ir.ui.menu' id='menu_employee_asset_transfer_action_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Project Asset Return -->
        <record id="employee_asset_return_action_internal" model="ir.actions.act_window">
            <field name="name">Project Asset Return</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">employee.asset.return</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department', 'default_is_project': 1}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Project Asset Transfer found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Asset - Project Asset - Project Asset Return -->
        <menuitem id="menu_employee_asset_return_action_internal"
            name="Project Asset Return"
            parent="menu_project_asset_internal"
            sequence="3"
            action="employee_asset_return_action_internal"/>
        
        <record model='ir.ui.menu' id='menu_employee_asset_return_action_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Asset Allocation -->
        <record id="asset_allocation_action_const_internal" model="ir.actions.act_window">
            <field name="name">Asset Allocation</field>
            <field name="res_model">allocation.asset</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Asset Allocation found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Asset - Asset Allocation -->
        <menuitem id="menu_asset_allocation_sub_menu_asset_internal"
            name="Asset Allocation"
            parent="menu_asset_internal"
            sequence="4"
            action="asset_allocation_action_const_internal"/>
        
        <record model='ir.ui.menu' id='menu_asset_allocation_sub_menu_asset_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Asset Allocation Line -->
        <record id="asset_allocation_line_action_const_internal" model="ir.actions.act_window">
            <field name="name">Asset Allocation Line</field>
            <field name="res_model">allocation.asset.line</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Asset Allocation Line found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Asset - Asset Allocation -->
        <menuitem id="menu_asset_allocation_line_sub_menu_asset_internal"
            name="Asset Allocation Line"
            parent="menu_asset_internal"
            sequence="5"
            action="asset_allocation_line_action_const_internal"/>
        
        <record model='ir.ui.menu' id='menu_asset_allocation_line_sub_menu_asset_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>
        
        <!-- Menu Templates -->
        <menuitem id="menu_templates_menu_categ_internal"
            name = "Templates"
            parent="equip3_construction_masterdata.construction_internal_project"
            sequence="9"
        />

        <!-- Action Project Templates -->
        <record id="template_project_action_internal" model="ir.actions.act_window">
            <field name="name">Project Template</field>
            <field name="res_model">templates.project</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="equip3_construction_operation.template_project_view_tree"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Project Template found. Let's create one!
                </p>
            </field>
        </record>
    
        <!-- Menu Templates - Project Template-->
        <menuitem id="menu_project_templates_menu_categ_internal"
            name = "Project Templates"
            parent="menu_templates_menu_categ_internal"
            sequence="1"
            action="template_project_action_internal"
        />

        <record model='ir.ui.menu' id='menu_project_templates_menu_categ_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Job Order Templates -->
        <record id="job_order_template_action_internal" model="ir.actions.act_window">
            <field name="name">Job Order Template</field>
            <field name="res_model">templates.job.order</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="job_order_template_view_tree"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Job Order Template found. Let's create one!
                </p>
            </field>
        </record>
    
        <!-- Menu Templates - Job Order Template-->
        <menuitem id="menu_job_order_menu_categ_internal"
            name = "Job Order Templates"
            parent="menu_templates_menu_categ_internal"
            sequence="2"
            action="job_order_template_action_internal"
        />

        <record model='ir.ui.menu' id='menu_job_order_menu_categ_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Menu Configuration - scope section -->
        <menuitem
            id="scope_section_masterdata_menu_cons_internal"
            name="Scope and Section"
            parent="equip3_construction_sales_operation.configuration_internal"
            sequence="-1"/>

        <record model='ir.ui.menu' id='scope_section_masterdata_menu_cons_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <menuitem
            id="project_scope_masterdata_menu_cons_internal"
            name="Project Scope"
            action="equip3_construction_masterdata.masterdata_project_scope_action"
            parent="scope_section_masterdata_menu_cons_internal"
            sequence="1"/>

        <menuitem
            id="section_masterdata_menu_cons_internal"
            name="Section"
            action="equip3_construction_masterdata.masterdata_section_action"
            parent="scope_section_masterdata_menu_cons_internal"
            sequence="2"/>

        
        <!-- Menu Configuration - Variable -->
        <menuitem
            id="variable_estimation_menu_internal"
            name="Variable"
            action="equip3_construction_masterdata.variable_estimation_action"
            parent="equip3_construction_sales_operation.configuration_internal"
            sequence="1"/>

        <record model='ir.ui.menu' id='variable_estimation_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Menu Configuration - Variable -->
        <menuitem
            id="subcon_estimation_menu_internal"
            name="Job Subcon Estimate"
            action="equip3_construction_masterdata.variable_estimation_action"
            parent="equip3_construction_sales_operation.configuration_internal"
            sequence="2"/>

        <record model='ir.ui.menu' id='subcon_estimation_menu_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Job Order Templates -->
        <record id="open_task_type_form_internal" model="ir.actions.act_window">
            <field name="name">Stages</field>
            <field name="res_model">project.task.type</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="view_id" ref="project.task_type_tree"/>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a new stage in the task pipeline
              </p><p>
                Define the steps that will be used in the project from the
                creation of the task, up to the closing of the task or issue.
                You will use these stages in order to track the progress in
                solving a task or an issue.
              </p>
            </field>
        </record>
        
        <!-- Menu Configuration - Stages -->
        <menuitem id="menu_stages_internal"
            name = "Stages"
            parent = "equip3_construction_sales_operation.configuration_internal"
            action = "open_task_type_form_internal"
            sequence="3" />

        <record model='ir.ui.menu' id='menu_stages_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Menu Configuration - Issue Type -->
        <menuitem id="menu_sub_issue_type_internal"
            name = "Type Of Issue"
            parent = "equip3_construction_sales_operation.configuration_internal"
            action = "abs_construction_management.action_view_issue_type_menu_tree"
            sequence="4"/>
        
        <record model='ir.ui.menu' id='menu_sub_issue_type_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Menu Configuration - Issue Stages -->
        <menuitem id="menu_sub_issue_stage_internal"
            name = "Issue Stages"
            parent = "equip3_construction_sales_operation.configuration_internal"
            action = "equip3_construction_operation.issue_stage_action"
            sequence="5"/>

        <record model='ir.ui.menu' id='menu_sub_issue_stage_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Menu Configuration - Tags -->
        <menuitem id="menu_tags_internal"
            name = "Tags"
            parent = "equip3_construction_sales_operation.configuration_internal"
            action = "project.project_tags_action"
            sequence="6"/>
        
        <record model='ir.ui.menu' id='menu_tags_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Menu Configuration - Group of Product -->
        <menuitem id="menu_sub_group_of_product_internal"
            name="Group of Product"
            parent="equip3_construction_sales_operation.configuration_internal"
            action="equip3_construction_masterdata.action_view_group_of_product_menu_tree"
            sequence="7"/>
        
        <record model='ir.ui.menu' id='menu_sub_group_of_product_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>
        
        <!-- Menu Configuration - Activity types -->
        <menuitem id="menu_activity_types_internal"
            name = "Activity Types"
            parent = "equip3_construction_sales_operation.configuration_internal"
            action = "project.mail_activity_type_action_config_project_types"
            sequence="8"/>

        <record model='ir.ui.menu' id='menu_activity_types_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <!-- Action Budget Period -->
        <record id="budget_period_action_const_management_internal" model="ir.actions.act_window">
            <field name="name">Budget Period</field>
            <field name="res_model">project.budget.period</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_type', '=', 'department')]</field>
            <field name="context">{'default_department_type': 'department'}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Budget Period found, Let's create one!
                </p>
            </field>
        </record>

        <!-- Menu Configuration - Budget Period -->
        <menuitem id = "budget_period_sub_menu_const_management_internal"
            name = "Budget Period"
            parent = "equip3_construction_sales_operation.configuration_internal"
            action = "budget_period_action_const_management_internal"
            sequence = "9"/>

        <record model='ir.ui.menu' id='budget_period_sub_menu_const_management_internal'>
            <field name="groups_id" eval="[(6, 0, [ref('equip3_construction_accessright_setting.group_construction_engineer')])]"/>
        </record>

        <record id="equip3_construction_operation.menu_cost_sheet_internal" model="ir.ui.menu">
            <field name="equip_icon_class">o-hm-sidebar-main-construction-cost-sheet</field>
        </record>

    </data>    
</odoo>
