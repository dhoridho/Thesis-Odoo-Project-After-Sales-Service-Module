<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="view_nursery_plan_tree" model="ir.ui.view">
        <field name="name">view.nursery.plan.tree</field>
        <field name="model">agriculture.daily.activity</field>
        <field name="inherit_id" ref="equip3_agri_operations.view_daily_activity_tree"/>
        <field name="mode">primary</field>
        <field name="priority" eval="1000"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="attributes">
                <attribute name="string">Nursery Plan</attribute>
            </xpath>

            <xpath expr="//field[@name='block_id']" position="attributes">
                <attribute name="string">Nursery Area</attribute>
            </xpath>

            <xpath expr="//field[@name='name']" position="attributes">
                <attribute name="string">Nursery Plan</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_nursery_plan_form" model="ir.ui.view">
        <field name="name">view.nursery.plan.form</field>
        <field name="model">agriculture.daily.activity</field>
        <field name="inherit_id" ref="equip3_agri_operations.view_daily_activity_form"/>
        <field name="mode">primary</field>
        <field name="priority" eval="1000"/>
        <field name="arch" type="xml">
            <xpath expr="//form" position="attributes">
                <attribute name="string">Nursery Plan</attribute>
            </xpath>

            <xpath expr="//field[@name='block_id']" position="attributes">
                <attribute name="string">Nursery Area</attribute>
                <attribute name="domain">[('use_type', '=', 'nursery_area')]</attribute>
            </xpath>

            <xpath expr="//field[@name='sub_block_id']" position="attributes">
                <attribute name="invisible">1</attribute>
                <attribute name="required">0</attribute>
            </xpath>

            <xpath expr="//field[@name='line_ids']//field[@name='activity_id']" position="attributes">
                <attribute name="domain">[('category_type', '=', 'nursery')]</attribute>
            </xpath>

            <xpath expr="//field[@name='line_ids']//button[@name='action_actualization']" position="before">
                <field name="show_actualization_button" invisible="1"/>
            </xpath>

            <xpath expr="//field[@name='line_ids']/tree/button[@name='action_actualization']" position="attributes">
                <attribute name="attrs">{'invisible': [('show_actualization_button', '=', False)]}</attribute>
            </xpath>

            <xpath expr="//page[@name='nursery_ids']" position="attributes">
                <attribute name="string">Planting</attribute>
                <attribute name="attrs">{'invisible': [('any_planting', '=', False)]}</attribute>
            </xpath>

            <xpath expr="//field[@name='line_ids']" position="attributes">
                <attribute name="context">{
                    'default_daily_activity_type': daily_activity_type,
                    'default_is_whole_day': is_whole_day,
                    'default_start_time': start_time,
                    'default_end_time': end_time,
                    'default_sequence': next_sequence,
                    'default_priority': priority,
                    'default_company_id': company_id,
                    'default_branch_id': branch_id,
                    'default_analytic_group_ids': analytic_group_ids,
                    'default_date_scheduled': date_scheduled,
                    'default_block_id': block_id,
                    'default_sub_block_id': sub_block_id,
                    'default_size': size,
                    'default_uom_id': uom_id,
                    'form_view_ref': 'equip3_agri_operations.view_nursery_line_form',
                }</attribute>
            </xpath>

            <xpath expr="//page[@name='line_ids']" position="attributes">
                <attribute name="string">Nursery Lines</attribute>
            </xpath>

            <xpath expr="//field[@name='line_ids']/tree" position="attributes">
                <attribute name="string">Nursery Lines</attribute>
            </xpath>

            <xpath expr="//field[@name='nursery_ids']//field[@name='activity_line_id']" position="attributes">
                <attribute name="string">Nursery Lines</attribute>
            </xpath>

            <xpath expr="//field[@name='harvest_ids']//field[@name='activity_line_harvest_id']" position="attributes">
                <attribute name="string">Nursery Lines</attribute>
            </xpath>

            <xpath expr="//field[@name='material_ids']//field[@name='activity_line_material_id']" position="attributes">
                <attribute name="string">Nursery Lines</attribute>
            </xpath>

            <xpath expr="//field[@name='asset_ids']//field[@name='activity_line_id']" position="attributes">
                <attribute name="string">Nursery Lines</attribute>
            </xpath>

            <xpath expr="//field[@name='worker_group_ids']//field[@name='activity_line_id']" position="attributes">
                <attribute name="string">Nursery Lines</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_nursery_plan_search" model="ir.ui.view">
        <field name="name">view.nursery.plan.search</field>
        <field name="model">agriculture.daily.activity</field>
        <field name="inherit_id" ref="equip3_agri_operations.view_daily_activity_search"/>
        <field name="mode">primary</field>
        <field name="priority" eval="1000"/>
        <field name="arch" type="xml">
            <xpath expr="//search" position="attributes">
                <attribute name="string">Nursery Plan</attribute>
            </xpath>

            <xpath expr="//field[@name='block_id']" position="attributes">
                <attribute name="string">Nursery Area</attribute>
            </xpath>

            <xpath expr="//filter[@name='groupby_block_id']" position="attributes">
                <attribute name="string">Nursery Area</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_nursery_plan_calendar" model="ir.ui.view">
        <field name="name">view.nursery.plan.calendar</field>
        <field name="model">agriculture.daily.activity</field>
        <field name="inherit_id" ref="equip3_agri_operations.view_daily_activity_calendar"/>
        <field name="mode">primary</field>
        <field name="priority" eval="1000"/>
        <field name="arch" type="xml">
            <xpath expr="//calendar" position="attributes">
                <attribute name="string">Nursery Plan</attribute>
            </xpath>

            <xpath expr="//field[@name='block_id']" position="attributes">
                <attribute name="string">Nursery Area</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_nursery_plan_pivot" model="ir.ui.view">
        <field name="name">view.nursery.plan.pivot</field>
        <field name="model">agriculture.daily.activity</field>
        <field name="priority" eval="1000"/>
        <field name="arch" type="xml">
            <pivot string="Nursery Plan" sample="1">
                <field name="block_id" string="Nursery Area"/>
            </pivot>
        </field>
    </record>

    <record id="action_view_nursery_plan" model="ir.actions.act_window">
        <field name="name">Nursery Plan</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">agriculture.daily.activity</field>
        <field name="view_mode">tree,form,pivot,calendar</field>
        <field name="view_ids" eval="[(5,),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('equip3_agri_operations.view_nursery_plan_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('equip3_agri_operations.view_nursery_plan_form')}),
            (0, 0, {'view_mode': 'pivot', 'view_id': ref('equip3_agri_operations.view_nursery_plan_pivot')}),
            (0, 0, {'view_mode': 'calendar', 'view_id': ref('equip3_agri_operations.view_nursery_plan_calendar')}),
        ]"/>
        <field name="search_view_id" ref="equip3_agri_operations.view_nursery_plan_search"/>
        <field name="context">{'search_default_to_do': 1, 'default_daily_activity_type': 'nursery'}</field>
        <field name="domain">[('daily_activity_type', '=', 'nursery')]</field>
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
           Create a new Nursery Plan
          </p>
        </field>
    </record>

</odoo>