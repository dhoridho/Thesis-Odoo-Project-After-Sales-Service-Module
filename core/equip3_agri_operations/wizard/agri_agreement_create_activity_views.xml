<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="view_agri_agreement_create_activity_form" model="ir.ui.view">
        <field name="name">view.agri.agreement.create.activity.form</field>
        <field name="model">agri.agreement.create.activity</field>
        <field name="arch" type="xml">
            <form string="Create Activity">
                <sheet>
                    <group>
                        <group>
                            <field name="agreement_id" invisible="1"/>
                            <field name="agreement_type" invisible="1"/>
                            <field name="agreement_activity_line_ids" invisible="1"/>
                            <field name="agreement_block_ids" widget="many2many_tags" invisible="1"/>
                            
                            <field name="assign_type" widget="radio" nolabel="1"/>
                            <field name="schedule_date" attrs="{'invisible': [('assign_type', '!=', 'new')], 'required': [('assign_type', '=', 'new')]}"/>
                            <field name="activity_line_id" attrs="{'invisible': [('assign_type', '!=', 'existing')], 'required': [('assign_type', '=', 'existing')]}"/>
                            <field name="activity_id" attrs="{'invisible': [('assign_type', '!=', 'new')], 'required': [('assign_type', '=', 'new')]}"/>
                            <field name="allowed_activity_ids" widget="many2many_tags" invisible="1"/>
                            <field name="block_id" attrs="{'invisible': [('agreement_type', '=', 'nursery')], 'required': [('agreement_type', '!=', 'nursery')], 'readonly': [('assign_type', '=', 'existing')]}" force_save="1"/>
                            <field name="block_id" string="Nursery Area" attrs="{'invisible': [('agreement_type', '!=', 'nursery')], 'required': [('agreement_type', '=', 'nursery')], 'readonly': [('assign_type', '=', 'existing')]}" force_save="1"/>
                            <field name="allowed_sub_block_ids" widget="many2many_tags" invisible="1"/>
                            <field name="sub_block_id" options="{'no_create_edit': True, 'no_create': True}" attrs="{'invisible': ['|', ('agreement_type', '=', 'nursery'), ('allowed_sub_block_ids', '=', [])], 'required': [('allowed_sub_block_ids', '!=', [])], 'readonly': [('assign_type', '=', 'existing')]}" force_save="1"/>
                            <field name="sub_block_id" options="{'no_create_edit': True, 'no_create': True}" attrs="{'invisible': ['|', ('agreement_type', '!=', 'nursery'), ('allowed_sub_block_ids', '=', [])], 'required': [('allowed_sub_block_ids', '!=', [])], 'readonly': [('assign_type', '=', 'existing')]}" force_save="1" string="Sub-Area"/>
                        </group>
                    </group>
                </sheet>
                <footer>
                    <button name="action_confirm" string="Confirm" type="object" class="oe_highlight"/>
                    <button string="Discard" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

</odoo>