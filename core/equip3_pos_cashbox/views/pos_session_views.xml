<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="view_pos_session_form_inherit" model="ir.ui.view">
        <field name="name">view.pos.session.form.inherit</field>
        <field name="model">pos.session</field>
        <field name="inherit_id" ref="point_of_sale.view_pos_session_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='statement_ids']/tree/field[@name='state']" position="after">
                <field name="pos_session_id" invisible="1"/>
                <field name="transaction" widget="monetary" optional="show"/>
                <field name="journal_entries_status" optional="show"/>
            </xpath>
            <xpath expr="//button[@name='open_cashbox_pos']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//button[@name='open_cashbox_pos']" position="after">
                <button name="action_open_cash_control_before_opening" 
                    type="object" 
                    string="Open Session"
                    attrs="{'invisible' : ['|', ('cash_control', '=', False), ('state', '!=', 'opening_control')]}"
                    class="oe_highlight action_open_cash_control_before_opening"/>
            </xpath>

            <xpath expr="//button[@id='end_session_opened']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//button[@id='end_session_opened']" position="after">
                <button id="end_session_opened_open_cash_control" 
                    name="action_end_session_opened_open_cash_control" 
                    type="object"
                    string="End of Session"
                    attrs="{'invisible' : ['|', ('cash_control', '=', False),('state', '!=', 'opened')]}"
                    class="oe_highlight"/>
            </xpath>

            <xpath expr="//notebook/page[@name='cash_control']" position="after">
                <page name="cash_management" string="Cash Management" attrs="{'invisible' : [('cash_control', '=', False)]}">
                    <group>
                        <field name="cash_management_ids" nolabel="1">
                            <tree>
                                <field name="action"/>
                                <field name="product_id"/>
                                <field name="amount"/>
                                <field name="reason"/>
                                <field name="account_move_id"/>
                            </tree>
                            <form> 
                                <sheet>
                                    <group>
                                        <group>
                                            <field name="action"/>
                                            <field name="product_id"/>
                                            <field name="amount"/>
                                            <field name="reason"/>
                                        </group>
                                        <group>
                                            <field name="account_move_id"/>
                                        </group>    
                                    </group>
                                </sheet>
                            </form>
                        </field>
                    </group>
                </page> 

                <page name="cash_history" string="Cashbox History" attrs="{'invisible' : [('cash_control', '=', False)]}">
                    <group>
                        <field name="cash_history_ids" nolabel="1" readonly="1">
                            <tree>
                                <field name="start_date"/>
                                <field name="closing_date"/>
                                <field name="pos_config_id"/>
                                <field name="pos_session_id"/>
                                <field name="opened_by_user_id"/>
                                <field name="start_balance"/>
                                <field name="closing_balance"/>
                            </tree>
                            <form> 
                                <sheet>
                                    <group>
                                        <group>
                                            <field name="opened_by_user_id"/>
                                            <field name="start_balance"/>
                                            <field name="closing_balance"/>
                                        </group>
                                        <group>
                                        </group>    
                                    </group>
                                </sheet>
                            </form>
                        </field>
                    </group>
                </page>
            </xpath>
            <xpath expr="//group[hasclass('col-md-12')]" position="attributes">
                <attribute name="class">col-md-12 col_cash_control_1</attribute>
            </xpath>
            <xpath expr="//group[hasclass('col-md-12')]" position="inside">
                <group class="col-md-4">
                    <div style="margin:0;padding:0;" class="div_gain_loss_move">
                        <group style="margin:0;padding:0;" class="group_div_gain_loss_move">
                            <field name="gain_loss_move_id" readonly="1"/>
                        </group>
                    </div>
                </group>
            </xpath>

        </field>
    </record>

    <record id="closing_balance_confirm_inherit" model="ir.ui.view">
        <field name="name">closing.balance.confirm.inherit</field>
        <field name="model">closing.balance.confirm.wizard</field>
        <field name="inherit_id" ref="point_of_sale.closing_balance_confirm"/>
        <field name="arch" type="xml">
            <xpath expr="//group" position="inside">
                <div>
                    <br/>
                    <span class="cash_closing_balance_char">
                        <span>Closing Balance: </span>
                        <b><field name="cash_closing_balance_char" readonly="1"/></b>
                    </span>
                    <br/>
                    <span class="cash_register_difference_char">
                        <span>Difference: </span>
                        <b><field name="cash_register_difference_char" readonly="1"/></b>
                    </span>
                </div>
            </xpath>
        </field>
    </record>
    
</odoo>