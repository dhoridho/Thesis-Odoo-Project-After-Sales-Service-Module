<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <record id="advance_filter_management_form" model="ir.ui.view">
        <field name="name">Ir Filters Form</field>
        <field name="model">ir.filters</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <field name="name" attrs="{'readonly': [('is_readonly_data','=',True)]}" force_save="1"/>
                        <field name="model_id" force_save="1" attrs="{'readonly': [('is_readonly_data','=',True)]}" />
                        <field name="is_readonly_data" invisible='1' />
                        <field name="user_ids" force_save="1" widget='many2many_tags' attrs="{'readonly': [('is_readonly_data','=',True)]}"/>
                        <field name="is_default" force_save="1" attrs="{'readonly': [('is_readonly_data','=',True)]}"/>
                        <field name="selection" force_save="1" required="1" attrs="{'readonly': [('is_readonly_data','=',True)]}"/>
                        <field name="context" invisible="1" />
                        <field name="fields_id" force_save="1" domain="[('model_id','=',model_id)]" attrs="{'invisible': [('selection','=','filter')],'readonly': [('is_readonly_data', '=', True)]}"/>
                        <field name="domain" force_save="1" widget="terabits_domain" options="{'model': 'model_id'}" attrs="{'invisible': [('selection','=','group_by')],'readonly': [('is_readonly_data', '=', True)]}"/>

                    </group>
                </sheet>
            </form>
        </field>
    </record>


    <record id="advance_filter_management_list" model="ir.ui.view">
        <field name="name">Ir Filters Tree</field>
        <field name="model">ir.filters</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="model_id"/>
                <field name="user_ids" widget='many2many_tags'/>
                <field name="create_date" string="Create Date"/>
            </tree>
        </field>
    </record>

    <record id="advance_filter_management_search" model="ir.ui.view">
        <field name="name">Ir Filters Search</field>
        <field name="model">ir.filters</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="model_id"/>
                <field name="user_ids"/>
                <group expand="0" string="Group By">
                    <filter string="User" name="user_ids" domain="[]" context="{'group_by': 'user_ids'}"/>
                </group>
                <separator/>
                <group expand="0" string="Group By">
                    <filter string="Model" name="model_id" domain="[]" context="{'group_by': 'model_id'}"/>
                </group>
                <searchpanel>
                    <field name="user_ids" select="multi" string="Users" enable_counters="1"/>
                </searchpanel>
            </search>

        </field>
    </record>

    <record id="action_advance_filter_management" model="ir.actions.act_window">
        <field name="name">Custom Filters</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">ir.filters</field>
        <field name="view_mode">tree,form</field>
        <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('advance_filter_management_list')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('advance_filter_management_form')})]"/>
        <field name="context">{'default_custom': True}</field>
        <field name="domain">[('custom','=',True)]</field>
    </record>

    <menuitem id="advance_filter_management_menu" name="Filters" action="action_advance_filter_management" groups="group_filters_user" web_icon="advance_filter_management,static/description/icon.png"/> 
 </odoo>
