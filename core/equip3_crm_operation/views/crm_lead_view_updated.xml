<?xml version="1.0"?>
<odoo>
    <record id="view_wizard_restore_lead_type" model="ir.ui.view">
        <field name="name">restore.lead.type.wizard</field>
        <field name="model">restore.lead.type</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <field name="lead_type_id" required="1"/>
                </group>
                <footer>
                    <button name="action_submit" string="Submit" type="object" class="oe_highlight"/>
                    <button string="Cancel" special='cancel' class="btn-secondary"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="quick_create_opportunity_form" model="ir.ui.view">
        <field name="name">crm.lead.form.quick_create</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.quick_create_opportunity_form" />
        <field name="arch" type="xml">
            <field name="partner_id" position="attributes">
                <attribute name="context">{
                    'res_partner_search_mode': type == 'opportunity' and 'customer' or False,
                    'default_name': contact_name or partner_name,
                    'default_is_company': type == 'opportunity' and contact_name == False,
                    'default_company_name': type == 'opportunity' and partner_name,
                    'default_phone': phone,
                    'default_is_leads': True,
                    'default_email': email_from,
                    'show_vat': True}</attribute>
            </field>
        </field>
    </record>

    <record id="equip_crm_case_kanban_view_leads" model="ir.ui.view">
        <field name="name">equip.crm.case.kanban.view.leads</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_kanban_view_leads"/>
        <field name="mode">primary</field> <!-- to avoid inheritance issues -->
        <field name="arch" type="xml">
            <xpath expr="//kanban" position="attributes">
                <attribute name="default_group_by">stage_id</attribute>
                <attribute name="m2o_group_color">{'stage_id': 'color'}</attribute>
                <attribute name='quick_create'>false</attribute>
                <attribute name="class"></attribute>
                <attribute name="js_class">o_equip_crm_lead_kanban</attribute>
            </xpath>

            <xpath expr="//kanban/field[@name='stage_id']" position="attributes">
                <attribute name="options">{"group_by_tooltip": {"requirements": "Description"}, "field_color": "custom_color"}</attribute>
            </xpath>

            <xpath expr="//kanban/field[last()]" position="after">
                <field name="tag_ids"/>
                <field name="tag"/>
            </xpath>

            <xpath expr="//templates//div[hasclass('o_dropdown_kanban')]" position="replace"/>

            <xpath expr="//templates//div[hasclass('oe_kanban_content')]" position="replace">
                <div class="oe_kanban_content">
                    <div class="o_content_top">
                        <field name="priority" widget="priority" groups="base.group_user"/>
                        <div class="o_activity">
                            <span class="o_activity_label">Next Activity</span>
                            <field name="activity_ids" widget="equip_kanban_activity"/>
                        </div>
                    </div>

                    <div class="o_content_middle">
                        <div class="o_title">
                            <field name="name"/>
                        </div>

                        <div class="o_content">
                            <div class="o_left">
                                <div class="o_partner">
                                    <span t-esc="record.partner_id ? record.partner_id.value : '-'"/>
                                </div>

                                <div class="o_revenue" t-if="record.expected_revenue and record.expected_revenue.raw_value">
                                    <field name="expected_revenue" widget="monetary" options="{'currency_field': 'company_currency'}"/>
                                    <t t-if="record.recurring_revenue and record.recurring_revenue.raw_value">
                                        <span> + </span>
                                        <field name="recurring_revenue" widget="monetary" options="{'currency_field': 'company_currency'}"/>
                                        <field name="recurring_plan"/>
                                    </t>
                                </div>
                            </div>
                            
                            <div class="o_right">
                                <field name="einstein_score" widget="percentpienew" nolabel="1"/>
                            </div>
                        </div>
                    </div>

                    <div class="o_content_bottom">
                        <field name="user_id" widget="many2one_avatar_user"/>

                        <t t-if="record.tag and record.tag.value &gt; 0">
                            <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
                        </t>

                        <div class="o_dropdown_kanban dropdown">
                            <a class="dropdown-toggle o-no-caret btn" role="button" data-toggle="dropdown" data-display="static" href="#" aria-label="Dropdown menu" title="Dropdown menu">
                                <span class="fa fa-ellipsis-h"/>
                            </a>
                            <div class="dropdown-menu" role="menu">
                                <t t-if="widget.editable"><a role="menuitem" type="edit" class="dropdown-item">Edit</a></t>
                                <t t-if="widget.deletable"><a role="menuitem" type="delete" class="dropdown-item">Delete</a></t>
                                <ul class="oe_kanban_colorpicker" data-field="color"/>
                            </div>
                        </div>
                    </div>
                </div>
            </xpath>
        </field>
    </record>


    <record id="crm.crm_lead_action_pipeline_view_kanban" model="ir.actions.act_window.view">
        <field name="view_id" ref="equip3_crm_operation.equip_crm_case_kanban_view_leads"/>
    </record>

    <record id="crm_lead_view_form_inherit" model="ir.ui.view">
        <field name="name">crm.lead.view.form.inherit</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form" />
        <field name="arch" type="xml">
            <xpath expr="//sheet/div[@name='button_box']" position="inside">
                <button name="action_schedule_activity" type="object"
                        class="oe_stat_button" icon="fa-tasks"
                        context="{'partner_id': partner_id}"
                        attrs="{'invisible': [('type', '=', 'lead')]}">
                    <div class="o_stat_info">
                        <field name="activity_count" class="o_stat_value"/>
                        <span class="o_stat_text"> Followed Up</span>
                    </div>
                </button>
            </xpath>
            <xpath expr="//div[hasclass('oe_title')]" position="before">
                <field name="is_similar" invisible="1"/>
				<div class="row">
					<div class="col-12">
						<p width="100%" class="alert alert-danger" role="alert" 
                        attrs="{'invisible':[('is_similar','=',False)]}">This leads has similarity identity with other leads, click the smart button Similar Leads to view the similarity</p>
					</div>
				</div>
			</xpath>
            <xpath expr="//div[@class='oe_button_box']" position="inside">
				<button name="action_open_similar_leads" type="object" class="oe_stat_button" icon="o-hm-smart-crm-similiar-vendors" attrs="{'invisible':[('is_similar','!=',True)]}">
					<field name="similar_leads_count" string="Similar Leads" widget="statinfo"/>
				</button>
			</xpath>
            <xpath expr="//div[hasclass('oe_button_box')]/button[@name='action_schedule_meeting']" position="before">
                <button name="action_send_wa" type="object" class="oe_stat_button" icon="o-hm-smart-all-send-whatsapp" context="{'partner_id': partner_id}">
                    <div class="o_stat_info">
                        <span class="o_stat_text">Send</span>
                        <span class="o_stat_text">Whatsapp</span>
                    </div>
                </button>
            </xpath>
            <label for="expected_revenue" position="attributes">
                <attribute name="invisible">1</attribute>
            </label>
            <label for="expected_revenue" position="after">
                <div class="oe_edit_only d-flex align-items-center">
                    <field name="is_automated_expected_revenue" invisible="1"/>
                    <label for="expected_revenue"/>
                    <button class="btn btn-link" name="action_set_automated_expected_revenue" type="object"
                            attrs="{'invisible': [('is_automated_expected_revenue', '=', True)]}">
                        <i class="fa fa-gear" role="img" title="Switch to automatic Expected Revenue" aria-label="Switch to automatic Expected Revenue"></i>
                    </button>
                    <small class="oe_grey h6 mb0" attrs="{'invisible': [('is_automated_expected_revenue', '=', True)]}">
                        <field class="mb0" widget='monetary' options="{'currency_field': 'company_currency'}" name="default_expected_revenue" force_save="1" readonly="1"/>
                    </small>
                </div>
            </label>
            <field name="expected_revenue" position="attributes">
                <attribute name="width">200px</attribute>
            </field>
            <xpath expr="//button[@name='action_set_won_rainbowman']" position="attributes">
                <attribute name="attrs">{'invisible': ['|','|', ('active','=',False), ('probability_new', '=', 100), ('probability', '=', 100)]}</attribute>
            </xpath>
            <xpath expr="//button[@name='action_set_lost']" position="attributes">
                <attribute name="attrs">{'invisible': True}</attribute>
            </xpath>
            <xpath expr="//div[hasclass('oe_button_box')]/button[@name='action_schedule_meeting']" position="attributes">
                <attribute name="icon">o-hm-smart-hrm-meetings</attribute>
            </xpath>
            <xpath expr="//div[hasclass('oe_button_box')]/button[@name='action_view_sale_quotation']" position="attributes">
                <attribute name="icon">o-hm-smart-crm-quotations</attribute>
            </xpath>
            <xpath expr="//div[hasclass('oe_button_box')]/button[@name='action_view_sale_order']" position="attributes">
                <attribute name="icon">o-hm-smart-crm-sales</attribute>
            </xpath>
            <xpath expr="//div[hasclass('oe_button_box')]/button[@name='button_open_phonecall']" position="attributes">
                <attribute name="icon">o-hm-smart-all-calls</attribute>
            </xpath>
            <button name="%(crm.crm_lead_lost_action)d" position="attributes">
                <attribute name="attrs">{'invisible': [('active', '=', False)]}</attribute>
                <attribute name="class">btn-secondary</attribute>
            </button>
            <xpath expr="//button[@name='%(crm.action_crm_lead2opportunity_partner)d']" position="after">
                  <button name="%(crm.crm_lead_lost_action)d" position="move"/>
            </xpath>
            <xpath expr="//group[@name='opportunity_partner']//field[@name='partner_id']" position="attributes">
                <attribute name="context">{
                    'res_partner_search_mode': type == 'opportunity' and 'customer' or False,
                    'default_name': contact_name or partner_name,
                    'default_street': street,
                    'default_is_company': type == 'opportunity' and contact_name == False,
                    'default_company_name': type == 'opportunity' and partner_name,
                    'default_street2': street2,
                    'default_city': city,
                    'default_title': title,
                    'default_state_id': state_id,
                    'default_zip': zip,
                    'default_country_id': country_id,
                    'default_function': function,
                    'default_phone': phone,
                    'default_mobile': mobile,
                    'default_email': email_from,
                    'default_user_id': user_id,
                    'default_team_id': team_id,
                    'default_website': website,
                    'default_is_leads': True,
                    'show_vat': True}
                </attribute>
            </xpath>
            
            <xpath expr="//widget[@name='web_ribbon'][1]" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('probability_new', '&gt;', 0), ('active', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//widget[@name='web_ribbon'][2]" position="attributes">
                <attribute name="attrs">{'invisible': [('probability_new', '&lt;', 100)]}</attribute>
            </xpath>
<!--            <button name="action_create_quotation" position="attributes">-->
<!--                <attribute name="attrs">{'invisible': [('active', '=', False)]}</attribute>-->
<!--            </button>-->
            <button name="toggle_active" position="attributes">
                <attribute name="invisible">1</attribute>
            </button>
            <button name="toggle_active" position="after">
                <button name="active_toggle" string="Restore" type="object" attrs="{'invisible': [('active', '=', True)]}"/>
            </button>
            <xpath expr="//group" position="replace">
                <div>
                    <div class="row">
                        <div class="col-4" name="col_1">
                            <group name="information_cust_left">
                                <field name="partner_id" width="100px"
                                       readonly="False"
                                       force_save="1"
                                       widget="res_partner_many2one"
                                       domain="['|',('is_leads', '=', True),('is_customer', '=', True)]"
                                       string="Customer"
                                       context="{'res_partner_search_mode': type == 'opportunity' and 'customer' or False,
                                        'default_name': contact_name or partner_name,
                                        'default_street': street,
                                        'default_is_company': type == 'opportunity' and contact_name == False,
                                        'default_company_name': type == 'opportunity' and partner_name,
                                        'default_street2': street2,
                                        'default_city': city,
                                        'default_title': title,
                                        'default_state_id': state_id,
                                        'default_zip': zip,
                                        'default_country_id': country_id,
                                        'default_function': function,
                                        'default_phone': phone,
                                        'default_mobile': mobile,
                                        'default_email': email_from,
                                        'default_user_id': user_id,
                                        'default_team_id': team_id,
                                        'default_website': website,
                                        'show_vat': True,
                                    }"
                                />
                                <field name="website" widget="url" placeholder="e.g. https://www.hashmicro.com"/>
                                <field name="partner_name"/>
                                <label for="street_page_lead" string="Address"/>
                                <div class="o_address_format">
                                    <field name="street" id="street_page_lead" placeholder="Street..." class="o_address_street"/>
                                    <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                                    <field name="city" placeholder="City" invisible="1"/>
                                    <field name="city_id" style="margin-right: 5px;" placeholder="City" options='{"no_open": True}'/>
                                    <field name="state_id" style="margin-right: 5px;" placeholder="State" options='{"no_open": True}'/>
                                    <field name="zip" placeholder="ZIP"/>
                                    <field name="country_id" placeholder="Country"  options='{"no_open": True, "no_create": True}'/>
                                    <field name="one_metting" invisible="1"/>
                                    <field name="multiple_metting" invisible="1"/>
                                </div>
                                <field name="scale"/>
                            </group>
                            <group name="salesperson_left" width="100px">
                                <field name="user_id" domain="[('share', '=', False)]"
                                       context="{'default_sales_team_id': team_id}" widget="many2one_avatar_user" groups="!equip3_crm_operation.group_use_multi_salesperson_on_leads"/>
                                <field name="salesperson_lines" widget="one2many_list" groups="equip3_crm_operation.group_use_multi_salesperson_on_leads">
                                    <tree string="Salesperson" editable="bottom" delete="1">
                                        <field name='salesperson_id'/>
                                        <field name='weightage'/>
                                        <field name='status'/>
                                    </tree>
                                </field>
                            </group>
                            <group name="info">
                                <field name="team_id" readonly="1"
                                       domain="['|', ('company_id', '=', False), ('company_id', '=', company_id)]"/>
                                <field name="user_id" invisible="1"/>
                                <field name="company_id"/>
                                <field name="branch_id"/>
                            </group>
                        </div>
                        <div class="col-4" name="col_2">
                            <group name="information_cust_right">
                                <label for="contact_name_page_lead"/>
                                <div class="o_row" style="word-wrap: break-word;">
                                    <field name="contact_name" id="contact_name_page_lead" style="max-width: 100%;word-wrap: break-word;"/>
                                    <field name="title" placeholder="Title" domain="[]" options='{"no_open": True}'/>
                                </div>
                                <field name="function" style="word-wrap: break-word;"/>
                                <field name="email_from" style="word-wrap: break-word;"/>
                                <label for="phone" string="Phone"/>
                                <div class="o_row">
                                    <field name="phone" string="Phone" />
                                    <field name="conversation_id" />
                                </div>
                                <field name="mobile_blacklisted" invisible="1"/>
                                <label for="mobile_page_lead" class="oe_inline"/>
                                <div class="o_row o_row_readonly">
                                    <button name="phone_action_blacklist_remove" class="fa fa-ban text-danger"
                                            title="This phone number is blacklisted for SMS Marketing. Click to unblacklist."
                                            type="object" context="{'default_phone': mobile}" groups="base.group_user"
                                            attrs="{'invisible': [('mobile_blacklisted', '=', False)]}"/>
                                    <field name="mobile" id="mobile_page_lead" widget="phone"/>
                                </div>
                                <field name="lang_id" options="{'no_create': True}"/>
                            </group>
                            <group name="salesperson_right">
                                <field name="decision_maker"/>
                                <field name="has_budget"/>
                                <field name="date_deadline" attrs="{'invisible': [('type', '=', 'lead')]}"/>
                                <!--                        <field name="priority" widget="priority" attrs="{'invisible': [('type', '=', 'lead')]}"/>-->
                                <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}" attrs="{'invisible': [('type', '=', 'lead')]}"/>
                                <field name="type_id" string="Lead Type"/>
                                <field name="activity_data" widget="list_activity"/>
                            </group>
                        </div>
                        <div class="col-4" name="col_3">
                            <group name="einstein_score" style="display: flex; margin-top: 0; margin-bottom: 0;">
                                <field name="einstein_score" invisible="1"/>
                                <field name="einstein_score_text" invisible="1"/>
                                <div id="einstein_score"></div>
                            </group>
                            <group name="marketing">
                                <field name="campaign_id" />
                                <field name="medium_id" />
                                <field name="source_id" />
                            </group>
                            <group name="Misc">
                                <field name="day_open" groups="base.group_no_one"/>
                                <field name="day_close" groups="base.group_no_one"/>
                                <field name="referred"/>
                                <field name="create_date"/>
                                <field name="type" invisible="1"/>
                            </group>
                        </div>
                    </div>
                </div>
                <group name="notes">
                    <field name="number_of_repetition" invisible="1"/>
                    <field name="description" string="Internal Notes" placeholder="Add a description..."/>
                </group>
            </xpath>
<!--            <xpath expr="//notebook/page[@name='internal_notes']" position="attributes">-->
<!--                <attribute name="invisible">1</attribute>-->
<!--            </xpath>-->
<!--            <xpath expr="//notebook/page[@name='lead']" position="attributes">-->
<!--                <attribute name="invisible">1</attribute>-->
<!--            </xpath>-->


<!--            <xpath expr="//group" position="after">-->
<!--                <group name="contact_info_main">-->
<!--                    <group name="contact_left">-->
<!--                        <field name="partner_name"/>-->
<!--                        <label for="street_page_lead" string="Address"/>-->
<!--                        <div class="o_address_format">-->
<!--                            <field name="street" id="street_page_lead" placeholder="Street..." class="o_address_street"/>-->
<!--                            <field name="street2" placeholder="Street 2..." class="o_address_street"/>-->
<!--                            <field name="city" placeholder="City" class="o_address_city"/>-->
<!--                            <field name="state_id" class="o_address_state" placeholder="State" options='{"no_open": True}'/>-->
<!--                            <field name="zip" placeholder="ZIP" class="o_address_zip"/>-->
<!--                            <field name="country_id" placeholder="Country" class="o_address_country" options='{"no_open": True, "no_create": True}'/>-->
<!--                            <field name="one_metting" invisible="1"/>-->
<!--                            <field name="multiple_metting" invisible="1"/>-->
<!--                        </div>-->
<!--                        <field name="website" widget="url" placeholder="e.g. https://www.hashmicro.com"/>-->
<!--&lt;!&ndash;                        <field name="lang_id" options="{'no_create': True}"/>&ndash;&gt;-->
<!--                        <field name="scale"/>-->
<!--                    </group>-->
<!--                    <group name="contact_right">-->
<!--                        <label for="contact_name_page_lead"/>-->
<!--                        <div class="o_row">-->
<!--                            <field name="contact_name" id="contact_name_page_lead"/>-->
<!--                            <field name="title" placeholder="Title" domain="[]" options='{"no_open": True}'/>-->
<!--                        </div>-->
<!--                        <field name="function"/>-->
<!--                        <label for="mobile_page_lead" class="oe_inline"/>-->
<!--                        <div class="o_row o_row_readonly">-->
<!--                            <button name="phone_action_blacklist_remove" class="fa fa-ban text-danger"-->
<!--                                title="This phone number is blacklisted for SMS Marketing. Click to unblacklist."-->
<!--                                type="object" context="{'default_phone': mobile}" groups="base.group_user"-->
<!--                                attrs="{'invisible': [('mobile_blacklisted', '=', False)]}"/>-->
<!--                            <field name="mobile" id="mobile_page_lead" widget="phone"/>-->
<!--                        </div>-->
<!--                        <field name="lang_id" options="{'no_create': True}"/>-->
<!--                    </group>-->
<!--                    <group name="org">-->
<!--                        <field name="campaign_id" />-->
<!--                        <field name="medium_id" />-->
<!--                        <field name="source_id" />-->
<!--                    </group>-->
<!--                    <group name="Misc">-->
<!--                        <field name="day_open" groups="base.group_no_one"/>-->
<!--                        <field name="day_close" groups="base.group_no_one"/>-->
<!--                        <field name="referred"/>-->
<!--                        <field name="create_date"/>-->
<!--                        <field name="type" invisible="1"/>-->
<!--                    </group>-->
<!--                </group>-->
<!--                <group name="description">-->
<!--                    <field name="description" placeholder="Add a description..."/>-->
<!--                </group>-->
<!--            </xpath>-->
            <xpath expr="//field[@name='probability']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='probability']" position="after">
                <field name='probability_new'/>
            </xpath>
            <xpath expr="//field[@name='description']" position="attributes">
                <attribute name="string">Internal Notes</attribute>
            </xpath>
            <xpath expr="//page[@name='internal_notes']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//page[@name='lead']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//page[1]" position="after">
                <page string="Product For Quotation">
                    <field name="lead_product_ids"/>
                </page>
            </xpath>
<!--            <xpath expr="//page[6]" position="attributes">-->
<!--                <attribute name="invisible">1</attribute>-->
<!--            </xpath>-->
<!--            <xpath expr="//div[hasclass('oe_title')]" position="after">-->
<!--                <field name="einstein_score" invisible="1"/>-->
<!--                <field name="einstein_score_text" invisible="1"/>-->
<!--                <div id="einstein_score"></div>-->
<!--            </xpath>-->
<!--            <xpath expr="//group/group/field[@name='tag_ids']" position="before">-->
<!--                <xpath expr="//field[@name='user_id']" position="move"/>-->
<!--                <xpath expr="//field[@name='team_id']" position="move"/>-->
<!--                <xpath expr="//field[@name='company_id']" position="move"/>-->
<!--            </xpath>-->
<!--            <xpath expr="//group[@name='contact_left']" position="before">-->
<!--                <group name="decision_priority"></group>-->
<!--                 <group name="Tag_type"></group>-->
<!--            </xpath>-->
<!--             <xpath expr="//group[@name='decision_priority']" position="inside">-->
<!--                <field name="decision_maker"/>-->
<!--                <field name="has_budget"/>-->
<!--                <xpath expr="//field[@name='date_deadline']" position="move"/>-->
<!--                <xpath expr="//field[@name='priority']" position="move"/>-->
<!--            </xpath>-->
<!--            <xpath expr="//group[@name='Tag_type']" position="inside">-->
<!--                <xpath expr="//field[@name='tag_ids']" position="move"/>-->
<!--                <label for="type_id" string="Lead Type"/>-->
<!--                <field name="type_id" nolabel="1"/>-->
<!--                <label for="activity_data" class="oe_inline"/>-->
<!--                <div class="o_row o_row_readonly">-->
<!--                    <field name="activity_data" widget="list_activity"/>-->
<!--                </div>-->
<!--            </xpath>-->
<!--            <xpath expr="//field[@name='user_id']" position="attributes">-->
<!--                <attribute name="groups">!equip3_crm_operation.group_use_multi_salesperson_on_leads</attribute>-->
<!--            </xpath>-->
<!--            <xpath expr="//group[@name='opportunity_info']" position="after">-->
<!--                <group groups="equip3_crm_operation.group_use_multi_salesperson_on_leads">-->
<!--                    <field name="salesperson_lines" widget="one2many_list">-->
<!--                        <tree string="Salesperson" editable="bottom" delete="1">-->
<!--                            <field name='salesperson_id'/>-->
<!--                            <field name='weightage'/>-->
<!--                            <field name='status'/>-->
<!--                        </tree>-->
<!--                    </field>-->
<!--                </group>-->
<!--            </xpath>-->
            <field name="automated_probability" position="replace">
                <field class="mb0" name="automated_probability_new" force_save="1"/>
            </field>
        </field>
    </record>

    <record id="crm_case_form_view_oppor_inherit_product" model="ir.ui.view">
        <field name="name">crm.lead.oppor.inherited</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form" />
        <field name="arch" type="xml">
            <xpath expr="//page[last()]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>

   <!--  <record id="view_crm_case_my_activities_filter_inherits" model="ir.ui.view">
        <field name="name">crm.lead.search.myactivities.inherits</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.view_crm_case_leads_filter"/>
        <field name="arch" type="xml">

            <xpath expr="//filter[@name='assigned_to_me']" position="attributes">
                <attribute name="string">My Follow Up</attribute>
            </xpath>
            <xpath expr="//filter[@name='activities_overdue']" position="attributes">
                <attribute name="string">Late Follow Up</attribute>
            </xpath>
            <xpath expr="//filter[@name='activities_today']" position="attributes">
                <attribute name="string">Today Follow Up</attribute>
            </xpath>
            <xpath expr="//filter[@name='activities_upcoming_all']" position="attributes">
                <attribute name="string">Future Follow Up</attribute>
            </xpath>
        </field>
    </record> -->

    <record id="view_crm_case_opportunities_filter_inherit_new" model="ir.ui.view">
        <field name="name">crm.lead.search.opportunity.inherit.new</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.view_crm_case_opportunities_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='assigned_to_me']" position="attributes">
                <attribute name="string">My Leads</attribute>
                <attribute name="domain">[('salesperson_lines.salesperson_id', '=', uid)]</attribute>
            </xpath>
            <xpath expr="//field[@name='phone_mobile_search']" position="after">
                <field name="one_metting" invisible="1"/>
                <field name="is_due_date" invisible="1"/>
                <field name="multiple_metting" invisible="1"/>
                <field name="quot_count" invisible="1"/>
            </xpath>
            <xpath expr="//filter[@name='assigned_to_me']" position="after">
                <filter string="No Activity" name="no_activity"
                        domain="[('res_activity_ids', '=', False)]"/>
                <filter string="No Quote" name="no_quote"
                        domain="[('quot_count', '=', 0)]"/>
                <filter string="Has Quote" name="no_quote"
                        domain="[('order_ids.state', '!=', 'cancel')]"/>
                <filter string="Sent Quote" name="sent_quote"
                        domain="[('order_ids.state', '=', 'sent')]"/>
                <filter string="Activity Due Today" name="activity_due_today"
                        domain="[('due_date_activity', '=', True)]"/>
                <filter string="Next Week has Activity" name="next_week_has_activity"
                        domain="[('next_week_has_activity', '=', True)]"/>
                <filter string="Next Week no Activity" name="next_week_no_activity"
                        domain="[('next_week_no_activity', '=', True)]"/>
                <filter string="This Week has Activity" name="this_week_has_activity"
                        domain="[('this_week_has_activity', '=', True)]"/>
                <filter string="This Week no Activity" name="this_week_no_activity"
                        domain="[('this_week_no_activity', '=', True)]"/>
                <filter string="Last Week has Activity" name="last_week_has_activity"
                        domain="[('last_week_has_activity', '=', True)]"/>
                <filter string="Last Week no Activity" name="last_week_no_activity"
                        domain="[('last_week_no_activity', '=', True)]"/>
                <filter string="Had one meeting only" name="had_one_meeting_only" domain="[('only_one_meeting', '=', True)]"/>
                <filter string="Missed Follow Up" name="missed_follow_up" domain="[('is_due_date', '=', True)]"/>
                <filter string="Had first meetings" name="had_one_metting" domain="[('one_metting', '=', True)]"/>
                <filter string="Had multiple meetings" name="had_multiple_metting" domain="[('multiple_metting', '=', True)]"/>
                <filter string="All Included Lost" name="all_included_lost" domain="['|', ('active', '=', True), ('active', '=', False)]"/>
            </xpath>
            <xpath expr="//group" position="inside">
                <filter string="City" name="city" context="{'group_by':'city'}"/>
                <filter string="Country" name="country" context="{'group_by':'country_id'}"/>
                <filter string="Lost Reason" name="lost_reason" context="{'group_by':'lost_reason'}"/>
                <filter string="Campaign" name="campaign" context="{'group_by':'campaign_id'}"/>
                <filter string="Medium" name="medium" context="{'group_by':'medium_id'}"/>
                <filter string="Source" name="source" context="{'group_by':'source_id'}"/>
                <filter string="Stage" name="stage" context="{'group_by':'stage_id'}"/>
            </xpath>
        </field>
    </record>

    <record id="res_city_search_inherit" model="ir.ui.view">
        <field name="name">res.city.search.inherit</field>
        <field name="model">res.country.city</field>
        <field name="inherit_id" ref="equip3_general_features.res_city_search"/>
        <field name="arch" type="xml">
            <xpath expr="//search" position="inside">
                <field name="name"/>
                <field name="state_id"/>
            </xpath>
        </field>
    </record>

    <record id="mail_activity_type_view_form_inherit" model="ir.ui.view">
        <field name="name">mail.activity.type.view.form.inherit</field>
        <field name="model">mail.activity.type</field>
        <field name="inherit_id" ref="mail.mail_activity_type_view_form"/>
        <field name="arch" type="xml">
            <field name="force_next" position="attributes">
                <attribute name="string">Trigger Next Follow Ups</attribute>
            </field>
            <field name="default_next_type_id" position="attributes">
                <attribute name="string">Default Next Follow Ups</attribute>
            </field>
            <field name="next_type_ids" position="attributes">
                <attribute name="string">Recommended Next Follow Ups</attribute>
            </field>
        </field>
    </record>

    <record id="crm_case_tree_view_oppor_inherit" model="ir.ui.view">
        <field name="name">crm.lead.tree.opportunity.inherit</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_tree_view_oppor"/>
        <field name="arch" type="xml">
            <field name="name" position="attributes">
                <attribute name="width">150px</attribute>
            </field>
            <field name="contact_name" position="attributes">
                <attribute name="width">150px</attribute>
            </field>
            <field name="email_from" position="attributes">
                <attribute name="width">150px</attribute>
            </field>
            <field name="phone" position="attributes">
                <attribute name="width">150px</attribute>
            </field>
            <field name="company_id" position="attributes">
                <attribute name="width">150px</attribute>
            </field>
            <field name="user_id" position="attributes">
                <attribute name="width">150px</attribute>
                <attribute name="string">Main Salesperson</attribute>
            </field>
            <field name="team_id" position="attributes">
                <attribute name="width">150px</attribute>
            </field>
            <field name="activity_ids" position="attributes">
                <attribute name="width">150px</attribute>
            </field>
            <field name="activity_date_deadline_my" position="attributes">
                <attribute name="width">150px</attribute>
            </field>
        </field>
    </record>

    <record id="crm_similar_leads_view_tree" model="ir.ui.view">
        <field name="name">crm.similar.leads.view.tree.inherit</field>
        <field name="model">crm.lead</field>
        <field name="mode">primary</field>
        <field name="inherit_id" ref="crm.crm_case_tree_view_oppor"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='contact_name']" position="after">
                <field name='website'/>
            </xpath>
            <xpath expr="//field[@name='phone']" position="after">
                <field name='mobile'/>
            </xpath>
            <xpath expr="//field[@name='company_id']" position="attributes">
                <attribute name="optional">hide</attribute>
            </xpath>
            <xpath expr="//field[@name='company_id']" position="after">
                <field name="branch_id"/>
            </xpath>
            <xpath expr="//field[@name='activity_ids']" position="attributes">
                <attribute name="optional">hide</attribute>
            </xpath>
            <xpath expr="//field[@name='activity_date_deadline_my']" position="attributes">
                <attribute name="optional">hide</attribute>
            </xpath>
            <xpath expr="//field[@name='stage_id']" position="attributes">
                <attribute name="optional">hide</attribute>
            </xpath>
        </field>
    </record>

    <record id="model_duplicate_target_activity" model="ir.actions.server">
        <field name="name">Duplicate</field>
        <field name="model_id" ref="equip3_crm_operation.model_target_activity"/>
        <field name="binding_model_id" ref="equip3_crm_operation.model_target_activity"/>
        <field name="binding_view_types">form</field>
        <field name="state">code</field>
        <field name="code">action = records.duplicate_target_activity()</field>
    </record>

<!--     <record id="crm.crm_lead_action_my_activities" model="ir.actions.act_window">
        <field name="name">Follow Ups</field>
        <field name="search_view_id" ref="equip3_crm_operation.view_crm_case_my_activities_filter_inherits"/>
    </record> -->

    <record id="crm.crm_lead_action_pipeline" model="ir.actions.act_window">
        <field name="name">Opportunities</field>
        <field name="context">{'default_type': 'opportunity'}</field>
    </record>

    <record id="crm.crm_menu_leads" model="ir.ui.menu">
        <field name="active" eval="True"/>
    </record>

    <record id="crm.crm_lead_menu_my_activities" model="ir.ui.menu">
        <field name="name">Follow Ups</field>
    </record>

    <record id="crm.crm_opportunity_report_menu_lead" model="ir.ui.menu">
        <field name="active" eval="False"/>
    </record>

    <record id="crm.menu_crm_opportunities" model="ir.ui.menu">
        <field name="name">Opportunities</field>
        <field name="parent_id" ref="crm.crm_menu_sales"/>
    </record>

    <record id="sale_crm.sale_order_menu_quotations_crm" model="ir.ui.menu">
        <field name="name">Quotations</field>
    </record>

    <record id="crm.crm_opportunity_report_menu" model="ir.ui.menu">
        <field name="name">Leads Analysis</field>
    </record>

    <record id="crm.crm_opportunity_report_action" model="ir.actions.act_window">
        <field name="name">Leads Analysis</field>
        <field name="context">{'search_default_lead': True, 'search_default_current': True}</field>
    </record>

    <record id="crm.crm_activity_report_menu" model="ir.ui.menu">
        <field name="name">Follow Ups Analysis</field>
    </record>

    <record id="sales_team.mail_activity_type_action_config_sales" model="ir.actions.act_window">
        <field name="name">Follow Ups Type</field>
    </record>

    <record id="crm.crm_team_menu_config_activity_types" model="ir.ui.menu">
        <field name="name">Follow Ups Type</field>
    </record>

    <record id="crm.menu_crm_config_lead" model="ir.ui.menu">
        <field name="name">Leads</field>
    </record>

    <record id="action_orders_crm" model="ir.actions.act_window">
        <field name="name">Sales Orders</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">tree,kanban,form,calendar,pivot,graph,activity</field>
        <field name="search_view_id" ref="sale.sale_order_view_search_inherit_sale"/>
        <field name="context">{"search_default_my_sale_orders_filter":1}</field>
        <field name="domain">[('state', 'in', ('sale', 'cancel')), ('is_quotation_cancel', '=', False)]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new quotation, the first step of a new sale!
            </p><p>
            Once the quotation is confirmed, it becomes a sales order.<br/> You will be able to create an invoice and collect the payment.
        </p>
        </field>
    </record>

    <record id="sale.action_quotations" model="ir.actions.act_window">
        <field name="domain">['|', ('state', 'not in', ('sale', 'cancel')), ('is_quotation_cancel', '=', True)]</field>
    </record>

    <menuitem
            id="sale_order_menu_order_crm"
            name="Orders"
            action="action_orders_crm"
            parent="crm.crm_menu_sales"
            sequence="3"/>

    <function model="crm.lead" name="_set_false_boolean_lead_generation"/>

</odoo>