<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
    <record id="variable_engineering_form" model="ir.ui.view">
        <field name="name">variable.engineering.inherited</field>
        <field name="model">variable.template</field>
        <field name="inherit_id" ref="equip3_construction_masterdata.variable_estimate_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='variable_uom']" position="before">
                <field name="construction_type" attrs="{'invisible': [('variable_subcon', '=', True)]}"/>
            </xpath>
            <xpath expr="//field[@name='branch_id']" position="after">
                <field name="bom_id" readonly="1" force_save="1" attrs="{'invisible': [('variable_subcon', '=', False)]}"/>
                <field name="is_manuf" readonly="1" force_save="1" invisible="1"/>
            </xpath>
            <xpath expr="//page[@name='material']" position="attributes">
                <attribute name="attrs">{'invisible': [('is_manuf', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//page[@name='labour']" position="attributes">
                <attribute name="attrs">{'invisible': [('is_manuf', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//page[@name='service']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('variable_subcon', '=', False), ('is_manuf', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//page[@name='overhead']" position="attributes">
                <attribute name="attrs">{'invisible': [('is_manuf', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//page[@name='equipment']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('variable_subcon', '=', False), ('is_manuf', '=', True)]}</attribute>
            </xpath>
           
            <xpath expr="//page[@name='material']" position="before">
                <page name="manufacture" string="To Manufacture" attrs="{'invisible': ['|', ('variable_subcon', '=', True), ('construction_type', '=', 'construction')]}">
                    <field name="manufacture_line_variable" widget="one2many_list" class="o_variable_line">
                        <tree editable='bottom'>
                            <control>
                                <create name="add_product_control" string="Add a product"/>
                            </control>
                            <field name="sequence" widget="handle"/>
                            <field name="sr_no"/>
                            <field name="company_id" invisible="1"/>
                            <field name="finish_good_id" domain="[('finish_goods_bom_count','>',0)]"/>
                            <field name="bom_id" attrs="{'readonly': [('finish_good_id', '=', False)]}"/>
                            <field name="quantity" attrs="{'readonly': [('bom_id', '=', False)]}"/>
                            <field name="uom_id" force_save="1" attrs="{'readonly': [('bom_id', '=', False)]}"/>
                            <field name="subtotal" widget="monetary" options="{'currency_field': 'currency_id'}" force_save="1"/>
                            <field name="currency_id" invisible="1"/>
                            <field name="onchange_pass" invisible="1"/>
                        </tree>
                    </field>
                    <group class="oe_subtotal_footer oe_right" colspan="2" name="total_variable_estimate">
                        <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                            <label for="total_variable_manufacture" />
                        </div>
                        <field name="total_variable_manufacture" nolabel="1" class="oe_subtotal_footer_separator" widget='monetary'/>
                    </group>
                </page>
            </xpath>
            <xpath expr="//page[@name='material']/field/tree/field[@name='group_of_product']" position="before">
                <field name="finish_good_id" domain="[('finish_goods_bom_count','>',0)]" attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}"/>
                <field name="bom_id" attrs="{'readonly': [('finish_good_id', '=', False)], 'required': [('finish_good_id', '!=', False)], 'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}" domain="[('product_tmpl_id','=', finish_good_id)]" />
                <field name="operation_two_id" readonly='1' force_save='1' optional='hide' attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}" />
            </xpath>
            <xpath expr="//page[@name='labour']/field/tree/field[@name='group_of_product']" position="before">
                <field name="finish_good_id" domain="[('finish_goods_bom_count','>',0)]" attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}"/>
                <field name="bom_id" attrs="{'readonly': [('finish_good_id', '=', False)], 'required': [('finish_good_id', '!=', False)], 'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}" domain="[('product_tmpl_id','=', finish_good_id)]" />
                <field name="operation_two_id" readonly='1' force_save='1' optional='hide' attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}" />
            </xpath>
            <xpath expr="//page[@name='overhead']/field/tree/field[@name='overhead_catagory']" position="before">
                <field name="finish_good_id" domain="[('finish_goods_bom_count','>',0)]" attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}"/>
                <field name="operation_two_id" readonly='1' force_save='1' optional='hide' attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}" />
            </xpath>
            <xpath expr="//page[@name='subcon']/field/tree/field[@name='variable']" position="before">
                <field name="finish_good_id" domain="[('finish_goods_bom_count','>',0)]" attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}"/>
                <field name="bom_id" attrs="{'readonly': [('finish_good_id', '=', False)], 'required': [('finish_good_id', '!=', False)], 'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}" domain="[('product_tmpl_id','=', finish_good_id)]" />
                <field name="operation_two_id" readonly='1' force_save='1' optional='hide' attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}" />
            </xpath>
            <xpath expr="//page[@name='asset']/notebook/page[@name='internal_asset']/field/tree/field[@name='asset_category_id']" position="before">
                <field name="finish_good_id" domain="[('finish_goods_bom_count','>',0)]" attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}"/>
                <field name="bom_id" attrs="{'readonly': [('finish_good_id', '=', False)], 'required': [('finish_good_id', '!=', False)], 'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}" domain="[('product_tmpl_id','=', finish_good_id)]" />
               <field name="operation_two_id" readonly='1' force_save='1' optional='hide' attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}" />
            </xpath>
            <xpath expr="//page[@name='asset']/notebook/page[@name='equipment']/field/tree/field[@name='group_of_product']" position="before">
                <field name="finish_good_id" domain="[('finish_goods_bom_count','>',0)]" attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}"/>
                <field name="bom_id" attrs="{'readonly': [('finish_good_id', '=', False)], 'required': [('finish_good_id', '!=', False)], 'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}" domain="[('product_tmpl_id','=', finish_good_id)]" />
                <field name="operation_two_id" readonly='1' force_save='1' optional='hide' attrs="{'column_invisible': ['|', ('parent.variable_subcon', '=', True), ('parent.construction_type', '=', 'construction')]}" />
            </xpath>

        </field>
    </record>
</data>
</odoo>