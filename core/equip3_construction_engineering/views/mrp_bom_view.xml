<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="mrp_bom_form_view_cons" model="ir.ui.view">
        <field name="name">bills.of.materials.cons.form.inherit</field>
        <field name="model">mrp.bom</field>
        <field name="inherit_id" ref="mrp.mrp_bom_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='create_uid']" position="after">
                <field name="variable_ref" readonly="1" force_save="1"/>
                <field name="name" invisible="1" readonly="1" force_save="1"/>
            </xpath>
            <xpath expr="//page[@name='components']/field[@name='bom_line_ids']/tree/field[@name='product_id']" position="before">
                <field name="group_of_product"/>
            </xpath>
            <xpath expr="//page[@name='components']/field[@name='bom_line_ids']/tree/field[@name='product_id']" position="attributes">
                <attribute name="domain">[('group_of_product','=', group_of_product), ('type', '=', 'product'), ('type', '=', 'product'), '|', ('company_id', '=', company_id), ('company_id', '=', False)]</attribute>
            </xpath>
            <xpath expr="//page[@name='components']" position="after">
                <page name="labour" string="Labour">
                    <field name="labour_ids" widget="one2many_list">
                        <tree editable='bottom'>
                            <control>
                                <create name="add_product_control" string="Add a line"/>
                            </control>
                            <field name="company_id" invisible="1"/>
                            <field name="sequence" widget="handle"/>
                            <field name="group_of_product"/>
                            <field name="product_id" domain="[('group_of_product','=', group_of_product)]"/>
                            <field name="contractors" attrs="{'readonly': [('product_id', '=', False)]}"/>
                            <field name="time" attrs="{'readonly': [('product_id', '=', False)]}" />
                            <field name="quantity" attrs="{'readonly': [('product_id', '=', False)]}" force_save="1"/>
                            <field name="uom_id" force_save="1" attrs="{'readonly': [('product_id', '=', False)]}"/>
                            <field name="operation_two_ids" widget="many2many_tags" invisible="1"/>
                            <field name="operation_two_id"/>
                            <field name="cost" readonly="1" force_save="1"/>
                            <!-- <field name="unit_price" attrs="{'readonly': [('product_id', '=', False)]}"/>
                            <field name="subtotal" widget="monetary" force_save="1"/> -->
                        </tree>
                    </field>
                </page>
                <page name="overhead" string="Overhead">
                    <field name="overhead_ids" widget="one2many_list"> 
                        <tree editable='bottom'>
                            <control>
                                <create name="add_product_control" string="Add a line"/>
                            </control>
                            <field name="company_id" invisible="1"/>
                            <field name="sequence" widget="handle"/>
                            <field name="overhead_catagory" required="1"/>
                            <field name="group_of_product" />
                            <field name="product_id" domain="[('group_of_product','=', group_of_product)]"/>
                            <field name="quantity" attrs="{'readonly': [('product_id', '=', False)]}"/>
                            <field name="uom_id" force_save="1" attrs="{'readonly': [('product_id', '=', False)]}"/>
                            <field name="operation_two_ids" widget="many2many_tags" invisible="1"/>
                            <field name="operation_two_id"/>
                            <field name="cost" readonly="1" force_save="1"/>
                            <!-- <field name="unit_price" attrs="{'readonly': [('product_id', '=', False)]}"/>
                            <field name="subtotal" widget="monetary" force_save="1"/> -->
                        </tree>
                    </field>
                </page>
                <page name="asset" string="Asset">
                    <notebook>
                        <page name="internal_asset" string="Internal Asset">
                            <field name="asset_ids" widget="one2many_list">
                                <tree string="Asset" editable="bottom">
                                    <field name="company_id" invisible="1"/>
                                    <field name="sequence" widget="handle"/>
                                    <field name="asset_category_id" required="1"/>
                                    <field name="asset_id" required="1"/>
                                    <field name="description" required="1"/>
                                    <field name="quantity" attrs="{'readonly': [('asset_id', '=', False)]}"/>
                                    <field name="uom_id" force_save="1" attrs="{'readonly': [('asset_id', '=', False)]}"/>
                                    <field name="operation_two_ids" widget="many2many_tags" invisible="1"/>
                                    <field name="operation_two_id"/>
                                    <field name="cost" readonly="1" force_save="1"/>
                                    <!-- <field name="unit_price" attrs="{'readonly': [('asset_id', '=', False)]}"/>
                                    <field name="subtotal" widget="monetary" force_save="1"/> -->
                                </tree>
                            </field>
                        </page>
                        <page name="equipment" string="Equipment Lease">
                            <field name="equipment_ids" widget="one2many_list">
                                <tree editable='bottom'>
                                    <control>
                                        <create name="add_product_control" string="Add a line"/>
                                    </control>
                                    <field name="company_id" invisible="1" />
                                    <field name="sequence" widget="handle"/>
                                    <field name="group_of_product" />
                                    <field name="product_id" domain="[('group_of_product','=', group_of_product)]"/>
                                    <field name="description" attrs="{'readonly': [('product_id', '=', False)]}"/>
                                    <field name="quantity" attrs="{'readonly': [('product_id', '=', False)]}"/>
                                    <field name="uom_id" force_save="1" attrs="{'readonly': [('product_id', '=', False)]}"/>
                                    <field name="operation_two_ids" widget="many2many_tags" invisible="1"/>
                                    <field name="operation_two_id"/>
                                    <field name="cost" readonly="1" force_save="1"/>
                                    <!-- <field name="unit_price" attrs="{'readonly': [('product_id', '=', False)]}"/>
                                    <field name="subtotal" widget="monetary" force_save="1"/> -->
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </page>
            </xpath>
        </field>
    </record>
</odoo>