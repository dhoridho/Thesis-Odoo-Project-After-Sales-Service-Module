<?xml version='1.0' encoding='utf-8'?>
<odoo>

    <record id="existing_quotation_inherit_view" model="ir.ui.view">
        <field name="name">existing.quotation.inherit.view</field>
        <field name="model">job.estimate.existing.quotation.const</field>
        <field name="inherit_id" ref="equip3_construction_sales_operation.job_estimate_existing_quotation_const"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook/page[@name='variable']" position="after">
                <page string="To Manufacture" name="manufacture" attrs="{'invisible':[('is_engineering','=',False)]}">
                    <field name='manufacture_line'>
                        <tree editable="bottom">
                            <field name="is_active"/>
                            <field name="wiz_id" invisible="1"/>
                            <field name="job_estimate_id" invisible="1"/>
                            <field name="manufacture_id" invisible="1"/>
                            <field name='number' invisible="1"/>
                            <field name='project_scope_id' domain="[('project_id', '=', parent.project_id)]"/>
                            <field name='section_id' domain="[('project_scope','=', project_scope_id), ('project_id','=', parent.project_id)]" />
                            <field name="final_finish_good_id"/>
                            <field name='finish_good_id' domain="[('finish_goods_bom_count','>',0)]"/>
                            <field name='bom_id' domain="[('product_tmpl_id','=', finish_good_id)]"/>
                            <field name='quantity'/>
                            <field name='uom_id'/>
                            <field name='subtotal'/>
                            <field name="cascaded" force_save="1" invisible="1"/>
                            <field name="is_child" force_save="1"/>
                            <field name="parent_manuf_line" invisible="1"/>
                        </tree>
                    </field>
                </page>
            </xpath>
            <xpath expr="//group[1]" position="inside">
                <field name="is_engineering"/>
            </xpath>
            <xpath expr="//notebook/page[@name='material_estimation']/field[@name='material_estimation_wiz']/tree/field[@name='variable_ref']" position="after">
                <field name="final_finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="bom_id" optional='hide' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
            </xpath>
            <xpath expr="//notebook/page[@name='manpower_estimation']/field[@name='labour_estimation_wiz']/tree/field[@name='variable_ref']" position="after">
                <field name="final_finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="bom_id" optional='hide' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
            </xpath>
            <xpath expr="//notebook/page[@name='overhead_estimation']/field[@name='overhead_estimation_wiz']/tree/field[@name='variable_ref']" position="after">
                <field name="final_finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="bom_id" optional='hide' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
            </xpath>
            <xpath expr="//notebook/page[@name='asset_estimation']/notebook/page[@name='internal_asset_estimation']/field[@name='internal_asset_wiz']/tree/field[@name='variable_ref']" position="after">
                <field name="final_finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="bom_id" optional='hide' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
            </xpath>
            <xpath expr="//notebook/page[@name='asset_estimation']/notebook/page[@name='equipment_estimation']/field[@name='equipment_estimation_wiz']/tree/field[@name='variable_ref']" position="after">
                <field name="final_finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="bom_id" optional='hide' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
            </xpath>
            <xpath expr="//notebook/page[@name='subcon_estimation']/field[@name='subcon_estimation_wiz']/tree/field[@name='variable_ref']" position="after">
                <field name="final_finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="finish_good_id" optional='show' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
                <field name="bom_id" optional='hide' attrs="{'column_invisible':[('parent.is_engineering','=',False)]}"/>
            </xpath>
        </field>
    </record>

</odoo>