<?xml version='1.0' encoding='utf-8'?>
<odoo>

    <!-- deposit.vendor inherit form view -->
    <record id="vendor_deposit_inherit_construction_view_form" model="ir.ui.view">
        <field name="name">vendor.deposit.inherit.construction.view.form</field>
        <field name="model">vendor.deposit</field>
        <field name="inherit_id" ref="equip3_accounting_cash_advance.vendor_deposite_inherit_view_form_new"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='employee_id']" position="before">
                <field name="project_id" 
                       options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}"
                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                <field name="budgeting_method" invisible='1'/>
                <field name="budgeting_period" invisible='1'/>
                <field name="cost_sheet_id" 
                       attrs="{'invisible': [('project_id', '=', False)], 'required': [('project_id', '!=', False)]}" 
                       force_save="1" readonly='1'/>
                <field name="project_budget_id" 
                       domain="[('project_id', '=', project_id),('state', '=', 'in_progress')]"
                       options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}"
                       attrs="{'required': [('budgeting_period', 'in', ('monthly', 'custom'))], 
                                'invisible': ['|', ('project_id', '=', False), ('budgeting_period', 'not in', ('monthly', 'custom'))],
                                'readonly': [('state', '!=', 'draft')]}"/>
                <field name="job_order" 
                       domain="[('project_id', '=', project_id),('state', '=', 'inprogress')]"
                       options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}" 
                       attrs="{'required': [('project_id', '!=', False)], 
                                'invisible': [('project_id', '=', False)],
                                'readonly': [('state', '!=', 'draft')]}"/>
            </xpath>
            <xpath expr="//field[@name='amount']" position="before">
                <field name="material_overhead_id" 
                       force_save="1"
                       options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}"
                       attrs="{'invisible': ['|',('project_id', '=', False), ('budgeting_period', 'in', ('monthly', 'custom'))], 
                                'required': [('budgeting_period', '=', 'project')], 
                                'readonly': [('state', '!=', 'draft')]}"/>
                <field name="budget_overhead_id" 
                       force_save="1"
                       options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}"
                       attrs="{'invisible': ['|',('project_id', '=', False), ('budgeting_period', 'not in', ('monthly', 'custom'))], 
                                'required': [('budgeting_period', 'in', ('monthly', 'custom'))], 
                                'readonly': [('state', '!=', 'draft')]}"/>
                <field name="is_continue_over_budget" invisible="1"/>
            </xpath>
        </field>
    </record>

</odoo>