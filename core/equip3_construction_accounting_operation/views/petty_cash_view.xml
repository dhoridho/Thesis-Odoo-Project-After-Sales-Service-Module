<?xml version="1.0" ?>
<odoo>
    <data>
        <record id="custom_view_account_pettycash_form" model="ir.ui.view">
            <field name="name">account.pettycash.form</field>
            <field name="model">account.pettycash</field>
            <field name="inherit_id" ref="equip3_accounting_pettycash.view_account_pettycash_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form/sheet/group/group[1]/field[@name='name']" position="after">
                    <field name="project"
                           options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}"
                           attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="budgeting_method" invisible='1'/>
                    <field name="budgeting_period" invisible='1'/>
                    <field name="cost_sheet" force_save="1" readonly="1"                    
                        attrs="{'invisible': [('project', '=', False)], 'required': [('project', '!=', False)]}"/>
                    <field name="project_budget" 
                           domain="[('project_id', '=', project),('state', '=', 'in_progress')]"
                           options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}" 
                           attrs="{'required': [('budgeting_period', 'in', ('monthly', 'custom'))], 
                                   'invisible': ['|', ('project', '=', False), ('budgeting_period', 'not in', ('monthly', 'custom'))],
                                   'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="job_order" domain="[('project_id', '=', project),('state', '=', 'inprogress')]"
                           options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}" 
                           attrs="{'required': [('project', '!=', False)], 
                                   'invisible': [('project', '=', False)],
                                   'readonly': [('state', '!=', 'draft')]}"/>
                </xpath>
                <xpath expr="//field[@name='journal']" position="after">
                    <field name="referred_budget_material" force_save="1" 
                           options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}"
                           attrs="{'invisible': ['|',('project', '=', False), ('budgeting_period', 'in', ('monthly', 'custom'))], 
                                   'required': [('budgeting_period', '=', 'project')], 
                                   'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="referred_budget_budget" force_save="1"
                           options="{'no_create': True, 'no_quick_create':True,'no_create_edit':True}"
                           attrs="{'invisible': ['|',('project', '=', False), ('budgeting_period', 'not in', ('monthly', 'custom'))], 
                                   'required': [('budgeting_period', 'in', ('monthly', 'custom'))], 
                                   'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="is_continue_over_budget" invisible="1"/>
                </xpath>
                <!-- <xpath expr="//field[@name='amount']" position="attributes">
                    <attribute name="attrs">{'readonly': [('project', '!=', False)], 'force_save': True}</attribute>
                </xpath> -->
            </field>
        </record>
    </data>        
</odoo> 
            