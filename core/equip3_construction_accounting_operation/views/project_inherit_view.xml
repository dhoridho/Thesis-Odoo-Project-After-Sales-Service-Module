<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- setting tab inherit -->
        <record id="project_setting_form_inherited" model="ir.ui.view">
            <field name="name">project.setting.form.inherited.construction.inherit</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.edit_project"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='costing']" position="before">
                    <page name="settings_account_version" string="Settings">
                        <notebook>
                            <page name="account_setting" string="Account Settings">
                                <group>
                                    <group name="receivable" string="Receivable">
                                        <field name="receivable_id" invisible="1"/>
                                        <field name="cip_account_id"/>
                                        <field name="revenue_id"/>
                                        <field name="down_payment_id"/>
                                        <field name="accrued_id"/>
                                        <field name="retention_id"/>
                                        <field name="income_tax_id" invisible="1"/>
                                        <field name="vat_tax_id" invisible="1"/>
                                        <field name="penalty_receivable"/>
                                    </group>
                                    <group name="payable" string="Payable">
                                        <field name="payable_account" invisible="1"/>
                                        <field name="cost_account"/>
                                        <field name="down_payment_account"/>
                                        <field name="accrued_account"/>
                                        <field name="retention_account"/>
                                        <field name="income_taxes_account" invisible="1"/>
                                        <field name="vat_account" invisible="1"/>
                                        <field name="penalty_payable"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </page>
                </xpath>
                <xpath expr="//notebook/page[@name='settings_account_version']/notebook/page[@name='account_setting']" position="before">
                    <xpath expr="//page[@name='settings']" position="move"/>
                </xpath>
                <xpath expr="//notebook/page[@name='settings_account_version']/notebook/page[@name='settings']" position="attributes">
                    <attribute name="string">General Settings</attribute>
                </xpath>
            </field>
        </record>

        <record id="variation_order_view_construction_inherit_again" model="ir.ui.view">
            <field name="name">variation.order.view.construction.inherit.again</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="equip3_construction_masterdata.variation_order_view_construction"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='penalty']/group[@name='group_1']/group[@name='group_1_1']" position="after">
                    <group>
                        <field name="cancel_date" attrs="{'invisible': [('primary_states', '!=', 'cancelled')]}"/>
                        <field name="penalty_doc" attrs="{'invisible': ['|', ('department_type', '=', 'department'), ('primary_states', '!=', 'cancelled')]}"/>
                        <field name="penalty_doc_exist" invisible="1"/>
                        <field name="hide_amount_client" invisible="1"/>
                    </group>
                </xpath>
            </field>
        </record>

        <record id="variation_order_view_construction_inherit_again_2" model="ir.ui.view">
            <field name="name">variation.order.view.construction.inherit.again.2</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="equip3_construction_masterdata.variation_order_view_construction_2"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='penalty']/group[@name='group_1']/group[@name='group_1_1']" position="after">
                    <group>
                        <field name="cancel_date" attrs="{'invisible': [('primary_states', '!=', 'cancelled')]}"/>
                        <field name="penalty_doc" attrs="{'invisible': ['|', ('department_type', '=', 'department'), ('primary_states', '!=', 'cancelled')]}"/>
                        <field name="penalty_doc_exist" invisible="1"/>
                        <field name="hide_amount_client" invisible="1"/>
                    </group>
                </xpath>
            </field>
        </record>

        <record id="project_form_view_inherit_construction_inherit123456" model="ir.ui.view">
            <field name="name">Project Form View Inherit Construction New</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="equip3_construction_masterdata.project_form_view_inherit_construction"/>
            <field name="arch" type="xml">

                <xpath expr="//button[@name='button_cancel']" position='after'>
                    <field name="hide_amount_client" invisible="1"/>
                    <button name="create_bill"
                            string="Create Bill"
                            type="object"
                            class="oe_highlight"
                            attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'contractor'), ('primary_states', '!=', 'cancelled'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/>

                    <button name="create_invoice"
                            string="Create Invoice"
                            type="object"
                            class="oe_highlight"
                            attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'client'), ('primary_states', '!=', 'cancelled'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/>
                </xpath>                
            </field>
        </record>

        <record id="project_form_view_inherit_construction_inherit123456_2" model="ir.ui.view">
            <field name="name">Project Form View Inherit Construction New 2</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="equip3_construction_masterdata.project_form_view_inherit_construction_sales"/>
            <field name="arch" type="xml">

                <xpath expr="//button[@name='button_cancel']" position='after'>
                    <field name="hide_amount_client" invisible="1"/>
                    <button name="create_bill"
                            string="Create Bill"
                            type="object"
                            class="oe_highlight"
                            attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'contractor'), ('primary_states', '!=', 'cancelled'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/>

                    <button name="create_invoice"
                            string="Create Invoice"
                            type="object"
                            class="oe_highlight"
                            attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'client'), ('primary_states', '!=', 'cancelled'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/>
                </xpath>                
            </field>
        </record>

        <record id="variation_order_view_construction_inherit_sale2" model="ir.ui.view">
            <field name="name">variation.order.view.construction.inherit.sale2</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="equip3_construction_masterdata.variation_order_view_construction"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook/page[@name='variation_order_ids']/field[@name='variation_order_ids']/tree/field[@name='vo_payment_type']" position="after">
                    <field name="claim_id" optional="hide"/>
                    <field name="state"
                           widget="badge"
                           decoration-secondary="state == 'draft'"
                           decoration-warning3="state == 'waiting_for_over_limit_approval' or state == 'to_approve'"
                           decoration-success2="state == 'over_limit_approved' or state == 'quotation_approved'"
                           decoration-danger="state == 'reject' or state == 'over_limit_reject'"
                           decoration-primary3="state == 'sent'"
                           decoration-success="state == 'sale'"
                           decoration-success3="state == 'done'"
                           decoration-danger2="state == 'cancel'"
                           decoration-warning="state == 'on_hold'"
                           decoration-danger3="state == 'block'"
                           />
                    <field name="responsible" optional="hide"/>
                    <field name="reason" optional="hide"/>
                    <field name="penalty_doc" invisible="1"/>
                    <field name="penalty_doc_exist" invisible="1"/>
                    <field name="hide_amount_client" invisible="1"/>
                    <field name="project_cancel" invisible="1"/>
                    <!-- <button string="Cancel Contract"  type="object" class="oe_highlight" name="button_cancel_contract" attrs="{'invisible': [('state', '=', 'cancel')]}"/>
                    <button string="Create Bill" name="create_bill" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', '|', ('responsible', '!=', 'contractor'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('project_cancel', '=', True), ('penalty_doc_exist', '=', True)]}"/>
                    <button string="Create Invoice" name="create_invoice" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', '|', ('responsible', '!=', 'client'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('project_cancel', '=', True), ('penalty_doc_exist', '=', True)]}"/> -->
                </xpath>
            </field>
        </record>

        <record id="variation_order_view_construction_inherit_sale2_again" model="ir.ui.view">
            <field name="name">variation.order.view.construction.inherit.sale2.again</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="equip3_construction_masterdata.variation_order_view_construction_2"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook/page[@name='variation_order_ids']/field[@name='variation_order_ids']/tree/field[@name='vo_payment_type']" position="after">
                    <field name="claim_id" optional="hide"/>
                    <field name="state"
                           widget="badge"
                           decoration-secondary="state == 'draft'"
                           decoration-warning3="state == 'waiting_for_over_limit_approval' or state == 'to_approve'"
                           decoration-success2="state == 'over_limit_approved' or state == 'quotation_approved'"
                           decoration-danger="state == 'reject' or state == 'over_limit_reject'"
                           decoration-primary3="state == 'sent'"
                           decoration-success="state == 'sale'"
                           decoration-success3="state == 'done'"
                           decoration-danger2="state == 'cancel'"
                           decoration-warning="state == 'on_hold'"
                           decoration-danger3="state == 'block'"
                           />
                    <field name="responsible" optional="hide"/>
                    <field name="reason" optional="hide"/>
                    <field name="penalty_doc" invisible="1"/>
                    <field name="penalty_doc_exist" invisible="1"/>
                    <field name="hide_amount_client" invisible="1"/>
                    <field name="project_cancel" invisible="1"/>
                    <!-- <button string="Cancel Contract"  type="object" class="oe_highlight" name="button_cancel_contract" attrs="{'invisible': [('state', '=', 'cancel')]}"/>
                    <button string="Create Bill" name="create_bill" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', '|', ('responsible', '!=', 'contractor'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('project_cancel', '=', True), ('penalty_doc_exist', '=', True)]}"/>
                    <button string="Create Invoice" name="create_invoice" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', '|', ('responsible', '!=', 'client'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('project_cancel', '=', True), ('penalty_doc_exist', '=', True)]}"/> -->
                </xpath>
            </field>
        </record>
        
        <record id="purchase_project_form_view_inherit_construction_purchase" model="ir.ui.view">
            <field name="name">Project Form View Inherit Construction Purchase</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="equip3_construction_masterdata.project_form_view_inherit_construction"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='contract_subcon_ids']/field[@name='contract_subcon_ids']/tree/field[@name='contract_amount_subcon']" position="after">
                    <field name="state"
                           widget="badge"
                           decoration-secondary="state == 'draft'"
                           decoration-warning3="state == 'waiting_for_approve'"
                           decoration-success2="state == 'over_limit_approved' or state == 'quotation_approved'"
                           decoration-danger="state == 'reject'"
                           decoration-primary3="state == 'sent'"
                           decoration-success3="state == 'done'"
                           decoration-danger2="state == 'cancel'"
                           decoration-warning="state == 'on_hold'"
                           decoration-danger3="state == 'block'"
                    />
                    <field name="responsible" optional="hide"/>
                    <field name="reason" optional="hide"/>
                    <field name="penalty_doc" invisible="1"/>
                    <field name="penalty_doc_exist" invisible="1"/>
                    <field name="hide_amount_client" invisible="1"/>
                    <button string="Cancel Contract" name="action_cancel" type="object" class="oe_highlight" attrs="{'invisible': [('state', '=', 'cancel')]}"/>
                    <button string="Create Bill" name="create_bill" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'contractor'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/>
                    <button string="Create Invoice" name="create_invoice" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'vendor'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/>
                </xpath>
                
            </field>
        </record>

        <record id="contract_subcon_form_view_inherit_construction_purchase" model="ir.ui.view">
            <field name="name">Contract Subcon View Inherit Construction Purchase</field>
            <field name="model">contract.subcon.const</field>
            <field name="inherit_id" ref="equip3_construction_purchase_operation.contract_order_subcon_construction_purchase"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook/page[@name='variation_subcon_ids']/field[@name='variation_subcon_ids']/tree/field[@name='vo_payment_type']" position="after">
                    <field name="state"
                           widget="badge"
                           decoration-secondary="state == 'draft'"
                           decoration-warning3="state == 'waiting_for_approve'"
                           decoration-success2="state == 'over_limit_approved' or state == 'quotation_approved'"
                           decoration-danger="state == 'reject'"
                           decoration-primary3="state == 'sent'"
                           decoration-success3="state == 'done'"
                           decoration-danger2="state == 'cancel'"
                           decoration-warning="state == 'on_hold'"
                           decoration-danger3="state == 'block'"
                    />
                    <field name="responsible" optional="hide"/>
                    <field name="reason" optional="hide"/>
                    <field name="penalty_doc" invisible="1"/>
                    <field name="penalty_doc_exist" invisible="1"/>
                    <field name="hide_amount_client" invisible="1"/>
                    <!-- <button string="Cancel Contract" name="action_cancel" type="object" class="oe_highlight" attrs="{'invisible': [('state', '=', 'cancel')]}"/>
                    <button string="Create Bill" name="create_bill" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'contractor'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/>
                    <button string="Create Invoice" name="create_invoice" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'vendor'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/> -->
                </xpath>
                <xpath expr="//notebook/page[@name='variation_subcon_ids']" position="after">
                    <page name="penalty" string="Penalty">
                        <group>
                            <group>
                                <field name="responsible" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                                <field name="reason" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                            </group>
                            <group>
                                <field name="cancel_date" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                                <field name="penalty_doc" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                                <field name="penalty_doc_exist" invisible="1"/>
                                <field name="hide_amount_client" invisible="1"/>
                                <field name="state" invisible="1"/>
                            </group>
                        </group>    
                        <br/>
                        <div width="100%">
                            <div>
                                <h3>
                                    <b>Penalty Details</b>
                                </h3>
                                <hr/>
                            </div>
                        </div>
                        <br/>
                        <div>
                            <field name="diff_penalty"/>
                            <label for="diff_penalty"/>
                        </div>
                        <group>
                            <group>                                            
                                <div width="100%" attrs="{'invisible': [('diff_penalty', '=', False)]}">
                                    <div>
                                        <h3>
                                            <b>Contractor</b>
                                        </h3>
                                        <hr/>
                                    </div>
                                </div>
                                <field name="method"/>
                                <label for="amount"/>
                                <div name="amount_div" class="o_row">
                                    <field name="amount" />
                                    <label for="amount" string="%" attrs="{'invisible': [('method', '=', 'fix')]}"/>
                                </div>                                            
                            </group>
                            <group name="pd_right" attrs="{'invisible': [('diff_penalty', '=', False)]}">                                            
                                <div width="100%">
                                    <div>
                                        <h3>
                                            <b>Client</b>
                                        </h3>
                                        <hr/>
                                    </div>
                                </div>
                                <field name="method_client"/>
                                <label for="amount_client"/>
                                <div name="amount_div" class="o_row">
                                    <field name="amount_client" />
                                    <label for="amount_client" string="%" attrs="{'invisible': [('method_client', '=', 'fix')]}"/>
                                </div>                                            
                            </group>
                        </group>
                    </page>
                </xpath>
                <xpath expr="//notebook/page[@name='variation_subcon_ids']" position="before">
                    <page name="subcon_stage_ids" string="Milestone and Contract Terms">
                        <field name="stage_ids" readonly="1">
                            <tree>
                                <field name="sr_no"/>
                                <field name="name"/>
                                <field name="claim_percentage"/>
                            </tree>
                        </field>
                    </page>
                </xpath>
                <xpath expr="//sheet[1]" position="before">
                    <header>
                        <button string="Cancel Contract" name="action_cancel" type="object" class="oe_highlight" attrs="{'invisible': [('state', '=', 'cancel')]}"/>
                        <button string="Create Bill" name="create_bill" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'contractor'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/>
                        <button string="Create Invoice" name="create_invoice" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'vendor'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,purchase"/>
                    </header>
                </xpath>
                
            </field>
        </record>

        <!-- setting tab inherit -->
        <record id="project_project_form_inherited_new" model="ir.ui.view">
            <field name="name">project.project.form.inherited.construction.inherit.new</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="equip3_construction_operation.project_invoice_form_inherited_edit"/>
            <field name="arch" type="xml">
                <xpath expr="//div[@id='is_set_projects_type']" position="after">
                    <div class="col-lg-6 o_setting_box"  id="retetion_claim_settings">
                        <div class="o_setting_left_pane">
                            <field name="flexible_reten"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="flexible_reten" string="Flexible Claim Retention"/>
                            <div class="text-muted">
                                Can claim retention even if it has not reached the date specified earlier 
                            </div>
                        </div>
                    </div>
                </xpath>
            </field>
        </record>

        <record id="variation_order_view_construction_form_view" model="ir.ui.view">
            <field name="name">variation.order.view.construction.form.view</field>
            <field name="model">variation.order.line</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <!-- <button string="Cancel Contract"  type="object" class="oe_highlight" name="button_cancel_contract" attrs="{'invisible': [('state', '=', 'cancel')]}"/>
                        <button string="Create Bill" name="create_bill" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', '|', ('responsible', '!=', 'contractor'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('project_cancel', '=', True), ('penalty_doc_exist', '=', True)]}"/>
                        <button string="Create Invoice" name="create_invoice" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', '|', ('responsible', '!=', 'client'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('project_cancel', '=', True), ('penalty_doc_exist', '=', True)]}"/> -->
                        <field name="state" widget="statusbar" statusbar_visible="draft,sale,done" />
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" />
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="order_date" />
                                <field name="contract_amount" />
                                <label for="down_payment" string="Down Payment"/>
                                    <div class="d-flex">
                                        <field name="dp_method" force_save="1" 
                                            placeholder="Method"/>
                                        <span class="oe_inline o_form_label mx-3 oe_read_only"> Amount </span>
                                        <field name="down_payment" force_save="1" 
                                            placeholder="Amount" required="1"/>
                                        <label for="down_payment" string="%%"  class="oe_inline"
                                            attrs="{'invisible': [('dp_method', '!=', 'per')]}"/>
                                    </div>
                                <field name="dp_amount" />
                                <field name="company_id" invisible="1"/>
                            </group>
                            <group>
                                <field name="retention1"/>
                                <field name="retention1_amount" />
                                <field name="retention_term_1"/>
                                <field name="retention2"/>
                                <field name="retention2_amount" />
                                <field name="retention_term_2"/>
                                <field name="tax_id" widget="many2many_tags"/>
                                <field name="payment_term" />
                                <field name="vo_payment_type"/>
                            </group>   
                        </group>
                        <notebook>    
                            <page name="penalty" string="Penalty">
                                <group name='group_1_var'>
                                    <group name='group_1_1_var'>
                                        <field name="responsible" readonly="1" force_save="1" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                                        <field name="reason" readonly="1" force_save="1" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                                    </group>
                                    <group name='group_1_2_var'>
                                        <field name="cancel_date" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                                        <field name="penalty_doc" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                                        <field name="penalty_doc_exist" invisible="1"/>
                                        <field name="hide_amount_client" invisible="1"/>
                                        <field name="project_cancel" invisible="1"/>        
                                    </group>
                                </group>
                                <br/>
                                <div width="100%">
                                    <div>
                                        <h3>
                                            <b>Penalty Details</b>
                                        </h3>
                                        <hr/>
                                    </div>
                                </div>
                                <br/>
                                <div>
                                    <field name="diff_penalty" />
                                    <label for="diff_penalty"/>
                                </div>
                                <group>
                                    <group>                                            
                                        <div width="100%" attrs="{'invisible': [('diff_penalty', '=', False)]}">
                                            <div>
                                                <h3>
                                                    <b>Contractor</b>
                                                </h3>
                                                <hr/>
                                            </div>
                                        </div>
                                        <field name="method" />
                                        <label for="amount"/>
                                        <div name="amount_div" class="o_row">
                                            <field name="amount" />
                                            <label for="amount" string="%" attrs="{'invisible': [('method', '=', 'fix')]}"/>
                                        </div>                                            
                                    </group>
                                    <group name="pd_right" attrs="{'invisible': [('diff_penalty', '=', False)]}">                                            
                                        <div width="100%">
                                            <div>
                                                <h3>
                                                    <b>Client</b>
                                                </h3>
                                                <hr/>
                                            </div>
                                        </div>
                                        <field name="method_client" />
                                        <label for="amount_client"/>
                                        <div name="amount_div" class="o_row">
                                            <field name="amount_client" />
                                            <label for="amount_client" string="%" attrs="{'invisible': [('method_client', '=', 'fix')]}"/>
                                        </div>                                            
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>    
            </field>
        </record>

        <record id="contract_subcon_form_view_inherit_construction_purchase_accounting" model="ir.ui.view">
            <field name="name">Contract Subcon View Inherit Construction Purchase Accounting</field>
            <field name="model">variation.subcon.line</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <!-- <button string="Cancel Contract" name="action_cancel" type="object" class="oe_highlight" attrs="{'invisible': [('state', '=', 'cancel')]}"/>
                        <button string="Create Bill" name="create_bill" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'contractor'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/>
                        <button string="Create Invoice" name="create_invoice" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', ('responsible', '!=', 'vendor'), ('state', '!=', 'cancel'), ('hide_amount_client', '=', True), ('penalty_doc_exist', '=', True)]}"/> -->
                        <field name="state" widget="statusbar" statusbar_visible="draft,sale,done" />
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="partner_id" />
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="name" />
                                <field name="order_date" />
                                <field name="contract_amount" />
                                <label for="down_payment" string="Down Payment"/>
                                    <div class="d-flex">
                                        <field name="dp_method" force_save="1" 
                                            placeholder="Method"/>
                                        <span class="oe_inline o_form_label mx-3 oe_read_only"> Amount </span>
                                        <field name="down_payment" force_save="1" 
                                            placeholder="Amount" required="1"/>
                                        <label for="down_payment" string="%%"  class="oe_inline"
                                            attrs="{'invisible': [('dp_method', '!=', 'per')]}"/>
                                    </div>
                                <field name="dp_amount" />
                                <field name="company_id" invisible="1"/>
                            </group>
                            <group>
                                <field name="retention1"/>
                                <field name="retention1_amount" />
                                <field name="retention_term_1"/>
                                <field name="retention2"/>
                                <field name="retention2_amount" />
                                <field name="retention_term_2"/>
                                <field name="tax_id" widget="many2many_tags"/>
                                <field name="payment_term" />
                                <field name="vo_payment_type"/>
                            </group>   
                        </group>
                        <notebook>    
                            <page name="penalty" string="Penalty">
                                <group name='group_1_sub'>
                                    <group name='group_1_1_sub'>
                                        <field name="responsible" readonly="1" force_save="1" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                                        <field name="reason" readonly="1" force_save="1" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                                    </group>
                                    <group name='group_1_2_sub'>
                                        <field name="cancel_date" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                                        <field name="penalty_doc" attrs="{'invisible': [('state', '!=', 'cancel')]}"/>
                                        <field name="penalty_doc_exist" invisible="1"/>
                                        <field name="hide_amount_client" invisible="1"/>
                                    </group>
                                </group>
                                <br/>
                                <div width="100%">
                                    <div>
                                        <h3>
                                            <b>Penalty Details</b>
                                        </h3>
                                        <hr/>
                                    </div>
                                </div>
                                <br/>
                                <div>
                                    <field name="diff_penalty" />
                                    <label for="diff_penalty"/>
                                </div>
                                <group>
                                    <group>                                            
                                        <div width="100%" attrs="{'invisible': [('diff_penalty', '=', False)]}">
                                            <div>
                                                <h3>
                                                    <b>Contractor</b>
                                                </h3>
                                                <hr/>
                                            </div>
                                        </div>
                                        <field name="method" />
                                        <label for="amount"/>
                                        <div name="amount_div" class="o_row">
                                            <field name="amount" />
                                            <label for="amount" string="%" attrs="{'invisible': [('method', '=', 'fix')]}"/>
                                        </div>                                            
                                    </group>
                                    <group name="pd_right" attrs="{'invisible': [('diff_penalty', '=', False)]}">                                            
                                        <div width="100%">
                                            <div>
                                                <h3>
                                                    <b>Client</b>
                                                </h3>
                                                <hr/>
                                            </div>
                                        </div>
                                        <field name="method_client" />
                                        <label for="amount_client"/>
                                        <div name="amount_div" class="o_row">
                                            <field name="amount_client" />
                                            <label for="amount_client" string="%" attrs="{'invisible': [('method_client', '=', 'fix')]}"/>
                                        </div>                                            
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>    
            </field>
        </record>

    </data>
</odoo>